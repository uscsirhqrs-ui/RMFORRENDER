(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function o(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(c){if(c.ep)return;c.ep=!0;const f=o(c);fetch(c.href,f)}})();function uf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uu={exports:{}},zi={};var Lg;function i1(){if(Lg)return zi;Lg=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(l,c,f){var m=null;if(f!==void 0&&(m=""+f),c.key!==void 0&&(m=""+c.key),"key"in c){f={};for(var g in c)g!=="key"&&(f[g]=c[g])}else f=c;return c=f.ref,{$$typeof:n,type:l,key:m,ref:c!==void 0?c:null,props:f}}return zi.Fragment=r,zi.jsx=o,zi.jsxs=o,zi}var Ug;function l1(){return Ug||(Ug=1,uu.exports=i1()),uu.exports}var a=l1(),fu={exports:{}},We={};var zg;function o1(){if(zg)return We;zg=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),S=Symbol.iterator;function R(w){return w===null||typeof w!="object"?null:(w=S&&w[S]||w["@@iterator"],typeof w=="function"?w:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,k={};function T(w,A,_){this.props=w,this.context=A,this.refs=k,this.updater=_||C}T.prototype.isReactComponent={},T.prototype.setState=function(w,A){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,A,"setState")},T.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function O(){}O.prototype=T.prototype;function W(w,A,_){this.props=w,this.context=A,this.refs=k,this.updater=_||C}var U=W.prototype=new O;U.constructor=W,D(U,T.prototype),U.isPureReactComponent=!0;var ee=Array.isArray;function K(){}var $={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function E(w,A,_){var F=_.ref;return{$$typeof:n,type:w,key:A,ref:F!==void 0?F:null,props:_}}function G(w,A){return E(w.type,A,w.props)}function V(w){return typeof w=="object"&&w!==null&&w.$$typeof===n}function le(w){var A={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(_){return A[_]})}var oe=/\/+/g;function ve(w,A){return typeof w=="object"&&w!==null&&w.key!=null?le(""+w.key):A.toString(36)}function Re(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(K,K):(w.status="pending",w.then(function(A){w.status==="pending"&&(w.status="fulfilled",w.value=A)},function(A){w.status==="pending"&&(w.status="rejected",w.reason=A)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function H(w,A,_,F,de){var xe=typeof w;(xe==="undefined"||xe==="boolean")&&(w=null);var L=!1;if(w===null)L=!0;else switch(xe){case"bigint":case"string":case"number":L=!0;break;case"object":switch(w.$$typeof){case n:case r:L=!0;break;case y:return L=w._init,H(L(w._payload),A,_,F,de)}}if(L)return de=de(w),L=F===""?"."+ve(w,0):F,ee(de)?(_="",L!=null&&(_=L.replace(oe,"$&/")+"/"),H(de,A,_,"",function(ue){return ue})):de!=null&&(V(de)&&(de=G(de,_+(de.key==null||w&&w.key===de.key?"":(""+de.key).replace(oe,"$&/")+"/")+L)),A.push(de)),1;L=0;var B=F===""?".":F+":";if(ee(w))for(var Q=0;Q<w.length;Q++)F=w[Q],xe=B+ve(F,Q),L+=H(F,A,_,xe,de);else if(Q=R(w),typeof Q=="function")for(w=Q.call(w),Q=0;!(F=w.next()).done;)F=F.value,xe=B+ve(F,Q++),L+=H(F,A,_,xe,de);else if(xe==="object"){if(typeof w.then=="function")return H(Re(w),A,_,F,de);throw A=String(w),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return L}function I(w,A,_){if(w==null)return w;var F=[],de=0;return H(w,F,"","",function(xe){return A.call(_,xe,de++)}),F}function X(w){if(w._status===-1){var A=w._result;A=A(),A.then(function(_){(w._status===0||w._status===-1)&&(w._status=1,w._result=_)},function(_){(w._status===0||w._status===-1)&&(w._status=2,w._result=_)}),w._status===-1&&(w._status=0,w._result=A)}if(w._status===1)return w._result.default;throw w._result}var z=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},M={map:I,forEach:function(w,A,_){I(w,function(){A.apply(this,arguments)},_)},count:function(w){var A=0;return I(w,function(){A++}),A},toArray:function(w){return I(w,function(A){return A})||[]},only:function(w){if(!V(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return We.Activity=v,We.Children=M,We.Component=T,We.Fragment=o,We.Profiler=c,We.PureComponent=W,We.StrictMode=l,We.Suspense=b,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,We.__COMPILER_RUNTIME={__proto__:null,c:function(w){return $.H.useMemoCache(w)}},We.cache=function(w){return function(){return w.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(w,A,_){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var F=D({},w.props),de=w.key;if(A!=null)for(xe in A.key!==void 0&&(de=""+A.key),A)!N.call(A,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&A.ref===void 0||(F[xe]=A[xe]);var xe=arguments.length-2;if(xe===1)F.children=_;else if(1<xe){for(var L=Array(xe),B=0;B<xe;B++)L[B]=arguments[B+2];F.children=L}return E(w.type,de,F)},We.createContext=function(w){return w={$$typeof:m,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:f,_context:w},w},We.createElement=function(w,A,_){var F,de={},xe=null;if(A!=null)for(F in A.key!==void 0&&(xe=""+A.key),A)N.call(A,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(de[F]=A[F]);var L=arguments.length-2;if(L===1)de.children=_;else if(1<L){for(var B=Array(L),Q=0;Q<L;Q++)B[Q]=arguments[Q+2];de.children=B}if(w&&w.defaultProps)for(F in L=w.defaultProps,L)de[F]===void 0&&(de[F]=L[F]);return E(w,xe,de)},We.createRef=function(){return{current:null}},We.forwardRef=function(w){return{$$typeof:g,render:w}},We.isValidElement=V,We.lazy=function(w){return{$$typeof:y,_payload:{_status:-1,_result:w},_init:X}},We.memo=function(w,A){return{$$typeof:x,type:w,compare:A===void 0?null:A}},We.startTransition=function(w){var A=$.T,_={};$.T=_;try{var F=w(),de=$.S;de!==null&&de(_,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(K,z)}catch(xe){z(xe)}finally{A!==null&&_.types!==null&&(A.types=_.types),$.T=A}},We.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},We.use=function(w){return $.H.use(w)},We.useActionState=function(w,A,_){return $.H.useActionState(w,A,_)},We.useCallback=function(w,A){return $.H.useCallback(w,A)},We.useContext=function(w){return $.H.useContext(w)},We.useDebugValue=function(){},We.useDeferredValue=function(w,A){return $.H.useDeferredValue(w,A)},We.useEffect=function(w,A){return $.H.useEffect(w,A)},We.useEffectEvent=function(w){return $.H.useEffectEvent(w)},We.useId=function(){return $.H.useId()},We.useImperativeHandle=function(w,A,_){return $.H.useImperativeHandle(w,A,_)},We.useInsertionEffect=function(w,A){return $.H.useInsertionEffect(w,A)},We.useLayoutEffect=function(w,A){return $.H.useLayoutEffect(w,A)},We.useMemo=function(w,A){return $.H.useMemo(w,A)},We.useOptimistic=function(w,A){return $.H.useOptimistic(w,A)},We.useReducer=function(w,A,_){return $.H.useReducer(w,A,_)},We.useRef=function(w){return $.H.useRef(w)},We.useState=function(w){return $.H.useState(w)},We.useSyncExternalStore=function(w,A,_){return $.H.useSyncExternalStore(w,A,_)},We.useTransition=function(){return $.H.useTransition()},We.version="19.2.0",We}var Fg;function ff(){return Fg||(Fg=1,fu.exports=o1()),fu.exports}var h=ff();const Hn=uf(h);var mu={exports:{}},Fi={},hu={exports:{}},gu={};var Bg;function c1(){return Bg||(Bg=1,(function(n){function r(H,I){var X=H.length;H.push(I);e:for(;0<X;){var z=X-1>>>1,M=H[z];if(0<c(M,I))H[z]=I,H[X]=M,X=z;else break e}}function o(H){return H.length===0?null:H[0]}function l(H){if(H.length===0)return null;var I=H[0],X=H.pop();if(X!==I){H[0]=X;e:for(var z=0,M=H.length,w=M>>>1;z<w;){var A=2*(z+1)-1,_=H[A],F=A+1,de=H[F];if(0>c(_,X))F<M&&0>c(de,_)?(H[z]=de,H[F]=X,z=F):(H[z]=_,H[A]=X,z=A);else if(F<M&&0>c(de,X))H[z]=de,H[F]=X,z=F;else break e}}return I}function c(H,I){var X=H.sortIndex-I.sortIndex;return X!==0?X:H.id-I.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var m=Date,g=m.now();n.unstable_now=function(){return m.now()-g}}var b=[],x=[],y=1,v=null,S=3,R=!1,C=!1,D=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function U(H){for(var I=o(x);I!==null;){if(I.callback===null)l(x);else if(I.startTime<=H)l(x),I.sortIndex=I.expirationTime,r(b,I);else break;I=o(x)}}function ee(H){if(D=!1,U(H),!C)if(o(b)!==null)C=!0,K||(K=!0,le());else{var I=o(x);I!==null&&Re(ee,I.startTime-H)}}var K=!1,$=-1,N=5,E=-1;function G(){return k?!0:!(n.unstable_now()-E<N)}function V(){if(k=!1,K){var H=n.unstable_now();E=H;var I=!0;try{e:{C=!1,D&&(D=!1,O($),$=-1),R=!0;var X=S;try{t:{for(U(H),v=o(b);v!==null&&!(v.expirationTime>H&&G());){var z=v.callback;if(typeof z=="function"){v.callback=null,S=v.priorityLevel;var M=z(v.expirationTime<=H);if(H=n.unstable_now(),typeof M=="function"){v.callback=M,U(H),I=!0;break t}v===o(b)&&l(b),U(H)}else l(b);v=o(b)}if(v!==null)I=!0;else{var w=o(x);w!==null&&Re(ee,w.startTime-H),I=!1}}break e}finally{v=null,S=X,R=!1}I=void 0}}finally{I?le():K=!1}}}var le;if(typeof W=="function")le=function(){W(V)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ve=oe.port2;oe.port1.onmessage=V,le=function(){ve.postMessage(null)}}else le=function(){T(V,0)};function Re(H,I){$=T(function(){H(n.unstable_now())},I)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(H){switch(S){case 1:case 2:case 3:var I=3;break;default:I=S}var X=S;S=I;try{return H()}finally{S=X}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(H,I){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=S;S=H;try{return I()}finally{S=X}},n.unstable_scheduleCallback=function(H,I,X){var z=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?z+X:z):X=z,H){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=X+M,H={id:y++,callback:I,priorityLevel:H,startTime:X,expirationTime:M,sortIndex:-1},X>z?(H.sortIndex=X,r(x,H),o(b)===null&&H===o(x)&&(D?(O($),$=-1):D=!0,Re(ee,X-z))):(H.sortIndex=M,r(b,H),C||R||(C=!0,K||(K=!0,le()))),H},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(H){var I=S;return function(){var X=S;S=I;try{return H.apply(this,arguments)}finally{S=X}}}})(gu)),gu}var qg;function d1(){return qg||(qg=1,hu.exports=c1()),hu.exports}var xu={exports:{}},aa={};var Hg;function u1(){if(Hg)return aa;Hg=1;var n=ff();function r(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var l={d:{f:o,r:function(){throw Error(r(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(b,x,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:b,containerInfo:x,implementation:y}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,aa.createPortal=function(b,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(r(299));return f(b,x,null,y)},aa.flushSync=function(b){var x=m.T,y=l.p;try{if(m.T=null,l.p=2,b)return b()}finally{m.T=x,l.p=y,l.d.f()}},aa.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,l.d.C(b,x))},aa.prefetchDNS=function(b){typeof b=="string"&&l.d.D(b)},aa.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var y=x.as,v=g(y,x.crossOrigin),S=typeof x.integrity=="string"?x.integrity:void 0,R=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?l.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:R}):y==="script"&&l.d.X(b,{crossOrigin:v,integrity:S,fetchPriority:R,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},aa.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=g(x.as,x.crossOrigin);l.d.M(b,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&l.d.M(b)},aa.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,v=g(y,x.crossOrigin);l.d.L(b,y,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},aa.preloadModule=function(b,x){if(typeof b=="string")if(x){var y=g(x.as,x.crossOrigin);l.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else l.d.m(b)},aa.requestFormReset=function(b){l.d.r(b)},aa.unstable_batchedUpdates=function(b,x){return b(x)},aa.useFormState=function(b,x,y){return m.H.useFormState(b,x,y)},aa.useFormStatus=function(){return m.H.useHostTransitionStatus()},aa.version="19.2.0",aa}var $g;function lp(){if($g)return xu.exports;$g=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),xu.exports=u1(),xu.exports}var Pg;function f1(){if(Pg)return Fi;Pg=1;var n=d1(),r=ff(),o=lp();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(f(e)!==e)throw Error(l(188))}function x(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(l(188));return t!==e?null:e}for(var s=e,i=t;;){var d=s.return;if(d===null)break;var u=d.alternate;if(u===null){if(i=d.return,i!==null){s=i;continue}break}if(d.child===u.child){for(u=d.child;u;){if(u===s)return b(d),e;if(u===i)return b(d),t;u=u.sibling}throw Error(l(188))}if(s.return!==i.return)s=d,i=u;else{for(var p=!1,j=d.child;j;){if(j===s){p=!0,s=d,i=u;break}if(j===i){p=!0,i=d,s=u;break}j=j.sibling}if(!p){for(j=u.child;j;){if(j===s){p=!0,s=u,i=d;break}if(j===i){p=!0,i=u,s=d;break}j=j.sibling}if(!p)throw Error(l(189))}}if(s.alternate!==i)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),W=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function le(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case ee:return"Suspense";case K:return"SuspenseList";case E:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case W:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}var Re=Array.isArray,H=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},z=[],M=-1;function w(e){return{current:e}}function A(e){0>M||(e.current=z[M],z[M]=null,M--)}function _(e,t){M++,z[M]=e.current,e.current=t}var F=w(null),de=w(null),xe=w(null),L=w(null);function B(e,t){switch(_(xe,t),_(de,e),_(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ng(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=ng(t),e=rg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(F),_(F,e)}function Q(){A(F),A(de),A(xe)}function ue(e){e.memoizedState!==null&&_(L,e);var t=F.current,s=rg(t,e.type);t!==s&&(_(de,e),_(F,s))}function we(e){de.current===e&&(A(F),A(de)),L.current===e&&(A(L),Oi._currentValue=X)}var Oe,he;function Me(e){if(Oe===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Oe=t&&t[1]||"",he=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+e+he}var Ue=!1;function De(e,t){if(!e||Ue)return"";Ue=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(me){var ce=me}Reflect.construct(e,[],ye)}else{try{ye.call()}catch(me){ce=me}e.call(ye.prototype)}}else{try{throw Error()}catch(me){ce=me}(ye=e())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(me){if(me&&ce&&typeof me.stack=="string")return[me.stack,ce.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=i.DetermineComponentFrameRoot(),p=u[0],j=u[1];if(p&&j){var q=p.split(`
`),ie=j.split(`
`);for(d=i=0;i<q.length&&!q[i].includes("DetermineComponentFrameRoot");)i++;for(;d<ie.length&&!ie[d].includes("DetermineComponentFrameRoot");)d++;if(i===q.length||d===ie.length)for(i=q.length-1,d=ie.length-1;1<=i&&0<=d&&q[i]!==ie[d];)d--;for(;1<=i&&0<=d;i--,d--)if(q[i]!==ie[d]){if(i!==1||d!==1)do if(i--,d--,0>d||q[i]!==ie[d]){var ge=`
`+q[i].replace(" at new "," at ");return e.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",e.displayName)),ge}while(1<=i&&0<=d);break}}}finally{Ue=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Me(s):""}function P(e,t){switch(e.tag){case 26:case 27:case 5:return Me(e.type);case 16:return Me("Lazy");case 13:return e.child!==t&&t!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return De(e.type,!1);case 11:return De(e.type.render,!1);case 1:return De(e.type,!0);case 31:return Me("Activity");default:return""}}function je(e){try{var t="",s=null;do t+=P(e,s),s=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ce=Object.prototype.hasOwnProperty,pe=n.unstable_scheduleCallback,$e=n.unstable_cancelCallback,Ve=n.unstable_shouldYield,at=n.unstable_requestPaint,ae=n.unstable_now,ne=n.unstable_getCurrentPriorityLevel,ke=n.unstable_ImmediatePriority,Ee=n.unstable_UserBlockingPriority,Z=n.unstable_NormalPriority,Ne=n.unstable_LowPriority,Se=n.unstable_IdlePriority,se=n.log,Ae=n.unstable_setDisableYieldValue,ze=null,Ie=null;function Pe(e){if(typeof se=="function"&&Ae(e),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(ze,e)}catch{}}var vt=Math.clz32?Math.clz32:Ko,_t=Math.log,Ka=Math.LN2;function Ko(e){return e>>>=0,e===0?32:31-(_t(e)/Ka|0)|0}var vn=256,Vn=262144,Yn=4194304;function J(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Xe(e,t,s){var i=e.pendingLanes;if(i===0)return 0;var d=0,u=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var j=i&134217727;return j!==0?(i=j&~u,i!==0?d=J(i):(p&=j,p!==0?d=J(p):s||(s=j&~e,s!==0&&(d=J(s))))):(j=i&~u,j!==0?d=J(j):p!==0?d=J(p):s||(s=i&~e,s!==0&&(d=J(s)))),d===0?0:t!==0&&t!==d&&(t&u)===0&&(u=d&-d,s=t&-t,u>=s||u===32&&(s&4194048)!==0)?t:d}function st(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Dt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var e=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),e}function _a(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function oa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jo(e,t,s,i,d,u){var p=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var j=e.entanglements,q=e.expirationTimes,ie=e.hiddenUpdates;for(s=p&~s;0<s;){var ge=31-vt(s),ye=1<<ge;j[ge]=0,q[ge]=-1;var ce=ie[ge];if(ce!==null)for(ie[ge]=null,ge=0;ge<ce.length;ge++){var me=ce[ge];me!==null&&(me.lane&=-536870913)}s&=~ye}i!==0&&qf(e,i,0),u!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=u&~(p&~t))}function qf(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-vt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|s&261930}function Hf(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-vt(s),d=1<<i;d&t|e[i]&t&&(e[i]|=t),s&=~d}}function $f(e,t){var s=t&-t;return s=(s&42)!==0?1:ec(s),(s&(e.suspendedLanes|t))!==0?0:s}function ec(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pf(){var e=I.p;return e!==0?e:(e=window.event,e===void 0?32:Cg(e.type))}function Gf(e,t){var s=I.p;try{return I.p=e,t()}finally{I.p=s}}var $s=Math.random().toString(36).slice(2),Qt="__reactFiber$"+$s,ca="__reactProps$"+$s,Xn="__reactContainer$"+$s,ac="__reactEvents$"+$s,Qb="__reactListeners$"+$s,Wb="__reactHandles$"+$s,If="__reactResources$"+$s,Xr="__reactMarker$"+$s;function sc(e){delete e[Qt],delete e[ca],delete e[ac],delete e[Qb],delete e[Wb]}function Qn(e){var t=e[Qt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Xn]||s[Qt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=fg(e);e!==null;){if(s=e[Qt])return s;e=fg(e)}return t}e=s,s=e.parentNode}return null}function Wn(e){if(e=e[Qt]||e[Xn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Qr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Zn(e){var t=e[If];return t||(t=e[If]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Gt(e){e[Xr]=!0}var Vf=new Set,Yf={};function wn(e,t){Kn(e,t),Kn(e+"Capture",t)}function Kn(e,t){for(Yf[e]=t,e=0;e<t.length;e++)Vf.add(t[e])}var Zb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xf={},Qf={};function Kb(e){return Ce.call(Qf,e)?!0:Ce.call(Xf,e)?!1:Zb.test(e)?Qf[e]=!0:(Xf[e]=!0,!1)}function cl(e,t,s){if(Kb(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function dl(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function fs(e,t,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+i)}}function Ra(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jb(e,t,s){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(p){s=""+p,u.call(this,p)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nc(e){if(!e._valueTracker){var t=Wf(e)?"checked":"value";e._valueTracker=Jb(e,t,""+e[t])}}function Zf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=Wf(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function ul(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ey=/[\n"\\]/g;function Ta(e){return e.replace(ey,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function rc(e,t,s,i,d,u,p,j){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ra(t)):e.value!==""+Ra(t)&&(e.value=""+Ra(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?ic(e,p,Ra(t)):s!=null?ic(e,p,Ra(s)):i!=null&&e.removeAttribute("value"),d==null&&u!=null&&(e.defaultChecked=!!u),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+Ra(j):e.removeAttribute("name")}function Kf(e,t,s,i,d,u,p,j){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||s!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){nc(e);return}s=s!=null?""+Ra(s):"",t=t!=null?""+Ra(t):s,j||t===e.value||(e.value=t),e.defaultValue=t}i=i??d,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=j?e.checked:!!i,e.defaultChecked=!!i,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),nc(e)}function ic(e,t,s){t==="number"&&ul(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Jn(e,t,s,i){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&i&&(e[s].defaultSelected=!0)}else{for(s=""+Ra(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,i&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Jf(e,t,s){if(t!=null&&(t=""+Ra(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Ra(s):""}function em(e,t,s,i){if(t==null){if(i!=null){if(s!=null)throw Error(l(92));if(Re(i)){if(1<i.length)throw Error(l(93));i=i[0]}s=i}s==null&&(s=""),t=s}s=Ra(t),e.defaultValue=s,i=e.textContent,i===s&&i!==""&&i!==null&&(e.value=i),nc(e)}function er(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ty=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tm(e,t,s){var i=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,s):typeof s!="number"||s===0||ty.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function am(e,t,s){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,s!=null){for(var i in s)!s.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var d in t)i=t[d],t.hasOwnProperty(d)&&s[d]!==i&&tm(e,d,i)}else for(var u in t)t.hasOwnProperty(u)&&tm(e,u,t[u])}function lc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ay=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fl(e){return sy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ms(){}var oc=null;function cc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tr=null,ar=null;function sm(e){var t=Wn(e);if(t&&(e=t.stateNode)){var s=e[ca]||null;e:switch(e=t.stateNode,t.type){case"input":if(rc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ta(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var d=i[ca]||null;if(!d)throw Error(l(90));rc(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<s.length;t++)i=s[t],i.form===e.form&&Zf(i)}break e;case"textarea":Jf(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Jn(e,!!s.multiple,t,!1)}}}var dc=!1;function nm(e,t,s){if(dc)return e(t,s);dc=!0;try{var i=e(t);return i}finally{if(dc=!1,(tr!==null||ar!==null)&&(Jl(),tr&&(t=tr,e=ar,ar=tr=null,sm(t),e)))for(t=0;t<e.length;t++)sm(e[t])}}function Wr(e,t){var s=e.stateNode;if(s===null)return null;var i=s[ca]||null;if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(l(231,t,typeof s));return s}var hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=!1;if(hs)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){uc=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{uc=!1}var Ps=null,fc=null,ml=null;function rm(){if(ml)return ml;var e,t=fc,s=t.length,i,d="value"in Ps?Ps.value:Ps.textContent,u=d.length;for(e=0;e<s&&t[e]===d[e];e++);var p=s-e;for(i=1;i<=p&&t[s-i]===d[u-i];i++);return ml=d.slice(e,1<i?1-i:void 0)}function hl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gl(){return!0}function im(){return!1}function da(e){function t(s,i,d,u,p){this._reactName=s,this._targetInst=d,this.type=i,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(s=e[j],this[j]=s?s(u):u[j]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?gl:im,this.isPropagationStopped=im,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),t}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=da(Nn),Kr=v({},Nn,{view:0,detail:0}),ny=da(Kr),mc,hc,Jr,pl=v({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(mc=e.screenX-Jr.screenX,hc=e.screenY-Jr.screenY):hc=mc=0,Jr=e),mc)},movementY:function(e){return"movementY"in e?e.movementY:hc}}),lm=da(pl),ry=v({},pl,{dataTransfer:0}),iy=da(ry),ly=v({},Kr,{relatedTarget:0}),gc=da(ly),oy=v({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),cy=da(oy),dy=v({},Nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uy=da(dy),fy=v({},Nn,{data:0}),om=da(fy),my={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gy[e])?!!t[e]:!1}function xc(){return xy}var py=v({},Kr,{key:function(e){if(e.key){var t=my[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(e){return e.type==="keypress"?hl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),by=da(py),yy=v({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=da(yy),vy=v({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),wy=da(vy),Ny=v({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),jy=da(Ny),Sy=v({},pl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ky=da(Sy),Ey=v({},Nn,{newState:0,oldState:0}),Ay=da(Ey),Cy=[9,13,27,32],pc=hs&&"CompositionEvent"in window,ei=null;hs&&"documentMode"in document&&(ei=document.documentMode);var _y=hs&&"TextEvent"in window&&!ei,dm=hs&&(!pc||ei&&8<ei&&11>=ei),um=" ",fm=!1;function mm(e,t){switch(e){case"keyup":return Cy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sr=!1;function Ry(e,t){switch(e){case"compositionend":return hm(t);case"keypress":return t.which!==32?null:(fm=!0,um);case"textInput":return e=t.data,e===um&&fm?null:e;default:return null}}function Ty(e,t){if(sr)return e==="compositionend"||!pc&&mm(e,t)?(e=rm(),ml=fc=Ps=null,sr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dm&&t.locale!=="ko"?null:t.data;default:return null}}var My={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!My[e.type]:t==="textarea"}function xm(e,t,s,i){tr?ar?ar.push(i):ar=[i]:tr=i,t=io(t,"onChange"),0<t.length&&(s=new xl("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var ti=null,ai=null;function Oy(e){K0(e,0)}function bl(e){var t=Qr(e);if(Zf(t))return e}function pm(e,t){if(e==="change")return t}var bm=!1;if(hs){var bc;if(hs){var yc="oninput"in document;if(!yc){var ym=document.createElement("div");ym.setAttribute("oninput","return;"),yc=typeof ym.oninput=="function"}bc=yc}else bc=!1;bm=bc&&(!document.documentMode||9<document.documentMode)}function vm(){ti&&(ti.detachEvent("onpropertychange",wm),ai=ti=null)}function wm(e){if(e.propertyName==="value"&&bl(ai)){var t=[];xm(t,ai,e,cc(e)),nm(Oy,t)}}function Dy(e,t,s){e==="focusin"?(vm(),ti=t,ai=s,ti.attachEvent("onpropertychange",wm)):e==="focusout"&&vm()}function Ly(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bl(ai)}function Uy(e,t){if(e==="click")return bl(t)}function zy(e,t){if(e==="input"||e==="change")return bl(t)}function Fy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ya=typeof Object.is=="function"?Object.is:Fy;function si(e,t){if(ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var d=s[i];if(!Ce.call(t,d)||!ya(e[d],t[d]))return!1}return!0}function Nm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jm(e,t){var s=Nm(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Nm(s)}}function Sm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function km(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ul(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ul(e.document)}return t}function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var By=hs&&"documentMode"in document&&11>=document.documentMode,nr=null,wc=null,ni=null,Nc=!1;function Em(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Nc||nr==null||nr!==ul(i)||(i=nr,"selectionStart"in i&&vc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ni&&si(ni,i)||(ni=i,i=io(wc,"onSelect"),0<i.length&&(t=new xl("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=nr)))}function jn(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var rr={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},jc={},Am={};hs&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function Sn(e){if(jc[e])return jc[e];if(!rr[e])return e;var t=rr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Am)return jc[e]=t[s];return e}var Cm=Sn("animationend"),_m=Sn("animationiteration"),Rm=Sn("animationstart"),qy=Sn("transitionrun"),Hy=Sn("transitionstart"),$y=Sn("transitioncancel"),Tm=Sn("transitionend"),Mm=new Map,Sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sc.push("scrollEnd");function Pa(e,t){Mm.set(e,t),wn(t,[e])}var yl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ma=[],ir=0,kc=0;function vl(){for(var e=ir,t=kc=ir=0;t<e;){var s=Ma[t];Ma[t++]=null;var i=Ma[t];Ma[t++]=null;var d=Ma[t];Ma[t++]=null;var u=Ma[t];if(Ma[t++]=null,i!==null&&d!==null){var p=i.pending;p===null?d.next=d:(d.next=p.next,p.next=d),i.pending=d}u!==0&&Om(s,d,u)}}function wl(e,t,s,i){Ma[ir++]=e,Ma[ir++]=t,Ma[ir++]=s,Ma[ir++]=i,kc|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Ec(e,t,s,i){return wl(e,t,s,i),Nl(e)}function kn(e,t){return wl(e,null,null,t),Nl(e)}function Om(e,t,s){e.lanes|=s;var i=e.alternate;i!==null&&(i.lanes|=s);for(var d=!1,u=e.return;u!==null;)u.childLanes|=s,i=u.alternate,i!==null&&(i.childLanes|=s),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(d=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,d&&t!==null&&(d=31-vt(s),e=u.hiddenUpdates,i=e[d],i===null?e[d]=[t]:i.push(t),t.lane=s|536870912),u):null}function Nl(e){if(50<Ei)throw Ei=0,Ld=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var lr={};function Py(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function va(e,t,s,i){return new Py(e,t,s,i)}function Ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gs(e,t){var s=e.alternate;return s===null?(s=va(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Dm(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jl(e,t,s,i,d,u){var p=0;if(i=e,typeof e=="function")Ac(e)&&(p=1);else if(typeof e=="string")p=Xv(e,s,F.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case E:return e=va(31,s,t,d),e.elementType=E,e.lanes=u,e;case D:return En(s.children,d,u,t);case k:p=8,d|=24;break;case T:return e=va(12,s,t,d|2),e.elementType=T,e.lanes=u,e;case ee:return e=va(13,s,t,d),e.elementType=ee,e.lanes=u,e;case K:return e=va(19,s,t,d),e.elementType=K,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W:p=10;break e;case O:p=9;break e;case U:p=11;break e;case $:p=14;break e;case N:p=16,i=null;break e}p=29,s=Error(l(130,e===null?"null":typeof e,"")),i=null}return t=va(p,s,t,d),t.elementType=e,t.type=i,t.lanes=u,t}function En(e,t,s,i){return e=va(7,e,i,t),e.lanes=s,e}function Cc(e,t,s){return e=va(6,e,null,t),e.lanes=s,e}function Lm(e){var t=va(18,null,null,0);return t.stateNode=e,t}function _c(e,t,s){return t=va(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Um=new WeakMap;function Oa(e,t){if(typeof e=="object"&&e!==null){var s=Um.get(e);return s!==void 0?s:(t={value:e,source:t,stack:je(t)},Um.set(e,t),t)}return{value:e,source:t,stack:je(t)}}var or=[],cr=0,Sl=null,ri=0,Da=[],La=0,Gs=null,Ja=1,es="";function xs(e,t){or[cr++]=ri,or[cr++]=Sl,Sl=e,ri=t}function zm(e,t,s){Da[La++]=Ja,Da[La++]=es,Da[La++]=Gs,Gs=e;var i=Ja;e=es;var d=32-vt(i)-1;i&=~(1<<d),s+=1;var u=32-vt(t)+d;if(30<u){var p=d-d%5;u=(i&(1<<p)-1).toString(32),i>>=p,d-=p,Ja=1<<32-vt(t)+d|s<<d|i,es=u+e}else Ja=1<<u|s<<d|i,es=e}function Rc(e){e.return!==null&&(xs(e,1),zm(e,1,0))}function Tc(e){for(;e===Sl;)Sl=or[--cr],or[cr]=null,ri=or[--cr],or[cr]=null;for(;e===Gs;)Gs=Da[--La],Da[La]=null,es=Da[--La],Da[La]=null,Ja=Da[--La],Da[La]=null}function Fm(e,t){Da[La++]=Ja,Da[La++]=es,Da[La++]=Gs,Ja=t.id,es=t.overflow,Gs=e}var Wt=null,jt=null,ot=!1,Is=null,Ua=!1,Mc=Error(l(519));function Vs(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ii(Oa(t,e)),Mc}function Bm(e){var t=e.stateNode,s=e.type,i=e.memoizedProps;switch(t[Qt]=e,t[ca]=i,s){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(s=0;s<Ci.length;s++)rt(Ci[s],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),Kf(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),em(t,i.value,i.defaultValue,i.children)}s=i.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||i.suppressHydrationWarning===!0||ag(t.textContent,s)?(i.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),i.onScroll!=null&&rt("scroll",t),i.onScrollEnd!=null&&rt("scrollend",t),i.onClick!=null&&(t.onclick=ms),t=!0):t=!1,t||Vs(e,!0)}function qm(e){for(Wt=e.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Ua=!1;return;case 27:case 3:Ua=!0;return;default:Wt=Wt.return}}function dr(e){if(e!==Wt)return!1;if(!ot)return qm(e),ot=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Wd(e.type,e.memoizedProps)),s=!s),s&&jt&&Vs(e),qm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));jt=ug(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));jt=ug(e)}else t===27?(t=jt,ln(e.type)?(e=tu,tu=null,jt=e):jt=t):jt=Wt?Fa(e.stateNode.nextSibling):null;return!0}function An(){jt=Wt=null,ot=!1}function Oc(){var e=Is;return e!==null&&(ha===null?ha=e:ha.push.apply(ha,e),Is=null),e}function ii(e){Is===null?Is=[e]:Is.push(e)}var Dc=w(null),Cn=null,ps=null;function Ys(e,t,s){_(Dc,t._currentValue),t._currentValue=s}function bs(e){e._currentValue=Dc.current,A(Dc)}function Lc(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Uc(e,t,s,i){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var u=d.dependencies;if(u!==null){var p=d.child;u=u.firstContext;e:for(;u!==null;){var j=u;u=d;for(var q=0;q<t.length;q++)if(j.context===t[q]){u.lanes|=s,j=u.alternate,j!==null&&(j.lanes|=s),Lc(u.return,s,e),i||(p=null);break e}u=j.next}}else if(d.tag===18){if(p=d.return,p===null)throw Error(l(341));p.lanes|=s,u=p.alternate,u!==null&&(u.lanes|=s),Lc(p,s,e),p=null}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===e){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}}function ur(e,t,s,i){e=null;for(var d=t,u=!1;d!==null;){if(!u){if((d.flags&524288)!==0)u=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var p=d.alternate;if(p===null)throw Error(l(387));if(p=p.memoizedProps,p!==null){var j=d.type;ya(d.pendingProps.value,p.value)||(e!==null?e.push(j):e=[j])}}else if(d===L.current){if(p=d.alternate,p===null)throw Error(l(387));p.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Oi):e=[Oi])}d=d.return}e!==null&&Uc(t,e,s,i),t.flags|=262144}function kl(e){for(e=e.firstContext;e!==null;){if(!ya(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _n(e){Cn=e,ps=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zt(e){return Hm(Cn,e)}function El(e,t){return Cn===null&&_n(e),Hm(e,t)}function Hm(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},ps===null){if(e===null)throw Error(l(308));ps=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ps=ps.next=t;return s}var Gy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Iy=n.unstable_scheduleCallback,Vy=n.unstable_NormalPriority,Lt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zc(){return{controller:new Gy,data:new Map,refCount:0}}function li(e){e.refCount--,e.refCount===0&&Iy(Vy,function(){e.controller.abort()})}var oi=null,Fc=0,fr=0,mr=null;function Yy(e,t){if(oi===null){var s=oi=[];Fc=0,fr=Hd(),mr={status:"pending",value:void 0,then:function(i){s.push(i)}}}return Fc++,t.then($m,$m),t}function $m(){if(--Fc===0&&oi!==null){mr!==null&&(mr.status="fulfilled");var e=oi;oi=null,fr=0,mr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Xy(e,t){var s=[],i={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var d=0;d<s.length;d++)(0,s[d])(t)},function(d){for(i.status="rejected",i.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),i}var Pm=H.S;H.S=function(e,t){E0=ae(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Yy(e,t),Pm!==null&&Pm(e,t)};var Rn=w(null);function Bc(){var e=Rn.current;return e!==null?e:Nt.pooledCache}function Al(e,t){t===null?_(Rn,Rn.current):_(Rn,t.pool)}function Gm(){var e=Bc();return e===null?null:{parent:Lt._currentValue,pool:e}}var hr=Error(l(460)),qc=Error(l(474)),Cl=Error(l(542)),_l={then:function(){}};function Im(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Vm(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(ms,ms),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xm(e),e;default:if(typeof t.status=="string")t.then(ms,ms);else{if(e=Nt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=i}},function(i){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Xm(e),e}throw Mn=t,hr}}function Tn(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Mn=s,hr):s}}var Mn=null;function Ym(){if(Mn===null)throw Error(l(459));var e=Mn;return Mn=null,e}function Xm(e){if(e===hr||e===Cl)throw Error(l(483))}var gr=null,ci=0;function Rl(e){var t=ci;return ci+=1,gr===null&&(gr=[]),Vm(gr,e,t)}function di(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tl(e,t){throw t.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Qm(e){function t(te,Y){if(e){var re=te.deletions;re===null?(te.deletions=[Y],te.flags|=16):re.push(Y)}}function s(te,Y){if(!e)return null;for(;Y!==null;)t(te,Y),Y=Y.sibling;return null}function i(te){for(var Y=new Map;te!==null;)te.key!==null?Y.set(te.key,te):Y.set(te.index,te),te=te.sibling;return Y}function d(te,Y){return te=gs(te,Y),te.index=0,te.sibling=null,te}function u(te,Y,re){return te.index=re,e?(re=te.alternate,re!==null?(re=re.index,re<Y?(te.flags|=67108866,Y):re):(te.flags|=67108866,Y)):(te.flags|=1048576,Y)}function p(te){return e&&te.alternate===null&&(te.flags|=67108866),te}function j(te,Y,re,be){return Y===null||Y.tag!==6?(Y=Cc(re,te.mode,be),Y.return=te,Y):(Y=d(Y,re),Y.return=te,Y)}function q(te,Y,re,be){var Ge=re.type;return Ge===D?ge(te,Y,re.props.children,be,re.key):Y!==null&&(Y.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===N&&Tn(Ge)===Y.type)?(Y=d(Y,re.props),di(Y,re),Y.return=te,Y):(Y=jl(re.type,re.key,re.props,null,te.mode,be),di(Y,re),Y.return=te,Y)}function ie(te,Y,re,be){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==re.containerInfo||Y.stateNode.implementation!==re.implementation?(Y=_c(re,te.mode,be),Y.return=te,Y):(Y=d(Y,re.children||[]),Y.return=te,Y)}function ge(te,Y,re,be,Ge){return Y===null||Y.tag!==7?(Y=En(re,te.mode,be,Ge),Y.return=te,Y):(Y=d(Y,re),Y.return=te,Y)}function ye(te,Y,re){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Cc(""+Y,te.mode,re),Y.return=te,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case R:return re=jl(Y.type,Y.key,Y.props,null,te.mode,re),di(re,Y),re.return=te,re;case C:return Y=_c(Y,te.mode,re),Y.return=te,Y;case N:return Y=Tn(Y),ye(te,Y,re)}if(Re(Y)||le(Y))return Y=En(Y,te.mode,re,null),Y.return=te,Y;if(typeof Y.then=="function")return ye(te,Rl(Y),re);if(Y.$$typeof===W)return ye(te,El(te,Y),re);Tl(te,Y)}return null}function ce(te,Y,re,be){var Ge=Y!==null?Y.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ge!==null?null:j(te,Y,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case R:return re.key===Ge?q(te,Y,re,be):null;case C:return re.key===Ge?ie(te,Y,re,be):null;case N:return re=Tn(re),ce(te,Y,re,be)}if(Re(re)||le(re))return Ge!==null?null:ge(te,Y,re,be,null);if(typeof re.then=="function")return ce(te,Y,Rl(re),be);if(re.$$typeof===W)return ce(te,Y,El(te,re),be);Tl(te,re)}return null}function me(te,Y,re,be,Ge){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return te=te.get(re)||null,j(Y,te,""+be,Ge);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case R:return te=te.get(be.key===null?re:be.key)||null,q(Y,te,be,Ge);case C:return te=te.get(be.key===null?re:be.key)||null,ie(Y,te,be,Ge);case N:return be=Tn(be),me(te,Y,re,be,Ge)}if(Re(be)||le(be))return te=te.get(re)||null,ge(Y,te,be,Ge,null);if(typeof be.then=="function")return me(te,Y,re,Rl(be),Ge);if(be.$$typeof===W)return me(te,Y,re,El(Y,be),Ge);Tl(Y,be)}return null}function Fe(te,Y,re,be){for(var Ge=null,dt=null,He=Y,Je=Y=0,lt=null;He!==null&&Je<re.length;Je++){He.index>Je?(lt=He,He=null):lt=He.sibling;var ut=ce(te,He,re[Je],be);if(ut===null){He===null&&(He=lt);break}e&&He&&ut.alternate===null&&t(te,He),Y=u(ut,Y,Je),dt===null?Ge=ut:dt.sibling=ut,dt=ut,He=lt}if(Je===re.length)return s(te,He),ot&&xs(te,Je),Ge;if(He===null){for(;Je<re.length;Je++)He=ye(te,re[Je],be),He!==null&&(Y=u(He,Y,Je),dt===null?Ge=He:dt.sibling=He,dt=He);return ot&&xs(te,Je),Ge}for(He=i(He);Je<re.length;Je++)lt=me(He,te,Je,re[Je],be),lt!==null&&(e&&lt.alternate!==null&&He.delete(lt.key===null?Je:lt.key),Y=u(lt,Y,Je),dt===null?Ge=lt:dt.sibling=lt,dt=lt);return e&&He.forEach(function(fn){return t(te,fn)}),ot&&xs(te,Je),Ge}function Ye(te,Y,re,be){if(re==null)throw Error(l(151));for(var Ge=null,dt=null,He=Y,Je=Y=0,lt=null,ut=re.next();He!==null&&!ut.done;Je++,ut=re.next()){He.index>Je?(lt=He,He=null):lt=He.sibling;var fn=ce(te,He,ut.value,be);if(fn===null){He===null&&(He=lt);break}e&&He&&fn.alternate===null&&t(te,He),Y=u(fn,Y,Je),dt===null?Ge=fn:dt.sibling=fn,dt=fn,He=lt}if(ut.done)return s(te,He),ot&&xs(te,Je),Ge;if(He===null){for(;!ut.done;Je++,ut=re.next())ut=ye(te,ut.value,be),ut!==null&&(Y=u(ut,Y,Je),dt===null?Ge=ut:dt.sibling=ut,dt=ut);return ot&&xs(te,Je),Ge}for(He=i(He);!ut.done;Je++,ut=re.next())ut=me(He,te,Je,ut.value,be),ut!==null&&(e&&ut.alternate!==null&&He.delete(ut.key===null?Je:ut.key),Y=u(ut,Y,Je),dt===null?Ge=ut:dt.sibling=ut,dt=ut);return e&&He.forEach(function(r1){return t(te,r1)}),ot&&xs(te,Je),Ge}function yt(te,Y,re,be){if(typeof re=="object"&&re!==null&&re.type===D&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case R:e:{for(var Ge=re.key;Y!==null;){if(Y.key===Ge){if(Ge=re.type,Ge===D){if(Y.tag===7){s(te,Y.sibling),be=d(Y,re.props.children),be.return=te,te=be;break e}}else if(Y.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===N&&Tn(Ge)===Y.type){s(te,Y.sibling),be=d(Y,re.props),di(be,re),be.return=te,te=be;break e}s(te,Y);break}else t(te,Y);Y=Y.sibling}re.type===D?(be=En(re.props.children,te.mode,be,re.key),be.return=te,te=be):(be=jl(re.type,re.key,re.props,null,te.mode,be),di(be,re),be.return=te,te=be)}return p(te);case C:e:{for(Ge=re.key;Y!==null;){if(Y.key===Ge)if(Y.tag===4&&Y.stateNode.containerInfo===re.containerInfo&&Y.stateNode.implementation===re.implementation){s(te,Y.sibling),be=d(Y,re.children||[]),be.return=te,te=be;break e}else{s(te,Y);break}else t(te,Y);Y=Y.sibling}be=_c(re,te.mode,be),be.return=te,te=be}return p(te);case N:return re=Tn(re),yt(te,Y,re,be)}if(Re(re))return Fe(te,Y,re,be);if(le(re)){if(Ge=le(re),typeof Ge!="function")throw Error(l(150));return re=Ge.call(re),Ye(te,Y,re,be)}if(typeof re.then=="function")return yt(te,Y,Rl(re),be);if(re.$$typeof===W)return yt(te,Y,El(te,re),be);Tl(te,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Y!==null&&Y.tag===6?(s(te,Y.sibling),be=d(Y,re),be.return=te,te=be):(s(te,Y),be=Cc(re,te.mode,be),be.return=te,te=be),p(te)):s(te,Y)}return function(te,Y,re,be){try{ci=0;var Ge=yt(te,Y,re,be);return gr=null,Ge}catch(He){if(He===hr||He===Cl)throw He;var dt=va(29,He,null,te.mode);return dt.lanes=be,dt.return=te,dt}finally{}}}var On=Qm(!0),Wm=Qm(!1),Xs=!1;function Hc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ws(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(ft&2)!==0){var d=i.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),i.pending=t,t=Nl(e),Om(e,null,s),t}return wl(e,i,t,s),Nl(e)}function ui(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Hf(e,s)}}function Pc(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var d=null,u=null;if(s=s.firstBaseUpdate,s!==null){do{var p={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};u===null?d=u=p:u=u.next=p,s=s.next}while(s!==null);u===null?d=u=t:u=u.next=t}else d=u=t;s={baseState:i.baseState,firstBaseUpdate:d,lastBaseUpdate:u,shared:i.shared,callbacks:i.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Gc=!1;function fi(){if(Gc){var e=mr;if(e!==null)throw e}}function mi(e,t,s,i){Gc=!1;var d=e.updateQueue;Xs=!1;var u=d.firstBaseUpdate,p=d.lastBaseUpdate,j=d.shared.pending;if(j!==null){d.shared.pending=null;var q=j,ie=q.next;q.next=null,p===null?u=ie:p.next=ie,p=q;var ge=e.alternate;ge!==null&&(ge=ge.updateQueue,j=ge.lastBaseUpdate,j!==p&&(j===null?ge.firstBaseUpdate=ie:j.next=ie,ge.lastBaseUpdate=q))}if(u!==null){var ye=d.baseState;p=0,ge=ie=q=null,j=u;do{var ce=j.lane&-536870913,me=ce!==j.lane;if(me?(it&ce)===ce:(i&ce)===ce){ce!==0&&ce===fr&&(Gc=!0),ge!==null&&(ge=ge.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Fe=e,Ye=j;ce=t;var yt=s;switch(Ye.tag){case 1:if(Fe=Ye.payload,typeof Fe=="function"){ye=Fe.call(yt,ye,ce);break e}ye=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ye.payload,ce=typeof Fe=="function"?Fe.call(yt,ye,ce):Fe,ce==null)break e;ye=v({},ye,ce);break e;case 2:Xs=!0}}ce=j.callback,ce!==null&&(e.flags|=64,me&&(e.flags|=8192),me=d.callbacks,me===null?d.callbacks=[ce]:me.push(ce))}else me={lane:ce,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ge===null?(ie=ge=me,q=ye):ge=ge.next=me,p|=ce;if(j=j.next,j===null){if(j=d.shared.pending,j===null)break;me=j,j=me.next,me.next=null,d.lastBaseUpdate=me,d.shared.pending=null}}while(!0);ge===null&&(q=ye),d.baseState=q,d.firstBaseUpdate=ie,d.lastBaseUpdate=ge,u===null&&(d.shared.lanes=0),tn|=p,e.lanes=p,e.memoizedState=ye}}function Zm(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Km(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Zm(s[e],t)}var xr=w(null),Ml=w(0);function Jm(e,t){e=As,_(Ml,e),_(xr,t),As=e|t.baseLanes}function Ic(){_(Ml,As),_(xr,xr.current)}function Vc(){As=Ml.current,A(xr),A(Ml)}var wa=w(null),za=null;function Zs(e){var t=e.alternate;_(Mt,Mt.current&1),_(wa,e),za===null&&(t===null||xr.current!==null||t.memoizedState!==null)&&(za=e)}function Yc(e){_(Mt,Mt.current),_(wa,e),za===null&&(za=e)}function eh(e){e.tag===22?(_(Mt,Mt.current),_(wa,e),za===null&&(za=e)):Ks()}function Ks(){_(Mt,Mt.current),_(wa,wa.current)}function Na(e){A(wa),za===e&&(za=null),A(Mt)}var Mt=w(0);function Ol(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Jd(s)||eu(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ys=0,Ze=null,pt=null,Ut=null,Dl=!1,pr=!1,Dn=!1,Ll=0,hi=0,br=null,Qy=0;function Rt(){throw Error(l(321))}function Xc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ya(e[s],t[s]))return!1;return!0}function Qc(e,t,s,i,d,u){return ys=u,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,H.H=e===null||e.memoizedState===null?zh:dd,Dn=!1,u=s(i,d),Dn=!1,pr&&(u=ah(t,s,i,d)),th(e),u}function th(e){H.H=pi;var t=pt!==null&&pt.next!==null;if(ys=0,Ut=pt=Ze=null,Dl=!1,hi=0,br=null,t)throw Error(l(300));e===null||zt||(e=e.dependencies,e!==null&&kl(e)&&(zt=!0))}function ah(e,t,s,i){Ze=e;var d=0;do{if(pr&&(br=null),hi=0,pr=!1,25<=d)throw Error(l(301));if(d+=1,Ut=pt=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}H.H=Fh,u=t(s,i)}while(pr);return u}function Wy(){var e=H.H,t=e.useState()[0];return t=typeof t.then=="function"?gi(t):t,e=e.useState()[0],(pt!==null?pt.memoizedState:null)!==e&&(Ze.flags|=1024),t}function Wc(){var e=Ll!==0;return Ll=0,e}function Zc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Kc(e){if(Dl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dl=!1}ys=0,Ut=pt=Ze=null,pr=!1,hi=Ll=0,br=null}function ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ze.memoizedState=Ut=e:Ut=Ut.next=e,Ut}function Ot(){if(pt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=Ut===null?Ze.memoizedState:Ut.next;if(t!==null)Ut=t,pt=e;else{if(e===null)throw Ze.alternate===null?Error(l(467)):Error(l(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Ut===null?Ze.memoizedState=Ut=e:Ut=Ut.next=e}return Ut}function Ul(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gi(e){var t=hi;return hi+=1,br===null&&(br=[]),e=Vm(br,e,t),t=Ze,(Ut===null?t.memoizedState:Ut.next)===null&&(t=t.alternate,H.H=t===null||t.memoizedState===null?zh:dd),e}function zl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return gi(e);if(e.$$typeof===W)return Zt(e)}throw Error(l(438,String(e)))}function Jc(e){var t=null,s=Ze.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var i=Ze.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Ul(),Ze.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),i=0;i<e;i++)s[i]=G;return t.index++,s}function vs(e,t){return typeof t=="function"?t(e):t}function Fl(e){var t=Ot();return ed(t,pt,e)}function ed(e,t,s){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=s;var d=e.baseQueue,u=i.pending;if(u!==null){if(d!==null){var p=d.next;d.next=u.next,u.next=p}t.baseQueue=d=u,i.pending=null}if(u=e.baseState,d===null)e.memoizedState=u;else{t=d.next;var j=p=null,q=null,ie=t,ge=!1;do{var ye=ie.lane&-536870913;if(ye!==ie.lane?(it&ye)===ye:(ys&ye)===ye){var ce=ie.revertLane;if(ce===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ye===fr&&(ge=!0);else if((ys&ce)===ce){ie=ie.next,ce===fr&&(ge=!0);continue}else ye={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},q===null?(j=q=ye,p=u):q=q.next=ye,Ze.lanes|=ce,tn|=ce;ye=ie.action,Dn&&s(u,ye),u=ie.hasEagerState?ie.eagerState:s(u,ye)}else ce={lane:ye,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},q===null?(j=q=ce,p=u):q=q.next=ce,Ze.lanes|=ye,tn|=ye;ie=ie.next}while(ie!==null&&ie!==t);if(q===null?p=u:q.next=j,!ya(u,e.memoizedState)&&(zt=!0,ge&&(s=mr,s!==null)))throw s;e.memoizedState=u,e.baseState=p,e.baseQueue=q,i.lastRenderedState=u}return d===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function td(e){var t=Ot(),s=t.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var i=s.dispatch,d=s.pending,u=t.memoizedState;if(d!==null){s.pending=null;var p=d=d.next;do u=e(u,p.action),p=p.next;while(p!==d);ya(u,t.memoizedState)||(zt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),s.lastRenderedState=u}return[u,i]}function sh(e,t,s){var i=Ze,d=Ot(),u=ot;if(u){if(s===void 0)throw Error(l(407));s=s()}else s=t();var p=!ya((pt||d).memoizedState,s);if(p&&(d.memoizedState=s,zt=!0),d=d.queue,nd(ih.bind(null,i,d,e),[e]),d.getSnapshot!==t||p||Ut!==null&&Ut.memoizedState.tag&1){if(i.flags|=2048,yr(9,{destroy:void 0},rh.bind(null,i,d,s,t),null),Nt===null)throw Error(l(349));u||(ys&127)!==0||nh(i,t,s)}return s}function nh(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ze.updateQueue,t===null?(t=Ul(),Ze.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function rh(e,t,s,i){t.value=s,t.getSnapshot=i,lh(t)&&oh(e)}function ih(e,t,s){return s(function(){lh(t)&&oh(e)})}function lh(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ya(e,s)}catch{return!0}}function oh(e){var t=kn(e,2);t!==null&&ga(t,e,2)}function ad(e){var t=ia();if(typeof e=="function"){var s=e;if(e=s(),Dn){Pe(!0);try{s()}finally{Pe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t}function ch(e,t,s,i){return e.baseState=s,ed(e,pt,typeof i=="function"?i:vs)}function Zy(e,t,s,i,d){if(Hl(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){u.listeners.push(p)}};H.T!==null?s(!0):u.isTransition=!1,i(u),s=t.pending,s===null?(u.next=t.pending=u,dh(t,u)):(u.next=s.next,t.pending=s.next=u)}}function dh(e,t){var s=t.action,i=t.payload,d=e.state;if(t.isTransition){var u=H.T,p={};H.T=p;try{var j=s(d,i),q=H.S;q!==null&&q(p,j),uh(e,t,j)}catch(ie){sd(e,t,ie)}finally{u!==null&&p.types!==null&&(u.types=p.types),H.T=u}}else try{u=s(d,i),uh(e,t,u)}catch(ie){sd(e,t,ie)}}function uh(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(i){fh(e,t,i)},function(i){return sd(e,t,i)}):fh(e,t,s)}function fh(e,t,s){t.status="fulfilled",t.value=s,mh(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,dh(e,s)))}function sd(e,t,s){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=s,mh(t),t=t.next;while(t!==i)}e.action=null}function mh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hh(e,t){return t}function gh(e,t){if(ot){var s=Nt.formState;if(s!==null){e:{var i=Ze;if(ot){if(jt){t:{for(var d=jt,u=Ua;d.nodeType!==8;){if(!u){d=null;break t}if(d=Fa(d.nextSibling),d===null){d=null;break t}}u=d.data,d=u==="F!"||u==="F"?d:null}if(d){jt=Fa(d.nextSibling),i=d.data==="F!";break e}}Vs(i)}i=!1}i&&(t=s[0])}}return s=ia(),s.memoizedState=s.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:t},s.queue=i,s=Dh.bind(null,Ze,i),i.dispatch=s,i=ad(!1),u=cd.bind(null,Ze,!1,i.queue),i=ia(),d={state:t,dispatch:null,action:e,pending:null},i.queue=d,s=Zy.bind(null,Ze,d,u,s),d.dispatch=s,i.memoizedState=e,[t,s,!1]}function xh(e){var t=Ot();return ph(t,pt,e)}function ph(e,t,s){if(t=ed(e,t,hh)[0],e=Fl(vs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=gi(t)}catch(p){throw p===hr?Cl:p}else i=t;t=Ot();var d=t.queue,u=d.dispatch;return s!==t.memoizedState&&(Ze.flags|=2048,yr(9,{destroy:void 0},Ky.bind(null,d,s),null)),[i,u,e]}function Ky(e,t){e.action=t}function bh(e){var t=Ot(),s=pt;if(s!==null)return ph(t,s,e);Ot(),t=t.memoizedState,s=Ot();var i=s.queue.dispatch;return s.memoizedState=e,[t,i,!1]}function yr(e,t,s,i){return e={tag:e,create:s,deps:i,inst:t,next:null},t=Ze.updateQueue,t===null&&(t=Ul(),Ze.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e),e}function yh(){return Ot().memoizedState}function Bl(e,t,s,i){var d=ia();Ze.flags|=e,d.memoizedState=yr(1|t,{destroy:void 0},s,i===void 0?null:i)}function ql(e,t,s,i){var d=Ot();i=i===void 0?null:i;var u=d.memoizedState.inst;pt!==null&&i!==null&&Xc(i,pt.memoizedState.deps)?d.memoizedState=yr(t,u,s,i):(Ze.flags|=e,d.memoizedState=yr(1|t,u,s,i))}function vh(e,t){Bl(8390656,8,e,t)}function nd(e,t){ql(2048,8,e,t)}function Jy(e){Ze.flags|=4;var t=Ze.updateQueue;if(t===null)t=Ul(),Ze.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function wh(e){var t=Ot().memoizedState;return Jy({ref:t,nextImpl:e}),function(){if((ft&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Nh(e,t){return ql(4,2,e,t)}function jh(e,t){return ql(4,4,e,t)}function Sh(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kh(e,t,s){s=s!=null?s.concat([e]):null,ql(4,4,Sh.bind(null,t,e),s)}function rd(){}function Eh(e,t){var s=Ot();t=t===void 0?null:t;var i=s.memoizedState;return t!==null&&Xc(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function Ah(e,t){var s=Ot();t=t===void 0?null:t;var i=s.memoizedState;if(t!==null&&Xc(t,i[1]))return i[0];if(i=e(),Dn){Pe(!0);try{e()}finally{Pe(!1)}}return s.memoizedState=[i,t],i}function id(e,t,s){return s===void 0||(ys&1073741824)!==0&&(it&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=C0(),Ze.lanes|=e,tn|=e,s)}function Ch(e,t,s,i){return ya(s,t)?s:xr.current!==null?(e=id(e,s,i),ya(e,t)||(zt=!0),e):(ys&42)===0||(ys&1073741824)!==0&&(it&261930)===0?(zt=!0,e.memoizedState=s):(e=C0(),Ze.lanes|=e,tn|=e,t)}function _h(e,t,s,i,d){var u=I.p;I.p=u!==0&&8>u?u:8;var p=H.T,j={};H.T=j,cd(e,!1,t,s);try{var q=d(),ie=H.S;if(ie!==null&&ie(j,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ge=Xy(q,i);xi(e,t,ge,ka(e))}else xi(e,t,i,ka(e))}catch(ye){xi(e,t,{then:function(){},status:"rejected",reason:ye},ka())}finally{I.p=u,p!==null&&j.types!==null&&(p.types=j.types),H.T=p}}function ev(){}function ld(e,t,s,i){if(e.tag!==5)throw Error(l(476));var d=Rh(e).queue;_h(e,d,t,X,s===null?ev:function(){return Th(e),s(i)})}function Rh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:X},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Th(e){var t=Rh(e);t.next===null&&(t=e.alternate.memoizedState),xi(e,t.next.queue,{},ka())}function od(){return Zt(Oi)}function Mh(){return Ot().memoizedState}function Oh(){return Ot().memoizedState}function tv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=ka();e=Qs(s);var i=Ws(t,e,s);i!==null&&(ga(i,t,s),ui(i,t,s)),t={cache:zc()},e.payload=t;return}t=t.return}}function av(e,t,s){var i=ka();s={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Hl(e)?Lh(t,s):(s=Ec(e,t,s,i),s!==null&&(ga(s,e,i),Uh(s,t,i)))}function Dh(e,t,s){var i=ka();xi(e,t,s,i)}function xi(e,t,s,i){var d={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hl(e))Lh(t,d);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var p=t.lastRenderedState,j=u(p,s);if(d.hasEagerState=!0,d.eagerState=j,ya(j,p))return wl(e,t,d,0),Nt===null&&vl(),!1}catch{}finally{}if(s=Ec(e,t,d,i),s!==null)return ga(s,e,i),Uh(s,t,i),!0}return!1}function cd(e,t,s,i){if(i={lane:2,revertLane:Hd(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Hl(e)){if(t)throw Error(l(479))}else t=Ec(e,s,i,2),t!==null&&ga(t,e,2)}function Hl(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function Lh(e,t){pr=Dl=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Uh(e,t,s){if((s&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Hf(e,s)}}var pi={readContext:Zt,use:zl,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};pi.useEffectEvent=Rt;var zh={readContext:Zt,use:zl,useCallback:function(e,t){return ia().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:vh,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Bl(4194308,4,Sh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Bl(4194308,4,e,t)},useInsertionEffect:function(e,t){Bl(4,2,e,t)},useMemo:function(e,t){var s=ia();t=t===void 0?null:t;var i=e();if(Dn){Pe(!0);try{e()}finally{Pe(!1)}}return s.memoizedState=[i,t],i},useReducer:function(e,t,s){var i=ia();if(s!==void 0){var d=s(t);if(Dn){Pe(!0);try{s(t)}finally{Pe(!1)}}}else d=t;return i.memoizedState=i.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},i.queue=e,e=e.dispatch=av.bind(null,Ze,e),[i.memoizedState,e]},useRef:function(e){var t=ia();return e={current:e},t.memoizedState=e},useState:function(e){e=ad(e);var t=e.queue,s=Dh.bind(null,Ze,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:rd,useDeferredValue:function(e,t){var s=ia();return id(s,e,t)},useTransition:function(){var e=ad(!1);return e=_h.bind(null,Ze,e.queue,!0,!1),ia().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var i=Ze,d=ia();if(ot){if(s===void 0)throw Error(l(407));s=s()}else{if(s=t(),Nt===null)throw Error(l(349));(it&127)!==0||nh(i,t,s)}d.memoizedState=s;var u={value:s,getSnapshot:t};return d.queue=u,vh(ih.bind(null,i,u,e),[e]),i.flags|=2048,yr(9,{destroy:void 0},rh.bind(null,i,u,s,t),null),s},useId:function(){var e=ia(),t=Nt.identifierPrefix;if(ot){var s=es,i=Ja;s=(i&~(1<<32-vt(i)-1)).toString(32)+s,t="_"+t+"R_"+s,s=Ll++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=Qy++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:od,useFormState:gh,useActionState:gh,useOptimistic:function(e){var t=ia();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=cd.bind(null,Ze,!0,s),s.dispatch=t,[e,t]},useMemoCache:Jc,useCacheRefresh:function(){return ia().memoizedState=tv.bind(null,Ze)},useEffectEvent:function(e){var t=ia(),s={impl:e};return t.memoizedState=s,function(){if((ft&2)!==0)throw Error(l(440));return s.impl.apply(void 0,arguments)}}},dd={readContext:Zt,use:zl,useCallback:Eh,useContext:Zt,useEffect:nd,useImperativeHandle:kh,useInsertionEffect:Nh,useLayoutEffect:jh,useMemo:Ah,useReducer:Fl,useRef:yh,useState:function(){return Fl(vs)},useDebugValue:rd,useDeferredValue:function(e,t){var s=Ot();return Ch(s,pt.memoizedState,e,t)},useTransition:function(){var e=Fl(vs)[0],t=Ot().memoizedState;return[typeof e=="boolean"?e:gi(e),t]},useSyncExternalStore:sh,useId:Mh,useHostTransitionStatus:od,useFormState:xh,useActionState:xh,useOptimistic:function(e,t){var s=Ot();return ch(s,pt,e,t)},useMemoCache:Jc,useCacheRefresh:Oh};dd.useEffectEvent=wh;var Fh={readContext:Zt,use:zl,useCallback:Eh,useContext:Zt,useEffect:nd,useImperativeHandle:kh,useInsertionEffect:Nh,useLayoutEffect:jh,useMemo:Ah,useReducer:td,useRef:yh,useState:function(){return td(vs)},useDebugValue:rd,useDeferredValue:function(e,t){var s=Ot();return pt===null?id(s,e,t):Ch(s,pt.memoizedState,e,t)},useTransition:function(){var e=td(vs)[0],t=Ot().memoizedState;return[typeof e=="boolean"?e:gi(e),t]},useSyncExternalStore:sh,useId:Mh,useHostTransitionStatus:od,useFormState:bh,useActionState:bh,useOptimistic:function(e,t){var s=Ot();return pt!==null?ch(s,pt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Jc,useCacheRefresh:Oh};Fh.useEffectEvent=wh;function ud(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:v({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var fd={enqueueSetState:function(e,t,s){e=e._reactInternals;var i=ka(),d=Qs(i);d.payload=t,s!=null&&(d.callback=s),t=Ws(e,d,i),t!==null&&(ga(t,e,i),ui(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=ka(),d=Qs(i);d.tag=1,d.payload=t,s!=null&&(d.callback=s),t=Ws(e,d,i),t!==null&&(ga(t,e,i),ui(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ka(),i=Qs(s);i.tag=2,t!=null&&(i.callback=t),t=Ws(e,i,s),t!==null&&(ga(t,e,s),ui(t,e,s))}};function Bh(e,t,s,i,d,u,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,p):t.prototype&&t.prototype.isPureReactComponent?!si(s,i)||!si(d,u):!0}function qh(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&fd.enqueueReplaceState(t,t.state,null)}function Ln(e,t){var s=t;if("ref"in t){s={};for(var i in t)i!=="ref"&&(s[i]=t[i])}if(e=e.defaultProps){s===t&&(s=v({},s));for(var d in e)s[d]===void 0&&(s[d]=e[d])}return s}function Hh(e){yl(e)}function $h(e){console.error(e)}function Ph(e){yl(e)}function $l(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Gh(e,t,s){try{var i=e.onCaughtError;i(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function md(e,t,s){return s=Qs(s),s.tag=3,s.payload={element:null},s.callback=function(){$l(e,t)},s}function Ih(e){return e=Qs(e),e.tag=3,e}function Vh(e,t,s,i){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var u=i.value;e.payload=function(){return d(u)},e.callback=function(){Gh(t,s,i)}}var p=s.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Gh(t,s,i),typeof d!="function"&&(an===null?an=new Set([this]):an.add(this));var j=i.stack;this.componentDidCatch(i.value,{componentStack:j!==null?j:""})})}function sv(e,t,s,i,d){if(s.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=s.alternate,t!==null&&ur(t,s,d,!0),s=wa.current,s!==null){switch(s.tag){case 31:case 13:return za===null?eo():s.alternate===null&&Tt===0&&(Tt=3),s.flags&=-257,s.flags|=65536,s.lanes=d,i===_l?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([i]):t.add(i),Fd(e,i,d)),!1;case 22:return s.flags|=65536,i===_l?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([i]):s.add(i)),Fd(e,i,d)),!1}throw Error(l(435,s.tag))}return Fd(e,i,d),eo(),!1}if(ot)return t=wa.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,i!==Mc&&(e=Error(l(422),{cause:i}),ii(Oa(e,s)))):(i!==Mc&&(t=Error(l(423),{cause:i}),ii(Oa(t,s))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,i=Oa(i,s),d=md(e.stateNode,i,d),Pc(e,d),Tt!==4&&(Tt=2)),!1;var u=Error(l(520),{cause:i});if(u=Oa(u,s),ki===null?ki=[u]:ki.push(u),Tt!==4&&(Tt=2),t===null)return!0;i=Oa(i,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=d&-d,s.lanes|=e,e=md(s.stateNode,i,e),Pc(s,e),!1;case 1:if(t=s.type,u=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(an===null||!an.has(u))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Ih(d),Vh(d,e,s,i),Pc(s,d),!1}s=s.return}while(s!==null);return!1}var hd=Error(l(461)),zt=!1;function Kt(e,t,s,i){t.child=e===null?Wm(t,null,s,i):On(t,e.child,s,i)}function Yh(e,t,s,i,d){s=s.render;var u=t.ref;if("ref"in i){var p={};for(var j in i)j!=="ref"&&(p[j]=i[j])}else p=i;return _n(t),i=Qc(e,t,s,p,u,d),j=Wc(),e!==null&&!zt?(Zc(e,t,d),ws(e,t,d)):(ot&&j&&Rc(t),t.flags|=1,Kt(e,t,i,d),t.child)}function Xh(e,t,s,i,d){if(e===null){var u=s.type;return typeof u=="function"&&!Ac(u)&&u.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=u,Qh(e,t,u,i,d)):(e=jl(s.type,null,i,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Nd(e,d)){var p=u.memoizedProps;if(s=s.compare,s=s!==null?s:si,s(p,i)&&e.ref===t.ref)return ws(e,t,d)}return t.flags|=1,e=gs(u,i),e.ref=t.ref,e.return=t,t.child=e}function Qh(e,t,s,i,d){if(e!==null){var u=e.memoizedProps;if(si(u,i)&&e.ref===t.ref)if(zt=!1,t.pendingProps=i=u,Nd(e,d))(e.flags&131072)!==0&&(zt=!0);else return t.lanes=e.lanes,ws(e,t,d)}return gd(e,t,s,i,d)}function Wh(e,t,s,i){var d=i.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|s:s,e!==null){for(i=t.child=e.child,d=0;i!==null;)d=d|i.lanes|i.childLanes,i=i.sibling;i=d&~u}else i=0,t.child=null;return Zh(e,t,u,s,i)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Al(t,u!==null?u.cachePool:null),u!==null?Jm(t,u):Ic(),eh(t);else return i=t.lanes=536870912,Zh(e,t,u!==null?u.baseLanes|s:s,s,i)}else u!==null?(Al(t,u.cachePool),Jm(t,u),Ks(),t.memoizedState=null):(e!==null&&Al(t,null),Ic(),Ks());return Kt(e,t,d,s),t.child}function bi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Zh(e,t,s,i,d){var u=Bc();return u=u===null?null:{parent:Lt._currentValue,pool:u},t.memoizedState={baseLanes:s,cachePool:u},e!==null&&Al(t,null),Ic(),eh(t),e!==null&&ur(e,t,i,!0),t.childLanes=d,null}function Pl(e,t){return t=Il({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Kh(e,t,s){return On(t,e.child,null,s),e=Pl(t,t.pendingProps),e.flags|=2,Na(t),t.memoizedState=null,e}function nv(e,t,s){var i=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ot){if(i.mode==="hidden")return e=Pl(t,i),t.lanes=536870912,bi(null,e);if(Yc(t),(e=jt)?(e=dg(e,Ua),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Gs!==null?{id:Ja,overflow:es}:null,retryLane:536870912,hydrationErrors:null},s=Lm(e),s.return=t,t.child=s,Wt=t,jt=null)):e=null,e===null)throw Vs(t);return t.lanes=536870912,null}return Pl(t,i)}var u=e.memoizedState;if(u!==null){var p=u.dehydrated;if(Yc(t),d)if(t.flags&256)t.flags&=-257,t=Kh(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(zt||ur(e,t,s,!1),d=(s&e.childLanes)!==0,zt||d){if(i=Nt,i!==null&&(p=$f(i,s),p!==0&&p!==u.retryLane))throw u.retryLane=p,kn(e,p),ga(i,e,p),hd;eo(),t=Kh(e,t,s)}else e=u.treeContext,jt=Fa(p.nextSibling),Wt=t,ot=!0,Is=null,Ua=!1,e!==null&&Fm(t,e),t=Pl(t,i),t.flags|=4096;return t}return e=gs(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Gl(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(l(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function gd(e,t,s,i,d){return _n(t),s=Qc(e,t,s,i,void 0,d),i=Wc(),e!==null&&!zt?(Zc(e,t,d),ws(e,t,d)):(ot&&i&&Rc(t),t.flags|=1,Kt(e,t,s,d),t.child)}function Jh(e,t,s,i,d,u){return _n(t),t.updateQueue=null,s=ah(t,i,s,d),th(e),i=Wc(),e!==null&&!zt?(Zc(e,t,u),ws(e,t,u)):(ot&&i&&Rc(t),t.flags|=1,Kt(e,t,s,u),t.child)}function e0(e,t,s,i,d){if(_n(t),t.stateNode===null){var u=lr,p=s.contextType;typeof p=="object"&&p!==null&&(u=Zt(p)),u=new s(i,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=fd,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=i,u.state=t.memoizedState,u.refs={},Hc(t),p=s.contextType,u.context=typeof p=="object"&&p!==null?Zt(p):lr,u.state=t.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(ud(t,s,p,i),u.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(p=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),p!==u.state&&fd.enqueueReplaceState(u,u.state,null),mi(t,i,u,d),fi(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){u=t.stateNode;var j=t.memoizedProps,q=Ln(s,j);u.props=q;var ie=u.context,ge=s.contextType;p=lr,typeof ge=="object"&&ge!==null&&(p=Zt(ge));var ye=s.getDerivedStateFromProps;ge=typeof ye=="function"||typeof u.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,ge||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(j||ie!==p)&&qh(t,u,i,p),Xs=!1;var ce=t.memoizedState;u.state=ce,mi(t,i,u,d),fi(),ie=t.memoizedState,j||ce!==ie||Xs?(typeof ye=="function"&&(ud(t,s,ye,i),ie=t.memoizedState),(q=Xs||Bh(t,s,q,i,ce,ie,p))?(ge||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=ie),u.props=i,u.state=ie,u.context=p,i=q):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,$c(e,t),p=t.memoizedProps,ge=Ln(s,p),u.props=ge,ye=t.pendingProps,ce=u.context,ie=s.contextType,q=lr,typeof ie=="object"&&ie!==null&&(q=Zt(ie)),j=s.getDerivedStateFromProps,(ie=typeof j=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==ye||ce!==q)&&qh(t,u,i,q),Xs=!1,ce=t.memoizedState,u.state=ce,mi(t,i,u,d),fi();var me=t.memoizedState;p!==ye||ce!==me||Xs||e!==null&&e.dependencies!==null&&kl(e.dependencies)?(typeof j=="function"&&(ud(t,s,j,i),me=t.memoizedState),(ge=Xs||Bh(t,s,ge,i,ce,me,q)||e!==null&&e.dependencies!==null&&kl(e.dependencies))?(ie||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,me,q),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,me,q)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=me),u.props=i,u.state=me,u.context=q,i=ge):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&ce===e.memoizedState||(t.flags|=1024),i=!1)}return u=i,Gl(e,t),i=(t.flags&128)!==0,u||i?(u=t.stateNode,s=i&&typeof s.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&i?(t.child=On(t,e.child,null,d),t.child=On(t,null,s,d)):Kt(e,t,s,d),t.memoizedState=u.state,e=t.child):e=ws(e,t,d),e}function t0(e,t,s,i){return An(),t.flags|=256,Kt(e,t,s,i),t.child}var xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pd(e){return{baseLanes:e,cachePool:Gm()}}function bd(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Sa),e}function a0(e,t,s){var i=t.pendingProps,d=!1,u=(t.flags&128)!==0,p;if((p=u)||(p=e!==null&&e.memoizedState===null?!1:(Mt.current&2)!==0),p&&(d=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(ot){if(d?Zs(t):Ks(),(e=jt)?(e=dg(e,Ua),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Gs!==null?{id:Ja,overflow:es}:null,retryLane:536870912,hydrationErrors:null},s=Lm(e),s.return=t,t.child=s,Wt=t,jt=null)):e=null,e===null)throw Vs(t);return eu(e)?t.lanes=32:t.lanes=536870912,null}var j=i.children;return i=i.fallback,d?(Ks(),d=t.mode,j=Il({mode:"hidden",children:j},d),i=En(i,d,s,null),j.return=t,i.return=t,j.sibling=i,t.child=j,i=t.child,i.memoizedState=pd(s),i.childLanes=bd(e,p,s),t.memoizedState=xd,bi(null,i)):(Zs(t),yd(t,j))}var q=e.memoizedState;if(q!==null&&(j=q.dehydrated,j!==null)){if(u)t.flags&256?(Zs(t),t.flags&=-257,t=vd(e,t,s)):t.memoizedState!==null?(Ks(),t.child=e.child,t.flags|=128,t=null):(Ks(),j=i.fallback,d=t.mode,i=Il({mode:"visible",children:i.children},d),j=En(j,d,s,null),j.flags|=2,i.return=t,j.return=t,i.sibling=j,t.child=i,On(t,e.child,null,s),i=t.child,i.memoizedState=pd(s),i.childLanes=bd(e,p,s),t.memoizedState=xd,t=bi(null,i));else if(Zs(t),eu(j)){if(p=j.nextSibling&&j.nextSibling.dataset,p)var ie=p.dgst;p=ie,i=Error(l(419)),i.stack="",i.digest=p,ii({value:i,source:null,stack:null}),t=vd(e,t,s)}else if(zt||ur(e,t,s,!1),p=(s&e.childLanes)!==0,zt||p){if(p=Nt,p!==null&&(i=$f(p,s),i!==0&&i!==q.retryLane))throw q.retryLane=i,kn(e,i),ga(p,e,i),hd;Jd(j)||eo(),t=vd(e,t,s)}else Jd(j)?(t.flags|=192,t.child=e.child,t=null):(e=q.treeContext,jt=Fa(j.nextSibling),Wt=t,ot=!0,Is=null,Ua=!1,e!==null&&Fm(t,e),t=yd(t,i.children),t.flags|=4096);return t}return d?(Ks(),j=i.fallback,d=t.mode,q=e.child,ie=q.sibling,i=gs(q,{mode:"hidden",children:i.children}),i.subtreeFlags=q.subtreeFlags&65011712,ie!==null?j=gs(ie,j):(j=En(j,d,s,null),j.flags|=2),j.return=t,i.return=t,i.sibling=j,t.child=i,bi(null,i),i=t.child,j=e.child.memoizedState,j===null?j=pd(s):(d=j.cachePool,d!==null?(q=Lt._currentValue,d=d.parent!==q?{parent:q,pool:q}:d):d=Gm(),j={baseLanes:j.baseLanes|s,cachePool:d}),i.memoizedState=j,i.childLanes=bd(e,p,s),t.memoizedState=xd,bi(e.child,i)):(Zs(t),s=e.child,e=s.sibling,s=gs(s,{mode:"visible",children:i.children}),s.return=t,s.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=s,t.memoizedState=null,s)}function yd(e,t){return t=Il({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Il(e,t){return e=va(22,e,null,t),e.lanes=0,e}function vd(e,t,s){return On(t,e.child,null,s),e=yd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s0(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Lc(e.return,t,s)}function wd(e,t,s,i,d,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:d,treeForkCount:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=i,p.tail=s,p.tailMode=d,p.treeForkCount=u)}function n0(e,t,s){var i=t.pendingProps,d=i.revealOrder,u=i.tail;i=i.children;var p=Mt.current,j=(p&2)!==0;if(j?(p=p&1|2,t.flags|=128):p&=1,_(Mt,p),Kt(e,t,i,s),i=ot?ri:0,!j&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&s0(e,s,t);else if(e.tag===19)s0(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&Ol(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),wd(t,!1,d,s,u,i);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Ol(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}wd(t,!0,s,null,u,i);break;case"together":wd(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function ws(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),tn|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(ur(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,s=gs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=gs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Nd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&kl(e)))}function rv(e,t,s){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),Ys(t,Lt,e.memoizedState.cache),An();break;case 27:case 5:ue(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:Ys(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Yc(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Zs(t),t.flags|=128,null):(s&t.child.childLanes)!==0?a0(e,t,s):(Zs(t),e=ws(e,t,s),e!==null?e.sibling:null);Zs(t);break;case 19:var d=(e.flags&128)!==0;if(i=(s&t.childLanes)!==0,i||(ur(e,t,s,!1),i=(s&t.childLanes)!==0),d){if(i)return n0(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),_(Mt,Mt.current),i)break;return null;case 22:return t.lanes=0,Wh(e,t,s,t.pendingProps);case 24:Ys(t,Lt,e.memoizedState.cache)}return ws(e,t,s)}function r0(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)zt=!0;else{if(!Nd(e,s)&&(t.flags&128)===0)return zt=!1,rv(e,t,s);zt=(e.flags&131072)!==0}else zt=!1,ot&&(t.flags&1048576)!==0&&zm(t,ri,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Tn(t.elementType),t.type=e,typeof e=="function")Ac(e)?(i=Ln(e,i),t.tag=1,t=e0(null,t,e,i,s)):(t.tag=0,t=gd(null,t,e,i,s));else{if(e!=null){var d=e.$$typeof;if(d===U){t.tag=11,t=Yh(null,t,e,i,s);break e}else if(d===$){t.tag=14,t=Xh(null,t,e,i,s);break e}}throw t=ve(e)||e,Error(l(306,t,""))}}return t;case 0:return gd(e,t,t.type,t.pendingProps,s);case 1:return i=t.type,d=Ln(i,t.pendingProps),e0(e,t,i,d,s);case 3:e:{if(B(t,t.stateNode.containerInfo),e===null)throw Error(l(387));i=t.pendingProps;var u=t.memoizedState;d=u.element,$c(e,t),mi(t,i,null,s);var p=t.memoizedState;if(i=p.cache,Ys(t,Lt,i),i!==u.cache&&Uc(t,[Lt],s,!0),fi(),i=p.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=t0(e,t,i,s);break e}else if(i!==d){d=Oa(Error(l(424)),t),ii(d),t=t0(e,t,i,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(jt=Fa(e.firstChild),Wt=t,ot=!0,Is=null,Ua=!0,s=Wm(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(An(),i===d){t=ws(e,t,s);break e}Kt(e,t,i,s)}t=t.child}return t;case 26:return Gl(e,t),e===null?(s=xg(t.type,null,t.pendingProps,null))?t.memoizedState=s:ot||(s=t.type,e=t.pendingProps,i=lo(xe.current).createElement(s),i[Qt]=t,i[ca]=e,Jt(i,s,e),Gt(i),t.stateNode=i):t.memoizedState=xg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ue(t),e===null&&ot&&(i=t.stateNode=mg(t.type,t.pendingProps,xe.current),Wt=t,Ua=!0,d=jt,ln(t.type)?(tu=d,jt=Fa(i.firstChild)):jt=d),Kt(e,t,t.pendingProps.children,s),Gl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ot&&((d=i=jt)&&(i=Lv(i,t.type,t.pendingProps,Ua),i!==null?(t.stateNode=i,Wt=t,jt=Fa(i.firstChild),Ua=!1,d=!0):d=!1),d||Vs(t)),ue(t),d=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,i=u.children,Wd(d,u)?i=null:p!==null&&Wd(d,p)&&(t.flags|=32),t.memoizedState!==null&&(d=Qc(e,t,Wy,null,null,s),Oi._currentValue=d),Gl(e,t),Kt(e,t,i,s),t.child;case 6:return e===null&&ot&&((e=s=jt)&&(s=Uv(s,t.pendingProps,Ua),s!==null?(t.stateNode=s,Wt=t,jt=null,e=!0):e=!1),e||Vs(t)),null;case 13:return a0(e,t,s);case 4:return B(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=On(t,null,i,s):Kt(e,t,i,s),t.child;case 11:return Yh(e,t,t.type,t.pendingProps,s);case 7:return Kt(e,t,t.pendingProps,s),t.child;case 8:return Kt(e,t,t.pendingProps.children,s),t.child;case 12:return Kt(e,t,t.pendingProps.children,s),t.child;case 10:return i=t.pendingProps,Ys(t,t.type,i.value),Kt(e,t,i.children,s),t.child;case 9:return d=t.type._context,i=t.pendingProps.children,_n(t),d=Zt(d),i=i(d),t.flags|=1,Kt(e,t,i,s),t.child;case 14:return Xh(e,t,t.type,t.pendingProps,s);case 15:return Qh(e,t,t.type,t.pendingProps,s);case 19:return n0(e,t,s);case 31:return nv(e,t,s);case 22:return Wh(e,t,s,t.pendingProps);case 24:return _n(t),i=Zt(Lt),e===null?(d=Bc(),d===null&&(d=Nt,u=zc(),d.pooledCache=u,u.refCount++,u!==null&&(d.pooledCacheLanes|=s),d=u),t.memoizedState={parent:i,cache:d},Hc(t),Ys(t,Lt,d)):((e.lanes&s)!==0&&($c(e,t),mi(t,null,null,s),fi()),d=e.memoizedState,u=t.memoizedState,d.parent!==i?(d={parent:i,cache:i},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Ys(t,Lt,i)):(i=u.cache,Ys(t,Lt,i),i!==d.cache&&Uc(t,[Lt],s,!0))),Kt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ns(e){e.flags|=4}function jd(e,t,s,i,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(M0())e.flags|=8192;else throw Mn=_l,qc}else e.flags&=-16777217}function i0(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!wg(t))if(M0())e.flags|=8192;else throw Mn=_l,qc}function Vl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?wt():536870912,e.lanes|=t,jr|=t)}function yi(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,i|=d.subtreeFlags&65011712,i|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,i|=d.subtreeFlags,i|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function iv(e,t,s){var i=t.pendingProps;switch(Tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return St(t),null;case 3:return s=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),bs(Lt),Q(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(dr(t)?Ns(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Oc())),St(t),null;case 26:var d=t.type,u=t.memoizedState;return e===null?(Ns(t),u!==null?(St(t),i0(t,u)):(St(t),jd(t,d,null,i,s))):u?u!==e.memoizedState?(Ns(t),St(t),i0(t,u)):(St(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Ns(t),St(t),jd(t,d,e,i,s)),null;case 27:if(we(t),s=xe.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ns(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return St(t),null}e=F.current,dr(t)?Bm(t):(e=mg(d,i,s),t.stateNode=e,Ns(t))}return St(t),null;case 5:if(we(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ns(t);else{if(!i){if(t.stateNode===null)throw Error(l(166));return St(t),null}if(u=F.current,dr(t))Bm(t);else{var p=lo(xe.current);switch(u){case 1:u=p.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:u=p.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":u=p.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":u=p.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":u=p.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof i.is=="string"?p.createElement("select",{is:i.is}):p.createElement("select"),i.multiple?u.multiple=!0:i.size&&(u.size=i.size);break;default:u=typeof i.is=="string"?p.createElement(d,{is:i.is}):p.createElement(d)}}u[Qt]=t,u[ca]=i;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)u.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=u;e:switch(Jt(u,d,i),d){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ns(t)}}return St(t),jd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Ns(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(l(166));if(e=xe.current,dr(t)){if(e=t.stateNode,s=t.memoizedProps,i=null,d=Wt,d!==null)switch(d.tag){case 27:case 5:i=d.memoizedProps}e[Qt]=t,e=!!(e.nodeValue===s||i!==null&&i.suppressHydrationWarning===!0||ag(e.nodeValue,s)),e||Vs(t,!0)}else e=lo(e).createTextNode(i),e[Qt]=t,t.stateNode=e}return St(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(i=dr(t),s!==null){if(e===null){if(!i)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[Qt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;St(t),e=!1}else s=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Na(t),t):(Na(t),null);if((t.flags&128)!==0)throw Error(l(558))}return St(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=dr(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(l(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[Qt]=t}else An(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;St(t),d=!1}else d=Oc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Na(t),t):(Na(t),null)}return Na(t),(t.flags&128)!==0?(t.lanes=s,t):(s=i!==null,e=e!==null&&e.memoizedState!==null,s&&(i=t.child,d=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(d=i.alternate.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==d&&(i.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Vl(t,t.updateQueue),St(t),null);case 4:return Q(),e===null&&Id(t.stateNode.containerInfo),St(t),null;case 10:return bs(t.type),St(t),null;case 19:if(A(Mt),i=t.memoizedState,i===null)return St(t),null;if(d=(t.flags&128)!==0,u=i.rendering,u===null)if(d)yi(i,!1);else{if(Tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ol(e),u!==null){for(t.flags|=128,yi(i,!1),e=u.updateQueue,t.updateQueue=e,Vl(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Dm(s,e),s=s.sibling;return _(Mt,Mt.current&1|2),ot&&xs(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&ae()>Zl&&(t.flags|=128,d=!0,yi(i,!1),t.lanes=4194304)}else{if(!d)if(e=Ol(u),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,Vl(t,e),yi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!ot)return St(t),null}else 2*ae()-i.renderingStartTime>Zl&&s!==536870912&&(t.flags|=128,d=!0,yi(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(e=i.last,e!==null?e.sibling=u:t.child=u,i.last=u)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ae(),e.sibling=null,s=Mt.current,_(Mt,d?s&1|2:s&1),ot&&xs(t,i.treeForkCount),e):(St(t),null);case 22:case 23:return Na(t),Vc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(s&536870912)!==0&&(t.flags&128)===0&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),s=t.updateQueue,s!==null&&Vl(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==s&&(t.flags|=2048),e!==null&&A(Rn),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),bs(Lt),St(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function lv(e,t){switch(Tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bs(Lt),Q(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return we(t),null;case 31:if(t.memoizedState!==null){if(Na(t),t.alternate===null)throw Error(l(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Na(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));An()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(Mt),null;case 4:return Q(),null;case 10:return bs(t.type),null;case 22:case 23:return Na(t),Vc(),e!==null&&A(Rn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return bs(Lt),null;case 25:return null;default:return null}}function l0(e,t){switch(Tc(t),t.tag){case 3:bs(Lt),Q();break;case 26:case 27:case 5:we(t);break;case 4:Q();break;case 31:t.memoizedState!==null&&Na(t);break;case 13:Na(t);break;case 19:A(Mt);break;case 10:bs(t.type);break;case 22:case 23:Na(t),Vc(),e!==null&&A(Rn);break;case 24:bs(Lt)}}function vi(e,t){try{var s=t.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var d=i.next;s=d;do{if((s.tag&e)===e){i=void 0;var u=s.create,p=s.inst;i=u(),p.destroy=i}s=s.next}while(s!==d)}}catch(j){gt(t,t.return,j)}}function Js(e,t,s){try{var i=t.updateQueue,d=i!==null?i.lastEffect:null;if(d!==null){var u=d.next;i=u;do{if((i.tag&e)===e){var p=i.inst,j=p.destroy;if(j!==void 0){p.destroy=void 0,d=t;var q=s,ie=j;try{ie()}catch(ge){gt(d,q,ge)}}}i=i.next}while(i!==u)}}catch(ge){gt(t,t.return,ge)}}function o0(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Km(t,s)}catch(i){gt(e,e.return,i)}}}function c0(e,t,s){s.props=Ln(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(i){gt(e,t,i)}}function wi(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof s=="function"?e.refCleanup=s(i):s.current=i}}catch(d){gt(e,t,d)}}function ts(e,t){var s=e.ref,i=e.refCleanup;if(s!==null)if(typeof i=="function")try{i()}catch(d){gt(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){gt(e,t,d)}else s.current=null}function d0(e){var t=e.type,s=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&i.focus();break e;case"img":s.src?i.src=s.src:s.srcSet&&(i.srcset=s.srcSet)}}catch(d){gt(e,e.return,d)}}function Sd(e,t,s){try{var i=e.stateNode;_v(i,e.type,s,t),i[ca]=t}catch(d){gt(e,e.return,d)}}function u0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ln(e.type)||e.tag===4}function kd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||u0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ln(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ed(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ms));else if(i!==4&&(i===27&&ln(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Ed(e,t,s),e=e.sibling;e!==null;)Ed(e,t,s),e=e.sibling}function Yl(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(i===27&&ln(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Yl(e,t,s),e=e.sibling;e!==null;)Yl(e,t,s),e=e.sibling}function f0(e){var t=e.stateNode,s=e.memoizedProps;try{for(var i=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Jt(t,i,s),t[Qt]=e,t[ca]=s}catch(u){gt(e,e.return,u)}}var js=!1,Ft=!1,Ad=!1,m0=typeof WeakSet=="function"?WeakSet:Set,It=null;function ov(e,t){if(e=e.containerInfo,Xd=go,e=km(e),vc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var d=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{s.nodeType,u.nodeType}catch{s=null;break e}var p=0,j=-1,q=-1,ie=0,ge=0,ye=e,ce=null;t:for(;;){for(var me;ye!==s||d!==0&&ye.nodeType!==3||(j=p+d),ye!==u||i!==0&&ye.nodeType!==3||(q=p+i),ye.nodeType===3&&(p+=ye.nodeValue.length),(me=ye.firstChild)!==null;)ce=ye,ye=me;for(;;){if(ye===e)break t;if(ce===s&&++ie===d&&(j=p),ce===u&&++ge===i&&(q=p),(me=ye.nextSibling)!==null)break;ye=ce,ce=ye.parentNode}ye=me}s=j===-1||q===-1?null:{start:j,end:q}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qd={focusedElem:e,selectionRange:s},go=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){switch(t=It,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)d=e[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,s=t,d=u.memoizedProps,u=u.memoizedState,i=s.stateNode;try{var Fe=Ln(s.type,d);e=i.getSnapshotBeforeUpdate(Fe,u),i.__reactInternalSnapshotBeforeUpdate=e}catch(Ye){gt(s,s.return,Ye)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Kd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}}function h0(e,t,s){var i=s.flags;switch(s.tag){case 0:case 11:case 15:ks(e,s),i&4&&vi(5,s);break;case 1:if(ks(e,s),i&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(p){gt(s,s.return,p)}else{var d=Ln(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){gt(s,s.return,p)}}i&64&&o0(s),i&512&&wi(s,s.return);break;case 3:if(ks(e,s),i&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Km(e,t)}catch(p){gt(s,s.return,p)}}break;case 27:t===null&&i&4&&f0(s);case 26:case 5:ks(e,s),t===null&&i&4&&d0(s),i&512&&wi(s,s.return);break;case 12:ks(e,s);break;case 31:ks(e,s),i&4&&p0(e,s);break;case 13:ks(e,s),i&4&&b0(e,s),i&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=pv.bind(null,s),zv(e,s))));break;case 22:if(i=s.memoizedState!==null||js,!i){t=t!==null&&t.memoizedState!==null||Ft,d=js;var u=Ft;js=i,(Ft=t)&&!u?Es(e,s,(s.subtreeFlags&8772)!==0):ks(e,s),js=d,Ft=u}break;case 30:break;default:ks(e,s)}}function g0(e){var t=e.alternate;t!==null&&(e.alternate=null,g0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&sc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kt=null,ua=!1;function Ss(e,t,s){for(s=s.child;s!==null;)x0(e,t,s),s=s.sibling}function x0(e,t,s){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(ze,s)}catch{}switch(s.tag){case 26:Ft||ts(s,t),Ss(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ft||ts(s,t);var i=kt,d=ua;ln(s.type)&&(kt=s.stateNode,ua=!1),Ss(e,t,s),Ri(s.stateNode),kt=i,ua=d;break;case 5:Ft||ts(s,t);case 6:if(i=kt,d=ua,kt=null,Ss(e,t,s),kt=i,ua=d,kt!==null)if(ua)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(s.stateNode)}catch(u){gt(s,t,u)}else try{kt.removeChild(s.stateNode)}catch(u){gt(s,t,u)}break;case 18:kt!==null&&(ua?(e=kt,og(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Tr(e)):og(kt,s.stateNode));break;case 4:i=kt,d=ua,kt=s.stateNode.containerInfo,ua=!0,Ss(e,t,s),kt=i,ua=d;break;case 0:case 11:case 14:case 15:Js(2,s,t),Ft||Js(4,s,t),Ss(e,t,s);break;case 1:Ft||(ts(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"&&c0(s,t,i)),Ss(e,t,s);break;case 21:Ss(e,t,s);break;case 22:Ft=(i=Ft)||s.memoizedState!==null,Ss(e,t,s),Ft=i;break;default:Ss(e,t,s)}}function p0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Tr(e)}catch(s){gt(t,t.return,s)}}}function b0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Tr(e)}catch(s){gt(t,t.return,s)}}function cv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new m0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new m0),t;default:throw Error(l(435,e.tag))}}function Xl(e,t){var s=cv(e);t.forEach(function(i){if(!s.has(i)){s.add(i);var d=bv.bind(null,e,i);i.then(d,d)}})}function fa(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var d=s[i],u=e,p=t,j=p;e:for(;j!==null;){switch(j.tag){case 27:if(ln(j.type)){kt=j.stateNode,ua=!1;break e}break;case 5:kt=j.stateNode,ua=!1;break e;case 3:case 4:kt=j.stateNode.containerInfo,ua=!0;break e}j=j.return}if(kt===null)throw Error(l(160));x0(u,p,d),kt=null,ua=!1,u=d.alternate,u!==null&&(u.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)y0(t,e),t=t.sibling}var Ga=null;function y0(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fa(t,e),ma(e),i&4&&(Js(3,e,e.return),vi(3,e),Js(5,e,e.return));break;case 1:fa(t,e),ma(e),i&512&&(Ft||s===null||ts(s,s.return)),i&64&&js&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?i:s.concat(i))));break;case 26:var d=Ga;if(fa(t,e),ma(e),i&512&&(Ft||s===null||ts(s,s.return)),i&4){var u=s!==null?s.memoizedState:null;if(i=e.memoizedState,s===null)if(i===null)if(e.stateNode===null){e:{i=e.type,s=e.memoizedProps,d=d.ownerDocument||d;t:switch(i){case"title":u=d.getElementsByTagName("title")[0],(!u||u[Xr]||u[Qt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=d.createElement(i),d.head.insertBefore(u,d.querySelector("head > title"))),Jt(u,i,s),u[Qt]=e,Gt(u),i=u;break e;case"link":var p=yg("link","href",d).get(i+(s.href||""));if(p){for(var j=0;j<p.length;j++)if(u=p[j],u.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&u.getAttribute("rel")===(s.rel==null?null:s.rel)&&u.getAttribute("title")===(s.title==null?null:s.title)&&u.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){p.splice(j,1);break t}}u=d.createElement(i),Jt(u,i,s),d.head.appendChild(u);break;case"meta":if(p=yg("meta","content",d).get(i+(s.content||""))){for(j=0;j<p.length;j++)if(u=p[j],u.getAttribute("content")===(s.content==null?null:""+s.content)&&u.getAttribute("name")===(s.name==null?null:s.name)&&u.getAttribute("property")===(s.property==null?null:s.property)&&u.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&u.getAttribute("charset")===(s.charSet==null?null:s.charSet)){p.splice(j,1);break t}}u=d.createElement(i),Jt(u,i,s),d.head.appendChild(u);break;default:throw Error(l(468,i))}u[Qt]=e,Gt(u),i=u}e.stateNode=i}else vg(d,e.type,e.stateNode);else e.stateNode=bg(d,i,e.memoizedProps);else u!==i?(u===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):u.count--,i===null?vg(d,e.type,e.stateNode):bg(d,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Sd(e,e.memoizedProps,s.memoizedProps)}break;case 27:fa(t,e),ma(e),i&512&&(Ft||s===null||ts(s,s.return)),s!==null&&i&4&&Sd(e,e.memoizedProps,s.memoizedProps);break;case 5:if(fa(t,e),ma(e),i&512&&(Ft||s===null||ts(s,s.return)),e.flags&32){d=e.stateNode;try{er(d,"")}catch(Fe){gt(e,e.return,Fe)}}i&4&&e.stateNode!=null&&(d=e.memoizedProps,Sd(e,d,s!==null?s.memoizedProps:d)),i&1024&&(Ad=!0);break;case 6:if(fa(t,e),ma(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,s=e.stateNode;try{s.nodeValue=i}catch(Fe){gt(e,e.return,Fe)}}break;case 3:if(uo=null,d=Ga,Ga=oo(t.containerInfo),fa(t,e),Ga=d,ma(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{Tr(t.containerInfo)}catch(Fe){gt(e,e.return,Fe)}Ad&&(Ad=!1,v0(e));break;case 4:i=Ga,Ga=oo(e.stateNode.containerInfo),fa(t,e),ma(e),Ga=i;break;case 12:fa(t,e),ma(e);break;case 31:fa(t,e),ma(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xl(e,i)));break;case 13:fa(t,e),ma(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Wl=ae()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xl(e,i)));break;case 22:d=e.memoizedState!==null;var q=s!==null&&s.memoizedState!==null,ie=js,ge=Ft;if(js=ie||d,Ft=ge||q,fa(t,e),Ft=ge,js=ie,ma(e),i&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(s===null||q||js||Ft||Un(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){q=s=t;try{if(u=q.stateNode,d)p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{j=q.stateNode;var ye=q.memoizedProps.style,ce=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;j.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Fe){gt(q,q.return,Fe)}}}else if(t.tag===6){if(s===null){q=t;try{q.stateNode.nodeValue=d?"":q.memoizedProps}catch(Fe){gt(q,q.return,Fe)}}}else if(t.tag===18){if(s===null){q=t;try{var me=q.stateNode;d?cg(me,!0):cg(q.stateNode,!1)}catch(Fe){gt(q,q.return,Fe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(s=i.retryQueue,s!==null&&(i.retryQueue=null,Xl(e,s))));break;case 19:fa(t,e),ma(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Xl(e,i)));break;case 30:break;case 21:break;default:fa(t,e),ma(e)}}function ma(e){var t=e.flags;if(t&2){try{for(var s,i=e.return;i!==null;){if(u0(i)){s=i;break}i=i.return}if(s==null)throw Error(l(160));switch(s.tag){case 27:var d=s.stateNode,u=kd(e);Yl(e,u,d);break;case 5:var p=s.stateNode;s.flags&32&&(er(p,""),s.flags&=-33);var j=kd(e);Yl(e,j,p);break;case 3:case 4:var q=s.stateNode.containerInfo,ie=kd(e);Ed(e,ie,q);break;default:throw Error(l(161))}}catch(ge){gt(e,e.return,ge)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function v0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;v0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ks(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)h0(e,t.alternate,t),t=t.sibling}function Un(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Js(4,t,t.return),Un(t);break;case 1:ts(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&c0(t,t.return,s),Un(t);break;case 27:Ri(t.stateNode);case 26:case 5:ts(t,t.return),Un(t);break;case 22:t.memoizedState===null&&Un(t);break;case 30:Un(t);break;default:Un(t)}e=e.sibling}}function Es(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,d=e,u=t,p=u.flags;switch(u.tag){case 0:case 11:case 15:Es(d,u,s),vi(4,u);break;case 1:if(Es(d,u,s),i=u,d=i.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ie){gt(i,i.return,ie)}if(i=u,d=i.updateQueue,d!==null){var j=i.stateNode;try{var q=d.shared.hiddenCallbacks;if(q!==null)for(d.shared.hiddenCallbacks=null,d=0;d<q.length;d++)Zm(q[d],j)}catch(ie){gt(i,i.return,ie)}}s&&p&64&&o0(u),wi(u,u.return);break;case 27:f0(u);case 26:case 5:Es(d,u,s),s&&i===null&&p&4&&d0(u),wi(u,u.return);break;case 12:Es(d,u,s);break;case 31:Es(d,u,s),s&&p&4&&p0(d,u);break;case 13:Es(d,u,s),s&&p&4&&b0(d,u);break;case 22:u.memoizedState===null&&Es(d,u,s),wi(u,u.return);break;case 30:break;default:Es(d,u,s)}t=t.sibling}}function Cd(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&li(s))}function _d(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&li(e))}function Ia(e,t,s,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)w0(e,t,s,i),t=t.sibling}function w0(e,t,s,i){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Ia(e,t,s,i),d&2048&&vi(9,t);break;case 1:Ia(e,t,s,i);break;case 3:Ia(e,t,s,i),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&li(e)));break;case 12:if(d&2048){Ia(e,t,s,i),e=t.stateNode;try{var u=t.memoizedProps,p=u.id,j=u.onPostCommit;typeof j=="function"&&j(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(q){gt(t,t.return,q)}}else Ia(e,t,s,i);break;case 31:Ia(e,t,s,i);break;case 13:Ia(e,t,s,i);break;case 23:break;case 22:u=t.stateNode,p=t.alternate,t.memoizedState!==null?u._visibility&2?Ia(e,t,s,i):Ni(e,t):u._visibility&2?Ia(e,t,s,i):(u._visibility|=2,vr(e,t,s,i,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Cd(p,t);break;case 24:Ia(e,t,s,i),d&2048&&_d(t.alternate,t);break;default:Ia(e,t,s,i)}}function vr(e,t,s,i,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,p=t,j=s,q=i,ie=p.flags;switch(p.tag){case 0:case 11:case 15:vr(u,p,j,q,d),vi(8,p);break;case 23:break;case 22:var ge=p.stateNode;p.memoizedState!==null?ge._visibility&2?vr(u,p,j,q,d):Ni(u,p):(ge._visibility|=2,vr(u,p,j,q,d)),d&&ie&2048&&Cd(p.alternate,p);break;case 24:vr(u,p,j,q,d),d&&ie&2048&&_d(p.alternate,p);break;default:vr(u,p,j,q,d)}t=t.sibling}}function Ni(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,i=t,d=i.flags;switch(i.tag){case 22:Ni(s,i),d&2048&&Cd(i.alternate,i);break;case 24:Ni(s,i),d&2048&&_d(i.alternate,i);break;default:Ni(s,i)}t=t.sibling}}var ji=8192;function wr(e,t,s){if(e.subtreeFlags&ji)for(e=e.child;e!==null;)N0(e,t,s),e=e.sibling}function N0(e,t,s){switch(e.tag){case 26:wr(e,t,s),e.flags&ji&&e.memoizedState!==null&&Qv(s,Ga,e.memoizedState,e.memoizedProps);break;case 5:wr(e,t,s);break;case 3:case 4:var i=Ga;Ga=oo(e.stateNode.containerInfo),wr(e,t,s),Ga=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ji,ji=16777216,wr(e,t,s),ji=i):wr(e,t,s));break;default:wr(e,t,s)}}function j0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Si(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];It=i,k0(i,e)}j0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)S0(e),e=e.sibling}function S0(e){switch(e.tag){case 0:case 11:case 15:Si(e),e.flags&2048&&Js(9,e,e.return);break;case 3:Si(e);break;case 12:Si(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ql(e)):Si(e);break;default:Si(e)}}function Ql(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];It=i,k0(i,e)}j0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Js(8,t,t.return),Ql(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function k0(e,t){for(;It!==null;){var s=It;switch(s.tag){case 0:case 11:case 15:Js(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var i=s.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:li(s.memoizedState.cache)}if(i=s.child,i!==null)i.return=s,It=i;else e:for(s=e;It!==null;){i=It;var d=i.sibling,u=i.return;if(g0(i),i===s){It=null;break e}if(d!==null){d.return=u,It=d;break e}It=u}}}var dv={getCacheForType:function(e){var t=Zt(Lt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Zt(Lt).controller.signal}},uv=typeof WeakMap=="function"?WeakMap:Map,ft=0,Nt=null,nt=null,it=0,ht=0,ja=null,en=!1,Nr=!1,Rd=!1,As=0,Tt=0,tn=0,zn=0,Td=0,Sa=0,jr=0,ki=null,ha=null,Md=!1,Wl=0,E0=0,Zl=1/0,Kl=null,an=null,Ht=0,sn=null,Sr=null,Cs=0,Od=0,Dd=null,A0=null,Ei=0,Ld=null;function ka(){return(ft&2)!==0&&it!==0?it&-it:H.T!==null?Hd():Pf()}function C0(){if(Sa===0)if((it&536870912)===0||ot){var e=Vn;Vn<<=1,(Vn&3932160)===0&&(Vn=262144),Sa=e}else Sa=536870912;return e=wa.current,e!==null&&(e.flags|=32),Sa}function ga(e,t,s){(e===Nt&&(ht===2||ht===9)||e.cancelPendingCommit!==null)&&(kr(e,0),nn(e,it,Sa,!1)),oa(e,s),((ft&2)===0||e!==Nt)&&(e===Nt&&((ft&2)===0&&(zn|=s),Tt===4&&nn(e,it,Sa,!1)),as(e))}function _0(e,t,s){if((ft&6)!==0)throw Error(l(327));var i=!s&&(t&127)===0&&(t&e.expiredLanes)===0||st(e,t),d=i?hv(e,t):zd(e,t,!0),u=i;do{if(d===0){Nr&&!i&&nn(e,t,0,!1);break}else{if(s=e.current.alternate,u&&!fv(s)){d=zd(e,t,!1),u=!1;continue}if(d===2){if(u=t,e.errorRecoveryDisabledLanes&u)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var j=e;d=ki;var q=j.current.memoizedState.isDehydrated;if(q&&(kr(j,p).flags|=256),p=zd(j,p,!1),p!==2){if(Rd&&!q){j.errorRecoveryDisabledLanes|=u,zn|=u,d=4;break e}u=ha,ha=d,u!==null&&(ha===null?ha=u:ha.push.apply(ha,u))}d=p}if(u=!1,d!==2)continue}}if(d===1){kr(e,0),nn(e,t,0,!0);break}e:{switch(i=e,u=d,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:nn(i,t,Sa,!en);break e;case 2:ha=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(d=Wl+300-ae(),10<d)){if(nn(i,t,Sa,!en),Xe(i,0,!0)!==0)break e;Cs=t,i.timeoutHandle=ig(R0.bind(null,i,s,ha,Kl,Md,t,Sa,zn,jr,en,u,"Throttled",-0,0),d);break e}R0(i,s,ha,Kl,Md,t,Sa,zn,jr,en,u,null,-0,0)}}break}while(!0);as(e)}function R0(e,t,s,i,d,u,p,j,q,ie,ge,ye,ce,me){if(e.timeoutHandle=-1,ye=t.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ms},N0(t,u,ye);var Fe=(u&62914560)===u?Wl-ae():(u&4194048)===u?E0-ae():0;if(Fe=Wv(ye,Fe),Fe!==null){Cs=u,e.cancelPendingCommit=Fe(F0.bind(null,e,t,u,s,i,d,p,j,q,ge,ye,null,ce,me)),nn(e,u,p,!ie);return}}F0(e,t,u,s,i,d,p,j,q)}function fv(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var i=0;i<s.length;i++){var d=s[i],u=d.getSnapshot;d=d.value;try{if(!ya(u(),d))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t,s,i){t&=~Td,t&=~zn,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var d=t;0<d;){var u=31-vt(d),p=1<<u;i[u]=-1,d&=~p}s!==0&&qf(e,s,t)}function Jl(){return(ft&6)===0?(Ai(0),!1):!0}function Ud(){if(nt!==null){if(ht===0)var e=nt.return;else e=nt,ps=Cn=null,Kc(e),gr=null,ci=0,e=nt;for(;e!==null;)l0(e.alternate,e),e=e.return;nt=null}}function kr(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Mv(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Cs=0,Ud(),Nt=e,nt=s=gs(e.current,null),it=t,ht=0,ja=null,en=!1,Nr=st(e,t),Rd=!1,jr=Sa=Td=zn=tn=Tt=0,ha=ki=null,Md=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var d=31-vt(i),u=1<<d;t|=e[d],i&=~u}return As=t,vl(),s}function T0(e,t){Ze=null,H.H=pi,t===hr||t===Cl?(t=Ym(),ht=3):t===qc?(t=Ym(),ht=4):ht=t===hd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ja=t,nt===null&&(Tt=1,$l(e,Oa(t,e.current)))}function M0(){var e=wa.current;return e===null?!0:(it&4194048)===it?za===null:(it&62914560)===it||(it&536870912)!==0?e===za:!1}function O0(){var e=H.H;return H.H=pi,e===null?pi:e}function D0(){var e=H.A;return H.A=dv,e}function eo(){Tt=4,en||(it&4194048)!==it&&wa.current!==null||(Nr=!0),(tn&134217727)===0&&(zn&134217727)===0||Nt===null||nn(Nt,it,Sa,!1)}function zd(e,t,s){var i=ft;ft|=2;var d=O0(),u=D0();(Nt!==e||it!==t)&&(Kl=null,kr(e,t)),t=!1;var p=Tt;e:do try{if(ht!==0&&nt!==null){var j=nt,q=ja;switch(ht){case 8:Ud(),p=6;break e;case 3:case 2:case 9:case 6:wa.current===null&&(t=!0);var ie=ht;if(ht=0,ja=null,Er(e,j,q,ie),s&&Nr){p=0;break e}break;default:ie=ht,ht=0,ja=null,Er(e,j,q,ie)}}mv(),p=Tt;break}catch(ge){T0(e,ge)}while(!0);return t&&e.shellSuspendCounter++,ps=Cn=null,ft=i,H.H=d,H.A=u,nt===null&&(Nt=null,it=0,vl()),p}function mv(){for(;nt!==null;)L0(nt)}function hv(e,t){var s=ft;ft|=2;var i=O0(),d=D0();Nt!==e||it!==t?(Kl=null,Zl=ae()+500,kr(e,t)):Nr=st(e,t);e:do try{if(ht!==0&&nt!==null){t=nt;var u=ja;t:switch(ht){case 1:ht=0,ja=null,Er(e,t,u,1);break;case 2:case 9:if(Im(u)){ht=0,ja=null,U0(t);break}t=function(){ht!==2&&ht!==9||Nt!==e||(ht=7),as(e)},u.then(t,t);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Im(u)?(ht=0,ja=null,U0(t)):(ht=0,ja=null,Er(e,t,u,7));break;case 5:var p=null;switch(nt.tag){case 26:p=nt.memoizedState;case 5:case 27:var j=nt;if(p?wg(p):j.stateNode.complete){ht=0,ja=null;var q=j.sibling;if(q!==null)nt=q;else{var ie=j.return;ie!==null?(nt=ie,to(ie)):nt=null}break t}}ht=0,ja=null,Er(e,t,u,5);break;case 6:ht=0,ja=null,Er(e,t,u,6);break;case 8:Ud(),Tt=6;break e;default:throw Error(l(462))}}gv();break}catch(ge){T0(e,ge)}while(!0);return ps=Cn=null,H.H=i,H.A=d,ft=s,nt!==null?0:(Nt=null,it=0,vl(),Tt)}function gv(){for(;nt!==null&&!Ve();)L0(nt)}function L0(e){var t=r0(e.alternate,e,As);e.memoizedProps=e.pendingProps,t===null?to(e):nt=t}function U0(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Jh(s,t,t.pendingProps,t.type,void 0,it);break;case 11:t=Jh(s,t,t.pendingProps,t.type.render,t.ref,it);break;case 5:Kc(t);default:l0(s,t),t=nt=Dm(t,As),t=r0(s,t,As)}e.memoizedProps=e.pendingProps,t===null?to(e):nt=t}function Er(e,t,s,i){ps=Cn=null,Kc(t),gr=null,ci=0;var d=t.return;try{if(sv(e,d,t,s,it)){Tt=1,$l(e,Oa(s,e.current)),nt=null;return}}catch(u){if(d!==null)throw nt=d,u;Tt=1,$l(e,Oa(s,e.current)),nt=null;return}t.flags&32768?(ot||i===1?e=!0:Nr||(it&536870912)!==0?e=!1:(en=e=!0,(i===2||i===9||i===3||i===6)&&(i=wa.current,i!==null&&i.tag===13&&(i.flags|=16384))),z0(t,e)):to(t)}function to(e){var t=e;do{if((t.flags&32768)!==0){z0(t,en);return}e=t.return;var s=iv(t.alternate,t,As);if(s!==null){nt=s;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);Tt===0&&(Tt=5)}function z0(e,t){do{var s=lv(e.alternate,e);if(s!==null){s.flags&=32767,nt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){nt=e;return}nt=e=s}while(e!==null);Tt=6,nt=null}function F0(e,t,s,i,d,u,p,j,q){e.cancelPendingCommit=null;do ao();while(Ht!==0);if((ft&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=kc,Jo(e,s,u,p,j,q),e===Nt&&(nt=Nt=null,it=0),Sr=t,sn=e,Cs=s,Od=u,Dd=d,A0=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yv(Z,function(){return P0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=H.T,H.T=null,d=I.p,I.p=2,p=ft,ft|=4;try{ov(e,t,s)}finally{ft=p,I.p=d,H.T=i}}Ht=1,B0(),q0(),H0()}}function B0(){if(Ht===1){Ht=0;var e=sn,t=Sr,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=H.T,H.T=null;var i=I.p;I.p=2;var d=ft;ft|=4;try{y0(t,e);var u=Qd,p=km(e.containerInfo),j=u.focusedElem,q=u.selectionRange;if(p!==j&&j&&j.ownerDocument&&Sm(j.ownerDocument.documentElement,j)){if(q!==null&&vc(j)){var ie=q.start,ge=q.end;if(ge===void 0&&(ge=ie),"selectionStart"in j)j.selectionStart=ie,j.selectionEnd=Math.min(ge,j.value.length);else{var ye=j.ownerDocument||document,ce=ye&&ye.defaultView||window;if(ce.getSelection){var me=ce.getSelection(),Fe=j.textContent.length,Ye=Math.min(q.start,Fe),yt=q.end===void 0?Ye:Math.min(q.end,Fe);!me.extend&&Ye>yt&&(p=yt,yt=Ye,Ye=p);var te=jm(j,Ye),Y=jm(j,yt);if(te&&Y&&(me.rangeCount!==1||me.anchorNode!==te.node||me.anchorOffset!==te.offset||me.focusNode!==Y.node||me.focusOffset!==Y.offset)){var re=ye.createRange();re.setStart(te.node,te.offset),me.removeAllRanges(),Ye>yt?(me.addRange(re),me.extend(Y.node,Y.offset)):(re.setEnd(Y.node,Y.offset),me.addRange(re))}}}}for(ye=[],me=j;me=me.parentNode;)me.nodeType===1&&ye.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ye.length;j++){var be=ye[j];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}go=!!Xd,Qd=Xd=null}finally{ft=d,I.p=i,H.T=s}}e.current=t,Ht=2}}function q0(){if(Ht===2){Ht=0;var e=sn,t=Sr,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=H.T,H.T=null;var i=I.p;I.p=2;var d=ft;ft|=4;try{h0(e,t.alternate,t)}finally{ft=d,I.p=i,H.T=s}}Ht=3}}function H0(){if(Ht===4||Ht===3){Ht=0,at();var e=sn,t=Sr,s=Cs,i=A0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ht=5:(Ht=0,Sr=sn=null,$0(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(an=null),tc(s),t=t.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(ze,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=H.T,d=I.p,I.p=2,H.T=null;try{for(var u=e.onRecoverableError,p=0;p<i.length;p++){var j=i[p];u(j.value,{componentStack:j.stack})}}finally{H.T=t,I.p=d}}(Cs&3)!==0&&ao(),as(e),d=e.pendingLanes,(s&261930)!==0&&(d&42)!==0?e===Ld?Ei++:(Ei=0,Ld=e):Ei=0,Ai(0)}}function $0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,li(t)))}function ao(){return B0(),q0(),H0(),P0()}function P0(){if(Ht!==5)return!1;var e=sn,t=Od;Od=0;var s=tc(Cs),i=H.T,d=I.p;try{I.p=32>s?32:s,H.T=null,s=Dd,Dd=null;var u=sn,p=Cs;if(Ht=0,Sr=sn=null,Cs=0,(ft&6)!==0)throw Error(l(331));var j=ft;if(ft|=4,S0(u.current),w0(u,u.current,p,s),ft=j,Ai(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(ze,u)}catch{}return!0}finally{I.p=d,H.T=i,$0(e,t)}}function G0(e,t,s){t=Oa(s,t),t=md(e.stateNode,t,2),e=Ws(e,t,2),e!==null&&(oa(e,2),as(e))}function gt(e,t,s){if(e.tag===3)G0(e,e,s);else for(;t!==null;){if(t.tag===3){G0(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(an===null||!an.has(i))){e=Oa(s,e),s=Ih(2),i=Ws(t,s,2),i!==null&&(Vh(s,i,t,e),oa(i,2),as(i));break}}t=t.return}}function Fd(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new uv;var d=new Set;i.set(t,d)}else d=i.get(t),d===void 0&&(d=new Set,i.set(t,d));d.has(s)||(Rd=!0,d.add(s),e=xv.bind(null,e,t,s),t.then(e,e))}function xv(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Nt===e&&(it&s)===s&&(Tt===4||Tt===3&&(it&62914560)===it&&300>ae()-Wl?(ft&2)===0&&kr(e,0):Td|=s,jr===it&&(jr=0)),as(e)}function I0(e,t){t===0&&(t=wt()),e=kn(e,t),e!==null&&(oa(e,t),as(e))}function pv(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),I0(e,s)}function bv(e,t){var s=0;switch(e.tag){case 31:case 13:var i=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(t),I0(e,s)}function yv(e,t){return pe(e,t)}var so=null,Ar=null,Bd=!1,no=!1,qd=!1,rn=0;function as(e){e!==Ar&&e.next===null&&(Ar===null?so=Ar=e:Ar=Ar.next=e),no=!0,Bd||(Bd=!0,wv())}function Ai(e,t){if(!qd&&no){qd=!0;do for(var s=!1,i=so;i!==null;){if(e!==0){var d=i.pendingLanes;if(d===0)var u=0;else{var p=i.suspendedLanes,j=i.pingedLanes;u=(1<<31-vt(42|e)+1)-1,u&=d&~(p&~j),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(s=!0,Q0(i,u))}else u=it,u=Xe(i,i===Nt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(u&3)===0||st(i,u)||(s=!0,Q0(i,u));i=i.next}while(s);qd=!1}}function vv(){V0()}function V0(){no=Bd=!1;var e=0;rn!==0&&Tv()&&(e=rn);for(var t=ae(),s=null,i=so;i!==null;){var d=i.next,u=Y0(i,t);u===0?(i.next=null,s===null?so=d:s.next=d,d===null&&(Ar=s)):(s=i,(e!==0||(u&3)!==0)&&(no=!0)),i=d}Ht!==0&&Ht!==5||Ai(e),rn!==0&&(rn=0)}function Y0(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,d=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var p=31-vt(u),j=1<<p,q=d[p];q===-1?((j&s)===0||(j&i)!==0)&&(d[p]=Dt(j,t)):q<=t&&(e.expiredLanes|=j),u&=~j}if(t=Nt,s=it,s=Xe(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,s===0||e===t&&(ht===2||ht===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&$e(i),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||st(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(i!==null&&$e(i),tc(s)){case 2:case 8:s=Ee;break;case 32:s=Z;break;case 268435456:s=Se;break;default:s=Z}return i=X0.bind(null,e),s=pe(s,i),e.callbackPriority=t,e.callbackNode=s,t}return i!==null&&i!==null&&$e(i),e.callbackPriority=2,e.callbackNode=null,2}function X0(e,t){if(Ht!==0&&Ht!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ao()&&e.callbackNode!==s)return null;var i=it;return i=Xe(e,e===Nt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(_0(e,i,t),Y0(e,ae()),e.callbackNode!=null&&e.callbackNode===s?X0.bind(null,e):null)}function Q0(e,t){if(ao())return null;_0(e,t,!0)}function wv(){Ov(function(){(ft&6)!==0?pe(ke,vv):V0()})}function Hd(){if(rn===0){var e=fr;e===0&&(e=vn,vn<<=1,(vn&261888)===0&&(vn=256)),rn=e}return rn}function W0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fl(""+e)}function Z0(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Nv(e,t,s,i,d){if(t==="submit"&&s&&s.stateNode===d){var u=W0((d[ca]||null).action),p=i.submitter;p&&(t=(t=p[ca]||null)?W0(t.formAction):p.getAttribute("formAction"),t!==null&&(u=t,p=null));var j=new xl("action","action",null,i,d);e.push({event:j,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(rn!==0){var q=p?Z0(d,p):new FormData(d);ld(s,{pending:!0,data:q,method:d.method,action:u},null,q)}}else typeof u=="function"&&(j.preventDefault(),q=p?Z0(d,p):new FormData(d),ld(s,{pending:!0,data:q,method:d.method,action:u},u,q))},currentTarget:d}]})}}for(var $d=0;$d<Sc.length;$d++){var Pd=Sc[$d],jv=Pd.toLowerCase(),Sv=Pd[0].toUpperCase()+Pd.slice(1);Pa(jv,"on"+Sv)}Pa(Cm,"onAnimationEnd"),Pa(_m,"onAnimationIteration"),Pa(Rm,"onAnimationStart"),Pa("dblclick","onDoubleClick"),Pa("focusin","onFocus"),Pa("focusout","onBlur"),Pa(qy,"onTransitionRun"),Pa(Hy,"onTransitionStart"),Pa($y,"onTransitionCancel"),Pa(Tm,"onTransitionEnd"),Kn("onMouseEnter",["mouseout","mouseover"]),Kn("onMouseLeave",["mouseout","mouseover"]),Kn("onPointerEnter",["pointerout","pointerover"]),Kn("onPointerLeave",["pointerout","pointerover"]),wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ci));function K0(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],d=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var p=i.length-1;0<=p;p--){var j=i[p],q=j.instance,ie=j.currentTarget;if(j=j.listener,q!==u&&d.isPropagationStopped())break e;u=j,d.currentTarget=ie;try{u(d)}catch(ge){yl(ge)}d.currentTarget=null,u=q}else for(p=0;p<i.length;p++){if(j=i[p],q=j.instance,ie=j.currentTarget,j=j.listener,q!==u&&d.isPropagationStopped())break e;u=j,d.currentTarget=ie;try{u(d)}catch(ge){yl(ge)}d.currentTarget=null,u=q}}}}function rt(e,t){var s=t[ac];s===void 0&&(s=t[ac]=new Set);var i=e+"__bubble";s.has(i)||(J0(t,e,2,!1),s.add(i))}function Gd(e,t,s){var i=0;t&&(i|=4),J0(s,e,i,t)}var ro="_reactListening"+Math.random().toString(36).slice(2);function Id(e){if(!e[ro]){e[ro]=!0,Vf.forEach(function(s){s!=="selectionchange"&&(kv.has(s)||Gd(s,!1,e),Gd(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ro]||(t[ro]=!0,Gd("selectionchange",!1,t))}}function J0(e,t,s,i){switch(Cg(t)){case 2:var d=Jv;break;case 8:d=e1;break;default:d=iu}s=d.bind(null,t,s,e),d=void 0,!uc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),i?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function Vd(e,t,s,i,d){var u=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var j=i.stateNode.containerInfo;if(j===d)break;if(p===4)for(p=i.return;p!==null;){var q=p.tag;if((q===3||q===4)&&p.stateNode.containerInfo===d)return;p=p.return}for(;j!==null;){if(p=Qn(j),p===null)return;if(q=p.tag,q===5||q===6||q===26||q===27){i=u=p;continue e}j=j.parentNode}}i=i.return}nm(function(){var ie=u,ge=cc(s),ye=[];e:{var ce=Mm.get(e);if(ce!==void 0){var me=xl,Fe=e;switch(e){case"keypress":if(hl(s)===0)break e;case"keydown":case"keyup":me=by;break;case"focusin":Fe="focus",me=gc;break;case"focusout":Fe="blur",me=gc;break;case"beforeblur":case"afterblur":me=gc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=iy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=wy;break;case Cm:case _m:case Rm:me=cy;break;case Tm:me=jy;break;case"scroll":case"scrollend":me=ny;break;case"wheel":me=ky;break;case"copy":case"cut":case"paste":me=uy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=cm;break;case"toggle":case"beforetoggle":me=Ay}var Ye=(t&4)!==0,yt=!Ye&&(e==="scroll"||e==="scrollend"),te=Ye?ce!==null?ce+"Capture":null:ce;Ye=[];for(var Y=ie,re;Y!==null;){var be=Y;if(re=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||re===null||te===null||(be=Wr(Y,te),be!=null&&Ye.push(_i(Y,be,re))),yt)break;Y=Y.return}0<Ye.length&&(ce=new me(ce,Fe,null,s,ge),ye.push({event:ce,listeners:Ye}))}}if((t&7)===0){e:{if(ce=e==="mouseover"||e==="pointerover",me=e==="mouseout"||e==="pointerout",ce&&s!==oc&&(Fe=s.relatedTarget||s.fromElement)&&(Qn(Fe)||Fe[Xn]))break e;if((me||ce)&&(ce=ge.window===ge?ge:(ce=ge.ownerDocument)?ce.defaultView||ce.parentWindow:window,me?(Fe=s.relatedTarget||s.toElement,me=ie,Fe=Fe?Qn(Fe):null,Fe!==null&&(yt=f(Fe),Ye=Fe.tag,Fe!==yt||Ye!==5&&Ye!==27&&Ye!==6)&&(Fe=null)):(me=null,Fe=ie),me!==Fe)){if(Ye=lm,be="onMouseLeave",te="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(Ye=cm,be="onPointerLeave",te="onPointerEnter",Y="pointer"),yt=me==null?ce:Qr(me),re=Fe==null?ce:Qr(Fe),ce=new Ye(be,Y+"leave",me,s,ge),ce.target=yt,ce.relatedTarget=re,be=null,Qn(ge)===ie&&(Ye=new Ye(te,Y+"enter",Fe,s,ge),Ye.target=re,Ye.relatedTarget=yt,be=Ye),yt=be,me&&Fe)t:{for(Ye=Ev,te=me,Y=Fe,re=0,be=te;be;be=Ye(be))re++;be=0;for(var Ge=Y;Ge;Ge=Ye(Ge))be++;for(;0<re-be;)te=Ye(te),re--;for(;0<be-re;)Y=Ye(Y),be--;for(;re--;){if(te===Y||Y!==null&&te===Y.alternate){Ye=te;break t}te=Ye(te),Y=Ye(Y)}Ye=null}else Ye=null;me!==null&&eg(ye,ce,me,Ye,!1),Fe!==null&&yt!==null&&eg(ye,yt,Fe,Ye,!0)}}e:{if(ce=ie?Qr(ie):window,me=ce.nodeName&&ce.nodeName.toLowerCase(),me==="select"||me==="input"&&ce.type==="file")var dt=pm;else if(gm(ce))if(bm)dt=zy;else{dt=Ly;var He=Dy}else me=ce.nodeName,!me||me.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ie&&lc(ie.elementType)&&(dt=pm):dt=Uy;if(dt&&(dt=dt(e,ie))){xm(ye,dt,s,ge);break e}He&&He(e,ce,ie),e==="focusout"&&ie&&ce.type==="number"&&ie.memoizedProps.value!=null&&ic(ce,"number",ce.value)}switch(He=ie?Qr(ie):window,e){case"focusin":(gm(He)||He.contentEditable==="true")&&(nr=He,wc=ie,ni=null);break;case"focusout":ni=wc=nr=null;break;case"mousedown":Nc=!0;break;case"contextmenu":case"mouseup":case"dragend":Nc=!1,Em(ye,s,ge);break;case"selectionchange":if(By)break;case"keydown":case"keyup":Em(ye,s,ge)}var Je;if(pc)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else sr?mm(e,s)&&(lt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(lt="onCompositionStart");lt&&(dm&&s.locale!=="ko"&&(sr||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&sr&&(Je=rm()):(Ps=ge,fc="value"in Ps?Ps.value:Ps.textContent,sr=!0)),He=io(ie,lt),0<He.length&&(lt=new om(lt,e,null,s,ge),ye.push({event:lt,listeners:He}),Je?lt.data=Je:(Je=hm(s),Je!==null&&(lt.data=Je)))),(Je=_y?Ry(e,s):Ty(e,s))&&(lt=io(ie,"onBeforeInput"),0<lt.length&&(He=new om("onBeforeInput","beforeinput",null,s,ge),ye.push({event:He,listeners:lt}),He.data=Je)),Nv(ye,e,ie,s,ge)}K0(ye,t)})}function _i(e,t,s){return{instance:e,listener:t,currentTarget:s}}function io(e,t){for(var s=t+"Capture",i=[];e!==null;){var d=e,u=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||u===null||(d=Wr(e,s),d!=null&&i.unshift(_i(e,d,u)),d=Wr(e,t),d!=null&&i.push(_i(e,d,u))),e.tag===3)return i;e=e.return}return[]}function Ev(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function eg(e,t,s,i,d){for(var u=t._reactName,p=[];s!==null&&s!==i;){var j=s,q=j.alternate,ie=j.stateNode;if(j=j.tag,q!==null&&q===i)break;j!==5&&j!==26&&j!==27||ie===null||(q=ie,d?(ie=Wr(s,u),ie!=null&&p.unshift(_i(s,ie,q))):d||(ie=Wr(s,u),ie!=null&&p.push(_i(s,ie,q)))),s=s.return}p.length!==0&&e.push({event:t,listeners:p})}var Av=/\r\n?/g,Cv=/\u0000|\uFFFD/g;function tg(e){return(typeof e=="string"?e:""+e).replace(Av,`
`).replace(Cv,"")}function ag(e,t){return t=tg(t),tg(e)===t}function bt(e,t,s,i,d,u){switch(s){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||er(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&er(e,""+i);break;case"className":dl(e,"class",i);break;case"tabIndex":dl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":dl(e,s,i);break;case"style":am(e,i,u);break;case"data":if(t!=="object"){dl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=fl(""+i),e.setAttribute(s,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(s==="formAction"?(t!=="input"&&bt(e,t,"name",d.name,d,null),bt(e,t,"formEncType",d.formEncType,d,null),bt(e,t,"formMethod",d.formMethod,d,null),bt(e,t,"formTarget",d.formTarget,d,null)):(bt(e,t,"encType",d.encType,d,null),bt(e,t,"method",d.method,d,null),bt(e,t,"target",d.target,d,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=fl(""+i),e.setAttribute(s,i);break;case"onClick":i!=null&&(e.onclick=ms);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(s=i.__html,s!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}s=fl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""+i):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":i===!0?e.setAttribute(s,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,i):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(s,i):e.removeAttribute(s);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(s):e.setAttribute(s,i);break;case"popover":rt("beforetoggle",e),rt("toggle",e),cl(e,"popover",i);break;case"xlinkActuate":fs(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":fs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":fs(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":fs(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":fs(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":fs(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":fs(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":fs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":fs(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":cl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ay.get(s)||s,cl(e,s,i))}}function Yd(e,t,s,i,d,u){switch(s){case"style":am(e,i,u);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(s=i.__html,s!=null){if(d.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"children":typeof i=="string"?er(e,i):(typeof i=="number"||typeof i=="bigint")&&er(e,""+i);break;case"onScroll":i!=null&&rt("scroll",e);break;case"onScrollEnd":i!=null&&rt("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yf.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),t=s.slice(2,d?s.length-7:void 0),u=e[ca]||null,u=u!=null?u[s]:null,typeof u=="function"&&e.removeEventListener(t,u,d),typeof i=="function")){typeof u!="function"&&u!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,i,d);break e}s in e?e[s]=i:i===!0?e.setAttribute(s,""):cl(e,s,i)}}}function Jt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var i=!1,d=!1,u;for(u in s)if(s.hasOwnProperty(u)){var p=s[u];if(p!=null)switch(u){case"src":i=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:bt(e,t,u,p,s,null)}}d&&bt(e,t,"srcSet",s.srcSet,s,null),i&&bt(e,t,"src",s.src,s,null);return;case"input":rt("invalid",e);var j=u=p=d=null,q=null,ie=null;for(i in s)if(s.hasOwnProperty(i)){var ge=s[i];if(ge!=null)switch(i){case"name":d=ge;break;case"type":p=ge;break;case"checked":q=ge;break;case"defaultChecked":ie=ge;break;case"value":u=ge;break;case"defaultValue":j=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(l(137,t));break;default:bt(e,t,i,ge,s,null)}}Kf(e,u,j,q,ie,p,d,!1);return;case"select":rt("invalid",e),i=p=u=null;for(d in s)if(s.hasOwnProperty(d)&&(j=s[d],j!=null))switch(d){case"value":u=j;break;case"defaultValue":p=j;break;case"multiple":i=j;default:bt(e,t,d,j,s,null)}t=u,s=p,e.multiple=!!i,t!=null?Jn(e,!!i,t,!1):s!=null&&Jn(e,!!i,s,!0);return;case"textarea":rt("invalid",e),u=d=i=null;for(p in s)if(s.hasOwnProperty(p)&&(j=s[p],j!=null))switch(p){case"value":i=j;break;case"defaultValue":d=j;break;case"children":u=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(l(91));break;default:bt(e,t,p,j,s,null)}em(e,i,d,u);return;case"option":for(q in s)if(s.hasOwnProperty(q)&&(i=s[q],i!=null))switch(q){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:bt(e,t,q,i,s,null)}return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(i=0;i<Ci.length;i++)rt(Ci[i],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in s)if(s.hasOwnProperty(ie)&&(i=s[ie],i!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:bt(e,t,ie,i,s,null)}return;default:if(lc(t)){for(ge in s)s.hasOwnProperty(ge)&&(i=s[ge],i!==void 0&&Yd(e,t,ge,i,s,void 0));return}}for(j in s)s.hasOwnProperty(j)&&(i=s[j],i!=null&&bt(e,t,j,i,s,null))}function _v(e,t,s,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,u=null,p=null,j=null,q=null,ie=null,ge=null;for(me in s){var ye=s[me];if(s.hasOwnProperty(me)&&ye!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":q=ye;default:i.hasOwnProperty(me)||bt(e,t,me,null,i,ye)}}for(var ce in i){var me=i[ce];if(ye=s[ce],i.hasOwnProperty(ce)&&(me!=null||ye!=null))switch(ce){case"type":u=me;break;case"name":d=me;break;case"checked":ie=me;break;case"defaultChecked":ge=me;break;case"value":p=me;break;case"defaultValue":j=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(l(137,t));break;default:me!==ye&&bt(e,t,ce,me,i,ye)}}rc(e,p,j,q,ie,ge,u,d);return;case"select":me=p=j=ce=null;for(u in s)if(q=s[u],s.hasOwnProperty(u)&&q!=null)switch(u){case"value":break;case"multiple":me=q;default:i.hasOwnProperty(u)||bt(e,t,u,null,i,q)}for(d in i)if(u=i[d],q=s[d],i.hasOwnProperty(d)&&(u!=null||q!=null))switch(d){case"value":ce=u;break;case"defaultValue":j=u;break;case"multiple":p=u;default:u!==q&&bt(e,t,d,u,i,q)}t=j,s=p,i=me,ce!=null?Jn(e,!!s,ce,!1):!!i!=!!s&&(t!=null?Jn(e,!!s,t,!0):Jn(e,!!s,s?[]:"",!1));return;case"textarea":me=ce=null;for(j in s)if(d=s[j],s.hasOwnProperty(j)&&d!=null&&!i.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:bt(e,t,j,null,i,d)}for(p in i)if(d=i[p],u=s[p],i.hasOwnProperty(p)&&(d!=null||u!=null))switch(p){case"value":ce=d;break;case"defaultValue":me=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==u&&bt(e,t,p,d,i,u)}Jf(e,ce,me);return;case"option":for(var Fe in s)if(ce=s[Fe],s.hasOwnProperty(Fe)&&ce!=null&&!i.hasOwnProperty(Fe))switch(Fe){case"selected":e.selected=!1;break;default:bt(e,t,Fe,null,i,ce)}for(q in i)if(ce=i[q],me=s[q],i.hasOwnProperty(q)&&ce!==me&&(ce!=null||me!=null))switch(q){case"selected":e.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:bt(e,t,q,ce,i,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in s)ce=s[Ye],s.hasOwnProperty(Ye)&&ce!=null&&!i.hasOwnProperty(Ye)&&bt(e,t,Ye,null,i,ce);for(ie in i)if(ce=i[ie],me=s[ie],i.hasOwnProperty(ie)&&ce!==me&&(ce!=null||me!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(l(137,t));break;default:bt(e,t,ie,ce,i,me)}return;default:if(lc(t)){for(var yt in s)ce=s[yt],s.hasOwnProperty(yt)&&ce!==void 0&&!i.hasOwnProperty(yt)&&Yd(e,t,yt,void 0,i,ce);for(ge in i)ce=i[ge],me=s[ge],!i.hasOwnProperty(ge)||ce===me||ce===void 0&&me===void 0||Yd(e,t,ge,ce,i,me);return}}for(var te in s)ce=s[te],s.hasOwnProperty(te)&&ce!=null&&!i.hasOwnProperty(te)&&bt(e,t,te,null,i,ce);for(ye in i)ce=i[ye],me=s[ye],!i.hasOwnProperty(ye)||ce===me||ce==null&&me==null||bt(e,t,ye,ce,i,me)}function sg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),i=0;i<s.length;i++){var d=s[i],u=d.transferSize,p=d.initiatorType,j=d.duration;if(u&&j&&sg(p)){for(p=0,j=d.responseEnd,i+=1;i<s.length;i++){var q=s[i],ie=q.startTime;if(ie>j)break;var ge=q.transferSize,ye=q.initiatorType;ge&&sg(ye)&&(q=q.responseEnd,p+=ge*(q<j?1:(j-ie)/(q-ie)))}if(--i,t+=8*(u+p)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Xd=null,Qd=null;function lo(e){return e.nodeType===9?e:e.ownerDocument}function ng(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zd=null;function Tv(){var e=window.event;return e&&e.type==="popstate"?e===Zd?!1:(Zd=e,!0):(Zd=null,!1)}var ig=typeof setTimeout=="function"?setTimeout:void 0,Mv=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,Ov=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(e){return lg.resolve(null).then(e).catch(Dv)}:ig;function Dv(e){setTimeout(function(){throw e})}function ln(e){return e==="head"}function og(e,t){var s=t,i=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(i===0){e.removeChild(d),Tr(t);return}i--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")i++;else if(s==="html")Ri(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ri(s);for(var u=s.firstChild;u;){var p=u.nextSibling,j=u.nodeName;u[Xr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&u.rel.toLowerCase()==="stylesheet"||s.removeChild(u),u=p}}else s==="body"&&Ri(e.ownerDocument.body);s=d}while(s);Tr(t)}function cg(e,t){var s=e;e=0;do{var i=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=i}while(s)}function Kd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Kd(s),sc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Lv(e,t,s,i){for(;e.nodeType===1;){var d=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Xr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Fa(e.nextSibling),e===null)break}return null}function Uv(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Fa(e.nextSibling),e===null))return null;return e}function dg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Fa(e.nextSibling),e===null))return null;return e}function Jd(e){return e.data==="$?"||e.data==="$~"}function eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function zv(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var i=function(){t(),s.removeEventListener("DOMContentLoaded",i)};s.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Fa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var tu=null;function ug(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Fa(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function fg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function mg(e,t,s){switch(t=lo(s),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Ri(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);sc(e)}var Ba=new Map,hg=new Set;function oo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _s=I.d;I.d={f:Fv,r:Bv,D:qv,C:Hv,L:$v,m:Pv,X:Iv,S:Gv,M:Vv};function Fv(){var e=_s.f(),t=Jl();return e||t}function Bv(e){var t=Wn(e);t!==null&&t.tag===5&&t.type==="form"?Th(t):_s.r(e)}var Cr=typeof document>"u"?null:document;function gg(e,t,s){var i=Cr;if(i&&typeof t=="string"&&t){var d=Ta(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),hg.has(d)||(hg.add(d),e={rel:e,crossOrigin:s,href:t},i.querySelector(d)===null&&(t=i.createElement("link"),Jt(t,"link",e),Gt(t),i.head.appendChild(t)))}}function qv(e){_s.D(e),gg("dns-prefetch",e,null)}function Hv(e,t){_s.C(e,t),gg("preconnect",e,t)}function $v(e,t,s){_s.L(e,t,s);var i=Cr;if(i&&e&&t){var d='link[rel="preload"][as="'+Ta(t)+'"]';t==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+Ta(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+Ta(s.imageSizes)+'"]')):d+='[href="'+Ta(e)+'"]';var u=d;switch(t){case"style":u=_r(e);break;case"script":u=Rr(e)}Ba.has(u)||(e=v({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Ba.set(u,e),i.querySelector(d)!==null||t==="style"&&i.querySelector(Ti(u))||t==="script"&&i.querySelector(Mi(u))||(t=i.createElement("link"),Jt(t,"link",e),Gt(t),i.head.appendChild(t)))}}function Pv(e,t){_s.m(e,t);var s=Cr;if(s&&e){var i=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Ta(i)+'"][href="'+Ta(e)+'"]',u=d;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Rr(e)}if(!Ba.has(u)&&(e=v({rel:"modulepreload",href:e},t),Ba.set(u,e),s.querySelector(d)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Mi(u)))return}i=s.createElement("link"),Jt(i,"link",e),Gt(i),s.head.appendChild(i)}}}function Gv(e,t,s){_s.S(e,t,s);var i=Cr;if(i&&e){var d=Zn(i).hoistableStyles,u=_r(e);t=t||"default";var p=d.get(u);if(!p){var j={loading:0,preload:null};if(p=i.querySelector(Ti(u)))j.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Ba.get(u))&&au(e,s);var q=p=i.createElement("link");Gt(q),Jt(q,"link",e),q._p=new Promise(function(ie,ge){q.onload=ie,q.onerror=ge}),q.addEventListener("load",function(){j.loading|=1}),q.addEventListener("error",function(){j.loading|=2}),j.loading|=4,co(p,t,i)}p={type:"stylesheet",instance:p,count:1,state:j},d.set(u,p)}}}function Iv(e,t){_s.X(e,t);var s=Cr;if(s&&e){var i=Zn(s).hoistableScripts,d=Rr(e),u=i.get(d);u||(u=s.querySelector(Mi(d)),u||(e=v({src:e,async:!0},t),(t=Ba.get(d))&&su(e,t),u=s.createElement("script"),Gt(u),Jt(u,"link",e),s.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(d,u))}}function Vv(e,t){_s.M(e,t);var s=Cr;if(s&&e){var i=Zn(s).hoistableScripts,d=Rr(e),u=i.get(d);u||(u=s.querySelector(Mi(d)),u||(e=v({src:e,async:!0,type:"module"},t),(t=Ba.get(d))&&su(e,t),u=s.createElement("script"),Gt(u),Jt(u,"link",e),s.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(d,u))}}function xg(e,t,s,i){var d=(d=xe.current)?oo(d):null;if(!d)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=_r(s.href),s=Zn(d).hoistableStyles,i=s.get(t),i||(i={type:"style",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=_r(s.href);var u=Zn(d).hoistableStyles,p=u.get(e);if(p||(d=d.ownerDocument||d,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,p),(u=d.querySelector(Ti(e)))&&!u._p&&(p.instance=u,p.state.loading=5),Ba.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Ba.set(e,s),u||Yv(d,e,s,p.state))),t&&i===null)throw Error(l(528,""));return p}if(t&&i!==null)throw Error(l(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Rr(s),s=Zn(d).hoistableScripts,i=s.get(t),i||(i={type:"script",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function _r(e){return'href="'+Ta(e)+'"'}function Ti(e){return'link[rel="stylesheet"]['+e+"]"}function pg(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Yv(e,t,s,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Jt(t,"link",s),Gt(t),e.head.appendChild(t))}function Rr(e){return'[src="'+Ta(e)+'"]'}function Mi(e){return"script[async]"+e}function bg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Ta(s.href)+'"]');if(i)return t.instance=i,Gt(i),i;var d=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Gt(i),Jt(i,"style",d),co(i,s.precedence,e),t.instance=i;case"stylesheet":d=_r(s.href);var u=e.querySelector(Ti(d));if(u)return t.state.loading|=4,t.instance=u,Gt(u),u;i=pg(s),(d=Ba.get(d))&&au(i,d),u=(e.ownerDocument||e).createElement("link"),Gt(u);var p=u;return p._p=new Promise(function(j,q){p.onload=j,p.onerror=q}),Jt(u,"link",i),t.state.loading|=4,co(u,s.precedence,e),t.instance=u;case"script":return u=Rr(s.src),(d=e.querySelector(Mi(u)))?(t.instance=d,Gt(d),d):(i=s,(d=Ba.get(u))&&(i=v({},s),su(i,d)),e=e.ownerDocument||e,d=e.createElement("script"),Gt(d),Jt(d,"link",i),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,co(i,s.precedence,e));return t.instance}function co(e,t,s){for(var i=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=i.length?i[i.length-1]:null,u=d,p=0;p<i.length;p++){var j=i[p];if(j.dataset.precedence===t)u=j;else if(u!==d)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function au(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function su(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var uo=null;function yg(e,t,s){if(uo===null){var i=new Map,d=uo=new Map;d.set(s,i)}else d=uo,i=d.get(s),i||(i=new Map,d.set(s,i));if(i.has(e))return i;for(i.set(e,null),s=s.getElementsByTagName(e),d=0;d<s.length;d++){var u=s[d];if(!(u[Xr]||u[Qt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var p=u.getAttribute(t)||"";p=e+p;var j=i.get(p);j?j.push(u):i.set(p,[u])}}return i}function vg(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function Xv(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function wg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Qv(e,t,s,i){if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=_r(i.href),u=t.querySelector(Ti(d));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=fo.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=u,Gt(u);return}u=t.ownerDocument||t,i=pg(i),(d=Ba.get(d))&&au(i,d),u=u.createElement("link"),Gt(u);var p=u;p._p=new Promise(function(j,q){p.onload=j,p.onerror=q}),Jt(u,"link",i),s.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=fo.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var nu=0;function Wv(e,t){return e.stylesheets&&e.count===0&&ho(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var i=setTimeout(function(){if(e.stylesheets&&ho(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&nu===0&&(nu=62500*Rv());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ho(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>nu?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(d)}}:null}function fo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ho(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mo=null;function ho(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mo=new Map,t.forEach(Zv,e),mo=null,fo.call(e))}function Zv(e,t){if(!(t.state.loading&4)){var s=mo.get(e);if(s)var i=s.get(null);else{s=new Map,mo.set(e,s);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<d.length;u++){var p=d[u];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(s.set(p.dataset.precedence,p),i=p)}i&&s.set(null,i)}d=t.instance,p=d.getAttribute("data-precedence"),u=s.get(p)||i,u===i&&s.set(null,d),s.set(p,d),this.count++,i=fo.bind(this),d.addEventListener("load",i),d.addEventListener("error",i),u?u.parentNode.insertBefore(d,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var Oi={$$typeof:W,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Kv(e,t,s,i,d,u,p,j,q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.hiddenUpdates=_a(null),this.identifierPrefix=i,this.onUncaughtError=d,this.onCaughtError=u,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Ng(e,t,s,i,d,u,p,j,q,ie,ge,ye){return e=new Kv(e,t,s,p,q,ie,ge,ye,j),t=1,u===!0&&(t|=24),u=va(3,null,null,t),e.current=u,u.stateNode=e,t=zc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:i,isDehydrated:s,cache:t},Hc(u),e}function jg(e){return e?(e=lr,e):lr}function Sg(e,t,s,i,d,u){d=jg(d),i.context===null?i.context=d:i.pendingContext=d,i=Qs(t),i.payload={element:s},u=u===void 0?null:u,u!==null&&(i.callback=u),s=Ws(e,i,t),s!==null&&(ga(s,e,t),ui(s,e,t))}function kg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ru(e,t){kg(e,t),(e=e.alternate)&&kg(e,t)}function Eg(e){if(e.tag===13||e.tag===31){var t=kn(e,67108864);t!==null&&ga(t,e,67108864),ru(e,67108864)}}function Ag(e){if(e.tag===13||e.tag===31){var t=ka();t=ec(t);var s=kn(e,t);s!==null&&ga(s,e,t),ru(e,t)}}var go=!0;function Jv(e,t,s,i){var d=H.T;H.T=null;var u=I.p;try{I.p=2,iu(e,t,s,i)}finally{I.p=u,H.T=d}}function e1(e,t,s,i){var d=H.T;H.T=null;var u=I.p;try{I.p=8,iu(e,t,s,i)}finally{I.p=u,H.T=d}}function iu(e,t,s,i){if(go){var d=lu(i);if(d===null)Vd(e,t,i,xo,s),_g(e,i);else if(a1(d,e,t,s,i))i.stopPropagation();else if(_g(e,i),t&4&&-1<t1.indexOf(e)){for(;d!==null;){var u=Wn(d);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var p=J(u.pendingLanes);if(p!==0){var j=u;for(j.pendingLanes|=2,j.entangledLanes|=2;p;){var q=1<<31-vt(p);j.entanglements[1]|=q,p&=~q}as(u),(ft&6)===0&&(Zl=ae()+500,Ai(0))}}break;case 31:case 13:j=kn(u,2),j!==null&&ga(j,u,2),Jl(),ru(u,2)}if(u=lu(i),u===null&&Vd(e,t,i,xo,s),u===d)break;d=u}d!==null&&i.stopPropagation()}else Vd(e,t,i,null,s)}}function lu(e){return e=cc(e),ou(e)}var xo=null;function ou(e){if(xo=null,e=Qn(e),e!==null){var t=f(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=m(t),e!==null)return e;e=null}else if(s===31){if(e=g(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xo=e,null}function Cg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ke:return 2;case Ee:return 8;case Z:case Ne:return 32;case Se:return 268435456;default:return 32}default:return 32}}var cu=!1,on=null,cn=null,dn=null,Di=new Map,Li=new Map,un=[],t1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _g(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(t.pointerId)}}function Ui(e,t,s,i,d,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:u,targetContainers:[d]},t!==null&&(t=Wn(t),t!==null&&Eg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function a1(e,t,s,i,d){switch(t){case"focusin":return on=Ui(on,e,t,s,i,d),!0;case"dragenter":return cn=Ui(cn,e,t,s,i,d),!0;case"mouseover":return dn=Ui(dn,e,t,s,i,d),!0;case"pointerover":var u=d.pointerId;return Di.set(u,Ui(Di.get(u)||null,e,t,s,i,d)),!0;case"gotpointercapture":return u=d.pointerId,Li.set(u,Ui(Li.get(u)||null,e,t,s,i,d)),!0}return!1}function Rg(e){var t=Qn(e.target);if(t!==null){var s=f(t);if(s!==null){if(t=s.tag,t===13){if(t=m(s),t!==null){e.blockedOn=t,Gf(e.priority,function(){Ag(s)});return}}else if(t===31){if(t=g(s),t!==null){e.blockedOn=t,Gf(e.priority,function(){Ag(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=lu(e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);oc=i,s.target.dispatchEvent(i),oc=null}else return t=Wn(s),t!==null&&Eg(t),e.blockedOn=s,!1;t.shift()}return!0}function Tg(e,t,s){po(e)&&s.delete(t)}function s1(){cu=!1,on!==null&&po(on)&&(on=null),cn!==null&&po(cn)&&(cn=null),dn!==null&&po(dn)&&(dn=null),Di.forEach(Tg),Li.forEach(Tg)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,cu||(cu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,s1)))}var yo=null;function Mg(e){yo!==e&&(yo=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yo===e&&(yo=null);for(var t=0;t<e.length;t+=3){var s=e[t],i=e[t+1],d=e[t+2];if(typeof i!="function"){if(ou(i||s)===null)continue;break}var u=Wn(s);u!==null&&(e.splice(t,3),t-=3,ld(u,{pending:!0,data:d,method:s.method,action:i},i,d))}}))}function Tr(e){function t(q){return bo(q,e)}on!==null&&bo(on,e),cn!==null&&bo(cn,e),dn!==null&&bo(dn,e),Di.forEach(t),Li.forEach(t);for(var s=0;s<un.length;s++){var i=un[s];i.blockedOn===e&&(i.blockedOn=null)}for(;0<un.length&&(s=un[0],s.blockedOn===null);)Rg(s),s.blockedOn===null&&un.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(i=0;i<s.length;i+=3){var d=s[i],u=s[i+1],p=d[ca]||null;if(typeof u=="function")p||Mg(s);else if(p){var j=null;if(u&&u.hasAttribute("formAction")){if(d=u,p=u[ca]||null)j=p.formAction;else if(ou(d)!==null)continue}else j=p.action;typeof j=="function"?s[i+1]=j:(s.splice(i,3),i-=3),Mg(s)}}}function Og(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(p){return d=p})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),i||setTimeout(s,20)}function s(){if(!i&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function du(e){this._internalRoot=e}vo.prototype.render=du.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var s=t.current,i=ka();Sg(s,i,e,t,null,null)},vo.prototype.unmount=du.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sg(e.current,2,null,e,null,null),Jl(),t[Xn]=null}};function vo(e){this._internalRoot=e}vo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pf();e={blockedOn:null,target:e,priority:t};for(var s=0;s<un.length&&t!==0&&t<un[s].priority;s++);un.splice(s,0,e),s===0&&Rg(e)}};var Dg=r.version;if(Dg!=="19.2.0")throw Error(l(527,Dg,"19.2.0"));I.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=x(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var n1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{ze=wo.inject(n1),Ie=wo}catch{}}return Fi.createRoot=function(e,t){if(!c(e))throw Error(l(299));var s=!1,i="",d=Hh,u=$h,p=Ph;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Ng(e,1,!1,null,null,s,i,null,d,u,p,Og),e[Xn]=t.current,Id(e),new du(t)},Fi.hydrateRoot=function(e,t,s){if(!c(e))throw Error(l(299));var i=!1,d="",u=Hh,p=$h,j=Ph,q=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(u=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(j=s.onRecoverableError),s.formState!==void 0&&(q=s.formState)),t=Ng(e,1,!0,t,s??null,i,d,q,u,p,j,Og),t.context=jg(null),s=t.current,i=ka(),i=ec(i),d=Qs(i),d.callback=null,Ws(s,d,i),s=i,t.current.lanes=s,oa(t,s),as(t),e[Xn]=t.current,Id(e),new vo(t)},Fi.version="19.2.0",Fi}var Gg;function m1(){if(Gg)return mu.exports;Gg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),mu.exports=f1(),mu.exports}var h1=m1();var Ig="popstate";function g1(n={}){function r(l,c){let{pathname:f,search:m,hash:g}=l.location;return Xu("",{pathname:f,search:m,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function o(l,c){return typeof c=="string"?c:Xi(c)}return p1(r,o,null,n)}function Et(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Ca(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function x1(){return Math.random().toString(36).substring(2,10)}function Vg(n,r){return{usr:n.state,key:n.key,idx:r}}function Xu(n,r,o=null,l){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?Fr(r):r,state:o,key:r&&r.key||l||x1()}}function Xi({pathname:n="/",search:r="",hash:o=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Fr(n){let r={};if(n){let o=n.indexOf("#");o>=0&&(r.hash=n.substring(o),n=n.substring(0,o));let l=n.indexOf("?");l>=0&&(r.search=n.substring(l),n=n.substring(0,l)),n&&(r.pathname=n)}return r}function p1(n,r,o,l={}){let{window:c=document.defaultView,v5Compat:f=!1}=l,m=c.history,g="POP",b=null,x=y();x==null&&(x=0,m.replaceState({...m.state,idx:x},""));function y(){return(m.state||{idx:null}).idx}function v(){g="POP";let k=y(),T=k==null?null:k-x;x=k,b&&b({action:g,location:D.location,delta:T})}function S(k,T){g="PUSH";let O=Xu(D.location,k,T);x=y()+1;let W=Vg(O,x),U=D.createHref(O);try{m.pushState(W,"",U)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;c.location.assign(U)}f&&b&&b({action:g,location:D.location,delta:1})}function R(k,T){g="REPLACE";let O=Xu(D.location,k,T);x=y();let W=Vg(O,x),U=D.createHref(O);m.replaceState(W,"",U),f&&b&&b({action:g,location:D.location,delta:0})}function C(k){return b1(k)}let D={get action(){return g},get location(){return n(c,m)},listen(k){if(b)throw new Error("A history only accepts one active listener");return c.addEventListener(Ig,v),b=k,()=>{c.removeEventListener(Ig,v),b=null}},createHref(k){return r(c,k)},createURL:C,encodeLocation(k){let T=C(k);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:S,replace:R,go(k){return m.go(k)}};return D}function b1(n,r=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Et(o,"No window.location.(origin|href) available to create URL");let l=typeof n=="string"?n:Xi(n);return l=l.replace(/ $/,"%20"),!r&&l.startsWith("//")&&(l=o+l),new URL(l,o)}function op(n,r,o="/"){return y1(n,r,o,!1)}function y1(n,r,o,l){let c=typeof r=="string"?Fr(r):r,f=zs(c.pathname||"/",o);if(f==null)return null;let m=cp(n);v1(m);let g=null;for(let b=0;g==null&&b<m.length;++b){let x=T1(f);g=_1(m[b],x,l)}return g}function cp(n,r=[],o=[],l="",c=!1){let f=(m,g,b=c,x)=>{let y={relativePath:x===void 0?m.path||"":x,caseSensitive:m.caseSensitive===!0,childrenIndex:g,route:m};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(l)&&b)return;Et(y.relativePath.startsWith(l),`Absolute route path "${y.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(l.length)}let v=Os([l,y.relativePath]),S=o.concat(y);m.children&&m.children.length>0&&(Et(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),cp(m.children,r,S,v,b)),!(m.path==null&&!m.index)&&r.push({path:v,score:A1(v,m.index),routesMeta:S})};return n.forEach((m,g)=>{if(m.path===""||!m.path?.includes("?"))f(m,g);else for(let b of dp(m.path))f(m,g,!0,b)}),r}function dp(n){let r=n.split("/");if(r.length===0)return[];let[o,...l]=r,c=o.endsWith("?"),f=o.replace(/\?$/,"");if(l.length===0)return c?[f,""]:[f];let m=dp(l.join("/")),g=[];return g.push(...m.map(b=>b===""?f:[f,b].join("/"))),c&&g.push(...m),g.map(b=>n.startsWith("/")&&b===""?"/":b)}function v1(n){n.sort((r,o)=>r.score!==o.score?o.score-r.score:C1(r.routesMeta.map(l=>l.childrenIndex),o.routesMeta.map(l=>l.childrenIndex)))}var w1=/^:[\w-]+$/,N1=3,j1=2,S1=1,k1=10,E1=-2,Yg=n=>n==="*";function A1(n,r){let o=n.split("/"),l=o.length;return o.some(Yg)&&(l+=E1),r&&(l+=j1),o.filter(c=>!Yg(c)).reduce((c,f)=>c+(w1.test(f)?N1:f===""?S1:k1),l)}function C1(n,r){return n.length===r.length&&n.slice(0,-1).every((l,c)=>l===r[c])?n[n.length-1]-r[r.length-1]:0}function _1(n,r,o=!1){let{routesMeta:l}=n,c={},f="/",m=[];for(let g=0;g<l.length;++g){let b=l[g],x=g===l.length-1,y=f==="/"?r:r.slice(f.length)||"/",v=Do({path:b.relativePath,caseSensitive:b.caseSensitive,end:x},y),S=b.route;if(!v&&x&&o&&!l[l.length-1].route.index&&(v=Do({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},y)),!v)return null;Object.assign(c,v.params),m.push({params:c,pathname:Os([f,v.pathname]),pathnameBase:U1(Os([f,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(f=Os([f,v.pathnameBase]))}return m}function Do(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[o,l]=R1(n.path,n.caseSensitive,n.end),c=r.match(o);if(!c)return null;let f=c[0],m=f.replace(/(.)\/+$/,"$1"),g=c.slice(1);return{params:l.reduce((x,{paramName:y,isOptional:v},S)=>{if(y==="*"){let C=g[S]||"";m=f.slice(0,f.length-C.length).replace(/(.)\/+$/,"$1")}const R=g[S];return v&&!R?x[y]=void 0:x[y]=(R||"").replace(/%2F/g,"/"),x},{}),pathname:f,pathnameBase:m,pattern:n}}function R1(n,r=!1,o=!0){Ca(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let l=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,g,b)=>(l.push({paramName:g,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(l.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),l]}function T1(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ca(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function zs(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let o=r.endsWith("/")?r.length-1:r.length,l=n.charAt(o);return l&&l!=="/"?null:n.slice(o)||"/"}var M1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O1=n=>M1.test(n);function D1(n,r="/"){let{pathname:o,search:l="",hash:c=""}=typeof n=="string"?Fr(n):n,f;if(o)if(O1(o))f=o;else{if(o.includes("//")){let m=o;o=o.replace(/\/\/+/g,"/"),Ca(!1,`Pathnames cannot have embedded double slashes - normalizing ${m} -> ${o}`)}o.startsWith("/")?f=Xg(o.substring(1),"/"):f=Xg(o,r)}else f=r;return{pathname:f,search:z1(l),hash:F1(c)}}function Xg(n,r){let o=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?o.length>1&&o.pop():c!=="."&&o.push(c)}),o.length>1?o.join("/"):"/"}function pu(n,r,o,l){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L1(n){return n.filter((r,o)=>o===0||r.route.path&&r.route.path.length>0)}function mf(n){let r=L1(n);return r.map((o,l)=>l===r.length-1?o.pathname:o.pathnameBase)}function hf(n,r,o,l=!1){let c;typeof n=="string"?c=Fr(n):(c={...n},Et(!c.pathname||!c.pathname.includes("?"),pu("?","pathname","search",c)),Et(!c.pathname||!c.pathname.includes("#"),pu("#","pathname","hash",c)),Et(!c.search||!c.search.includes("#"),pu("#","search","hash",c)));let f=n===""||c.pathname==="",m=f?"/":c.pathname,g;if(m==null)g=o;else{let v=r.length-1;if(!l&&m.startsWith("..")){let S=m.split("/");for(;S[0]==="..";)S.shift(),v-=1;c.pathname=S.join("/")}g=v>=0?r[v]:"/"}let b=D1(c,g),x=m&&m!=="/"&&m.endsWith("/"),y=(f||m===".")&&o.endsWith("/");return!b.pathname.endsWith("/")&&(x||y)&&(b.pathname+="/"),b}var Os=n=>n.join("/").replace(/\/\/+/g,"/"),U1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),z1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,F1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function B1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var up=["POST","PUT","PATCH","DELETE"];new Set(up);var q1=["GET",...up];new Set(q1);var Br=h.createContext(null);Br.displayName="DataRouter";var Ho=h.createContext(null);Ho.displayName="DataRouterState";h.createContext(!1);var fp=h.createContext({isTransitioning:!1});fp.displayName="ViewTransition";var H1=h.createContext(new Map);H1.displayName="Fetchers";var $1=h.createContext(null);$1.displayName="Await";var Xa=h.createContext(null);Xa.displayName="Navigation";var Ji=h.createContext(null);Ji.displayName="Location";var $a=h.createContext({outlet:null,matches:[],isDataRoute:!1});$a.displayName="Route";var gf=h.createContext(null);gf.displayName="RouteError";function P1(n,{relative:r}={}){Et(qr(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:l}=h.useContext(Xa),{hash:c,pathname:f,search:m}=el(n,{relative:r}),g=f;return o!=="/"&&(g=f==="/"?o:Os([o,f])),l.createHref({pathname:g,search:m,hash:c})}function qr(){return h.useContext(Ji)!=null}function ra(){return Et(qr(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Ji).location}var mp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hp(n){h.useContext(Xa).static||h.useLayoutEffect(n)}function Xt(){let{isDataRoute:n}=h.useContext($a);return n?nw():G1()}function G1(){Et(qr(),"useNavigate() may be used only in the context of a <Router> component.");let n=h.useContext(Br),{basename:r,navigator:o}=h.useContext(Xa),{matches:l}=h.useContext($a),{pathname:c}=ra(),f=JSON.stringify(mf(l)),m=h.useRef(!1);return hp(()=>{m.current=!0}),h.useCallback((b,x={})=>{if(Ca(m.current,mp),!m.current)return;if(typeof b=="number"){o.go(b);return}let y=hf(b,JSON.parse(f),c,x.relative==="path");n==null&&r!=="/"&&(y.pathname=y.pathname==="/"?r:Os([r,y.pathname])),(x.replace?o.replace:o.push)(y,x.state,x)},[r,o,f,c,n])}var I1=h.createContext(null);function V1(n){let r=h.useContext($a).outlet;return h.useMemo(()=>r&&h.createElement(I1.Provider,{value:n},r),[r,n])}function gp(){let{matches:n}=h.useContext($a),r=n[n.length-1];return r?r.params:{}}function el(n,{relative:r}={}){let{matches:o}=h.useContext($a),{pathname:l}=ra(),c=JSON.stringify(mf(o));return h.useMemo(()=>hf(n,JSON.parse(c),l,r==="path"),[n,c,l,r])}function Y1(n,r){return xp(n,r)}function xp(n,r,o,l,c){Et(qr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=h.useContext(Xa),{matches:m}=h.useContext($a),g=m[m.length-1],b=g?g.params:{},x=g?g.pathname:"/",y=g?g.pathnameBase:"/",v=g&&g.route;{let O=v&&v.path||"";pp(x,!v||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let S=ra(),R;if(r){let O=typeof r=="string"?Fr(r):r;Et(y==="/"||O.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${O.pathname}" was given in the \`location\` prop.`),R=O}else R=S;let C=R.pathname||"/",D=C;if(y!=="/"){let O=y.replace(/^\//,"").split("/");D="/"+C.replace(/^\//,"").split("/").slice(O.length).join("/")}let k=op(n,{pathname:D});Ca(v||k!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Ca(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=K1(k&&k.map(O=>Object.assign({},O,{params:Object.assign({},b,O.params),pathname:Os([y,f.encodeLocation?f.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?y:Os([y,f.encodeLocation?f.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),m,o,l,c);return r&&T?h.createElement(Ji.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},T):T}function X1(){let n=sw(),r=B1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),o=n instanceof Error?n.stack:null,l="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:l},f={padding:"2px 4px",backgroundColor:l},m=null;return console.error("Error handled by React Router default ErrorBoundary:",n),m=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:f},"ErrorBoundary")," or"," ",h.createElement("code",{style:f},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},r),o?h.createElement("pre",{style:c},o):null,m)}var Q1=h.createElement(X1,null),W1=class extends h.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){this.props.onError?this.props.onError(n,r):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?h.createElement($a.Provider,{value:this.props.routeContext},h.createElement(gf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Z1({routeContext:n,match:r,children:o}){let l=h.useContext(Br);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement($a.Provider,{value:n},o)}function K1(n,r=[],o=null,l=null,c=null){if(n==null){if(!o)return null;if(o.errors)n=o.matches;else if(r.length===0&&!o.initialized&&o.matches.length>0)n=o.matches;else return null}let f=n,m=o?.errors;if(m!=null){let y=f.findIndex(v=>v.route.id&&m?.[v.route.id]!==void 0);Et(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),f=f.slice(0,Math.min(f.length,y+1))}let g=!1,b=-1;if(o)for(let y=0;y<f.length;y++){let v=f[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(b=y),v.route.id){let{loaderData:S,errors:R}=o,C=v.route.loader&&!S.hasOwnProperty(v.route.id)&&(!R||R[v.route.id]===void 0);if(v.route.lazy||C){g=!0,b>=0?f=f.slice(0,b+1):f=[f[0]];break}}}let x=o&&l?(y,v)=>{l(y,{location:o.location,params:o.matches?.[0]?.params??{},errorInfo:v})}:void 0;return f.reduceRight((y,v,S)=>{let R,C=!1,D=null,k=null;o&&(R=m&&v.route.id?m[v.route.id]:void 0,D=v.route.errorElement||Q1,g&&(b<0&&S===0?(pp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,k=null):b===S&&(C=!0,k=v.route.hydrateFallbackElement||null)));let T=r.concat(f.slice(0,S+1)),O=()=>{let W;return R?W=D:C?W=k:v.route.Component?W=h.createElement(v.route.Component,null):v.route.element?W=v.route.element:W=y,h.createElement(Z1,{match:v,routeContext:{outlet:y,matches:T,isDataRoute:o!=null},children:W})};return o&&(v.route.ErrorBoundary||v.route.errorElement||S===0)?h.createElement(W1,{location:o.location,revalidation:o.revalidation,component:D,error:R,children:O(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:x}):O()},null)}function xf(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J1(n){let r=h.useContext(Br);return Et(r,xf(n)),r}function ew(n){let r=h.useContext(Ho);return Et(r,xf(n)),r}function tw(n){let r=h.useContext($a);return Et(r,xf(n)),r}function pf(n){let r=tw(n),o=r.matches[r.matches.length-1];return Et(o.route.id,`${n} can only be used on routes that contain a unique "id"`),o.route.id}function aw(){return pf("useRouteId")}function sw(){let n=h.useContext(gf),r=ew("useRouteError"),o=pf("useRouteError");return n!==void 0?n:r.errors?.[o]}function nw(){let{router:n}=J1("useNavigate"),r=pf("useNavigate"),o=h.useRef(!1);return hp(()=>{o.current=!0}),h.useCallback(async(c,f={})=>{Ca(o.current,mp),o.current&&(typeof c=="number"?n.navigate(c):await n.navigate(c,{fromRouteId:r,...f}))},[n,r])}var Qg={};function pp(n,r,o){!r&&!Qg[n]&&(Qg[n]=!0,Ca(!1,o))}h.memo(rw);function rw({routes:n,future:r,state:o,unstable_onError:l}){return xp(n,void 0,o,l,r)}function la({to:n,replace:r,state:o,relative:l}){Et(qr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=h.useContext(Xa);Ca(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=h.useContext($a),{pathname:m}=ra(),g=Xt(),b=hf(n,mf(f),m,l==="path"),x=JSON.stringify(b);return h.useEffect(()=>{g(JSON.parse(x),{replace:r,state:o,relative:l})},[g,x,l,r,o]),null}function iw(n){return V1(n.context)}function mt(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lw({basename:n="/",children:r=null,location:o,navigationType:l="POP",navigator:c,static:f=!1}){Et(!qr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=n.replace(/^\/*/,"/"),g=h.useMemo(()=>({basename:m,navigator:c,static:f,future:{}}),[m,c,f]);typeof o=="string"&&(o=Fr(o));let{pathname:b="/",search:x="",hash:y="",state:v=null,key:S="default"}=o,R=h.useMemo(()=>{let C=zs(b,m);return C==null?null:{location:{pathname:C,search:x,hash:y,state:v,key:S},navigationType:l}},[m,b,x,y,v,S,l]);return Ca(R!=null,`<Router basename="${m}"> is not able to match the URL "${b}${x}${y}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:h.createElement(Xa.Provider,{value:g},h.createElement(Ji.Provider,{children:r,value:R}))}function ow({children:n,location:r}){return Y1(Qu(n),r)}function Qu(n,r=[]){let o=[];return h.Children.forEach(n,(l,c)=>{if(!h.isValidElement(l))return;let f=[...r,c];if(l.type===h.Fragment){o.push.apply(o,Qu(l.props.children,f));return}Et(l.type===mt,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!l.props.index||!l.props.children,"An index route cannot have child routes.");let m={id:l.props.id||f.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(m.children=Qu(l.props.children,f)),o.push(m)}),o}var Co="get",_o="application/x-www-form-urlencoded";function $o(n){return n!=null&&typeof n.tagName=="string"}function cw(n){return $o(n)&&n.tagName.toLowerCase()==="button"}function dw(n){return $o(n)&&n.tagName.toLowerCase()==="form"}function uw(n){return $o(n)&&n.tagName.toLowerCase()==="input"}function fw(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function mw(n,r){return n.button===0&&(!r||r==="_self")&&!fw(n)}function Wu(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,o)=>{let l=n[o];return r.concat(Array.isArray(l)?l.map(c=>[o,c]):[[o,l]])},[]))}function hw(n,r){let o=Wu(n);return r&&r.forEach((l,c)=>{o.has(c)||r.getAll(c).forEach(f=>{o.append(c,f)})}),o}var No=null;function gw(){if(No===null)try{new FormData(document.createElement("form"),0),No=!1}catch{No=!0}return No}var xw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bu(n){return n!=null&&!xw.has(n)?(Ca(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_o}"`),null):n}function pw(n,r){let o,l,c,f,m;if(dw(n)){let g=n.getAttribute("action");l=g?zs(g,r):null,o=n.getAttribute("method")||Co,c=bu(n.getAttribute("enctype"))||_o,f=new FormData(n)}else if(cw(n)||uw(n)&&(n.type==="submit"||n.type==="image")){let g=n.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=n.getAttribute("formaction")||g.getAttribute("action");if(l=b?zs(b,r):null,o=n.getAttribute("formmethod")||g.getAttribute("method")||Co,c=bu(n.getAttribute("formenctype"))||bu(g.getAttribute("enctype"))||_o,f=new FormData(g,n),!gw()){let{name:x,type:y,value:v}=n;if(y==="image"){let S=x?`${x}.`:"";f.append(`${S}x`,"0"),f.append(`${S}y`,"0")}else x&&f.append(x,v)}}else{if($o(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Co,l=null,c=_o,m=n}return f&&c==="text/plain"&&(m=f,f=void 0),{action:l,method:o.toLowerCase(),encType:c,formData:f,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bf(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function bw(n,r,o){let l=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return l.pathname==="/"?l.pathname=`_root.${o}`:r&&zs(l.pathname,r)==="/"?l.pathname=`${r.replace(/\/$/,"")}/_root.${o}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${o}`,l}async function yw(n,r){if(n.id in r)return r[n.id];try{let o=await import(n.module);return r[n.id]=o,o}catch(o){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vw(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ww(n,r,o){let l=await Promise.all(n.map(async c=>{let f=r.routes[c.route.id];if(f){let m=await yw(f,o);return m.links?m.links():[]}return[]}));return kw(l.flat(1).filter(vw).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Wg(n,r,o,l,c,f){let m=(b,x)=>o[x]?b.route.id!==o[x].route.id:!0,g=(b,x)=>o[x].pathname!==b.pathname||o[x].route.path?.endsWith("*")&&o[x].params["*"]!==b.params["*"];return f==="assets"?r.filter((b,x)=>m(b,x)||g(b,x)):f==="data"?r.filter((b,x)=>{let y=l.routes[b.route.id];if(!y||!y.hasLoader)return!1;if(m(b,x)||g(b,x))return!0;if(b.route.shouldRevalidate){let v=b.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Nw(n,r,{includeHydrateFallback:o}={}){return jw(n.map(l=>{let c=r.routes[l.route.id];if(!c)return[];let f=[c.module];return c.clientActionModule&&(f=f.concat(c.clientActionModule)),c.clientLoaderModule&&(f=f.concat(c.clientLoaderModule)),o&&c.hydrateFallbackModule&&(f=f.concat(c.hydrateFallbackModule)),c.imports&&(f=f.concat(c.imports)),f}).flat(1))}function jw(n){return[...new Set(n)]}function Sw(n){let r={},o=Object.keys(n).sort();for(let l of o)r[l]=n[l];return r}function kw(n,r){let o=new Set;return new Set(r),n.reduce((l,c)=>{let f=JSON.stringify(Sw(c));return o.has(f)||(o.add(f),l.push({key:f,link:c})),l},[])}function bp(){let n=h.useContext(Br);return bf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Ew(){let n=h.useContext(Ho);return bf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var yf=h.createContext(void 0);yf.displayName="FrameworkContext";function yp(){let n=h.useContext(yf);return bf(n,"You must render this element inside a <HydratedRouter> element"),n}function Aw(n,r){let o=h.useContext(yf),[l,c]=h.useState(!1),[f,m]=h.useState(!1),{onFocus:g,onBlur:b,onMouseEnter:x,onMouseLeave:y,onTouchStart:v}=r,S=h.useRef(null);h.useEffect(()=>{if(n==="render"&&m(!0),n==="viewport"){let D=T=>{T.forEach(O=>{m(O.isIntersecting)})},k=new IntersectionObserver(D,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[n]),h.useEffect(()=>{if(l){let D=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(D)}}},[l]);let R=()=>{c(!0)},C=()=>{c(!1),m(!1)};return o?n!=="intent"?[f,S,{}]:[f,S,{onFocus:Bi(g,R),onBlur:Bi(b,C),onMouseEnter:Bi(x,R),onMouseLeave:Bi(y,C),onTouchStart:Bi(v,R)}]:[!1,S,{}]}function Bi(n,r){return o=>{n&&n(o),o.defaultPrevented||r(o)}}function Cw({page:n,...r}){let{router:o}=bp(),l=h.useMemo(()=>op(o.routes,n,o.basename),[o.routes,n,o.basename]);return l?h.createElement(Rw,{page:n,matches:l,...r}):null}function _w(n){let{manifest:r,routeModules:o}=yp(),[l,c]=h.useState([]);return h.useEffect(()=>{let f=!1;return ww(n,r,o).then(m=>{f||c(m)}),()=>{f=!0}},[n,r,o]),l}function Rw({page:n,matches:r,...o}){let l=ra(),{manifest:c,routeModules:f}=yp(),{basename:m}=bp(),{loaderData:g,matches:b}=Ew(),x=h.useMemo(()=>Wg(n,r,b,c,l,"data"),[n,r,b,c,l]),y=h.useMemo(()=>Wg(n,r,b,c,l,"assets"),[n,r,b,c,l]),v=h.useMemo(()=>{if(n===l.pathname+l.search+l.hash)return[];let C=new Set,D=!1;if(r.forEach(T=>{let O=c.routes[T.route.id];!O||!O.hasLoader||(!x.some(W=>W.route.id===T.route.id)&&T.route.id in g&&f[T.route.id]?.shouldRevalidate||O.hasClientLoader?D=!0:C.add(T.route.id))}),C.size===0)return[];let k=bw(n,m,"data");return D&&C.size>0&&k.searchParams.set("_routes",r.filter(T=>C.has(T.route.id)).map(T=>T.route.id).join(",")),[k.pathname+k.search]},[m,g,l,c,x,r,n,f]),S=h.useMemo(()=>Nw(y,c),[y,c]),R=_w(y);return h.createElement(h.Fragment,null,v.map(C=>h.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...o})),S.map(C=>h.createElement("link",{key:C,rel:"modulepreload",href:C,...o})),R.map(({key:C,link:D})=>h.createElement("link",{key:C,nonce:o.nonce,...D})))}function Tw(...n){return r=>{n.forEach(o=>{typeof o=="function"?o(r):o!=null&&(o.current=r)})}}var vp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vp&&(window.__reactRouterVersion="7.9.6")}catch{}function Mw({basename:n,children:r,window:o}){let l=h.useRef();l.current==null&&(l.current=g1({window:o,v5Compat:!0}));let c=l.current,[f,m]=h.useState({action:c.action,location:c.location}),g=h.useCallback(b=>{h.startTransition(()=>m(b))},[m]);return h.useLayoutEffect(()=>c.listen(g),[c,g]),h.createElement(lw,{basename:n,children:r,location:f.location,navigationType:f.action,navigator:c})}var wp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yt=h.forwardRef(function({onClick:r,discover:o="render",prefetch:l="none",relative:c,reloadDocument:f,replace:m,state:g,target:b,to:x,preventScrollReset:y,viewTransition:v,...S},R){let{basename:C}=h.useContext(Xa),D=typeof x=="string"&&wp.test(x),k,T=!1;if(typeof x=="string"&&D&&(k=x,vp))try{let E=new URL(window.location.href),G=x.startsWith("//")?new URL(E.protocol+x):new URL(x),V=zs(G.pathname,C);G.origin===E.origin&&V!=null?x=V+G.search+G.hash:T=!0}catch{Ca(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=P1(x,{relative:c}),[W,U,ee]=Aw(l,S),K=Uw(x,{replace:m,state:g,target:b,preventScrollReset:y,relative:c,viewTransition:v});function $(E){r&&r(E),E.defaultPrevented||K(E)}let N=h.createElement("a",{...S,...ee,href:k||O,onClick:T||f?r:$,ref:Tw(R,U),target:b,"data-discover":!D&&o==="render"?"true":void 0});return W&&!D?h.createElement(h.Fragment,null,N,h.createElement(Cw,{page:O})):N});Yt.displayName="Link";var Ow=h.forwardRef(function({"aria-current":r="page",caseSensitive:o=!1,className:l="",end:c=!1,style:f,to:m,viewTransition:g,children:b,...x},y){let v=el(m,{relative:x.relative}),S=ra(),R=h.useContext(Ho),{navigator:C,basename:D}=h.useContext(Xa),k=R!=null&&Hw(v)&&g===!0,T=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,O=S.pathname,W=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;o||(O=O.toLowerCase(),W=W?W.toLowerCase():null,T=T.toLowerCase()),W&&D&&(W=zs(W,D)||W);const U=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let ee=O===T||!c&&O.startsWith(T)&&O.charAt(U)==="/",K=W!=null&&(W===T||!c&&W.startsWith(T)&&W.charAt(T.length)==="/"),$={isActive:ee,isPending:K,isTransitioning:k},N=ee?r:void 0,E;typeof l=="function"?E=l($):E=[l,ee?"active":null,K?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let G=typeof f=="function"?f($):f;return h.createElement(Yt,{...x,"aria-current":N,className:E,ref:y,style:G,to:m,viewTransition:g},typeof b=="function"?b($):b)});Ow.displayName="NavLink";var Dw=h.forwardRef(({discover:n="render",fetcherKey:r,navigate:o,reloadDocument:l,replace:c,state:f,method:m=Co,action:g,onSubmit:b,relative:x,preventScrollReset:y,viewTransition:v,...S},R)=>{let C=Bw(),D=qw(g,{relative:x}),k=m.toLowerCase()==="get"?"get":"post",T=typeof g=="string"&&wp.test(g),O=W=>{if(b&&b(W),W.defaultPrevented)return;W.preventDefault();let U=W.nativeEvent.submitter,ee=U?.getAttribute("formmethod")||m;C(U||W.currentTarget,{fetcherKey:r,method:ee,navigate:o,replace:c,state:f,relative:x,preventScrollReset:y,viewTransition:v})};return h.createElement("form",{ref:R,method:k,action:D,onSubmit:l?b:O,...S,"data-discover":!T&&n==="render"?"true":void 0})});Dw.displayName="Form";function Lw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Np(n){let r=h.useContext(Br);return Et(r,Lw(n)),r}function Uw(n,{target:r,replace:o,state:l,preventScrollReset:c,relative:f,viewTransition:m}={}){let g=Xt(),b=ra(),x=el(n,{relative:f});return h.useCallback(y=>{if(mw(y,r)){y.preventDefault();let v=o!==void 0?o:Xi(b)===Xi(x);g(n,{replace:v,state:l,preventScrollReset:c,relative:f,viewTransition:m})}},[b,g,x,o,l,r,n,c,f,m])}function vf(n){Ca(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=h.useRef(Wu(n)),o=h.useRef(!1),l=ra(),c=h.useMemo(()=>hw(l.search,o.current?null:r.current),[l.search]),f=Xt(),m=h.useCallback((g,b)=>{const x=Wu(typeof g=="function"?g(new URLSearchParams(c)):g);o.current=!0,f("?"+x,b)},[f,c]);return[c,m]}var zw=0,Fw=()=>`__${String(++zw)}__`;function Bw(){let{router:n}=Np("useSubmit"),{basename:r}=h.useContext(Xa),o=aw();return h.useCallback(async(l,c={})=>{let{action:f,method:m,encType:g,formData:b,body:x}=pw(l,r);if(c.navigate===!1){let y=c.fetcherKey||Fw();await n.fetch(y,o,c.action||f,{preventScrollReset:c.preventScrollReset,formData:b,body:x,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await n.navigate(c.action||f,{preventScrollReset:c.preventScrollReset,formData:b,body:x,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:o,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,r,o])}function qw(n,{relative:r}={}){let{basename:o}=h.useContext(Xa),l=h.useContext($a);Et(l,"useFormAction must be used inside a RouteContext");let[c]=l.matches.slice(-1),f={...el(n||".",{relative:r})},m=ra();if(n==null){f.search=m.search;let g=new URLSearchParams(f.search),b=g.getAll("index");if(b.some(y=>y==="")){g.delete("index"),b.filter(v=>v).forEach(v=>g.append("index",v));let y=g.toString();f.search=y?`?${y}`:""}}return(!n||n===".")&&c.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(f.pathname=f.pathname==="/"?o:Os([o,f.pathname])),Xi(f)}function Hw(n,{relative:r}={}){let o=h.useContext(fp);Et(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Np("useViewTransitionState"),c=el(n,{relative:r});if(!o.isTransitioning)return!1;let f=zs(o.currentLocation.pathname,l)||o.currentLocation.pathname,m=zs(o.nextLocation.pathname,l)||o.nextLocation.pathname;return Do(c.pathname,m)!=null||Do(c.pathname,f)!=null}var $w=lp();function jp(n,r){return function(){return n.apply(r,arguments)}}const{toString:Pw}=Object.prototype,{getPrototypeOf:wf}=Object,{iterator:Po,toStringTag:Sp}=Symbol,Go=(n=>r=>{const o=Pw.call(r);return n[o]||(n[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),Qa=n=>(n=n.toLowerCase(),r=>Go(r)===n),Io=n=>r=>typeof r===n,{isArray:Hr}=Array,Lr=Io("undefined");function tl(n){return n!==null&&!Lr(n)&&n.constructor!==null&&!Lr(n.constructor)&&xa(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const kp=Qa("ArrayBuffer");function Gw(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&kp(n.buffer),r}const Iw=Io("string"),xa=Io("function"),Ep=Io("number"),al=n=>n!==null&&typeof n=="object",Vw=n=>n===!0||n===!1,Ro=n=>{if(Go(n)!=="object")return!1;const r=wf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Sp in n)&&!(Po in n)},Yw=n=>{if(!al(n)||tl(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Xw=Qa("Date"),Qw=Qa("File"),Ww=Qa("Blob"),Zw=Qa("FileList"),Kw=n=>al(n)&&xa(n.pipe),Jw=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||xa(n.append)&&((r=Go(n))==="formdata"||r==="object"&&xa(n.toString)&&n.toString()==="[object FormData]"))},e2=Qa("URLSearchParams"),[t2,a2,s2,n2]=["ReadableStream","Request","Response","Headers"].map(Qa),r2=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sl(n,r,{allOwnKeys:o=!1}={}){if(n===null||typeof n>"u")return;let l,c;if(typeof n!="object"&&(n=[n]),Hr(n))for(l=0,c=n.length;l<c;l++)r.call(null,n[l],l,n);else{if(tl(n))return;const f=o?Object.getOwnPropertyNames(n):Object.keys(n),m=f.length;let g;for(l=0;l<m;l++)g=f[l],r.call(null,n[g],g,n)}}function Ap(n,r){if(tl(n))return null;r=r.toLowerCase();const o=Object.keys(n);let l=o.length,c;for(;l-- >0;)if(c=o[l],r===c.toLowerCase())return c;return null}const qn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Cp=n=>!Lr(n)&&n!==qn;function Zu(){const{caseless:n,skipUndefined:r}=Cp(this)&&this||{},o={},l=(c,f)=>{const m=n&&Ap(o,f)||f;Ro(o[m])&&Ro(c)?o[m]=Zu(o[m],c):Ro(c)?o[m]=Zu({},c):Hr(c)?o[m]=c.slice():(!r||!Lr(c))&&(o[m]=c)};for(let c=0,f=arguments.length;c<f;c++)arguments[c]&&sl(arguments[c],l);return o}const i2=(n,r,o,{allOwnKeys:l}={})=>(sl(r,(c,f)=>{o&&xa(c)?n[f]=jp(c,o):n[f]=c},{allOwnKeys:l}),n),l2=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),o2=(n,r,o,l)=>{n.prototype=Object.create(r.prototype,l),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),o&&Object.assign(n.prototype,o)},c2=(n,r,o,l)=>{let c,f,m;const g={};if(r=r||{},n==null)return r;do{for(c=Object.getOwnPropertyNames(n),f=c.length;f-- >0;)m=c[f],(!l||l(m,n,r))&&!g[m]&&(r[m]=n[m],g[m]=!0);n=o!==!1&&wf(n)}while(n&&(!o||o(n,r))&&n!==Object.prototype);return r},d2=(n,r,o)=>{n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=r.length;const l=n.indexOf(r,o);return l!==-1&&l===o},u2=n=>{if(!n)return null;if(Hr(n))return n;let r=n.length;if(!Ep(r))return null;const o=new Array(r);for(;r-- >0;)o[r]=n[r];return o},f2=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&wf(Uint8Array)),m2=(n,r)=>{const l=(n&&n[Po]).call(n);let c;for(;(c=l.next())&&!c.done;){const f=c.value;r.call(n,f[0],f[1])}},h2=(n,r)=>{let o;const l=[];for(;(o=n.exec(r))!==null;)l.push(o);return l},g2=Qa("HTMLFormElement"),x2=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,l,c){return l.toUpperCase()+c}),Zg=(({hasOwnProperty:n})=>(r,o)=>n.call(r,o))(Object.prototype),p2=Qa("RegExp"),_p=(n,r)=>{const o=Object.getOwnPropertyDescriptors(n),l={};sl(o,(c,f)=>{let m;(m=r(c,f,n))!==!1&&(l[f]=m||c)}),Object.defineProperties(n,l)},b2=n=>{_p(n,(r,o)=>{if(xa(n)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const l=n[o];if(xa(l)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},y2=(n,r)=>{const o={},l=c=>{c.forEach(f=>{o[f]=!0})};return Hr(n)?l(n):l(String(n).split(r)),o},v2=()=>{},w2=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function N2(n){return!!(n&&xa(n.append)&&n[Sp]==="FormData"&&n[Po])}const j2=n=>{const r=new Array(10),o=(l,c)=>{if(al(l)){if(r.indexOf(l)>=0)return;if(tl(l))return l;if(!("toJSON"in l)){r[c]=l;const f=Hr(l)?[]:{};return sl(l,(m,g)=>{const b=o(m,c+1);!Lr(b)&&(f[g]=b)}),r[c]=void 0,f}}return l};return o(n,0)},S2=Qa("AsyncFunction"),k2=n=>n&&(al(n)||xa(n))&&xa(n.then)&&xa(n.catch),Rp=((n,r)=>n?setImmediate:r?((o,l)=>(qn.addEventListener("message",({source:c,data:f})=>{c===qn&&f===o&&l.length&&l.shift()()},!1),c=>{l.push(c),qn.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",xa(qn.postMessage)),E2=typeof queueMicrotask<"u"?queueMicrotask.bind(qn):typeof process<"u"&&process.nextTick||Rp,A2=n=>n!=null&&xa(n[Po]),fe={isArray:Hr,isArrayBuffer:kp,isBuffer:tl,isFormData:Jw,isArrayBufferView:Gw,isString:Iw,isNumber:Ep,isBoolean:Vw,isObject:al,isPlainObject:Ro,isEmptyObject:Yw,isReadableStream:t2,isRequest:a2,isResponse:s2,isHeaders:n2,isUndefined:Lr,isDate:Xw,isFile:Qw,isBlob:Ww,isRegExp:p2,isFunction:xa,isStream:Kw,isURLSearchParams:e2,isTypedArray:f2,isFileList:Zw,forEach:sl,merge:Zu,extend:i2,trim:r2,stripBOM:l2,inherits:o2,toFlatObject:c2,kindOf:Go,kindOfTest:Qa,endsWith:d2,toArray:u2,forEachEntry:m2,matchAll:h2,isHTMLForm:g2,hasOwnProperty:Zg,hasOwnProp:Zg,reduceDescriptors:_p,freezeMethods:b2,toObjectSet:y2,toCamelCase:x2,noop:v2,toFiniteNumber:w2,findKey:Ap,global:qn,isContextDefined:Cp,isSpecCompliantForm:N2,toJSONObject:j2,isAsyncFn:S2,isThenable:k2,setImmediate:Rp,asap:E2,isIterable:A2};function Ke(n,r,o,l,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),o&&(this.config=o),l&&(this.request=l),c&&(this.response=c,this.status=c.status?c.status:null)}fe.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.status}}});const Tp=Ke.prototype,Mp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Mp[n]={value:n}});Object.defineProperties(Ke,Mp);Object.defineProperty(Tp,"isAxiosError",{value:!0});Ke.from=(n,r,o,l,c,f)=>{const m=Object.create(Tp);fe.toFlatObject(n,m,function(y){return y!==Error.prototype},x=>x!=="isAxiosError");const g=n&&n.message?n.message:"Error",b=r==null&&n?n.code:r;return Ke.call(m,g,b,o,l,c),n&&m.cause==null&&Object.defineProperty(m,"cause",{value:n,configurable:!0}),m.name=n&&n.name||"Error",f&&Object.assign(m,f),m};const C2=null;function Ku(n){return fe.isPlainObject(n)||fe.isArray(n)}function Op(n){return fe.endsWith(n,"[]")?n.slice(0,-2):n}function Kg(n,r,o){return n?n.concat(r).map(function(c,f){return c=Op(c),!o&&f?"["+c+"]":c}).join(o?".":""):r}function _2(n){return fe.isArray(n)&&!n.some(Ku)}const R2=fe.toFlatObject(fe,{},null,function(r){return/^is[A-Z]/.test(r)});function Vo(n,r,o){if(!fe.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,o=fe.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,k){return!fe.isUndefined(k[D])});const l=o.metaTokens,c=o.visitor||y,f=o.dots,m=o.indexes,b=(o.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(r);if(!fe.isFunction(c))throw new TypeError("visitor must be a function");function x(C){if(C===null)return"";if(fe.isDate(C))return C.toISOString();if(fe.isBoolean(C))return C.toString();if(!b&&fe.isBlob(C))throw new Ke("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(C)||fe.isTypedArray(C)?b&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function y(C,D,k){let T=C;if(C&&!k&&typeof C=="object"){if(fe.endsWith(D,"{}"))D=l?D:D.slice(0,-2),C=JSON.stringify(C);else if(fe.isArray(C)&&_2(C)||(fe.isFileList(C)||fe.endsWith(D,"[]"))&&(T=fe.toArray(C)))return D=Op(D),T.forEach(function(W,U){!(fe.isUndefined(W)||W===null)&&r.append(m===!0?Kg([D],U,f):m===null?D:D+"[]",x(W))}),!1}return Ku(C)?!0:(r.append(Kg(k,D,f),x(C)),!1)}const v=[],S=Object.assign(R2,{defaultVisitor:y,convertValue:x,isVisitable:Ku});function R(C,D){if(!fe.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+D.join("."));v.push(C),fe.forEach(C,function(T,O){(!(fe.isUndefined(T)||T===null)&&c.call(r,T,fe.isString(O)?O.trim():O,D,S))===!0&&R(T,D?D.concat(O):[O])}),v.pop()}}if(!fe.isObject(n))throw new TypeError("data must be an object");return R(n),r}function Jg(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(l){return r[l]})}function Nf(n,r){this._pairs=[],n&&Vo(n,this,r)}const Dp=Nf.prototype;Dp.append=function(r,o){this._pairs.push([r,o])};Dp.toString=function(r){const o=r?function(l){return r.call(this,l,Jg)}:Jg;return this._pairs.map(function(c){return o(c[0])+"="+o(c[1])},"").join("&")};function T2(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Lp(n,r,o){if(!r)return n;const l=o&&o.encode||T2;fe.isFunction(o)&&(o={serialize:o});const c=o&&o.serialize;let f;if(c?f=c(r,o):f=fe.isURLSearchParams(r)?r.toString():new Nf(r,o).toString(l),f){const m=n.indexOf("#");m!==-1&&(n=n.slice(0,m)),n+=(n.indexOf("?")===-1?"?":"&")+f}return n}class ex{constructor(){this.handlers=[]}use(r,o,l){return this.handlers.push({fulfilled:r,rejected:o,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){fe.forEach(this.handlers,function(l){l!==null&&r(l)})}}const Up={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},M2=typeof URLSearchParams<"u"?URLSearchParams:Nf,O2=typeof FormData<"u"?FormData:null,D2=typeof Blob<"u"?Blob:null,L2={isBrowser:!0,classes:{URLSearchParams:M2,FormData:O2,Blob:D2},protocols:["http","https","file","blob","url","data"]},jf=typeof window<"u"&&typeof document<"u",Ju=typeof navigator=="object"&&navigator||void 0,U2=jf&&(!Ju||["ReactNative","NativeScript","NS"].indexOf(Ju.product)<0),z2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",F2=jf&&window.location.href||"http://localhost",B2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jf,hasStandardBrowserEnv:U2,hasStandardBrowserWebWorkerEnv:z2,navigator:Ju,origin:F2},Symbol.toStringTag,{value:"Module"})),sa={...B2,...L2};function q2(n,r){return Vo(n,new sa.classes.URLSearchParams,{visitor:function(o,l,c,f){return sa.isNode&&fe.isBuffer(o)?(this.append(l,o.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)},...r})}function H2(n){return fe.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function $2(n){const r={},o=Object.keys(n);let l;const c=o.length;let f;for(l=0;l<c;l++)f=o[l],r[f]=n[f];return r}function zp(n){function r(o,l,c,f){let m=o[f++];if(m==="__proto__")return!0;const g=Number.isFinite(+m),b=f>=o.length;return m=!m&&fe.isArray(c)?c.length:m,b?(fe.hasOwnProp(c,m)?c[m]=[c[m],l]:c[m]=l,!g):((!c[m]||!fe.isObject(c[m]))&&(c[m]=[]),r(o,l,c[m],f)&&fe.isArray(c[m])&&(c[m]=$2(c[m])),!g)}if(fe.isFormData(n)&&fe.isFunction(n.entries)){const o={};return fe.forEachEntry(n,(l,c)=>{r(H2(l),c,o,0)}),o}return null}function P2(n,r,o){if(fe.isString(n))try{return(r||JSON.parse)(n),fe.trim(n)}catch(l){if(l.name!=="SyntaxError")throw l}return(o||JSON.stringify)(n)}const nl={transitional:Up,adapter:["xhr","http","fetch"],transformRequest:[function(r,o){const l=o.getContentType()||"",c=l.indexOf("application/json")>-1,f=fe.isObject(r);if(f&&fe.isHTMLForm(r)&&(r=new FormData(r)),fe.isFormData(r))return c?JSON.stringify(zp(r)):r;if(fe.isArrayBuffer(r)||fe.isBuffer(r)||fe.isStream(r)||fe.isFile(r)||fe.isBlob(r)||fe.isReadableStream(r))return r;if(fe.isArrayBufferView(r))return r.buffer;if(fe.isURLSearchParams(r))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let g;if(f){if(l.indexOf("application/x-www-form-urlencoded")>-1)return q2(r,this.formSerializer).toString();if((g=fe.isFileList(r))||l.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return Vo(g?{"files[]":r}:r,b&&new b,this.formSerializer)}}return f||c?(o.setContentType("application/json",!1),P2(r)):r}],transformResponse:[function(r){const o=this.transitional||nl.transitional,l=o&&o.forcedJSONParsing,c=this.responseType==="json";if(fe.isResponse(r)||fe.isReadableStream(r))return r;if(r&&fe.isString(r)&&(l&&!this.responseType||c)){const m=!(o&&o.silentJSONParsing)&&c;try{return JSON.parse(r,this.parseReviver)}catch(g){if(m)throw g.name==="SyntaxError"?Ke.from(g,Ke.ERR_BAD_RESPONSE,this,null,this.response):g}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sa.classes.FormData,Blob:sa.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],n=>{nl.headers[n]={}});const G2=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),I2=n=>{const r={};let o,l,c;return n&&n.split(`
`).forEach(function(m){c=m.indexOf(":"),o=m.substring(0,c).trim().toLowerCase(),l=m.substring(c+1).trim(),!(!o||r[o]&&G2[o])&&(o==="set-cookie"?r[o]?r[o].push(l):r[o]=[l]:r[o]=r[o]?r[o]+", "+l:l)}),r},tx=Symbol("internals");function qi(n){return n&&String(n).trim().toLowerCase()}function To(n){return n===!1||n==null?n:fe.isArray(n)?n.map(To):String(n)}function V2(n){const r=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=o.exec(n);)r[l[1]]=l[2];return r}const Y2=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function yu(n,r,o,l,c){if(fe.isFunction(l))return l.call(this,r,o);if(c&&(r=o),!!fe.isString(r)){if(fe.isString(l))return r.indexOf(l)!==-1;if(fe.isRegExp(l))return l.test(r)}}function X2(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,o,l)=>o.toUpperCase()+l)}function Q2(n,r){const o=fe.toCamelCase(" "+r);["get","set","has"].forEach(l=>{Object.defineProperty(n,l+o,{value:function(c,f,m){return this[l].call(this,r,c,f,m)},configurable:!0})})}let pa=class{constructor(r){r&&this.set(r)}set(r,o,l){const c=this;function f(g,b,x){const y=qi(b);if(!y)throw new Error("header name must be a non-empty string");const v=fe.findKey(c,y);(!v||c[v]===void 0||x===!0||x===void 0&&c[v]!==!1)&&(c[v||b]=To(g))}const m=(g,b)=>fe.forEach(g,(x,y)=>f(x,y,b));if(fe.isPlainObject(r)||r instanceof this.constructor)m(r,o);else if(fe.isString(r)&&(r=r.trim())&&!Y2(r))m(I2(r),o);else if(fe.isObject(r)&&fe.isIterable(r)){let g={},b,x;for(const y of r){if(!fe.isArray(y))throw TypeError("Object iterator must return a key-value pair");g[x=y[0]]=(b=g[x])?fe.isArray(b)?[...b,y[1]]:[b,y[1]]:y[1]}m(g,o)}else r!=null&&f(o,r,l);return this}get(r,o){if(r=qi(r),r){const l=fe.findKey(this,r);if(l){const c=this[l];if(!o)return c;if(o===!0)return V2(c);if(fe.isFunction(o))return o.call(this,c,l);if(fe.isRegExp(o))return o.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,o){if(r=qi(r),r){const l=fe.findKey(this,r);return!!(l&&this[l]!==void 0&&(!o||yu(this,this[l],l,o)))}return!1}delete(r,o){const l=this;let c=!1;function f(m){if(m=qi(m),m){const g=fe.findKey(l,m);g&&(!o||yu(l,l[g],g,o))&&(delete l[g],c=!0)}}return fe.isArray(r)?r.forEach(f):f(r),c}clear(r){const o=Object.keys(this);let l=o.length,c=!1;for(;l--;){const f=o[l];(!r||yu(this,this[f],f,r,!0))&&(delete this[f],c=!0)}return c}normalize(r){const o=this,l={};return fe.forEach(this,(c,f)=>{const m=fe.findKey(l,f);if(m){o[m]=To(c),delete o[f];return}const g=r?X2(f):String(f).trim();g!==f&&delete o[f],o[g]=To(c),l[g]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const o=Object.create(null);return fe.forEach(this,(l,c)=>{l!=null&&l!==!1&&(o[c]=r&&fe.isArray(l)?l.join(", "):l)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,o])=>r+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...o){const l=new this(r);return o.forEach(c=>l.set(c)),l}static accessor(r){const l=(this[tx]=this[tx]={accessors:{}}).accessors,c=this.prototype;function f(m){const g=qi(m);l[g]||(Q2(c,m),l[g]=!0)}return fe.isArray(r)?r.forEach(f):f(r),this}};pa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(pa.prototype,({value:n},r)=>{let o=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(l){this[o]=l}}});fe.freezeMethods(pa);function vu(n,r){const o=this||nl,l=r||o,c=pa.from(l.headers);let f=l.data;return fe.forEach(n,function(g){f=g.call(o,f,c.normalize(),r?r.status:void 0)}),c.normalize(),f}function Fp(n){return!!(n&&n.__CANCEL__)}function $r(n,r,o){Ke.call(this,n??"canceled",Ke.ERR_CANCELED,r,o),this.name="CanceledError"}fe.inherits($r,Ke,{__CANCEL__:!0});function Bp(n,r,o){const l=o.config.validateStatus;!o.status||!l||l(o.status)?n(o):r(new Ke("Request failed with status code "+o.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function W2(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function Z2(n,r){n=n||10;const o=new Array(n),l=new Array(n);let c=0,f=0,m;return r=r!==void 0?r:1e3,function(b){const x=Date.now(),y=l[f];m||(m=x),o[c]=b,l[c]=x;let v=f,S=0;for(;v!==c;)S+=o[v++],v=v%n;if(c=(c+1)%n,c===f&&(f=(f+1)%n),x-m<r)return;const R=y&&x-y;return R?Math.round(S*1e3/R):void 0}}function K2(n,r){let o=0,l=1e3/r,c,f;const m=(x,y=Date.now())=>{o=y,c=null,f&&(clearTimeout(f),f=null),n(...x)};return[(...x)=>{const y=Date.now(),v=y-o;v>=l?m(x,y):(c=x,f||(f=setTimeout(()=>{f=null,m(c)},l-v)))},()=>c&&m(c)]}const Lo=(n,r,o=3)=>{let l=0;const c=Z2(50,250);return K2(f=>{const m=f.loaded,g=f.lengthComputable?f.total:void 0,b=m-l,x=c(b),y=m<=g;l=m;const v={loaded:m,total:g,progress:g?m/g:void 0,bytes:b,rate:x||void 0,estimated:x&&g&&y?(g-m)/x:void 0,event:f,lengthComputable:g!=null,[r?"download":"upload"]:!0};n(v)},o)},ax=(n,r)=>{const o=n!=null;return[l=>r[0]({lengthComputable:o,total:n,loaded:l}),r[1]]},sx=n=>(...r)=>fe.asap(()=>n(...r)),J2=sa.hasStandardBrowserEnv?((n,r)=>o=>(o=new URL(o,sa.origin),n.protocol===o.protocol&&n.host===o.host&&(r||n.port===o.port)))(new URL(sa.origin),sa.navigator&&/(msie|trident)/i.test(sa.navigator.userAgent)):()=>!0,eN=sa.hasStandardBrowserEnv?{write(n,r,o,l,c,f,m){if(typeof document>"u")return;const g=[`${n}=${encodeURIComponent(r)}`];fe.isNumber(o)&&g.push(`expires=${new Date(o).toUTCString()}`),fe.isString(l)&&g.push(`path=${l}`),fe.isString(c)&&g.push(`domain=${c}`),f===!0&&g.push("secure"),fe.isString(m)&&g.push(`SameSite=${m}`),document.cookie=g.join("; ")},read(n){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function tN(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function aN(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function qp(n,r,o){let l=!tN(r);return n&&(l||o==!1)?aN(n,r):r}const nx=n=>n instanceof pa?{...n}:n;function Gn(n,r){r=r||{};const o={};function l(x,y,v,S){return fe.isPlainObject(x)&&fe.isPlainObject(y)?fe.merge.call({caseless:S},x,y):fe.isPlainObject(y)?fe.merge({},y):fe.isArray(y)?y.slice():y}function c(x,y,v,S){if(fe.isUndefined(y)){if(!fe.isUndefined(x))return l(void 0,x,v,S)}else return l(x,y,v,S)}function f(x,y){if(!fe.isUndefined(y))return l(void 0,y)}function m(x,y){if(fe.isUndefined(y)){if(!fe.isUndefined(x))return l(void 0,x)}else return l(void 0,y)}function g(x,y,v){if(v in r)return l(x,y);if(v in n)return l(void 0,x)}const b={url:f,method:f,data:f,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:g,headers:(x,y,v)=>c(nx(x),nx(y),v,!0)};return fe.forEach(Object.keys({...n,...r}),function(y){const v=b[y]||c,S=v(n[y],r[y],y);fe.isUndefined(S)&&v!==g||(o[y]=S)}),o}const Hp=n=>{const r=Gn({},n);let{data:o,withXSRFToken:l,xsrfHeaderName:c,xsrfCookieName:f,headers:m,auth:g}=r;if(r.headers=m=pa.from(m),r.url=Lp(qp(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),g&&m.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),fe.isFormData(o)){if(sa.hasStandardBrowserEnv||sa.hasStandardBrowserWebWorkerEnv)m.setContentType(void 0);else if(fe.isFunction(o.getHeaders)){const b=o.getHeaders(),x=["content-type","content-length"];Object.entries(b).forEach(([y,v])=>{x.includes(y.toLowerCase())&&m.set(y,v)})}}if(sa.hasStandardBrowserEnv&&(l&&fe.isFunction(l)&&(l=l(r)),l||l!==!1&&J2(r.url))){const b=c&&f&&eN.read(f);b&&m.set(c,b)}return r},sN=typeof XMLHttpRequest<"u",nN=sN&&function(n){return new Promise(function(o,l){const c=Hp(n);let f=c.data;const m=pa.from(c.headers).normalize();let{responseType:g,onUploadProgress:b,onDownloadProgress:x}=c,y,v,S,R,C;function D(){R&&R(),C&&C(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let k=new XMLHttpRequest;k.open(c.method.toUpperCase(),c.url,!0),k.timeout=c.timeout;function T(){if(!k)return;const W=pa.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),ee={data:!g||g==="text"||g==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:W,config:n,request:k};Bp(function($){o($),D()},function($){l($),D()},ee),k=null}"onloadend"in k?k.onloadend=T:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(T)},k.onabort=function(){k&&(l(new Ke("Request aborted",Ke.ECONNABORTED,n,k)),k=null)},k.onerror=function(U){const ee=U&&U.message?U.message:"Network Error",K=new Ke(ee,Ke.ERR_NETWORK,n,k);K.event=U||null,l(K),k=null},k.ontimeout=function(){let U=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const ee=c.transitional||Up;c.timeoutErrorMessage&&(U=c.timeoutErrorMessage),l(new Ke(U,ee.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,n,k)),k=null},f===void 0&&m.setContentType(null),"setRequestHeader"in k&&fe.forEach(m.toJSON(),function(U,ee){k.setRequestHeader(ee,U)}),fe.isUndefined(c.withCredentials)||(k.withCredentials=!!c.withCredentials),g&&g!=="json"&&(k.responseType=c.responseType),x&&([S,C]=Lo(x,!0),k.addEventListener("progress",S)),b&&k.upload&&([v,R]=Lo(b),k.upload.addEventListener("progress",v),k.upload.addEventListener("loadend",R)),(c.cancelToken||c.signal)&&(y=W=>{k&&(l(!W||W.type?new $r(null,n,k):W),k.abort(),k=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const O=W2(c.url);if(O&&sa.protocols.indexOf(O)===-1){l(new Ke("Unsupported protocol "+O+":",Ke.ERR_BAD_REQUEST,n));return}k.send(f||null)})},rN=(n,r)=>{const{length:o}=n=n?n.filter(Boolean):[];if(r||o){let l=new AbortController,c;const f=function(x){if(!c){c=!0,g();const y=x instanceof Error?x:this.reason;l.abort(y instanceof Ke?y:new $r(y instanceof Error?y.message:y))}};let m=r&&setTimeout(()=>{m=null,f(new Ke(`timeout ${r} of ms exceeded`,Ke.ETIMEDOUT))},r);const g=()=>{n&&(m&&clearTimeout(m),m=null,n.forEach(x=>{x.unsubscribe?x.unsubscribe(f):x.removeEventListener("abort",f)}),n=null)};n.forEach(x=>x.addEventListener("abort",f));const{signal:b}=l;return b.unsubscribe=()=>fe.asap(g),b}},iN=function*(n,r){let o=n.byteLength;if(o<r){yield n;return}let l=0,c;for(;l<o;)c=l+r,yield n.slice(l,c),l=c},lN=async function*(n,r){for await(const o of oN(n))yield*iN(o,r)},oN=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:o,value:l}=await r.read();if(o)break;yield l}}finally{await r.cancel()}},rx=(n,r,o,l)=>{const c=lN(n,r);let f=0,m,g=b=>{m||(m=!0,l&&l(b))};return new ReadableStream({async pull(b){try{const{done:x,value:y}=await c.next();if(x){g(),b.close();return}let v=y.byteLength;if(o){let S=f+=v;o(S)}b.enqueue(new Uint8Array(y))}catch(x){throw g(x),x}},cancel(b){return g(b),c.return()}},{highWaterMark:2})},ix=64*1024,{isFunction:jo}=fe,cN=(({Request:n,Response:r})=>({Request:n,Response:r}))(fe.global),{ReadableStream:lx,TextEncoder:ox}=fe.global,cx=(n,...r)=>{try{return!!n(...r)}catch{return!1}},dN=n=>{n=fe.merge.call({skipUndefined:!0},cN,n);const{fetch:r,Request:o,Response:l}=n,c=r?jo(r):typeof fetch=="function",f=jo(o),m=jo(l);if(!c)return!1;const g=c&&jo(lx),b=c&&(typeof ox=="function"?(C=>D=>C.encode(D))(new ox):async C=>new Uint8Array(await new o(C).arrayBuffer())),x=f&&g&&cx(()=>{let C=!1;const D=new o(sa.origin,{body:new lx,method:"POST",get duplex(){return C=!0,"half"}}).headers.has("Content-Type");return C&&!D}),y=m&&g&&cx(()=>fe.isReadableStream(new l("").body)),v={stream:y&&(C=>C.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(C=>{!v[C]&&(v[C]=(D,k)=>{let T=D&&D[C];if(T)return T.call(D);throw new Ke(`Response type '${C}' is not supported`,Ke.ERR_NOT_SUPPORT,k)})});const S=async C=>{if(C==null)return 0;if(fe.isBlob(C))return C.size;if(fe.isSpecCompliantForm(C))return(await new o(sa.origin,{method:"POST",body:C}).arrayBuffer()).byteLength;if(fe.isArrayBufferView(C)||fe.isArrayBuffer(C))return C.byteLength;if(fe.isURLSearchParams(C)&&(C=C+""),fe.isString(C))return(await b(C)).byteLength},R=async(C,D)=>{const k=fe.toFiniteNumber(C.getContentLength());return k??S(D)};return async C=>{let{url:D,method:k,data:T,signal:O,cancelToken:W,timeout:U,onDownloadProgress:ee,onUploadProgress:K,responseType:$,headers:N,withCredentials:E="same-origin",fetchOptions:G}=Hp(C),V=r||fetch;$=$?($+"").toLowerCase():"text";let le=rN([O,W&&W.toAbortSignal()],U),oe=null;const ve=le&&le.unsubscribe&&(()=>{le.unsubscribe()});let Re;try{if(K&&x&&k!=="get"&&k!=="head"&&(Re=await R(N,T))!==0){let w=new o(D,{method:"POST",body:T,duplex:"half"}),A;if(fe.isFormData(T)&&(A=w.headers.get("content-type"))&&N.setContentType(A),w.body){const[_,F]=ax(Re,Lo(sx(K)));T=rx(w.body,ix,_,F)}}fe.isString(E)||(E=E?"include":"omit");const H=f&&"credentials"in o.prototype,I={...G,signal:le,method:k.toUpperCase(),headers:N.normalize().toJSON(),body:T,duplex:"half",credentials:H?E:void 0};oe=f&&new o(D,I);let X=await(f?V(oe,G):V(D,I));const z=y&&($==="stream"||$==="response");if(y&&(ee||z&&ve)){const w={};["status","statusText","headers"].forEach(de=>{w[de]=X[de]});const A=fe.toFiniteNumber(X.headers.get("content-length")),[_,F]=ee&&ax(A,Lo(sx(ee),!0))||[];X=new l(rx(X.body,ix,_,()=>{F&&F(),ve&&ve()}),w)}$=$||"text";let M=await v[fe.findKey(v,$)||"text"](X,C);return!z&&ve&&ve(),await new Promise((w,A)=>{Bp(w,A,{data:M,headers:pa.from(X.headers),status:X.status,statusText:X.statusText,config:C,request:oe})})}catch(H){throw ve&&ve(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,C,oe),{cause:H.cause||H}):Ke.from(H,H&&H.code,C,oe)}}},uN=new Map,$p=n=>{let r=n&&n.env||{};const{fetch:o,Request:l,Response:c}=r,f=[l,c,o];let m=f.length,g=m,b,x,y=uN;for(;g--;)b=f[g],x=y.get(b),x===void 0&&y.set(b,x=g?new Map:dN(r)),y=x;return x};$p();const Sf={http:C2,xhr:nN,fetch:{get:$p}};fe.forEach(Sf,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const dx=n=>`- ${n}`,fN=n=>fe.isFunction(n)||n===null||n===!1;function mN(n,r){n=fe.isArray(n)?n:[n];const{length:o}=n;let l,c;const f={};for(let m=0;m<o;m++){l=n[m];let g;if(c=l,!fN(l)&&(c=Sf[(g=String(l)).toLowerCase()],c===void 0))throw new Ke(`Unknown adapter '${g}'`);if(c&&(fe.isFunction(c)||(c=c.get(r))))break;f[g||"#"+m]=c}if(!c){const m=Object.entries(f).map(([b,x])=>`adapter ${b} `+(x===!1?"is not supported by the environment":"is not available in the build"));let g=o?m.length>1?`since :
`+m.map(dx).join(`
`):" "+dx(m[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return c}const Pp={getAdapter:mN,adapters:Sf};function wu(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new $r(null,n)}function ux(n){return wu(n),n.headers=pa.from(n.headers),n.data=vu.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Pp.getAdapter(n.adapter||nl.adapter,n)(n).then(function(l){return wu(n),l.data=vu.call(n,n.transformResponse,l),l.headers=pa.from(l.headers),l},function(l){return Fp(l)||(wu(n),l&&l.response&&(l.response.data=vu.call(n,n.transformResponse,l.response),l.response.headers=pa.from(l.response.headers))),Promise.reject(l)})}const Gp="1.13.2",Yo={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{Yo[n]=function(l){return typeof l===n||"a"+(r<1?"n ":" ")+n}});const fx={};Yo.transitional=function(r,o,l){function c(f,m){return"[Axios v"+Gp+"] Transitional option '"+f+"'"+m+(l?". "+l:"")}return(f,m,g)=>{if(r===!1)throw new Ke(c(m," has been removed"+(o?" in "+o:"")),Ke.ERR_DEPRECATED);return o&&!fx[m]&&(fx[m]=!0,console.warn(c(m," has been deprecated since v"+o+" and will be removed in the near future"))),r?r(f,m,g):!0}};Yo.spelling=function(r){return(o,l)=>(console.warn(`${l} is likely a misspelling of ${r}`),!0)};function hN(n,r,o){if(typeof n!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const l=Object.keys(n);let c=l.length;for(;c-- >0;){const f=l[c],m=r[f];if(m){const g=n[f],b=g===void 0||m(g,f,n);if(b!==!0)throw new Ke("option "+f+" must be "+b,Ke.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new Ke("Unknown option "+f,Ke.ERR_BAD_OPTION)}}const Mo={assertOptions:hN,validators:Yo},ss=Mo.validators;let $n=class{constructor(r){this.defaults=r||{},this.interceptors={request:new ex,response:new ex}}async request(r,o){try{return await this._request(r,o)}catch(l){if(l instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const f=c.stack?c.stack.replace(/^.+\n/,""):"";try{l.stack?f&&!String(l.stack).endsWith(f.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+f):l.stack=f}catch{}}throw l}}_request(r,o){typeof r=="string"?(o=o||{},o.url=r):o=r||{},o=Gn(this.defaults,o);const{transitional:l,paramsSerializer:c,headers:f}=o;l!==void 0&&Mo.assertOptions(l,{silentJSONParsing:ss.transitional(ss.boolean),forcedJSONParsing:ss.transitional(ss.boolean),clarifyTimeoutError:ss.transitional(ss.boolean)},!1),c!=null&&(fe.isFunction(c)?o.paramsSerializer={serialize:c}:Mo.assertOptions(c,{encode:ss.function,serialize:ss.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),Mo.assertOptions(o,{baseUrl:ss.spelling("baseURL"),withXsrfToken:ss.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let m=f&&fe.merge(f.common,f[o.method]);f&&fe.forEach(["delete","get","head","post","put","patch","common"],C=>{delete f[C]}),o.headers=pa.concat(m,f);const g=[];let b=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(o)===!1||(b=b&&D.synchronous,g.unshift(D.fulfilled,D.rejected))});const x=[];this.interceptors.response.forEach(function(D){x.push(D.fulfilled,D.rejected)});let y,v=0,S;if(!b){const C=[ux.bind(this),void 0];for(C.unshift(...g),C.push(...x),S=C.length,y=Promise.resolve(o);v<S;)y=y.then(C[v++],C[v++]);return y}S=g.length;let R=o;for(;v<S;){const C=g[v++],D=g[v++];try{R=C(R)}catch(k){D.call(this,k);break}}try{y=ux.call(this,R)}catch(C){return Promise.reject(C)}for(v=0,S=x.length;v<S;)y=y.then(x[v++],x[v++]);return y}getUri(r){r=Gn(this.defaults,r);const o=qp(r.baseURL,r.url,r.allowAbsoluteUrls);return Lp(o,r.params,r.paramsSerializer)}};fe.forEach(["delete","get","head","options"],function(r){$n.prototype[r]=function(o,l){return this.request(Gn(l||{},{method:r,url:o,data:(l||{}).data}))}});fe.forEach(["post","put","patch"],function(r){function o(l){return function(f,m,g){return this.request(Gn(g||{},{method:r,headers:l?{"Content-Type":"multipart/form-data"}:{},url:f,data:m}))}}$n.prototype[r]=o(),$n.prototype[r+"Form"]=o(!0)});let gN=class Ip{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(f){o=f});const l=this;this.promise.then(c=>{if(!l._listeners)return;let f=l._listeners.length;for(;f-- >0;)l._listeners[f](c);l._listeners=null}),this.promise.then=c=>{let f;const m=new Promise(g=>{l.subscribe(g),f=g}).then(c);return m.cancel=function(){l.unsubscribe(f)},m},r(function(f,m,g){l.reason||(l.reason=new $r(f,m,g),o(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const o=this._listeners.indexOf(r);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const r=new AbortController,o=l=>{r.abort(l)};return this.subscribe(o),r.signal.unsubscribe=()=>this.unsubscribe(o),r.signal}static source(){let r;return{token:new Ip(function(c){r=c}),cancel:r}}};function xN(n){return function(o){return n.apply(null,o)}}function pN(n){return fe.isObject(n)&&n.isAxiosError===!0}const ef={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ef).forEach(([n,r])=>{ef[r]=n});function Vp(n){const r=new $n(n),o=jp($n.prototype.request,r);return fe.extend(o,$n.prototype,r,{allOwnKeys:!0}),fe.extend(o,r,null,{allOwnKeys:!0}),o.create=function(c){return Vp(Gn(n,c))},o}const ct=Vp(nl);ct.Axios=$n;ct.CanceledError=$r;ct.CancelToken=gN;ct.isCancel=Fp;ct.VERSION=Gp;ct.toFormData=Vo;ct.AxiosError=Ke;ct.Cancel=ct.CanceledError;ct.all=function(r){return Promise.all(r)};ct.spread=xN;ct.isAxiosError=pN;ct.mergeConfig=Gn;ct.AxiosHeaders=pa;ct.formToJSON=n=>zp(fe.isHTMLForm(n)?new FormData(n):n);ct.getAdapter=Pp.getAdapter;ct.HttpStatusCode=ef;ct.default=ct;const{Axios:a3,AxiosError:s3,CanceledError:n3,isCancel:r3,CancelToken:i3,VERSION:l3,all:o3,Cancel:c3,isAxiosError:d3,spread:u3,toFormData:f3,AxiosHeaders:m3,HttpStatusCode:h3,formToJSON:g3,getAdapter:x3,mergeConfig:p3}=ct,Ct="/api/v1",ta="Superadmin",Te={FEATURE_VIEW_OWN_OFFICE_SENDER:"VIEW_REFS_OWN",FEATURE_VIEW_INTER_OFFICE_SENDER:"VIEW_REFS_GLOBAL",FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE:"MANAGE_REFS_LOCAL_OWN",FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES:"MANAGE_REFS_LOCAL_ALL",FEATURE_MANAGE_GLOBAL_REFERENCES:"MANAGE_REFS_GLOBAL",FEATURE_FORM_MANAGEMENT:"MANAGE_FORMS",FEATURE_MANAGE_USERS_OWN_OFFICE:"MANAGE_USERS_OWN",FEATURE_MANAGE_USERS_ALL_OFFICES:"MANAGE_USERS_ALL",FEATURE_AUDIT_TRAILS:"VIEW_AUDIT_TRAILS",FEATURE_SYSTEM_CONFIGURATION:"SYSTEM_CONFIG"},Qe=ct.create({baseURL:Ct,withCredentials:!0});Qe.interceptors.response.use(n=>n,async n=>{const r=n.config;if(n.response?.status===401&&!r._retry){r._retry=!0;try{return await ct.post(`${Ct}/users/refresh-token`,{},{withCredentials:!0}),Qe(r)}catch(o){return Promise.reject(o)}}return Promise.reject(n)});let bN={data:""},yN=n=>{if(typeof window=="object"){let r=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return r.nonce=window.__nonce__,r.parentNode||(n||document.head).appendChild(r),r.firstChild}return n||bN},vN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,wN=/\/\*[^]*?\*\/|  +/g,mx=/\n+/g,gn=(n,r)=>{let o="",l="",c="";for(let f in n){let m=n[f];f[0]=="@"?f[1]=="i"?o=f+" "+m+";":l+=f[1]=="f"?gn(m,f):f+"{"+gn(m,f[1]=="k"?"":r)+"}":typeof m=="object"?l+=gn(m,r?r.replace(/([^,])+/g,g=>f.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,b=>/&/.test(b)?b.replace(/&/g,g):g?g+" "+b:b)):f):m!=null&&(f=/^--/.test(f)?f:f.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=gn.p?gn.p(f,m):f+":"+m+";")}return o+(r&&c?r+"{"+c+"}":c)+l},Rs={},Yp=n=>{if(typeof n=="object"){let r="";for(let o in n)r+=o+Yp(n[o]);return r}return n},NN=(n,r,o,l,c)=>{let f=Yp(n),m=Rs[f]||(Rs[f]=(b=>{let x=0,y=11;for(;x<b.length;)y=101*y+b.charCodeAt(x++)>>>0;return"go"+y})(f));if(!Rs[m]){let b=f!==n?n:(x=>{let y,v,S=[{}];for(;y=vN.exec(x.replace(wN,""));)y[4]?S.shift():y[3]?(v=y[3].replace(mx," ").trim(),S.unshift(S[0][v]=S[0][v]||{})):S[0][y[1]]=y[2].replace(mx," ").trim();return S[0]})(n);Rs[m]=gn(c?{["@keyframes "+m]:b}:b,o?"":"."+m)}let g=o&&Rs.g?Rs.g:null;return o&&(Rs.g=Rs[m]),((b,x,y,v)=>{v?x.data=x.data.replace(v,b):x.data.indexOf(b)===-1&&(x.data=y?b+x.data:x.data+b)})(Rs[m],r,l,g),m},jN=(n,r,o)=>n.reduce((l,c,f)=>{let m=r[f];if(m&&m.call){let g=m(o),b=g&&g.props&&g.props.className||/^go/.test(g)&&g;m=b?"."+b:g&&typeof g=="object"?g.props?"":gn(g,""):g===!1?"":g}return l+c+(m??"")},"");function Xo(n){let r=this||{},o=n.call?n(r.p):n;return NN(o.unshift?o.raw?jN(o,[].slice.call(arguments,1),r.p):o.reduce((l,c)=>Object.assign(l,c&&c.call?c(r.p):c),{}):o,yN(r.target),r.g,r.o,r.k)}let Xp,tf,af;Xo.bind({g:1});let Fs=Xo.bind({k:1});function SN(n,r,o,l){gn.p=r,Xp=n,tf=o,af=l}function yn(n,r){let o=this||{};return function(){let l=arguments;function c(f,m){let g=Object.assign({},f),b=g.className||c.className;o.p=Object.assign({theme:tf&&tf()},g),o.o=/ *go\d+/.test(b),g.className=Xo.apply(o,l)+(b?" "+b:"");let x=n;return n[0]&&(x=g.as||n,delete g.as),af&&x[0]&&af(g),Xp(x,g)}return c}}var kN=n=>typeof n=="function",sf=(n,r)=>kN(n)?n(r):n,EN=(()=>{let n=0;return()=>(++n).toString()})(),AN=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");n=!r||r.matches}return n}})(),CN=20,Qp="default",Wp=(n,r)=>{let{toastLimit:o}=n.settings;switch(r.type){case 0:return{...n,toasts:[r.toast,...n.toasts].slice(0,o)};case 1:return{...n,toasts:n.toasts.map(m=>m.id===r.toast.id?{...m,...r.toast}:m)};case 2:let{toast:l}=r;return Wp(n,{type:n.toasts.find(m=>m.id===l.id)?1:0,toast:l});case 3:let{toastId:c}=r;return{...n,toasts:n.toasts.map(m=>m.id===c||c===void 0?{...m,dismissed:!0,visible:!1}:m)};case 4:return r.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(m=>m.id!==r.toastId)};case 5:return{...n,pausedAt:r.time};case 6:let f=r.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(m=>({...m,pauseDuration:m.pauseDuration+f}))}}},_N=[],RN={toasts:[],pausedAt:void 0,settings:{toastLimit:CN}},Dr={},Zp=(n,r=Qp)=>{Dr[r]=Wp(Dr[r]||RN,n),_N.forEach(([o,l])=>{o===r&&l(Dr[r])})},Kp=n=>Object.keys(Dr).forEach(r=>Zp(n,r)),TN=n=>Object.keys(Dr).find(r=>Dr[r].toasts.some(o=>o.id===n)),kf=(n=Qp)=>r=>{Zp(r,n)},MN=(n,r="blank",o)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...o,id:o?.id||EN()}),rl=n=>(r,o)=>{let l=MN(r,n,o);return kf(l.toasterId||TN(l.id))({type:2,toast:l}),l.id},et=(n,r)=>rl("blank")(n,r);et.error=rl("error");et.success=rl("success");et.loading=rl("loading");et.custom=rl("custom");et.dismiss=(n,r)=>{let o={type:3,toastId:n};r?kf(r)(o):Kp(o)};et.dismissAll=n=>et.dismiss(void 0,n);et.remove=(n,r)=>{let o={type:4,toastId:n};r?kf(r)(o):Kp(o)};et.removeAll=n=>et.remove(void 0,n);et.promise=(n,r,o)=>{let l=et.loading(r.loading,{...o,...o?.loading});return typeof n=="function"&&(n=n()),n.then(c=>{let f=r.success?sf(r.success,c):void 0;return f?et.success(f,{id:l,...o,...o?.success}):et.dismiss(l),c}).catch(c=>{let f=r.error?sf(r.error,c):void 0;f?et.error(f,{id:l,...o,...o?.error}):et.dismiss(l)}),n};var ON=Fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DN=Fs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LN=Fs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,UN=yn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ON} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,zN=Fs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,FN=yn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${zN} 1s linear infinite;
`,BN=Fs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,qN=Fs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,HN=yn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${BN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${qN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$N=yn("div")`
  position: absolute;
`,PN=yn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,GN=Fs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,IN=yn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${GN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,VN=({toast:n})=>{let{icon:r,type:o,iconTheme:l}=n;return r!==void 0?typeof r=="string"?h.createElement(IN,null,r):r:o==="blank"?null:h.createElement(PN,null,h.createElement(FN,{...l}),o!=="loading"&&h.createElement($N,null,o==="error"?h.createElement(UN,{...l}):h.createElement(HN,{...l})))},YN=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,XN=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,QN="0%{opacity:0;} 100%{opacity:1;}",WN="0%{opacity:1;} 100%{opacity:0;}",ZN=yn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,KN=yn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JN=(n,r)=>{let o=n.includes("top")?1:-1,[l,c]=AN()?[QN,WN]:[YN(o),XN(o)];return{animation:r?`${Fs(l)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fs(c)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};h.memo(({toast:n,position:r,style:o,children:l})=>{let c=n.height?JN(n.position||r||"top-center",n.visible):{opacity:0},f=h.createElement(VN,{toast:n}),m=h.createElement(KN,{...n.ariaProps},sf(n.message,n));return h.createElement(ZN,{className:n.className,style:{...c,...o,...n.style}},typeof l=="function"?l({icon:f,message:m}):h.createElement(h.Fragment,null,f,m))});SN(h.createElement);Xo`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var ej=et;const Jp=async()=>{try{return{success:!0,data:(await Qe.get("/settings/allowed-domains")).data.data}}catch(n){return console.error("Error fetching allowed domains:",n),{success:!1,data:{allowedDomains:[]}}}},hx=async n=>{try{const r=await Qe.put("/settings/allowed-domains",{allowedDomains:n});return et.success("Security settings updated successfully"),{success:!0,data:r.data.data}}catch(r){return console.error("Error updating allowed domains:",r),et.error(r.response?.data?.message||"Failed to update settings"),{success:!1,data:null}}},Ef=async()=>{try{return{success:!0,data:(await Qe.get("/settings/labs")).data.data}}catch(n){return console.error("Error fetching labs:",n),{success:!1,data:{labs:[]}}}},gx=async n=>{try{const r=await Qe.put("/settings/labs",{labs:n});return et.success("Labs list updated successfully"),{success:!0,data:r.data.data}}catch(r){return console.error("Error updating labs:",r),et.error(r.response?.data?.message||"Failed to update labs"),{success:!1,data:null}}},Af=async()=>{try{return{success:!0,data:(await Qe.get("/settings/designations")).data.data}}catch(n){return console.error("Error fetching designations:",n),{success:!1,data:{designations:[]}}}},So=async n=>{try{const r=await Qe.put("/settings/designations",{designations:n});return et.success("Designations list updated successfully"),{success:!0,data:r.data.data}}catch(r){return console.error("Error updating designations:",r),et.error(r.response?.data?.message||"Failed to update designations"),{success:!1,data:null}}},eb=async()=>{try{return{success:!0,data:(await Qe.get("/settings/divisions")).data.data}}catch(n){return console.error("Error fetching divisions:",n),{success:!1,data:{divisions:[]}}}},xx=async n=>{try{const r=await Qe.put("/settings/divisions",{divisions:n});return et.success("Divisions list updated successfully"),{success:!0,data:r.data.data}}catch(r){return console.error("Error updating divisions:",r),et.error(r.response?.data?.message||"Failed to update divisions"),{success:!1,data:null}}},nf=async()=>{try{return{success:!0,data:(await Qe.get("/settings/feature-permissions")).data.data}}catch(n){return console.error("Error fetching feature permissions:",n),{success:!1,data:{permissions:[]}}}},tj=async n=>{try{const r=await Qe.put("/settings/feature-permissions",{permissions:n});return et.success("Feature permissions updated successfully"),{success:!0,data:r.data.data}}catch(r){return console.error("Error updating feature permissions:",r),et.error(r.response?.data?.message||"Failed to update feature permissions"),{success:!1,data:null}}},aj=async n=>{try{console.log("before call loginUser...");const r=await ct.post(`${Ct}/users/login`,n,{withCredentials:!0});return console.log("after call loginUser..."),{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return console.log("In error loginUser..."),console.log("error",r.response?.data?.message),{success:!1,message:r.response?.data?.message||"Login failed"}}},sj=async()=>{try{return(await Qe.post("/users/logout")).data}catch(n){return{success:!1,message:n.response?.data?.message||"Logout failed"}}},nj=async n=>{try{console.log("before call registerUser...");const r=await ct.post(`${Ct}/users/register`,n,{withCredentials:!0});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Registration failed"}}},rj=async n=>{try{console.log("reached sendpasswordapi at frontend");const r=await ct.post(`${Ct}/users/forgot-password`,n,{withCredentials:!0});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to send reset link"}}},ij=async n=>{try{console.log("reached verifyResetLink at frontend");const r=await ct.post(`${Ct}/users/verify-reset-token`,n,{withCredentials:!0});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to verify reset token link"}}},lj=async n=>{try{const r=await ct.post(`${Ct}/users/activate-account`,n,{withCredentials:!0});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to activate account"}}},oj=async n=>{try{const r=await Qe.post("/users/change-password",n);return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to change password"}}},cj=async n=>{try{console.log("reached resetPassword at frontend");const r=await ct.post(`${Ct}/users/reset-password`,n,{withCredentials:!0});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to reset password"}}},tb=async n=>{try{const r=await Qe.patch("/users/profile",n);return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to update profile"}}},dj=async()=>{try{const n=await Qe.get("/users/profile");return{success:n.data.success,message:n.data.message,data:n.data.data}}catch(n){return{success:!1,message:n.response?.data?.message||"Failed to fetch current user"}}},uj=async n=>{try{const r=await Qe.patch("/users/avatar",n,{headers:{"Content-Type":"multipart/form-data"}});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to update avatar"}}},Pr=async(n=1,r=20,o="")=>{try{const l=new URLSearchParams({page:n.toString(),limit:r.toString(),search:o}),c=await Qe.get(`/users/getAllUsers?${l}`);return{success:c.data.success,message:c.data.message,data:c.data.data}}catch(l){return{success:!1,message:l.response?.data?.message||"Failed to fetch users"}}},ab=async(n,r)=>{try{const o=await Qe.patch(`/users/status/${n}`,{status:r});return{success:o.data.success,message:o.data.message,data:o.data.data}}catch(o){return{success:!1,message:o.response?.data?.message||"Failed to update user status"}}},fj=async n=>{try{const r=await Qe.post("/users/admin-creation",n);return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to create administrative user"}}},mj=async(n,r)=>{try{const o=await Qe.patch("/users/status/bulk",{userIds:n,status:r});return{success:o.data.success,message:o.data.message,data:o.data.data}}catch(o){return{success:!1,message:o.response?.data?.message||"Failed to bulk update user status"}}},hj=async n=>{try{const r=await Qe.post("/users/delete/bulk",{userIds:n});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to delete users"}}},sb=async n=>{try{const r=await ct.get(`${Ct}/users/profile/${n}`,{withCredentials:!0});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to fetch user profile"}}},nb=async n=>{try{const r=await Qe.post(`/users/activate-manual/${n}`);return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to manually activate user"}}},gj=async n=>{try{const r=await Qe.post("/users/activate-manual/bulk",{userIds:n});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to bulk activate users"}}},xj=async n=>{try{const r=await Qe.post("/users/switch-role",{targetRole:n});return{success:r.data.success,message:r.data.message,data:r.data.data}}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to switch role"}}},pj=async(n,r)=>{try{const o=await Qe.patch(`/users/update-roles/${n}`,{roles:r});return{success:o.data.success,message:o.data.message,data:o.data.data}}catch(o){return{success:!1,message:o.response?.data?.message||"Failed to update user roles"}}},rb=h.createContext(void 0),bj=({children:n})=>{const[r,o]=h.useState(null),[l,c]=h.useState(!0),[f,m]=h.useState(!1),[g,b]=h.useState([]),x=async()=>{m(!0);const R=await nf();R.success?(console.log("[AuthContext] Fetched Permissions:",R.data.permissions),b(R.data.permissions)):console.error("[AuthContext] Failed to fetch permissions"),m(!1)};h.useEffect(()=>{(async()=>{const C=localStorage.getItem("user");if(C)try{const D=JSON.parse(C);o(D);try{const k=await dj();k.success&&k.data?(console.log("[AuthContext] Refreshed user from backend:",k.data),o(k.data),localStorage.setItem("user",JSON.stringify(k.data))):(console.warn("[AuthContext] Session invalid or expired. Clearing local storage."),o(null),localStorage.removeItem("user"))}catch(k){console.warn("[AuthContext] Failed to refresh user from backend (Network/API Error)",k)}}catch(D){console.error("Failed to parse user from local storage",D),localStorage.removeItem("user")}await x(),c(!1)})()},[]);const y=R=>{o(R),localStorage.setItem("user",JSON.stringify(R)),x()},v=()=>{o(null),localStorage.removeItem("user")},S=R=>{if(!r)return!1;const C=g.find(k=>k.feature===R);if(!C)return console.warn(`[AuthContext] Permission check: Feature '${R}' not found in configuration.`),!1;const D=C.roles.includes(r.role);return R===Te.FEATURE_FORM_MANAGEMENT&&r.role==="User"&&console.log(`[AuthContext] DEBUG: Form Management check. Roles defined: ${JSON.stringify(C.roles)}. Has Access: ${D}`),D};return a.jsx(rb.Provider,{value:{user:r,login:y,logout:v,isAuthenticated:!!r,isLoading:l,isPermissionsLoading:f,permissions:g,hasPermission:S},children:n})},At=()=>{const n=h.useContext(rb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n};const yj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,o,l)=>l?l.toUpperCase():o.toLowerCase()),px=n=>{const r=vj(n);return r.charAt(0).toUpperCase()+r.slice(1)},ib=(...n)=>n.filter((r,o,l)=>!!r&&r.trim()!==""&&l.indexOf(r)===o).join(" ").trim(),wj=n=>{for(const r in n)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var Nj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jj=h.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:f,iconNode:m,...g},b)=>h.createElement("svg",{ref:b,...Nj,width:r,height:r,stroke:n,strokeWidth:l?Number(o)*24/Number(r):o,className:ib("lucide",c),...!f&&!wj(g)&&{"aria-hidden":"true"},...g},[...m.map(([x,y])=>h.createElement(x,y)),...Array.isArray(f)?f:[f]]));const _e=(n,r)=>{const o=h.forwardRef(({className:l,...c},f)=>h.createElement(jj,{ref:f,iconNode:r,className:ib(`lucide-${yj(px(n))}`,`lucide-${n}`,l),...c}));return o.displayName=px(n),o};const Sj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Cf=_e("activity",Sj);const kj=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],ba=_e("archive",kj);const Ej=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Aj=_e("arrow-down-left",Ej);const Cj=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],_j=_e("arrow-down",Cj);const Rj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qo=_e("arrow-left",Rj);const Tj=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],bx=_e("arrow-right-left",Tj);const Mj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],rf=_e("arrow-right",Mj);const Oj=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Nu=_e("arrow-up-right",Oj);const Dj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Lj=_e("arrow-up",Dj);const Uj=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zj=_e("badge-check",Uj);const Fj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Vi=_e("bell",Fj);const Bj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],lb=_e("briefcase",Bj);const qj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ls=_e("building-2",qj);const Hj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_f=_e("calendar",Hj);const $j=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Pj=_e("camera",$j);const Gj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ij=_e("check",Gj);const Vj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yx=_e("chevron-down",Vj);const Yj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qi=_e("chevron-left",Yj);const Xj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Wi=_e("chevron-right",Xj);const Qj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bs=_e("circle-alert",Qj);const Wj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rf=_e("circle-check-big",Wj);const Zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],na=_e("circle-check",Zj);const Kj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ob=_e("circle-question-mark",Kj);const Jj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],cb=_e("circle-user",Jj);const e5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Tf=_e("circle-x",e5);const t5=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zi=_e("clock",t5);const a5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],s5=_e("copy",a5);const n5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],r5=_e("crown",n5);const i5=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],db=_e("database",i5);const l5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ub=_e("download",l5);const o5=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],c5=_e("ellipsis-vertical",o5);const d5=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ds=_e("eye-off",d5);const u5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rs=_e("eye",u5);const f5=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],fb=_e("file-stack",f5);const m5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ea=_e("file-text",m5);const h5=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Ls=_e("flag",h5);const g5=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Uo=_e("folder-open",g5);const x5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],p5=_e("funnel",x5);const b5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],In=_e("globe",b5);const y5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],vx=_e("history",y5);const v5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],lf=_e("image",v5);const w5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mb=_e("info",w5);const N5=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],j5=_e("key-round",N5);const S5=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],k5=_e("landmark",S5);const E5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],A5=_e("layers",E5);const C5=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],_5=_e("layout-grid",C5);const R5=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],T5=_e("layout-template",R5);const M5=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],O5=_e("library",M5);const D5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],L5=_e("link",D5);const U5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],z5=_e("list",U5);const F5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Bt=_e("loader-circle",F5);const B5=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],q5=_e("loader",B5);const H5=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Mf=_e("log-in",H5);const $5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Yi=_e("lock",$5);const P5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],G5=_e("log-out",P5);const I5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ur=_e("mail",I5);const V5=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Y5=_e("monitor",V5);const X5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Q5=_e("moon",X5);const W5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],ju=_e("palette",W5);const Z5=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],K5=_e("pause",Z5);const J5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],e4=_e("play",J5);const t4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ms=_e("plus",t4);const a4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],s4=_e("refresh-cw",a4);const n4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],hb=_e("rotate-ccw",n4);const r4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],os=_e("save",r4);const i4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ds=_e("search",i4);const l4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],o4=_e("send",l4);const c4=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],d4=_e("settings-2",c4);const u4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Us=_e("settings",u4);const f4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ii=_e("share-2",f4);const m4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],zr=_e("shield-alert",m4);const h4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Pn=_e("shield-check",h4);const g4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ha=_e("shield",g4);const x4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cs=_e("sparkles",x4);const p4=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Su=_e("square-check-big",p4);const b4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],wx=_e("square",b4);const y4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],v4=_e("sun",y4);const w4=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],N4=_e("toggle-left",w4);const j4=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],S4=_e("toggle-right",j4);const k4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],pn=_e("trash-2",k4);const E4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gb=_e("triangle-alert",E4);const A4=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],C4=_e("type",A4);const _4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],R4=_e("undo-2",_4);const T4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],of=_e("upload",T4);const M4=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],O4=_e("user-check",M4);const D4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cf=_e("user-plus",D4);const L4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],U4=_e("user-x",L4);const z4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Of=_e("user",z4);const F4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ns=_e("users",F4);const B4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qt=_e("x",B4);function q4({labName:n="User",userInitials:r="U",userEmail:o="user@example.com",userRole:l="User",userAvatar:c}){const[f,m]=h.useState(!1),g=h.useRef(null);At();const b=Xt(),y=ra().pathname==="/profile";h.useEffect(()=>{function R(C){g.current&&!g.current.contains(C.target)&&m(!1)}return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]);const v=()=>{m(!f)},S=()=>{m(!1),b("/logout",{replace:!0})};return a.jsxs("div",{className:"relative",ref:g,children:[a.jsxs("button",{onClick:v,className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-bold transition-all focus:outline-none border shadow-sm ${f||y?"bg-indigo-600 text-white border-indigo-600 shadow-indigo-200":"bg-white/50 backdrop-blur-md text-gray-700 border-gray-200/50 hover:bg-white hover:border-gray-300"}`,children:[a.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold overflow-hidden ${f||y?"bg-indigo-400":"bg-indigo-100 text-indigo-600"}`,children:c?a.jsx("img",{src:c,alt:r,className:"w-full h-full object-cover"}):r}),a.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:n}),a.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&a.jsxs("div",{className:"absolute right-0 mt-3 w-56 lg:w-64 bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-700 py-3 z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"px-5 py-3 border-b border-gray-50 dark:border-gray-700 bg-gray-50/30",children:[a.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",title:n,children:n}),a.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest mb-1",children:l}),a.jsx("p",{className:"text-xs text-gray-500 truncate",title:o,children:o})]}),a.jsxs("div",{className:"py-2 px-2",children:[a.jsxs(Yt,{to:"/profile",onClick:()=>m(!1),className:"flex items-center gap-3 w-full text-left px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-indigo-50/50 hover:text-indigo-600 rounded-xl transition-all",children:[a.jsx(Of,{className:"w-4 h-4"})," Profile"]}),a.jsxs(Yt,{to:"/settings",onClick:()=>m(!1),className:"flex items-center gap-3 w-full text-left px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-indigo-50/50 hover:text-indigo-600 rounded-xl transition-all",children:[a.jsx(Us,{className:"w-4 h-4"})," Settings"]}),a.jsxs(Yt,{to:"/help",onClick:()=>m(!1),className:"flex items-center gap-3 w-full text-left px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-indigo-50/50 hover:text-indigo-600 rounded-xl transition-all",children:[a.jsx(ob,{className:"w-4 h-4"})," Help"]})]}),a.jsx("div",{className:"border-t border-gray-50 dark:border-gray-700 my-1 mx-4"}),a.jsx("div",{className:"px-2",children:a.jsxs("button",{onClick:S,className:"flex items-center gap-3 w-full text-left px-4 py-2 text-sm font-bold text-red-600 hover:bg-red-50 rounded-xl transition-all mb-1",children:[a.jsx(G5,{className:"w-4 h-4"})," Logout"]})})]})]})}function Le({label:n,variant:r="primary",size:o="md",fullWidth:l=!1,loading:c=!1,icon:f,iconPosition:m="left",onClick:g,disabled:b=!1,type:x="button",className:y="",children:v}){const S="relative overflow-hidden font-heading font-semibold rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2",R={primary:"button-gradient text-white shadow-lg shadow-indigo-200 hover:shadow-xl hover:shadow-indigo-300 focus:ring-indigo-500 border-t border-indigo-500/50",secondary:"bg-white text-indigo-600 border-2 border-indigo-600 shadow-md hover:bg-indigo-50 hover:shadow-lg focus:ring-indigo-500",danger:"bg-gradient-to-br from-red-600 to-red-700 text-white shadow-lg shadow-red-200 hover:shadow-xl hover:shadow-red-300 hover:from-red-700 hover:to-red-800 focus:ring-red-500 border-t border-red-500/50"},C={sm:"px-3 py-1.5 text-sm",md:"px-6 py-2.5 text-base",lg:"px-8 py-3 text-lg"},D=l?"w-full":"",k=`${S} ${R[r]} ${C[o]} ${D} ${y}`.trim();return a.jsxs("button",{type:x,onClick:g,disabled:b||c,className:k,children:[a.jsx("span",{className:"absolute inset-0 bg-linear-to-br from-white/20 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),c&&a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),f&&!c&&m==="left"&&a.jsx("span",{className:"relative z-10",children:f}),(n||v)&&a.jsx("span",{className:"relative z-10",children:v||n}),f&&!c&&m==="right"&&a.jsx("span",{className:"relative z-10",children:f})]})}const H4=()=>{const[n,r]=h.useState([]),[o,l]=h.useState(!1),c=h.useRef(null),f=async()=>{try{const g=await ct.get("/api/v1/tasks/my-tasks",{withCredentials:!0});g.data.success&&r(g.data.data)}catch(g){console.error("Failed to fetch tasks",g)}};h.useEffect(()=>{f();const g=setInterval(()=>{(n.some(x=>["PENDING","IN_PROGRESS"].includes(x.status))||o)&&f()},5e3);return()=>clearInterval(g)},[n.length,o]),h.useEffect(()=>{function g(b){c.current&&!c.current.contains(b.target)&&l(!1)}return o&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[o]);const m=n.filter(g=>["PENDING","IN_PROGRESS"].includes(g.status)).length;return a.jsxs("div",{className:"relative",ref:c,children:[a.jsxs("button",{onClick:()=>l(!o),className:`p-2 rounded-full transition-all relative ${m>0?"bg-indigo-50 text-indigo-600":"text-gray-400 hover:bg-gray-100 hover:text-gray-600"}`,title:"Background Tasks",children:[m>0?a.jsx(Bt,{className:"w-5 h-5 animate-spin"}):a.jsx(Cf,{className:"w-5 h-5"}),m>0&&a.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white"})]}),o&&a.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl border border-gray-100 z-50 overflow-hidden animate-in fade-in slide-in-from-top-2",children:[a.jsxs("div",{className:"p-3 border-b border-gray-50 bg-gray-50/50 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Background Tasks"}),a.jsx("button",{onClick:f,className:"text-xs text-indigo-600 font-bold hover:underline",children:"Refresh"})]}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:n.length===0?a.jsx("div",{className:"p-8 text-center text-gray-400 text-xs",children:"No active background tasks"}):n.map(g=>a.jsxs("div",{className:"p-4 border-b border-gray-50 last:border-0 hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-gray-800 line-clamp-1",title:g.metadata?.templateTitle,children:g.type==="FORM_DISTRIBUTION"?"Distributing Form":"Updating Form"}),a.jsx("p",{className:"text-xs text-gray-400 font-medium",children:g.metadata?.templateTitle||"Unknown Template"})]}),g.status==="COMPLETED"&&a.jsx(Rf,{className:"w-4 h-4 text-emerald-500 shrink-0"}),g.status==="FAILED"&&a.jsx(Bs,{className:"w-4 h-4 text-red-500 shrink-0"}),g.status==="IN_PROGRESS"&&a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[g.progress,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${g.status==="COMPLETED"?"bg-emerald-500":g.status==="FAILED"?"bg-red-500":"bg-indigo-500"}`,style:{width:`${g.progress}%`}})}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase",children:g.status.replace("_"," ")}),a.jsx("span",{className:"text-[10px] text-gray-300 font-mono",children:new Date(g.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},g._id))})]})]})},$4=async(n=1,r=10,o=!0)=>await Qe.get("/notifications",{params:{page:n,limit:r,unreadOnly:o}}),P4=async n=>await Qe.patch(`/notifications/${n}/read`),G4=async()=>await Qe.patch("/notifications/read-all"),I4="/assets/logo2-CAi7lQt3.svg";function V4(){const{user:n,isAuthenticated:r,login:o,hasPermission:l,isPermissionsLoading:c}=At(),f=Xt(),m=ra(),g=n?.status==="Approved",[b,x]=h.useState(0),[y,v]=h.useState([]),[S,R]=h.useState(null),[C,D]=h.useState(!1),[k,T]=h.useState(!1),O=h.useRef(null),W=h.useRef(null),U=h.useRef(null);h.useEffect(()=>{function A(_){O.current&&!O.current.contains(_.target)&&D(!1),W.current&&!W.current.contains(_.target)&&T(!1),U.current&&!U.current.contains(_.target)&&R(null)}return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const ee=async()=>{if(r&&n&&g)try{const A=await $4(1,10,!0);A.data?.data&&(v(A.data.data.notifications),x(A.data.data.totalUnread))}catch(A){console.error("Error fetching notifications:",A)}};h.useEffect(()=>{ee();const A=setInterval(ee,6e4);return()=>clearInterval(A)},[r,n,g]);const K=()=>{C||ee(),D(!C)},$=async A=>{try{if(A.isRead||(await P4(A._id),v(_=>_.filter(F=>F._id!==A._id)),x(_=>Math.max(0,_-1))),D(!1),A.type==="NEW_USER_APPROVAL"||A.type==="PROFILE_UPDATE")f("/users");else if(A.type==="FORM_SHARED"||A.type==="FORM_UPDATED"){const _=A.referenceId;_?f("/data-collection/shared",{state:{openFormId:_}}):f("/data-collection/shared")}else A.referenceId&&f(`/references/${A.referenceId}`)}catch(_){console.error("Error handling notification click:",_)}},N=async A=>{if(T(!1),A!==n?.role)try{const _=await xj(A);if(_.success&&_.data){const{user:F}=_.data;F&&(o(F),ej.success(`Switched to ${A} role`),f("/"))}}catch(_){console.error("Role switch failed:",_)}},E=async()=>{try{await G4(),v([]),x(0),D(!1)}catch(A){console.error("Error marking all read:",A)}},V=!r||!n?"/":n.status!=="Approved"||!n.labName||!n.designation?"/profile":l(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)||l(Te.FEATURE_MANAGE_USERS_ALL_OFFICES)?"/users":l(Te.FEATURE_VIEW_OWN_OFFICE_SENDER)?"/references/local":l(Te.FEATURE_VIEW_INTER_OFFICE_SENDER)?"/references/global?scope=inter-lab":l(Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE)||l(Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES)?"/admin/references/local":l(Te.FEATURE_MANAGE_GLOBAL_REFERENCES)?"/admin/references/global":l(Te.FEATURE_FORM_MANAGEMENT)?"/data-collection":"/profile",oe=(A=>{switch(A){case ta:return{border:"border-b border-red-500/30 shadow-[0_1px_10px_rgba(239,68,68,0.1)]",badge:"bg-red-50 text-red-600 border-red-100 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800/30"};case"Inter Lab sender":return{border:"border-b border-indigo-500/30 shadow-[0_1px_10px_rgba(79,70,229,0.1)]",badge:"bg-indigo-50 text-indigo-600 border-indigo-100 dark:bg-indigo-900/20 dark:text-indigo-400 dark:border-indigo-800/30",indicator:"bg-indigo-500"};case"Delegated Admin":return{border:"border-b border-purple-500/30 shadow-[0_1px_10px_rgba(168,85,247,0.1)]",badge:"bg-purple-50 text-purple-600 border-purple-100 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800/30",indicator:"bg-purple-500"};default:return{border:"border-b border-gray-100 dark:border-gray-800",badge:"bg-gray-50 text-gray-600 border-gray-100 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700"}}})(n?.role),ve=!n?.labName||!n?.designation,Re=l(Te.FEATURE_VIEW_OWN_OFFICE_SENDER),H=l(Te.FEATURE_VIEW_INTER_OFFICE_SENDER),I=l(Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE),X=l(Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES),z=l(Te.FEATURE_MANAGE_GLOBAL_REFERENCES),M=!r||!g||ve||c?[]:[...Re||H?[{path:Re?"/references/local":"/references/global?scope=inter-lab",label:"References",icon:fb,hasDropdown:!0,subItems:[...Re?[{label:"Local References",path:"/references/local",icon:ls}]:[],...H?[{label:"Global References",path:"/references/global?scope=inter-lab",icon:In}]:[],{label:"VIP References",path:"/references/vip",icon:r5}]}]:[],...I||X||z?[{path:I||X?"/admin/references/local":"/admin/references/global",label:"Manage References",icon:Us,hasDropdown:!0,subItems:[...I||X?[{label:"Local References",path:"/admin/references/local",icon:ls}]:[],...z?[{label:"Global References",path:"/admin/references/global",icon:In}]:[]]}]:[],...l(Te.FEATURE_FORM_MANAGEMENT)?[{path:"/data-collection/shared",label:"Data Collection",icon:db,hasDropdown:!0,subItems:[{label:"AI Form Builder",path:"/data-collection/create",icon:cs},{label:"My Distributions",path:"/data-collection/shared",icon:Ii},{label:"Saved Templates",path:"/data-collection/saved",icon:O5}]}]:[],...l(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)||l(Te.FEATURE_MANAGE_USERS_ALL_OFFICES)?[{path:"/users",label:"Manage Users",icon:ns}]:[],...l(Te.FEATURE_AUDIT_TRAILS)?[{path:"/audit-trails",label:"Audit Trails",icon:zr}]:[],...l(Te.FEATURE_SYSTEM_CONFIGURATION)?[{path:"/system-settings",label:"Config",icon:Us,hasDropdown:!0,subItems:[{label:"System Config",path:"/system-settings",icon:Us},{label:"Feature Access Control",path:"/feature-permissions",icon:Ha}]}]:[]],w=A=>m.pathname===A||m.pathname.startsWith(A+"/");return a.jsx("header",{className:`py-4 sticky top-0 z-50 backdrop-blur-xl bg-white/70 dark:bg-gray-900/70 border-b border-white/20 dark:border-gray-800/20 transition-all duration-500 ease-in-out ${r&&n&&g?oe.border:"shadow-sm"}`,children:a.jsxs("div",{className:"w-full px-3 sm:px-5 lg:px-7 flex justify-between items-center",children:[a.jsxs("div",{id:"Branding",className:"flex items-center justify-start",children:[a.jsx(Yt,{to:V,className:"flex items-center",children:a.jsx("img",{className:"w-20 md:w-24 object-contain",src:I4,alt:"Logo"})}),a.jsxs("div",{className:"flex flex-col text-[13px] sm:text-[14px] leading-[1.2] font-heading text-gray-700 dark:text-gray-300 ml-3 border-l-2 border-gray-200 dark:border-gray-700 pl-4",children:[a.jsx("span",{className:"font-bold tracking-tight text-gray-900 dark:text-white uppercase italic",children:"      "}),a.jsx("span",{className:"font-bold tracking-tight",children:" Council of Scientific & Industrial Research"}),a.jsx("span",{className:"text-gray-400 font-medium dark:text-gray-500 text-[11px] sm:text-[12px]",children:" (Ministry of Science & Technology, Govt. of India) "})]})]}),a.jsx("nav",{id:"nav",className:"flex gap-8 items-center justify-end px-6",children:r&&n&&g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex gap-8 items-center text-sm ml-8",ref:U,children:M.map(A=>{const _=w(A.path)||A.hasDropdown&&A.subItems?.some(de=>w(de.path)),F=S===A.label;return A.hasDropdown?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>R(F?null:A.label),className:`flex items-center gap-1.5 py-2 font-bold transition-all duration-300 font-heading group ${_?"text-gray-900 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-900"}`,children:[A.label,a.jsx(yx,{className:`w-4 h-4 transition-transform duration-300 ${F?"rotate-180":""} ${_?"text-indigo-600":"text-gray-400 group-hover:text-gray-600"}`})]}),F&&a.jsx("div",{className:"absolute left-0 mt-3 w-64 bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-700 py-3 z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:a.jsx("div",{className:"py-2 px-2",children:A.subItems.map(de=>a.jsxs(Yt,{to:de.path,onClick:()=>R(null),className:"flex items-center gap-3 w-full text-left px-5 py-3 text-[13px] font-bold text-gray-700 dark:text-gray-300 hover:bg-indigo-50/50 hover:text-indigo-600 rounded-xl transition-all",children:[a.jsx(de.icon,{className:"w-4 h-4 shrink-0"}),de.label]},de.path))})})]},A.path):a.jsx(Yt,{to:A.path,className:`py-2 font-bold transition-all duration-300 font-heading ${_?"text-gray-900 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-900"}`,children:A.label},A.path)})}),a.jsxs("div",{className:"flex items-center gap-4 pl-6 border-l border-gray-100 dark:border-gray-700 ml-2",children:[a.jsx(H4,{}),a.jsxs("div",{className:"relative",ref:O,children:[a.jsxs("button",{type:"button",onClick:K,className:"relative p-2 text-gray-400 hover:text-indigo-600 transition-colors rounded-full hover:bg-gray-50 dark:hover:bg-gray-800",children:[a.jsx(Vi,{className:"w-5 h-5"}),b>0&&a.jsxs("span",{className:"absolute top-2 right-2 flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})]}),C&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white dark:bg-gray-800 rounded-2xl shadow-xl ring-1 ring-black/5 z-50 overflow-hidden border border-gray-100 dark:border-gray-700",children:[a.jsxs("div",{className:"p-4 border-b border-gray-50 dark:border-gray-700 bg-gray-50/30 dark:bg-gray-800/30 flex justify-between items-center",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-900 dark:text-white uppercase tracking-wider",children:["Notifications",b>0&&a.jsx("span",{className:"ml-2 bg-indigo-50 dark:bg-indigo-900 text-indigo-600 text-[10px] py-0.5 px-2 rounded-full",children:b})]}),b>0&&a.jsx("button",{onClick:E,className:"text-[10px] uppercase font-bold text-indigo-600 hover:underline",children:"Clear All"})]}),a.jsx("div",{className:"max-h-128 overflow-y-auto",children:y.length>0?a.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-700",children:y.map(A=>a.jsx("div",{onClick:()=>$(A),className:"block p-4 hover:bg-gray-50/50 dark:hover:bg-gray-700/30 transition-colors cursor-pointer",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:A.title}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:A.message}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:new Date(A.createdAt).toLocaleDateString()})]})},A._id))}):a.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400 text-xs",children:a.jsx("p",{children:"All caught up!"})})})]})]}),a.jsxs("div",{className:"relative",ref:W,children:[a.jsxs("button",{onClick:()=>T(!k),disabled:!n.availableRoles||n.availableRoles.length<=1,className:`flex items-center gap-1 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest border shadow-sm ${oe.badge} ${n.availableRoles&&n.availableRoles.length>1?"cursor-pointer hover:opacity-80":"cursor-default"}`,children:[n.role,n.availableRoles&&n.availableRoles.length>1&&a.jsx(yx,{className:"w-3 h-3"})]}),k&&n.availableRoles&&n.availableRoles.length>1&&a.jsx("div",{className:"absolute top-full right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden z-50",children:a.jsx("div",{className:"py-1",children:n.availableRoles.map(A=>a.jsx("button",{onClick:()=>N(A),className:`w-full text-left px-4 py-2 text-xs font-medium ${A===n.role?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:A},A))})})]}),a.jsx(q4,{labName:n.labName||n.fullName,userInitials:n.initials,userEmail:n.email,userRole:n.role,userAvatar:n.avatar})]})]}):r&&n&&!g?null:a.jsx(Le,{variant:"primary",onClick:()=>f("/login"),icon:a.jsx(Mf,{className:"w-4 h-4"}),children:"Login / Register"})})]})})}const ea=({children:n,allowedRoles:r,requiredPermissions:o})=>{const{isAuthenticated:l,user:c,isLoading:f,isPermissionsLoading:m,hasPermission:g}=At(),b=ra();if(h.useEffect(()=>{const v=S=>{const R=localStorage.getItem("user");(S.persisted||!R)&&(R||window.location.reload())};return window.addEventListener("pageshow",v),()=>{window.removeEventListener("pageshow",v)}},[]),console.log("[ProtectedRoute] Rendering -",{path:b.pathname,isAuthenticated:l,isLoading:f,user:c?._id,userRole:c?.role,allowedRoles:r,requiredPermissions:o,isPending:c?.status==="Pending",isProfileIncomplete:!c?.labName||!c?.designation}),f||m)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50/50",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-sm font-medium text-slate-500 animate-pulse font-heading tracking-wide",children:f?"Verifying Session...":"Syncing Permissions..."})]})});if(!l)return console.log("[ProtectedRoute] Redirecting to /login - not authenticated"),a.jsx(la,{to:"/login",state:{from:b},replace:!0});if(r&&c&&!r.includes(c.role))return console.log("[ProtectedRoute] Redirecting to / - role mismatch"),a.jsx(la,{to:"/",replace:!0});if(o&&o.length>0&&!o.some(S=>g(S)))return console.log("[ProtectedRoute] Redirecting to / - permission denied"),a.jsx(la,{to:"/",replace:!0});const x=c?.status==="Pending",y=!c?.labName||!c?.designation;if(l&&b.pathname!=="/profile"){if(x)return console.log("[ProtectedRoute] Redirecting to /profile - pending status"),a.jsx(la,{to:"/profile",state:{message:"Your account is awaiting administrator approval. Please ensure your profile is complete."},replace:!0});if(y)return console.log("[ProtectedRoute] Redirecting to /profile - incomplete profile"),a.jsx(la,{to:"/profile",state:{message:"Please complete your profile details (Lab, Designation, etc.) and obtain administrator approval to access the portal."},replace:!0})}return n?a.jsx(a.Fragment,{children:n}):a.jsx(iw,{})};function qa({info:n,onClick:r,isActive:o,loading:l,additionalInfo:c}){return a.jsxs("div",{onClick:r,role:"button",tabIndex:0,className:`cards-gradient p-4 flex rounded-xl shadow-sm flex-col bg-white transition-all duration-300 border-2 ${o?"border-indigo-500 shadow-indigo-100 bg-indigo-50/30 scale-[1.02]":"border-transparent hover:border-gray-200 hover:bg-gray-50/50"}`,style:{cursor:"pointer"},onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),r?.())},children:[a.jsxs("span",{className:"flex justify-between h-10 items-start",children:[a.jsx("h2",{className:`text-[12px] font-medium  tracking-[0.15em] font-heading transition-colors ${o?"text-indigo-600":"text-gray-800"}`,children:n.title}),n.icon?a.jsx("div",{className:`transition-opacity ${o?"text-indigo-600":"text-gray-400"}`,children:n.icon}):a.jsx("img",{src:n.iconUrl,alt:`${n.title} icon`,className:"w-5 h-5 transition-opacity opacity-100"})]}),a.jsx("h1",{className:`text-xl font-bold font-heading tracking-tight transition-colors ${o?"text-indigo-700":"text-gray-900"}`,children:l?a.jsx("div",{className:"h-7 w-12 bg-gray-200 animate-pulse rounded-md"}):n.refcount??0}),c&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:c})]})}function Pt({options:n,name:r,selectedValues:o,onChange:l,disabled:c}){const[f,m]=h.useState(!1),[g,b]=h.useState(""),[x,y]=h.useState(500),[v,S]=h.useState(!1),[R,C]=h.useState(0),D=h.useRef(null),k=U=>{U.preventDefault(),U.stopPropagation(),!c&&m(!f)},T=U=>{o.includes(U)?l(o.filter(ee=>ee!==U)):l([...o,U])},O=h.useMemo(()=>{const U=g.toLowerCase();return n.filter(ee=>(ee.label||"").toLowerCase().includes(U))},[n,g]),W=U=>{U.preventDefault(),U.stopPropagation(),S(!0),C(0),setTimeout(()=>{let ee=100;const K=O.length,$=1e3,N=()=>{ee+=$,ee>=K?(y(K),C(100),setTimeout(()=>S(!1),500)):(y(ee),C(Math.round(ee/K*100)),setTimeout(N,20))};N()},100)};return h.useEffect(()=>{const U=ee=>{D.current&&!D.current.contains(ee.target)&&m(!1)};return f&&document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[f]),h.useEffect(()=>{f||(b(""),y(500),S(!1))},[f]),h.useEffect(()=>{y(500),S(!1)},[g]),a.jsxs("div",{className:"relative w-full text-left",ref:D,style:{zIndex:f?100:10},children:[a.jsxs("button",{type:"button",disabled:c,className:`flex items-center justify-between w-full px-4 py-2 text-sm border rounded-lg shadow-sm transition-all font-heading ${c?"bg-gray-100/50 text-gray-400 border-gray-200 cursor-not-allowed opacity-75":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}`,onClick:k,children:[a.jsx("span",{className:"flex items-center truncate",children:o.length===0?r:o.length===1?n.find(U=>U.value===o[0])?.label||r:`${r} (${o.length})`}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:`ml-2 h-4 w-4 shrink-0 transition-transform duration-200 ${f?"rotate-180":""}`,children:a.jsx("path",{d:"m6 9 6 6 6-6"})})]}),f&&a.jsxs("div",{className:"origin-top-right absolute mt-1 w-full rounded-md shadow-xl bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-1000 overflow-hidden min-w-[200px]",onClick:U=>U.stopPropagation(),onMouseDown:U=>U.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center p-3 border-b border-gray-100",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-search mr-2 h-4 w-4 shrink-0 text-gray-400",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("path",{d:"m21 21-4.3-4.3"})]}),a.jsx("input",{type:"text",placeholder:`Search ${r}...`,className:"w-full focus:outline-none text-sm font-sans",value:g,onChange:U=>b(U.target.value),onMouseDown:U=>U.stopPropagation()})]}),a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-50 bg-gray-50/50",children:[a.jsxs("button",{type:"button",onClick:U=>{U.stopPropagation();const ee=O.map($=>$.value),K=[...new Set([...o,...ee])];l(K)},className:"text-[11px] font-bold text-indigo-600 hover:text-indigo-800 uppercase tracking-tight",children:["Select All ",g?"(Filtered)":""]}),a.jsx("div",{className:"w-px h-3 bg-gray-200 mx-2"}),a.jsxs("button",{type:"button",onClick:U=>{U.stopPropagation();const ee=O.map($=>$.value),K=o.filter($=>!ee.includes($));l(K)},className:"text-[11px] font-bold text-gray-500 hover:text-gray-700 uppercase tracking-tight",children:["Deselect All ",g?"(Filtered)":""]})]}),a.jsx("div",{className:"py-1 max-h-60 overflow-y-auto",children:O.length>0?a.jsxs(a.Fragment,{children:[O.slice(0,x).map(U=>{const ee=o.includes(U.value);return a.jsxs("label",{title:U.title,className:`flex items-center px-4 py-2 text-sm cursor-pointer transition-colors ${ee?"text-indigo-700 bg-indigo-50/50 hover:bg-indigo-100":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx("input",{type:"checkbox",className:"mr-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:ee,onChange:()=>T(U.value)}),a.jsx("span",{className:`truncate ${ee?"font-semibold":""}`,children:U.label})]},U.value)}),O.length>x&&!v&&a.jsxs("div",{className:"p-4 bg-amber-50 border-t border-amber-100 space-y-2",children:[a.jsxs("div",{className:"text-[10px] font-bold text-amber-600 uppercase tracking-widest leading-relaxed",children:["Showing ",x," of ",O.length," results."]}),a.jsx("button",{type:"button",onMouseDown:U=>U.stopPropagation(),onClick:W,className:"w-full py-2 bg-amber-600 hover:bg-amber-700 text-white text-xs font-bold rounded-lg shadow-sm transition-all active:scale-[0.98]",children:"Load All Items (Slow)"}),a.jsx("p",{className:"text-[9px] text-amber-500 font-medium italic text-center",children:"Note: Loading all records may cause temporary lag."})]}),v&&a.jsxs("div",{className:"p-4 bg-indigo-50 border-t border-indigo-100 space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest animate-pulse",children:"Rendering List..."}),a.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 tabular-nums",children:[R,"%"]})]}),a.jsx("div",{className:"h-2 w-full bg-indigo-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300 ease-out shadow-[0_0_8px_rgba(79,70,229,0.4)]",style:{width:`${R}%`}})})]})]}):a.jsx("div",{className:"px-4 py-8 text-sm text-gray-500 text-center italic",children:"No matches found..."})})]})]})}const us=async n=>{const r=n.headers.get("content-type");if(!r||!r.includes("application/json")){const l=await n.text();throw console.error("Non-JSON response received:",l.slice(0,500)),new Error(`Server Error (Status ${n.status}): The server returned a non-JSON response. This usually indicates a backend crash or misconfiguration.`)}const o=await n.json();if(!n.ok)throw new Error(o.message||`API Error: ${n.statusText}`);return o},Y4=async n=>{console.log("Fetching dashboard stats...",{scope:n});const r=new URL(`${Ct}/references/global/getDashboardStats`),o=await fetch(r.toString(),{credentials:"include"});return us(o)},xb=async(n,r={})=>{console.log("Fetching reference filters...",{scope:n,...r});const o=new URL(`${Ct}/references/global/getFilters`);n&&o.searchParams.append("scope",n),r.isArchived!==void 0&&o.searchParams.append("isArchived",String(r.isArchived)),r.isHidden!==void 0&&o.searchParams.append("isHidden",String(r.isHidden));const l=await fetch(o.toString(),{credentials:"include"});return us(l)},pb=async(n=1,r=10,o={},l={})=>{console.log("Fetching references with filters/sort...",{page:n,limit:r,filters:o,sort:l});const c=new URLSearchParams({page:n.toString(),limit:r.toString(),...l});Object.entries(o).forEach(([m,g])=>{g!=null&&(Array.isArray(g)?g.length>0&&c.append(m,g.join(",")):g!==""&&c.append(m,g.toString()))});const f=await fetch(`${Ct}/references/global/getAllReferences?${c}`,{credentials:"include"});return us(f)},X4=async n=>{const r=await fetch(`${Ct}/references/global/createReference`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});return us(r)},Q4=async n=>{console.log("Fetching reference details from backend API..."),console.log("ID: ",n);const r=await fetch(`${Ct}/references/global/getReferenceById/${n}?t=${new Date().getTime()}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});return us(r)},W4=async(n,r)=>{const o=await fetch(`${Ct}/references/global/updateReference/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"});return us(o)},Df=async(n,r,o,l)=>{const c=await fetch(`${Ct}/references/global/bulkUpdate`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n,action:r,force:o,...l}),credentials:"include"});return us(c)},Z4=async(n,r,o,l)=>{const c=await fetch(`${Ct}/references/global/issueReminder`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referenceId:n,userIds:r,remarks:o,priority:l}),credentials:"include"});return us(c)},K4=async(n,r)=>{const o=await fetch(`${Ct}/references/global/${n}/request-reopen`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({remarks:r}),credentials:"include"});return us(o)},J4=async(n,r,o)=>{const l=await fetch(`${Ct}/references/global/${n}/handle-reopen-request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:r,reason:o}),credentials:"include"});return us(l)};function bb(n){var r,o,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var c=n.length;for(r=0;r<c;r++)n[r]&&(o=bb(n[r]))&&(l&&(l+=" "),l+=o)}else for(o in n)n[o]&&(l&&(l+=" "),l+=o);return l}function eS(){for(var n,r,o=0,l="",c=arguments.length;o<c;o++)(n=arguments[o])&&(r=bb(n))&&(l&&(l+=" "),l+=r);return l}const tS=(n,r)=>{const o=new Array(n.length+r.length);for(let l=0;l<n.length;l++)o[l]=n[l];for(let l=0;l<r.length;l++)o[n.length+l]=r[l];return o},aS=(n,r)=>({classGroupId:n,validator:r}),yb=(n=new Map,r=null,o)=>({nextPart:n,validators:r,classGroupId:o}),zo="-",Nx=[],sS="arbitrary..",nS=n=>{const r=iS(n),{conflictingClassGroups:o,conflictingClassGroupModifiers:l}=n;return{getClassGroupId:m=>{if(m.startsWith("[")&&m.endsWith("]"))return rS(m);const g=m.split(zo),b=g[0]===""&&g.length>1?1:0;return vb(g,b,r)},getConflictingClassGroupIds:(m,g)=>{if(g){const b=l[m],x=o[m];return b?x?tS(x,b):b:x||Nx}return o[m]||Nx}}},vb=(n,r,o)=>{if(n.length-r===0)return o.classGroupId;const c=n[r],f=o.nextPart.get(c);if(f){const x=vb(n,r+1,f);if(x)return x}const m=o.validators;if(m===null)return;const g=r===0?n.join(zo):n.slice(r).join(zo),b=m.length;for(let x=0;x<b;x++){const y=m[x];if(y.validator(g))return y.classGroupId}},rS=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const r=n.slice(1,-1),o=r.indexOf(":"),l=r.slice(0,o);return l?sS+l:void 0})(),iS=n=>{const{theme:r,classGroups:o}=n;return lS(o,r)},lS=(n,r)=>{const o=yb();for(const l in n){const c=n[l];Lf(c,o,l,r)}return o},Lf=(n,r,o,l)=>{const c=n.length;for(let f=0;f<c;f++){const m=n[f];oS(m,r,o,l)}},oS=(n,r,o,l)=>{if(typeof n=="string"){cS(n,r,o);return}if(typeof n=="function"){dS(n,r,o,l);return}uS(n,r,o,l)},cS=(n,r,o)=>{const l=n===""?r:wb(r,n);l.classGroupId=o},dS=(n,r,o,l)=>{if(fS(n)){Lf(n(l),r,o,l);return}r.validators===null&&(r.validators=[]),r.validators.push(aS(o,n))},uS=(n,r,o,l)=>{const c=Object.entries(n),f=c.length;for(let m=0;m<f;m++){const[g,b]=c[m];Lf(b,wb(r,g),o,l)}},wb=(n,r)=>{let o=n;const l=r.split(zo),c=l.length;for(let f=0;f<c;f++){const m=l[f];let g=o.nextPart.get(m);g||(g=yb(),o.nextPart.set(m,g)),o=g}return o},fS=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,mS=n=>{if(n<1)return{get:()=>{},set:()=>{}};let r=0,o=Object.create(null),l=Object.create(null);const c=(f,m)=>{o[f]=m,r++,r>n&&(r=0,l=o,o=Object.create(null))};return{get(f){let m=o[f];if(m!==void 0)return m;if((m=l[f])!==void 0)return c(f,m),m},set(f,m){f in o?o[f]=m:c(f,m)}}},df="!",jx=":",hS=[],Sx=(n,r,o,l,c)=>({modifiers:n,hasImportantModifier:r,baseClassName:o,maybePostfixModifierPosition:l,isExternal:c}),gS=n=>{const{prefix:r,experimentalParseClassName:o}=n;let l=c=>{const f=[];let m=0,g=0,b=0,x;const y=c.length;for(let D=0;D<y;D++){const k=c[D];if(m===0&&g===0){if(k===jx){f.push(c.slice(b,D)),b=D+1;continue}if(k==="/"){x=D;continue}}k==="["?m++:k==="]"?m--:k==="("?g++:k===")"&&g--}const v=f.length===0?c:c.slice(b);let S=v,R=!1;v.endsWith(df)?(S=v.slice(0,-1),R=!0):v.startsWith(df)&&(S=v.slice(1),R=!0);const C=x&&x>b?x-b:void 0;return Sx(f,R,S,C)};if(r){const c=r+jx,f=l;l=m=>m.startsWith(c)?f(m.slice(c.length)):Sx(hS,!1,m,void 0,!0)}if(o){const c=l;l=f=>o({className:f,parseClassName:c})}return l},xS=n=>{const r=new Map;return n.orderSensitiveModifiers.forEach((o,l)=>{r.set(o,1e6+l)}),o=>{const l=[];let c=[];for(let f=0;f<o.length;f++){const m=o[f],g=m[0]==="[",b=r.has(m);g||b?(c.length>0&&(c.sort(),l.push(...c),c=[]),l.push(m)):c.push(m)}return c.length>0&&(c.sort(),l.push(...c)),l}},pS=n=>({cache:mS(n.cacheSize),parseClassName:gS(n),sortModifiers:xS(n),...nS(n)}),bS=/\s+/,yS=(n,r)=>{const{parseClassName:o,getClassGroupId:l,getConflictingClassGroupIds:c,sortModifiers:f}=r,m=[],g=n.trim().split(bS);let b="";for(let x=g.length-1;x>=0;x-=1){const y=g[x],{isExternal:v,modifiers:S,hasImportantModifier:R,baseClassName:C,maybePostfixModifierPosition:D}=o(y);if(v){b=y+(b.length>0?" "+b:b);continue}let k=!!D,T=l(k?C.substring(0,D):C);if(!T){if(!k){b=y+(b.length>0?" "+b:b);continue}if(T=l(C),!T){b=y+(b.length>0?" "+b:b);continue}k=!1}const O=S.length===0?"":S.length===1?S[0]:f(S).join(":"),W=R?O+df:O,U=W+T;if(m.indexOf(U)>-1)continue;m.push(U);const ee=c(T,k);for(let K=0;K<ee.length;++K){const $=ee[K];m.push(W+$)}b=y+(b.length>0?" "+b:b)}return b},vS=(...n)=>{let r=0,o,l,c="";for(;r<n.length;)(o=n[r++])&&(l=Nb(o))&&(c&&(c+=" "),c+=l);return c},Nb=n=>{if(typeof n=="string")return n;let r,o="";for(let l=0;l<n.length;l++)n[l]&&(r=Nb(n[l]))&&(o&&(o+=" "),o+=r);return o},wS=(n,...r)=>{let o,l,c,f;const m=b=>{const x=r.reduce((y,v)=>v(y),n());return o=pS(x),l=o.cache.get,c=o.cache.set,f=g,g(b)},g=b=>{const x=l(b);if(x)return x;const y=yS(b,o);return c(b,y),y};return f=m,(...b)=>f(vS(...b))},NS=[],$t=n=>{const r=o=>o[n]||NS;return r.isThemeGetter=!0,r},jb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Sb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,jS=/^\d+\/\d+$/,SS=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ES=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,AS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mr=n=>jS.test(n),tt=n=>!!n&&!Number.isNaN(Number(n)),mn=n=>!!n&&Number.isInteger(Number(n)),ku=n=>n.endsWith("%")&&tt(n.slice(0,-1)),Ts=n=>SS.test(n),_S=()=>!0,RS=n=>kS.test(n)&&!ES.test(n),kb=()=>!1,TS=n=>AS.test(n),MS=n=>CS.test(n),OS=n=>!Be(n)&&!qe(n),DS=n=>Gr(n,Cb,kb),Be=n=>jb.test(n),Fn=n=>Gr(n,_b,RS),Eu=n=>Gr(n,BS,tt),kx=n=>Gr(n,Eb,kb),LS=n=>Gr(n,Ab,MS),ko=n=>Gr(n,Rb,TS),qe=n=>Sb.test(n),Hi=n=>Ir(n,_b),US=n=>Ir(n,qS),Ex=n=>Ir(n,Eb),zS=n=>Ir(n,Cb),FS=n=>Ir(n,Ab),Eo=n=>Ir(n,Rb,!0),Gr=(n,r,o)=>{const l=jb.exec(n);return l?l[1]?r(l[1]):o(l[2]):!1},Ir=(n,r,o=!1)=>{const l=Sb.exec(n);return l?l[1]?r(l[1]):o:!1},Eb=n=>n==="position"||n==="percentage",Ab=n=>n==="image"||n==="url",Cb=n=>n==="length"||n==="size"||n==="bg-size",_b=n=>n==="length",BS=n=>n==="number",qS=n=>n==="family-name",Rb=n=>n==="shadow",HS=()=>{const n=$t("color"),r=$t("font"),o=$t("text"),l=$t("font-weight"),c=$t("tracking"),f=$t("leading"),m=$t("breakpoint"),g=$t("container"),b=$t("spacing"),x=$t("radius"),y=$t("shadow"),v=$t("inset-shadow"),S=$t("text-shadow"),R=$t("drop-shadow"),C=$t("blur"),D=$t("perspective"),k=$t("aspect"),T=$t("ease"),O=$t("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ee=()=>[...U(),qe,Be],K=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],N=()=>[qe,Be,b],E=()=>[Mr,"full","auto",...N()],G=()=>[mn,"none","subgrid",qe,Be],V=()=>["auto",{span:["full",mn,qe,Be]},mn,qe,Be],le=()=>[mn,"auto",qe,Be],oe=()=>["auto","min","max","fr",qe,Be],ve=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Re=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...N()],I=()=>[Mr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],X=()=>[n,qe,Be],z=()=>[...U(),Ex,kx,{position:[qe,Be]}],M=()=>["no-repeat",{repeat:["","x","y","space","round"]}],w=()=>["auto","cover","contain",zS,DS,{size:[qe,Be]}],A=()=>[ku,Hi,Fn],_=()=>["","none","full",x,qe,Be],F=()=>["",tt,Hi,Fn],de=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>[tt,ku,Ex,kx],B=()=>["","none",C,qe,Be],Q=()=>["none",tt,qe,Be],ue=()=>["none",tt,qe,Be],we=()=>[tt,qe,Be],Oe=()=>[Mr,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ts],breakpoint:[Ts],color:[_S],container:[Ts],"drop-shadow":[Ts],ease:["in","out","in-out"],font:[OS],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ts],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ts],shadow:[Ts],spacing:["px",tt],text:[Ts],"text-shadow":[Ts],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Mr,Be,qe,k]}],container:["container"],columns:[{columns:[tt,Be,qe,g]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ee()}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[mn,"auto",qe,Be]}],basis:[{basis:[Mr,"full","auto",g,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,Mr,"auto","initial","none",Be]}],grow:[{grow:["",tt,qe,Be]}],shrink:[{shrink:["",tt,qe,Be]}],order:[{order:[mn,"first","last","none",qe,Be]}],"grid-cols":[{"grid-cols":G()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":G()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":oe()}],"auto-rows":[{"auto-rows":oe()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...ve(),"normal"]}],"justify-items":[{"justify-items":[...Re(),"normal"]}],"justify-self":[{"justify-self":["auto",...Re()]}],"align-content":[{content:["normal",...ve()]}],"align-items":[{items:[...Re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Re(),{baseline:["","last"]}]}],"place-content":[{"place-content":ve()}],"place-items":[{"place-items":[...Re(),"baseline"]}],"place-self":[{"place-self":["auto",...Re()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[g,"screen",...I()]}],"min-w":[{"min-w":[g,"screen","none",...I()]}],"max-w":[{"max-w":[g,"screen","none","prose",{screen:[m]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",o,Hi,Fn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,qe,Eu]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ku,Be]}],"font-family":[{font:[US,Be,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[c,qe,Be]}],"line-clamp":[{"line-clamp":[tt,"none",qe,Eu]}],leading:[{leading:[f,...N()]}],"list-image":[{"list-image":["none",qe,Be]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",qe,Be]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",qe,Fn]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[tt,"auto",qe,Be]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe,Be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe,Be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:M()}],"bg-size":[{bg:w()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},mn,qe,Be],radial:["",qe,Be],conic:[mn,qe,Be]},FS,LS]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:A()}],"gradient-via-pos":[{via:A()}],"gradient-to-pos":[{to:A()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:_()}],"rounded-s":[{"rounded-s":_()}],"rounded-e":[{"rounded-e":_()}],"rounded-t":[{"rounded-t":_()}],"rounded-r":[{"rounded-r":_()}],"rounded-b":[{"rounded-b":_()}],"rounded-l":[{"rounded-l":_()}],"rounded-ss":[{"rounded-ss":_()}],"rounded-se":[{"rounded-se":_()}],"rounded-ee":[{"rounded-ee":_()}],"rounded-es":[{"rounded-es":_()}],"rounded-tl":[{"rounded-tl":_()}],"rounded-tr":[{"rounded-tr":_()}],"rounded-br":[{"rounded-br":_()}],"rounded-bl":[{"rounded-bl":_()}],"border-w":[{border:F()}],"border-w-x":[{"border-x":F()}],"border-w-y":[{"border-y":F()}],"border-w-s":[{"border-s":F()}],"border-w-e":[{"border-e":F()}],"border-w-t":[{"border-t":F()}],"border-w-r":[{"border-r":F()}],"border-w-b":[{"border-b":F()}],"border-w-l":[{"border-l":F()}],"divide-x":[{"divide-x":F()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":F()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...de(),"hidden","none"]}],"divide-style":[{divide:[...de(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...de(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,qe,Be]}],"outline-w":[{outline:["",tt,Hi,Fn]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",y,Eo,ko]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",v,Eo,ko]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[tt,Fn]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":F()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",S,Eo,ko]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[tt,qe,Be]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":L()}],"mask-image-linear-to-pos":[{"mask-linear-to":L()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":L()}],"mask-image-t-to-pos":[{"mask-t-to":L()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":L()}],"mask-image-r-to-pos":[{"mask-r-to":L()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":L()}],"mask-image-b-to-pos":[{"mask-b-to":L()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":L()}],"mask-image-l-to-pos":[{"mask-l-to":L()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":L()}],"mask-image-x-to-pos":[{"mask-x-to":L()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":L()}],"mask-image-y-to-pos":[{"mask-y-to":L()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[qe,Be]}],"mask-image-radial-from-pos":[{"mask-radial-from":L()}],"mask-image-radial-to-pos":[{"mask-radial-to":L()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":U()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":L()}],"mask-image-conic-to-pos":[{"mask-conic-to":L()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:M()}],"mask-size":[{mask:w()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",qe,Be]}],filter:[{filter:["","none",qe,Be]}],blur:[{blur:B()}],brightness:[{brightness:[tt,qe,Be]}],contrast:[{contrast:[tt,qe,Be]}],"drop-shadow":[{"drop-shadow":["","none",R,Eo,ko]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",tt,qe,Be]}],"hue-rotate":[{"hue-rotate":[tt,qe,Be]}],invert:[{invert:["",tt,qe,Be]}],saturate:[{saturate:[tt,qe,Be]}],sepia:[{sepia:["",tt,qe,Be]}],"backdrop-filter":[{"backdrop-filter":["","none",qe,Be]}],"backdrop-blur":[{"backdrop-blur":B()}],"backdrop-brightness":[{"backdrop-brightness":[tt,qe,Be]}],"backdrop-contrast":[{"backdrop-contrast":[tt,qe,Be]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,qe,Be]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,qe,Be]}],"backdrop-invert":[{"backdrop-invert":["",tt,qe,Be]}],"backdrop-opacity":[{"backdrop-opacity":[tt,qe,Be]}],"backdrop-saturate":[{"backdrop-saturate":[tt,qe,Be]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,qe,Be]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",qe,Be]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",qe,Be]}],ease:[{ease:["linear","initial",T,qe,Be]}],delay:[{delay:[tt,qe,Be]}],animate:[{animate:["none",O,qe,Be]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,qe,Be]}],"perspective-origin":[{"perspective-origin":ee()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:ue()}],"scale-x":[{"scale-x":ue()}],"scale-y":[{"scale-y":ue()}],"scale-z":[{"scale-z":ue()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[qe,Be,"","none","gpu","cpu"]}],"transform-origin":[{origin:ee()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Oe()}],"translate-x":[{"translate-x":Oe()}],"translate-y":[{"translate-y":Oe()}],"translate-z":[{"translate-z":Oe()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe,Be]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe,Be]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[tt,Hi,Fn,Eu]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},$S=wS(HS);function Ax(n){return n==="createdAt"?"Created On":n==="daysSinceCreated"?"Days Pending":n.replace(/([A-Z])/g," $1").split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")}function PS(n,r){return n.map(o=>{const l={...o};return r.forEach(c=>{delete l[c]}),l})}function Vr(...n){return $S(eS(n))}function il({rows:n,visibleColumns:r,customRenderers:o,customHeaderRenderers:l,onSort:c,sortConfig:f,columnWidths:m}){const[g]=h.useState({}),[b,x]=h.useState(null),y=f!==void 0?f:b,v=n?.length?Object.keys(n[0]):[],S=r||v,R=n.filter(k=>S.every(T=>{const O=g[T];return O?(k[T]?.toString().toLowerCase()).includes(O.toLowerCase()):!0})),C=h.useMemo(()=>c||!y?R:[...R].sort((T,O)=>{const W=T[y.key],U=O[y.key];return W<U?y.direction==="asc"?-1:1:W>U?y.direction==="asc"?1:-1:0}),[R,y,c]),D=k=>{let T="asc";y&&y.key===k&&y.direction==="asc"&&(T="desc"),c?c(k,T):x({key:k,direction:T})};return a.jsx("div",{className:"w-full overflow-hidden rounded-xl border border-gray-200 shadow-sm",children:a.jsxs("table",{className:"w-full table-fixed bg-white",children:[a.jsx("colgroup",{children:S.map(k=>a.jsx("col",{style:{width:m?.[k]||(k==="selection"?"48px":"auto")}},k))}),a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsx("tr",{children:S.map(k=>{const T=k==="selection";return a.jsx("th",{className:`py-4 px-3 transition-colors truncate align-middle ${T?"text-center":"text-left"} group overflow-hidden ${T?"":"cursor-pointer hover:bg-gray-200"}`,onClick:()=>!T&&D(k),title:T?void 0:Ax(k),children:a.jsxs("div",{className:`flex items-center ${T?"justify-center":"gap-2"} text-[13px] font-regular text-gray-800  tracking-widest font-heading`,children:[a.jsx("span",{className:T?"":"truncate",children:l&&l[k]?l[k]():Ax(k)}),!T&&(!l||!l[k])&&a.jsx("span",{className:"opacity-50 group-hover:opacity-100 transition-opacity text-gray-600 ",children:""})]})},k)})})}),a.jsx("tbody",{children:C.map((k,T)=>a.jsx("tr",{className:"border-b border-gray-100 hover:bg-gray-50/50 transition-colors last:border-b-0",children:S.map(O=>a.jsx("td",{className:"px-3 py-4 align-middle truncate text-sm text-gray-700 max-w-0",title:o?.[O]?void 0:String(k[O]||""),children:o&&o[O]?o[O](k):typeof k[O]=="boolean"?k[O]?"Yes":"No":k[O]},O))},T))})]})})}const ll=async()=>{try{return(await Qe.get("/system-config")).data}catch(n){throw n}},GS=async n=>{try{return(await Qe.put("/system-config",n)).data}catch(r){throw r}},Vt=({id:n,label:r,icon:o,className:l="",...c})=>a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:n,className:"block text-[10px] font-bold text-gray-400 tracking-wider mb-1.5 ml-0.5 font-heading",children:[r," ",c.required&&a.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none text-gray-300",children:o}),a.jsx("input",{id:n,...c,className:`w-full pl-11 pr-4 py-2 border border-gray-100 rounded-xl shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-500/5 focus:border-indigo-500/20 transition-all duration-200 text-sm placeholder:text-gray-300 text-gray-700 ${l}`})]})]});function Aa({options:n,placeholder:r,selectedValue:o,onChange:l,disabled:c=!1}){const[f,m]=h.useState(!1),[g,b]=h.useState(""),[x,y]=h.useState(500),[v,S]=h.useState(!1),[R,C]=h.useState(0),D=h.useRef(null),k=h.useRef(null),[T,O]=h.useState({top:0,left:0,width:0,maxHeight:300}),W=N=>{if(N.preventDefault(),N.stopPropagation(),!c){if(!f&&D.current){const E=D.current.getBoundingClientRect(),V=window.innerHeight-E.bottom-10,le=Math.max(100,Math.min(V,300));O({top:E.bottom,left:E.left,width:E.width,maxHeight:le})}m(!f)}},U=N=>{l(N),m(!1),b("")},ee=h.useMemo(()=>{const N=g.toLowerCase();return n.filter(E=>E.label.toLowerCase().includes(N))},[n,g]),K=N=>{N.preventDefault(),N.stopPropagation(),S(!0),C(0),setTimeout(()=>{let E=100;const G=ee.length,V=1e3,le=()=>{E+=V,E>=G?(y(G),C(100),setTimeout(()=>S(!1),500)):(y(E),C(Math.round(E/G*100)),setTimeout(le,20))};le()},100)};h.useEffect(()=>{if(f){const N=G=>{k.current&&k.current.contains(G.target)||m(!1)},E=()=>m(!1);return window.addEventListener("resize",E),window.addEventListener("scroll",N,!0),()=>{window.removeEventListener("resize",E),window.removeEventListener("scroll",N,!0)}}},[f]),h.useEffect(()=>{f||(b(""),y(500),S(!1))},[f]),h.useEffect(()=>{y(500),S(!1)},[g]);const $=h.useMemo(()=>n.find(N=>N.value===o),[n,o]);return a.jsxs("div",{className:"relative w-full",ref:D,children:[a.jsxs("button",{type:"button",disabled:c,className:`flex items-center justify-between w-full px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${c?"bg-gray-100 cursor-not-allowed text-gray-500":"hover:bg-gray-50"}`,onClick:W,children:[a.jsx("span",{className:"truncate block",children:$?$.label:a.jsx("span",{className:"text-gray-500",children:r})}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`ml-2 h-4 w-4 shrink-0 text-gray-400 transition-transform duration-200 ${f?"rotate-180":""}`,children:a.jsx("path",{d:"m6 9 6 6 6-6"})})]}),f&&$w.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-[9998] bg-transparent",onMouseDown:()=>m(!1)}),a.jsxs("div",{ref:k,className:"fixed z-[9999] bg-white rounded-lg shadow-xl border border-gray-200 ring-1 ring-black ring-opacity-5 flex flex-col overflow-hidden animate-fade-in text-left",style:{top:T.top,left:T.left,width:T.width,maxHeight:`${T.maxHeight}px`},children:[a.jsxs("div",{className:"flex items-center p-3 border-b border-gray-100 bg-gray-50",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-search mr-2 h-4 w-4 shrink-0 text-gray-400",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("path",{d:"m21 21-4.3-4.3"})]}),a.jsx("input",{type:"text",placeholder:"Search...",className:"w-full focus:outline-none text-sm font-sans bg-transparent",value:g,onChange:N=>b(N.target.value),autoFocus:!0})]}),a.jsxs("div",{className:"overflow-auto flex-1 p-1 dropdown-scrollbar-forced pointer-events-auto",children:[a.jsx("style",{children:`
                            .dropdown-scrollbar-forced::-webkit-scrollbar {
                                width: 12px;
                                height: 12px;
                            }
                            .dropdown-scrollbar-forced::-webkit-scrollbar-track {
                                background: #f1f5f9;
                                border-radius: 4px;
                            }
                            .dropdown-scrollbar-forced::-webkit-scrollbar-thumb {
                                background-color: #94a3b8;
                                border: 2px solid #f1f5f9;
                                border-radius: 8px;
                            }
                            .dropdown-scrollbar-forced::-webkit-scrollbar-thumb:hover {
                                background-color: #64748b;
                            }
                            .dropdown-scrollbar-forced::-webkit-scrollbar-corner {
                                background: transparent;
                            }
                            /* Firefox fallback */
                            .dropdown-scrollbar-forced {
                                scrollbar-width: auto;
                                scrollbar-color: #94a3b8 #f1f5f9;
                            }
                        `}),ee.length>0?a.jsxs(a.Fragment,{children:[$&&ee.some(N=>N.value===o)&&a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-sm rounded-md cursor-pointer bg-indigo-50 text-indigo-700 font-medium border-b border-indigo-100/50 mb-1",onClick:()=>U($.value),children:[a.jsx("span",{className:"truncate mr-2",children:$.label}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-indigo-600 shrink-0",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})]},$.value),ee.filter(N=>N.value!==o).slice(0,x).map(N=>a.jsx("div",{className:"px-3 py-2 text-sm rounded-md cursor-pointer text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>U(N.value),children:a.jsx("span",{className:"truncate",children:N.label})},N.value)),ee.length>x&&!v&&a.jsxs("div",{className:"p-3 bg-amber-50 border-t border-amber-100 space-y-2 mt-1 rounded-b-lg",children:[a.jsxs("div",{className:"text-[10px] font-bold text-amber-600 uppercase tracking-widest",children:["Showing ",x," of ",ee.length," results."]}),a.jsx("button",{type:"button",onClick:K,className:"w-full py-2 bg-amber-600 hover:bg-amber-700 text-white text-xs font-bold rounded-lg shadow-sm transition-all active:scale-[0.98]",children:"Load All Items (Slow)"})]}),v&&a.jsxs("div",{className:"p-3 bg-indigo-50 border-t border-indigo-100 space-y-2 mt-1 rounded-b-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest animate-pulse",children:"Rendering List..."}),a.jsxs("span",{className:"text-[10px] font-bold text-indigo-600 tabular-nums",children:[R,"%"]})]}),a.jsx("div",{className:"h-1.5 w-full bg-indigo-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300 ease-out shadow-[0_0_8px_rgba(79,70,229,0.4)]",style:{width:`${R}%`}})})]})]}):a.jsx("div",{className:"px-4 py-8 text-sm text-gray-500 text-center italic",children:"No results found"})]})]})]}),document.body)]})}const IS=({isOpen:n,onClose:r,onSuccess:o,defaultScope:l})=>{const{user:c,permissions:f}=At(),[m,g]=h.useState(""),[b,x]=h.useState(""),[y,v]=h.useState([]),[S,R]=h.useState("Open"),[C,D]=h.useState("Medium"),[k,T]=h.useState(""),[O,W]=h.useState("Eoffice"),[U,ee]=h.useState(""),[K,$]=h.useState(new Date().toISOString().split("T")[0]),[N,E]=h.useState(""),[G,V]=h.useState(!1),[le,oe]=h.useState(null),[ve,Re]=h.useState(150),H=y.filter(F=>{const xe=f.find(we=>we.feature===Te.FEATURE_VIEW_INTER_OFFICE_SENDER)?.roles||[],L=F.availableRoles?.some(we=>xe.includes(we)),B=c?._id&&F._id&&String(F._id)===String(c._id),Q=c?.email&&F.email&&F.email.toLowerCase()===c.email.toLowerCase(),ue=F.role===ta;return L&&!B&&!Q&&!ue}),I=Array.from(new Set(H.map(F=>F.labName).filter(Boolean))).sort(),X=N?H.filter(F=>{if(F.labName!==N)return!1;if(l==="inter-lab"){const xe=f.find(L=>L.feature===Te.FEATURE_VIEW_INTER_OFFICE_SENDER)?.roles||[];return F.availableRoles?.some(L=>xe.includes(L))}return!0}):[];if(h.useEffect(()=>{n&&(async()=>{try{const[de,xe]=await Promise.all([Pr(1,1e3),ll()]);if(de.success){let L=Array.isArray(de.data)?de.data:de.data?.users||[];L=L.map(B=>({...B,_id:B._id||B.id})),v(L)}if(xe.success&&xe.data){const L=xe.data.REMARKS_WORD_LIMIT;L&&Re(Number(L))}}catch(de){console.error("Failed to fetch data for AddReferenceModal",de)}})()},[n]),!n)return null;const z=F=>F.trim().split(/\s+/).filter(Boolean).length,M=F=>{const de=F.target.value;x(de)},w=()=>O==="Eoffice"?"Issue No.":"Sent To",A=()=>O==="Eoffice"?"Enter e-office issue no.":O==="Email"?"Enter recipient email/name":"Enter recipient address/name",_=async F=>{F.preventDefault(),oe(null),V(!0);const de=ve*50;if(b.length>de){oe({type:"error",text:`Remarks cannot exceed ${de} characters`}),V(!1);return}if(z(b)>ve){oe({type:"error",text:`Remarks cannot exceed ${ve} words`}),V(!1);return}if(!U.trim()){oe({type:"error",text:`${w()} is required`}),V(!1);return}if(U.length>60){oe({type:"error",text:`${w()} cannot exceed 60 characters`}),V(!1);return}if(!K){oe({type:"error",text:"Sent Date is required"}),V(!1);return}if(k&&c?._id&&String(k)===String(c._id)){oe({type:"error",text:"You cannot mark a reference to yourself"}),V(!1);return}try{const xe=await X4({subject:m,remarks:b,status:S,priority:C,markedTo:k,deliveryMode:O,deliveryDetails:U,sentAt:K,tags:[],scope:l});xe.success?(oe({type:"success",text:"Reference added successfully"}),g(""),x(""),R("Open"),D("Medium"),T(""),W("Eoffice"),ee(""),$(new Date().toISOString().split("T")[0]),E(""),setTimeout(()=>{o(),r(),oe(null)},1500)):oe({type:"error",text:xe.message||"Failed to add reference"})}catch(xe){oe({type:"error",text:xe.message||"An unexpected error occurred"})}finally{V(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in text-left",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl mx-4 overflow-hidden animate-scale-in border border-indigo-100 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-indigo-50/50",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-indigo-900 font-heading flex items-center gap-2",children:[a.jsx(In,{className:"w-6 h-6 text-indigo-600"}),"Add Global Reference"]}),a.jsx("p",{className:"text-xs text-indigo-600 font-heading",children:"Cross-lab collaboration"})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full transition-colors text-indigo-400",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6",children:[le&&a.jsx("div",{className:`mb-4 p-3 rounded-xl text-sm font-medium border ${le.type==="success"?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-rose-50 text-rose-700 border-rose-100"}`,children:le.text}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsx(Vt,{id:"subject",label:"Subject",type:"text",value:m,onChange:F=>g(F.target.value),placeholder:"Enter subject",icon:a.jsx(Ea,{className:"w-4 h-4 text-indigo-400"}),required:!0}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"deliveryMode",className:"block text-sm font-semibold text-gray-700 font-heading",children:["Mode Sent ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsxs("select",{id:"deliveryMode",value:O,onChange:F=>W(F.target.value),className:"w-full px-4 h-10 border border-gray-100 rounded-xl focus:ring-4 focus:ring-indigo-500/5 focus:border-indigo-200 outline-none transition-all bg-white font-heading text-sm",children:[a.jsx("option",{value:"Eoffice",children:"Eoffice"}),a.jsx("option",{value:"Email",children:"Email"}),a.jsx("option",{value:"Physical",children:"Physical"})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"deliveryDetails",className:"block text-sm font-semibold text-gray-700 font-heading",children:[w()," ",a.jsx("span",{className:"text-rose-500",children:"*"}),a.jsx("span",{className:`text-[10px] ml-1 uppercase font-bold tracking-wider ${U.length>60?"text-rose-500":"text-gray-400"}`,children:"(Max 60 chars)"})]}),a.jsx("input",{id:"deliveryDetails",type:"text",value:U,onChange:F=>ee(F.target.value),className:`w-full px-4 h-10 border rounded-xl focus:ring-4 outline-none transition-all font-heading text-sm ${U.length>60?"border-rose-200 focus:ring-rose-500/5 text-rose-600":"border-gray-100 focus:ring-indigo-500/5 focus:border-indigo-200"}`,placeholder:A(),required:!0})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"sentDate",className:"block text-sm font-semibold text-gray-700 font-heading",children:["Sent Date ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsx("input",{id:"sentDate",type:"date",value:K,onChange:F=>$(F.target.value),className:"w-full px-4 h-10 border border-gray-100 rounded-xl focus:ring-4 focus:ring-indigo-500/5 focus:border-indigo-200 outline-none transition-all bg-white font-heading text-sm",required:!0})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"remarks",className:"text-sm font-semibold text-gray-700 flex justify-between font-heading",children:[a.jsxs("span",{children:["Remarks ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsxs("span",{className:`text-[10px] uppercase font-bold tracking-wider ${z(b)>ve?"text-rose-500":"text-gray-400"}`,children:[z(b)," / ",ve," words"]})]}),a.jsx("textarea",{id:"remarks",value:b,onChange:M,className:`w-full px-4 py-2 border rounded-xl focus:ring-4 outline-none transition-all resize-none h-24 font-heading text-sm ${z(b)>ve?"border-rose-200 focus:ring-rose-500/5 text-rose-600":"border-gray-100 focus:ring-indigo-500/5 focus:border-indigo-200"}`,placeholder:"Enter detailed remarks",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-semibold text-gray-700 font-heading",children:"Status"}),a.jsx("select",{id:"status",value:S,disabled:!0,className:"w-full px-4 h-10 border border-gray-100 rounded-xl focus:ring-4 focus:ring-indigo-500/5 focus:border-indigo-200 outline-none transition-all bg-gray-50 cursor-not-allowed opacity-70 font-heading text-sm",children:a.jsx("option",{value:"Open",children:"Open"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"priority",className:"block text-sm font-semibold text-gray-700 font-heading",children:["Priority ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsxs("select",{id:"priority",value:C,onChange:F=>D(F.target.value),className:"w-full px-4 h-10 border border-gray-100 rounded-xl focus:ring-4 focus:ring-indigo-500/5 focus:border-indigo-200 outline-none transition-all bg-white font-heading text-sm",children:[a.jsx("option",{value:"High",children:"High"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"Low",children:"Low"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"lab",className:"block text-sm font-semibold text-gray-700 font-heading",children:["Select Lab / Institution ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsx(Aa,{placeholder:"Select Lab",options:I.map(F=>({label:F,value:F})),selectedValue:N,onChange:F=>{E(F),T("")}})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"markedTo",className:"block text-sm font-semibold text-gray-700 font-heading",children:["Marked To (User) ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsx(Aa,{placeholder:N?"Select a user":"Select Lab first",options:X.map(F=>({label:`${F.fullName||F.email.split("@")[0]}${F.designation?`, ${F.designation}`:""} (${F.email})`,value:F._id})),selectedValue:k,onChange:F=>T(F),disabled:!N})]})]}),a.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:r,className:"px-6 h-10 text-gray-400 hover:text-gray-600 font-bold text-xs uppercase tracking-widest transition-colors font-heading",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:G||!k,className:"px-8 h-10 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-500/20 font-bold text-xs uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-heading",children:[G?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):a.jsx(os,{className:"w-4 h-4"}),"Save Reference"]})]})]})]})]})})},Yr=({allColumns:n,visibleColumns:r,onChange:o})=>{const[l,c]=h.useState(!1),f=h.useRef(null),m=()=>c(!l),g=b=>{let x;if(r.includes(b)){if(r.length<=1)return;x=r.filter(v=>v!==b)}else x=[...r,b];const y=n.filter(v=>x.includes(v));o(y)};return h.useEffect(()=>{const b=x=>{f.current&&!f.current.contains(x.target)&&c(!1)};return l&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[l]),a.jsxs("div",{className:"relative inline-block text-left",ref:f,children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-between w-full h-10 rounded-xl border border-gray-100 shadow-sm px-3 bg-white text-xs font-medium text-gray-500 hover:bg-gray-50 hover:border-gray-200 transition-all font-heading",onClick:m,title:"View Columns",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Us,{className:"w-4 h-4"}),a.jsx("span",{children:"View"})]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:`ml-2 h-4 w-4 transition-transform duration-200 ${l?"rotate-180":""}`,children:a.jsx("path",{d:"m6 9 6 6 6-6"})})]}),l&&a.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-20 animate-scale-in",children:a.jsxs("div",{className:"py-1 max-h-96 overflow-y-auto",children:[a.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:"Toggle Columns"}),n.map(b=>a.jsxs("label",{className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer select-none transition-colors",children:[a.jsxs("div",{className:`w-5 h-5 mr-3 border rounded flex items-center justify-center transition-all ${r.includes(b)?"bg-indigo-600 border-indigo-600":"border-gray-300 bg-white"}`,children:[a.jsx("input",{type:"checkbox",className:"hidden",checked:r.includes(b),onChange:()=>g(b)}),r.includes(b)&&a.jsx(Ij,{className:"w-3.5 h-3.5 text-white"})]}),a.jsx("span",{className:"capitalize",children:b==="refId"?"Ref ID":b.replace(/([A-Z])/g," $1").trim()})]},b))]})})]})},ol=({isOpen:n,onClose:r,userId:o})=>{const[l,c]=h.useState(null),[f,m]=h.useState(!0),[g,b]=h.useState(null);return h.useEffect(()=>{n&&o?(async()=>{m(!0),b(null);try{const y=await sb(o);y.success?c(y.data):b(y.message||"Failed to load user profile")}catch{b("An error occurred while fetching user profile")}finally{m(!1)}})():n||c(null)},[n,o]),n?a.jsx("div",{className:"fixed inset-0 z-100 flex items-center justify-center p-4 bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:x=>x.target===x.currentTarget&&r(),children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"relative h-20 bg-linear-to-r from-indigo-600 to-indigo-500 shrink-0",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-full text-white transition-colors z-10",children:a.jsx(qt,{className:"w-4 h-4"})}),a.jsx("div",{className:"absolute -bottom-8 left-8",children:a.jsx("div",{className:"w-18 h-18 rounded-2xl bg-white p-1 shadow-xl shadow-indigo-500/10 overflow-hidden",children:a.jsx("div",{className:"w-full h-full rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-600 text-xl font-bold font-heading overflow-hidden",children:l?.avatar?a.jsx("img",{src:l.avatar,alt:l.fullName,className:"w-full h-full object-cover"}):l?.fullName?.charAt(0)||a.jsx(Of,{className:"w-7 h-7"})})})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pt-10 pb-4 px-8 space-y-4",children:f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-4",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-gray-500 font-heading text-xs font-bold tracking-wider opacity-50",children:"Fetching Details"})]}):g?a.jsxs("div",{className:"text-center py-10",children:[a.jsx("p",{className:"text-rose-500 font-heading font-semibold mb-4",children:g}),a.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 tracking-wider hover:underline",children:"Go Back"})]}):l?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 font-heading truncate",children:l.fullName}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5",children:[a.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[9px] font-bold tracking-wider border ${l.status==="Approved"?"bg-emerald-50 text-emerald-700 border-emerald-100":l.status==="Pending"?"bg-amber-50 text-amber-700 border-amber-100":"bg-rose-50 text-rose-700 border-rose-100"}`,children:l.status}),a.jsx("span",{className:"px-2 py-0.5 rounded-lg text-[9px] font-bold bg-indigo-50 text-indigo-700 border border-indigo-100 tracking-wider",children:l.role}),l.availableRoles?.filter(x=>x!==l.role).map((x,y)=>a.jsx("span",{className:"px-2 py-0.5 rounded-lg text-[9px] font-bold bg-gray-50 text-gray-600 border border-gray-200 tracking-wider",children:x},y))]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"group",children:[a.jsx("p",{className:"text-[9px] font-bold text-gray-400 tracking-wider mb-1 pl-1",children:"Email"}),a.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-xl bg-gray-50 border border-gray-100/80 transition-all",children:[a.jsx("div",{className:"shrink-0 w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm border border-gray-100",children:a.jsx(Ur,{className:"w-4 h-4 text-indigo-500"})}),a.jsx("p",{className:"text-sm font-semibold text-gray-700 font-heading truncate",children:l.email})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("p",{className:"text-[9px] font-bold text-gray-400 tracking-wider mb-1 pl-1",children:"Lab name"}),a.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-xl bg-gray-50 border border-gray-100/80 transition-all",children:[a.jsx("div",{className:"shrink-0 w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm border border-gray-100",children:a.jsx(k5,{className:"w-4 h-4 text-indigo-500"})}),a.jsx("p",{className:"text-sm font-semibold text-gray-700 font-heading truncate",children:l.labName||"N/A"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("p",{className:"text-[9px] font-bold text-gray-400 tracking-wider mb-1 pl-1",children:"Designation"}),a.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-xl bg-gray-50 border border-gray-100/80 transition-all",children:[a.jsx("div",{className:"shrink-0 w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm border border-gray-100",children:a.jsx(zj,{className:"w-4 h-4 text-indigo-500"})}),a.jsx("p",{className:"text-sm font-semibold text-gray-700 font-heading truncate",children:l.designation||"N/A"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("p",{className:"text-[9px] font-bold text-gray-400 tracking-wider mb-1 pl-1",children:"Division"}),a.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-xl bg-gray-50 border border-gray-100/80 transition-all",children:[a.jsx("div",{className:"shrink-0 w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm border border-gray-100",children:a.jsx(ls,{className:"w-4 h-4 text-indigo-500"})}),a.jsx("p",{className:"text-sm font-semibold text-gray-700 font-heading truncate",children:l.division||"N/A"})]})]}),a.jsxs("div",{className:"group",children:[a.jsx("p",{className:"text-[9px] font-bold text-gray-400 tracking-wider mb-1 pl-1",children:"Mobile No"}),a.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-xl bg-gray-50 border border-gray-100/80 transition-all",children:[a.jsx("div",{className:"shrink-0 w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm border border-gray-100",children:a.jsx("svg",{className:"w-4 h-4 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}),a.jsx("p",{className:"text-sm font-semibold text-gray-700 font-heading truncate",children:l.mobileNo||"N/A"})]})]})]})]}):null}),a.jsx("div",{className:"px-8 py-3 bg-gray-50/50 border-t border-gray-100 flex justify-end shrink-0",children:a.jsx("button",{onClick:r,className:"px-6 py-2 bg-white border border-gray-200 rounded-xl text-[10px] font-bold text-gray-500 hover:text-gray-900 shadow-sm hover:shadow-md transition-all font-heading tracking-wider",children:"Dismiss"})})]})}):null},VS=({isOpen:n,onClose:r,onSuccess:o,selectedIds:l})=>{const{user:c,permissions:f}=At(),[m,g]=h.useState([]),[b,x]=h.useState(""),[y,v]=h.useState(""),[S,R]=h.useState(""),[C,D]=h.useState(!1),[k,T]=h.useState(null),O=m.filter(K=>{const N=f.find(oe=>oe.feature===Te.FEATURE_VIEW_INTER_OFFICE_SENDER)?.roles||[],E=K.availableRoles?.some(oe=>N.includes(oe)),G=c?._id&&K._id&&String(K._id)===String(c._id),V=c?.email&&K.email&&K.email.toLowerCase()===c.email.toLowerCase(),le=K.role===ta;return E&&!G&&!V&&!le}),W=Array.from(new Set(O.map(K=>K.labName).filter(Boolean))).sort(),U=S?O.filter(K=>{if(K.labName!==S)return!1;const N=f.find(E=>E.feature===Te.FEATURE_VIEW_INTER_OFFICE_SENDER)?.roles||[];return K.availableRoles?.some(E=>N.includes(E))}):[];h.useEffect(()=>{n&&(async()=>{try{const $=await Pr(1,1e3);if($.success){let N=Array.isArray($.data)?$.data:$.data?.users||[];N=N.map(E=>({...E,_id:E._id||E.id})),g(N)}}catch($){console.error("Failed to fetch users",$)}})()},[n]);const ee=async K=>{if(K.preventDefault(),T(null),D(!0),!b){T({type:"error",text:"Please select a user to assign references to."}),D(!1);return}try{const $=await Df(l,"assign",!1,{assignTo:b,remarks:y});$.success?(T({type:"success",text:"References reassigned successfully"}),setTimeout(()=>{o(),r(),T(null),x(""),v(""),R("")},1500)):T({type:"error",text:$.message||"Failed to update references"})}catch($){T({type:"error",text:$.message||"An unexpected error occurred"})}finally{D(!1)}};return n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in text-left",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 overflow-hidden animate-scale-in border border-indigo-100 flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-indigo-50/50",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-indigo-900 font-heading flex items-center gap-2",children:[a.jsx(ns,{className:"w-6 h-6 text-indigo-600"}),"Bulk Assign References"]}),a.jsxs("p",{className:"text-xs text-indigo-600 font-heading",children:["Reassign ",l.length," reference",l.length!==1?"s":""]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full transition-colors text-indigo-400",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6",children:[k&&a.jsx("div",{className:`mb-4 p-3 rounded-xl text-sm font-medium border ${k.type==="success"?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-rose-50 text-rose-700 border-rose-100"}`,children:k.text}),a.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 font-heading",children:["Select Lab / Institution ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsx(Aa,{placeholder:"Select Lab",options:W.map(K=>({label:K,value:K})),selectedValue:S,onChange:K=>{R(K),x("")}})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 font-heading",children:["Assign To (User) ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsx(Aa,{placeholder:S?"Select a user":"Select Lab first",options:U.map(K=>({label:`${K.fullName||K.email.split("@")[0]}${K.designation?`, ${K.designation}`:""} (${K.email})`,value:K._id})),selectedValue:b,onChange:K=>x(K),disabled:!S})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 font-heading",children:"Remarks (Optional)"}),a.jsx("textarea",{className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-heading resize-none h-20",placeholder:"Enter remarks (default: Forwarded for consideration/perusal/necessary action please)",value:y,onChange:K=>v(K.target.value)})]}),a.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:r,className:"px-6 h-10 text-gray-400 hover:text-gray-600 font-bold text-xs uppercase tracking-widest transition-colors font-heading",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:C||!b,className:"px-8 h-10 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-500/20 font-bold text-xs uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-heading",children:[C?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):a.jsx(os,{className:"w-4 h-4"}),"Assign"]})]})]})]})]})}):null};function YS(){const{user:n,hasPermission:r}=At(),o=Xt();h.useEffect(()=>{n&&!r(Te.FEATURE_VIEW_INTER_OFFICE_SENDER)&&o("/references/local")},[n,r,o]);const[l,c]=h.useState([]),[f,m]=h.useState(!0),[g,b]=h.useState(!0),[x,y]=h.useState(!0),[v,S]=h.useState(!1),[R,C]=h.useState(!1),[D,k]=h.useState(null),[T,O]=h.useState([]),[W,U]=h.useState([]),[ee,K]=h.useState([]),[$,N]=h.useState([]),[E,G]=h.useState([]),[V,le]=h.useState([]),[oe,ve]=h.useState({openCount:0,highPriorityCount:0,pending7DaysCount:0,closedThisMonthCount:0,markedToUserCount:0,pendingInDivisionCount:0}),[Re,H]=h.useState([]),[I,X]=h.useState([]),[z,M]=h.useState([]),[w,A]=h.useState([]),[_,F]=h.useState([]),[de,xe]=h.useState(""),[L,B]=h.useState(""),Q="",[ue,we]=h.useState(1),[Oe,he]=h.useState(10),[Me,Ue]=h.useState(1),[De,P]=h.useState(0),[je,Ce]=h.useState(null),[pe,$e]=h.useState(null),Ve=h.useMemo(()=>$.map(J=>({label:J,value:J})),[$]),at=h.useMemo(()=>E.map(J=>({label:J,value:J})),[E]),ae=h.useMemo(()=>W.map(J=>({label:`${J.fullName}${J.designation?`, ${J.designation}`:""} (${J.labName||"N/A"})`,value:J.email,title:`${J.fullName}${J.designation?` | ${J.designation}`:""} | ${J.labName||"N/A"} (${J.email})`})),[W]),ne=h.useMemo(()=>T.map(J=>({label:`${J.fullName}${J.designation?`, ${J.designation}`:""} (${J.labName||"N/A"})`,value:J.email,title:`${J.fullName}${J.designation?` | ${J.designation}`:""} | ${J.labName||"N/A"} (${J.email})`})),[T]),ke=h.useMemo(()=>ee.map(J=>({label:J,value:J})),[ee]),Ee=async()=>{try{const J=await xb("");J.success&&J.data&&(J.data.createdByUsers&&O(J.data.createdByUsers),J.data.markedToUsers&&U(J.data.markedToUsers),J.data.divisions&&K(J.data.divisions),J.data.statuses&&N(J.data.statuses),J.data.priorities&&G(J.data.priorities))}catch(J){console.error("Failed to fetch reference filters:",J)}},Z=async()=>{try{y(!0);const J=await Y4(Q);J.success&&J.data&&ve(J.data)}catch(J){console.error("Failed to fetch dashboard stats:",J)}finally{y(!1)}},Ne=async()=>{try{m(!0);const J={status:Re,priority:I,markedTo:z,createdBy:w,division:_,subject:de,pendingDays:L,scope:Q},Xe=je?{sortBy:je.key,sortOrder:je.direction}:{},st=await pb(ue,Oe,J,Xe);if(st&&st.data){const Dt=["__v"],wt=PS(st.data.data,Dt);c(wt),Ue(st.data.pagination?.totalPages||1),P(st.data.pagination?.total||0)}}catch(J){console.error("Error fetching references:",J)}finally{m(!1),b(!1)}};h.useEffect(()=>{Ee(),Z()},[]),h.useEffect(()=>{Ne()},[ue,Oe,Re,I,z,w,_,de,L,je]);const Se=h.useMemo(()=>["selection","refId","subject","status","priority","createdBy","markedTo","markedToDivision","createdLab","pendingDivision","createdAt","daysSinceCreated"],[]);h.useEffect(()=>{V.length===0&&le(Se)},[Se]);const se=J=>{k(J),C(!0)},Ae=J=>{switch(J.toLowerCase()){case"in progress":return"bg-orange-50 text-orange-700 border-orange-100";case"reopened":return"bg-purple-50 text-purple-700 border-purple-100";case"open":return"bg-blue-50 text-blue-700 border-blue-100";case"closed":return"bg-emerald-50 text-emerald-700 border-emerald-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}},ze=J=>{switch(J.toLowerCase()){case"high":return"bg-rose-50 text-rose-700 border-rose-100";case"medium":return"bg-amber-50 text-amber-700 border-amber-100";case"low":return"bg-emerald-50 text-emerald-700 border-emerald-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}},Ie=J=>{if(pe===J){Pe();return}switch($e(J),we(1),H([]),X([]),M([]),A([]),F([]),xe(""),B(""),J){case"open":H(["Open","In Progress","Reopened"]);break;case"high":X(["High"]),H(["Open","In Progress","Reopened"]);break;case"pending":B(8),H(["Open","In Progress","Reopened"]);break;case"closed":H(["Closed"]);break;case"markedToMe":n?.email&&M([n.email]),H(["Open","In Progress","Reopened"]);break;case"pendingDivision":n?.division&&F([n.division]),H(["Open","In Progress","Reopened"]);break}},Pe=()=>{H([]),X([]),M([]),A([]),F([]),xe(""),B(""),$e(null),we(1)},vt=(J,Xe)=>{Ce({key:J,direction:Xe})},[_t,Ka]=h.useState(new Set),[Ko,vn]=h.useState(!1);h.useEffect(()=>{Ka(new Set)},[Re,I,z,w,_,de,L,Q]);const Vn=()=>{const Xe=l.filter(wt=>{const _a=wt.markedToDetails,oa=Array.isArray(_a)?_a.map(Jo=>Jo.email):[_a?.email||(typeof wt.markedTo=="object"?wt.markedTo?.email:"")];return n?.email&&wt.status!=="Closed"&&oa.includes(n.email)}).map(wt=>wt._id),st=Xe.length>0&&Xe.every(wt=>_t.has(wt)),Dt=new Set(_t);st?Xe.forEach(wt=>Dt.delete(wt)):Xe.forEach(wt=>Dt.add(wt)),Ka(Dt)},Yn=J=>{const Xe=new Set(_t);Xe.has(J)?Xe.delete(J):Xe.add(J),Ka(Xe)};return g?a.jsx("div",{className:"flex items-center justify-center min-h-[600px]",children:a.jsx("div",{className:"text-lg text-gray-600 animate-pulse font-heading",children:"Loading Global Dashboard..."})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6",children:[a.jsx(qa,{info:{title:"All Open References",refcount:x?void 0:oe.openCount,icon:a.jsx(Uo,{className:"w-5 h-5 text-blue-600"})},onClick:()=>Ie("open"),isActive:pe==="open",loading:x,additionalInfo:x?void 0:oe.openCount>0?"Total active references":"No active references"}),a.jsx(qa,{info:{title:"Pending with me",refcount:x?void 0:oe.markedToUserCount,icon:a.jsx(Ls,{className:"w-5 h-5 text-red-600 animate-bounce",fill:"currentColor"})},onClick:()=>Ie("markedToMe"),isActive:pe==="markedToMe",loading:x,additionalInfo:x?void 0:oe.markedToUserCount>0?"Pending with me":"No pending references"}),a.jsx(qa,{info:{title:"Pending in My Div",refcount:x?void 0:oe.pendingInDivisionCount,icon:a.jsx(Uo,{className:"w-5 h-5 text-indigo-600"})},onClick:()=>Ie("pendingDivision"),isActive:pe==="pendingDivision",loading:x,additionalInfo:x?void 0:oe.pendingInDivisionCount>0?"Pending in my division":"No pending references"}),a.jsx(qa,{info:{title:"High Priority",refcount:x?void 0:oe.highPriorityCount,icon:a.jsx(Bs,{className:"w-5 h-5 text-rose-600"})},onClick:()=>Ie("high"),isActive:pe==="high",loading:x,additionalInfo:x?void 0:oe.highPriorityCount>0?"Currently active references":"No active references"}),a.jsx(qa,{info:{title:"Pending > 7 Days",refcount:x?void 0:oe.pending7DaysCount,icon:a.jsx(Zi,{className:"w-5 h-5 text-amber-600"})},onClick:()=>Ie("pending"),isActive:pe==="pending",loading:x,additionalInfo:x?void 0:oe.pending7DaysCount>0?" Pending for more than 7 days":"No pending references"}),a.jsx(qa,{info:{title:"Closed This Month",refcount:x?void 0:oe.closedThisMonthCount,icon:a.jsx(na,{className:"w-5 h-5 text-emerald-600"})},onClick:()=>Ie("closed"),isActive:pe==="closed",loading:x,additionalInfo:x?void 0:oe.closedThisMonthCount>0?"Closed this month":"No closed references"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 md:gap-6 pb-2",children:[a.jsx("div",{className:"flex flex-1 items-center gap-4 md:gap-6 w-full",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-semibold text-gray-900 tracking-tight font-heading flex items-center gap-2 whitespace-nowrap mb-0",children:[a.jsx(In,{className:"w-6 h-6 text-indigo-600"}),"Global References"]})}),a.jsx(Le,{variant:"primary",label:"Add New Global Ref",icon:a.jsx(Ms,{}),onClick:()=>S(!0),className:"h-10 px-6 shadow-lg shadow-indigo-500/20 whitespace-nowrap font-heading text-sm font-semibold"})]}),a.jsx("div",{className:"-mt-4 pb-2",children:a.jsxs("p",{className:"text-gray-500 text-xs font-heading",children:[a.jsxs(a.Fragment,{children:["Send references to any ",a.jsx("span",{className:"text-indigo-600 font-bold",children:"CSIR lab/unit."})," The ",a.jsx("span",{className:"text-indigo-600 font-bold",children:"Inter lab sender"})," role is required for sending/receiving global references."]}),De>0&&a.jsxs("span",{className:"ml-2 text-[8px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full border border-indigo-100 uppercase tracking-tighter",children:["Total: ",De]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-3 items-center",children:[a.jsxs("div",{className:"relative col-span-1 md:col-span-1 lg:col-span-1",children:[a.jsx("input",{type:"text",placeholder:"Search subject/ID...",className:"pl-9 w-full rounded-lg pr-4 h-10 border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading",value:de,onChange:J=>xe(J.target.value)}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:a.jsx(ds,{className:"w-4 h-4"})})]}),a.jsx(Pt,{name:"Status",options:Ve,selectedValues:Re,onChange:J=>{H(J),$e(null)}}),a.jsx(Pt,{name:"Priority",options:at,selectedValues:I,onChange:J=>{X(J),$e(null)}}),a.jsx(Pt,{name:"Creator",options:ne,selectedValues:w,onChange:A}),a.jsx(Pt,{name:"To User",options:ae,selectedValues:z,onChange:M}),a.jsx(Pt,{name:"Division",options:ke,selectedValues:_,onChange:F}),a.jsx("input",{type:"number",min:0,className:"w-full h-10 px-3 py-2 text-xs border border-gray-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-heading",value:L,onChange:J=>{B(J.target.value?Number(J.target.value):""),$e(null)},placeholder:"DAYS >="}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Yr,{allColumns:Se,visibleColumns:V,onChange:le})})]})}),_t.size>0&&a.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 p-3 rounded-xl flex items-center justify-between animate-in fade-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-bold text-indigo-900 font-heading",children:[_t.size," selected"]}),a.jsx("span",{className:"h-4 w-px bg-indigo-200"}),a.jsx("button",{onClick:()=>Ka(new Set),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800 transition-colors",children:"Deselect All"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(Le,{variant:"primary",label:"Mark To Check...",onClick:()=>vn(!0),className:"h-8 px-4 text-xs font-bold uppercase tracking-wider bg-indigo-600 hover:bg-indigo-700 text-white shadow-none"})})]}),(Re.length>0||I.length>0||z.length>0||w.length>0||de||L)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[a.jsx("span",{className:"text-xs pl-2 pr-1 font-semibold text-gray-600  tracking-widest font-heading mr-1",children:"Current Filters:"}),Re.map(J=>a.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider border ${Ae(J)}`,children:J},J)),I.map(J=>a.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider border ${ze(J)}`,children:J},J)),z.map(J=>{const Xe=W.find(st=>st.email===J);return a.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100 flex items-center gap-1",children:[a.jsx("span",{className:"opacity-50",children:"To:"})," ",Xe?Xe.fullName:J]},J)}),w.map(J=>{const Xe=T.find(st=>st.email===J);return a.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100 flex items-center gap-1",children:[a.jsx("span",{className:"opacity-50",children:"By:"})," ",Xe?Xe.fullName:J]},J)}),_.map(J=>a.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100 flex items-center gap-1",children:[a.jsx("span",{className:"opacity-50",children:"Pending Div:"})," ",J]},J)),de&&a.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold border bg-gray-100 text-gray-700 border-gray-200",children:['Subject: "',de,'"']}),L&&a.jsxs("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold border bg-amber-50 text-amber-700 border-amber-100",children:["Pending >= ",L," Days"]}),a.jsx("button",{onClick:Pe,className:"ml-auto text-[11px] font-bold text-indigo-600 hover:text-indigo-800 hover:underline transition-colors",children:"Clear All filters"})]}),a.jsx("div",{className:"relative",children:a.jsx("div",{className:`transition-all duration-300 ${f?"opacity-40 grayscale-[0.5] pointer-events-none":"opacity-100"}`,children:l.length===0&&!f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-xl border border-gray-100 shadow-sm",children:[a.jsx("p",{className:"text-gray-400 font-medium font-heading",children:"No references found matching your filters."}),a.jsx(Le,{variant:"secondary",className:"mt-4 text-[10px] font-bold text-indigo-600 border-indigo-200 hover:bg-indigo-50 px-4 py-1.5 font-heading",onClick:Pe,children:"Clear all filters"})]}):a.jsxs(a.Fragment,{children:[a.jsx(il,{rows:l,visibleColumns:V,sortConfig:je,onSort:vt,columnWidths:{selection:"48px",refId:"120px",subject:"350px"},customHeaderRenderers:{selection:()=>{const J=l.filter(st=>{const Dt=st.markedToDetails,wt=Array.isArray(Dt)?Dt.map(_a=>_a.email):[Dt?.email||(typeof st.markedTo=="object"?st.markedTo?.email:"")];return n?.email&&st.status!=="Closed"&&wt.includes(n.email)}),Xe=J.length>0&&J.every(st=>_t.has(st._id));return a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer disabled:opacity-30",checked:Xe,onChange:Vn,disabled:J.length===0,title:J.length===0?"No references available for bulk action":"Select all your references"})}},customRenderers:{selection:J=>{const Xe=J.markedToDetails,st=Array.isArray(Xe)?Xe.map(wt=>wt.email):[Xe?.email||(typeof J.markedTo=="object"?J.markedTo?.email:"")],Dt=n?.email&&J.status!=="Closed"&&st.includes(n.email);return a.jsx("div",{className:"flex justify-center",title:Dt?void 0:"You can only select references marked to you",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed",checked:_t.has(J._id),onChange:()=>Dt&&Yn(J._id),onClick:wt=>wt.stopPropagation(),disabled:!Dt})})},refId:J=>a.jsx(Yt,{to:`/references/${J._id}`,className:"text-gray-900 font-bold text-xs hover:text-indigo-600 transition-colors hover:underline",title:`View details for ${J.refId}`,children:J.refId||"N/A"}),subject:J=>{const Xe=J.markedToDetails,st=Array.isArray(Xe)?Xe.map(wt=>wt.email):[Xe?.email||(typeof J.markedTo=="object"?J.markedTo?.email:"")],Dt=n?.email&&J.status!=="Closed"&&st.includes(n.email);return a.jsxs("div",{className:"flex flex-col overflow-visible",children:[a.jsxs("div",{className:"flex items-center gap-2 hover:underline",children:[a.jsx(Yt,{to:`/references/${J._id}`,className:"font-bold text-gray-900 hover:text-indigo-600 transition-colors truncate block leading-none font-heading",title:J.subject,children:J.subject}),Dt&&a.jsx(Ls,{className:"w-3 h-3 text-red-500 animate-bounce",fill:"currentColor"}),J.isHidden&&a.jsx(Ds,{className:"w-3.5 h-3.5 text-gray-400 shrink-0"}),J.isArchived&&a.jsx(ba,{className:"w-3.5 h-3.5 text-gray-400 shrink-0"})]}),a.jsx("span",{className:"text-gray-400 text-[11px] font-medium truncate block tracking-normal mt-1",title:J.remarks||"No additional remarks",children:J.remarks||"No additional remarks"})]})},status:J=>a.jsxs("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-bold uppercase tracking-wider whitespace-nowrap inline-flex items-center gap-1 ${Ae(J.status||"")}`,title:J.status,children:[a.jsx("span",{className:"h-1 w-1 rounded-full bg-current"}),J.status]}),priority:J=>a.jsxs("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-bold uppercase tracking-wider whitespace-nowrap inline-flex items-center gap-1 ${ze(J.priority||"")}`,title:J.priority,children:[a.jsx("span",{className:"text-[10px] leading-none",children:J.priority?.toLowerCase()==="high"?"":J.priority?.toLowerCase()==="low"?"":""}),J.priority]}),markedTo:J=>{const Xe=Array.isArray(J.markedToDetails)?J.markedToDetails:[J.markedToDetails].filter(Boolean);if(Xe.length===0)return a.jsx("span",{children:"Unmarked"});const st=Xe[0],Dt=Xe.length-1,wt=n?.email&&Xe.some(oa=>oa.email===n.email),_a=typeof J.markedTo=="string"?J.markedTo:Array.isArray(J.markedTo)?typeof J.markedTo[0]=="string"?J.markedTo[0]:J.markedTo[0]?._id:J.markedTo?._id;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex flex-col truncate cursor-pointer hover:bg-gray-50/50 p-1 rounded transition-colors",onClick:()=>{_a&&se(_a)},title:Xe.map(oa=>`${oa.fullName}${oa.designation?`, ${oa.designation}`:""} (${oa.labName||"N/A"})`).join(`
`),children:[a.jsxs("span",{className:"text-indigo-600 font-bold text-xs truncate underline underline-offset-2 decoration-indigo-200",children:[st.fullName,Dt>0?` +${Dt}`:""]}),a.jsx("span",{className:"text-gray-400 text-[10px] font-medium truncate tracking-tight",children:st.labName||"N/A"})]}),wt&&J.status!=="Closed"&&a.jsx(Ls,{className:"w-3 h-3 text-red-500 animate-bounce",fill:"currentColor"})]})},createdBy:J=>{const Xe=J.createdByDetails,st=typeof J.createdBy=="string"?J.createdBy:J.createdBy?._id;return a.jsxs("div",{className:"flex flex-col truncate cursor-pointer hover:bg-gray-50/50 p-1 rounded transition-colors",onClick:()=>{st&&se(st)},title:`${Xe?.fullName||"Unmarked"}${Xe?.designation?`, ${Xe.designation}`:""} (${Xe?.labName||"N/A"})`,children:[a.jsx("span",{className:"text-gray-900 font-bold text-xs truncate hover:text-indigo-600 transition-colors",children:Xe?.fullName||"Unmarked"}),a.jsx("span",{className:"text-gray-400 text-[10px] font-medium truncate tracking-tight",children:Xe?.labName||(typeof J.createdBy=="object"?J.createdBy.fullName:J.createdBy)})]})},createdLab:J=>a.jsx("span",{className:"text-gray-500 text-xs font-bold truncate block",children:J.createdLab||"N/A"}),pendingDivision:J=>a.jsx("span",{className:"text-gray-500 text-xs font-bold truncate block",title:J.pendingDivision||"N/A",children:J.pendingDivision||"N/A"}),createdAt:J=>a.jsx("span",{className:"text-gray-500 text-xs font-bold whitespace-nowrap",children:new Date(J.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"2-digit"})}),daysSinceCreated:J=>{const Xe=Math.abs(new Date().getTime()-new Date(J.createdAt).getTime()),st=Math.ceil(Xe/(1e3*60*60*24));return a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:`text-xs font-bold ${st>7?"text-red-600":"text-gray-500"}`,children:st}),a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:"Days"})]})}}}),l.length>0&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 pt-8 pb-2 border-t border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading",children:"Display"}),a.jsxs("select",{value:Oe,onChange:J=>{he(Number(J.target.value)),we(1)},className:"bg-gray-100/50 border-none rounded-xl px-4 py-1.5 text-xs font-bold text-gray-600 focus:outline-none focus:ring-4 focus:ring-indigo-500/5 transition-all cursor-pointer hover:bg-gray-100 font-heading",children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]}),a.jsx("div",{className:"h-4 w-px bg-gray-100 mx-2"}),a.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading",children:["Showing ",(ue-1)*Oe+1,"",Math.min(ue*Oe,De)," of ",De]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>we(1),disabled:ue===1,className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all",title:"First Page",children:""}),a.jsx("button",{onClick:()=>we(J=>Math.max(1,J-1)),disabled:ue===1,className:"px-4 py-2 text-xs font-bold text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all font-heading",children:"PREV"}),a.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-indigo-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-indigo-600/20 font-heading",children:ue}),a.jsx("button",{onClick:()=>we(J=>Math.min(Me,J+1)),disabled:ue===Me,className:"px-4 py-2 text-xs font-bold text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all font-heading",children:"NEXT"}),a.jsx("button",{onClick:()=>we(Me),disabled:ue===Me,className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all",title:"Last Page",children:""})]})]})]})})})]}),a.jsx(IS,{isOpen:v,onClose:()=>S(!1),onSuccess:()=>{Ne(),Z(),Ka(new Set)},defaultScope:"inter-lab"}),a.jsx(VS,{isOpen:Ko,onClose:()=>vn(!1),onSuccess:()=>{Ne(),Z(),Ka(new Set)},selectedIds:Array.from(_t)}),a.jsx(ol,{isOpen:R,onClose:()=>C(!1),userId:D})]})}const qs=ct.create({baseURL:`${Ct}/references/local`,withCredentials:!0}),Tb=async(n=1,r=10,o={},l={})=>{const c={...o};Object.keys(c).forEach(g=>{const b=c[g];b!==void 0&&Array.isArray(b)&&(b.length>0?c[g]=b.join(","):delete c[g])});const f={page:n,limit:r,...c,...l};return(await qs.get("/",{params:f})).data},XS=async n=>(await qs.post("/",n)).data,QS=async n=>(await qs.get(`/${n}`)).data,WS=async()=>(await qs.get("/stats")).data,Uf=async(n,r,o,l)=>(await qs.post("/bulk-update",{ids:n,action:r,force:o,...l})).data,ZS=async(n,r)=>(await qs.put(`/${n}`,r)).data,KS=async(n,r,o,l)=>(await qs.post("/issue-reminder",{referenceId:n,userIds:r,remarks:o,priority:l})).data,JS=async(n,r)=>(await qs.post(`/${n}/request-reopen`,{remarks:r})).data,zf=async(n={})=>(await qs.get("/getFilters",{params:n})).data,ek=({isOpen:n,onClose:r,onSuccess:o})=>{const{user:l}=At(),[c,f]=h.useState(""),[m,g]=h.useState(""),[b,x]=h.useState([]),[y,v]=h.useState("Medium"),[S,R]=h.useState(""),[C,D]=h.useState(""),[k,T]=h.useState(!1),[O,W]=h.useState(null),[U,ee]=h.useState(150),K=(Array.isArray(b)?b:[]).filter(E=>{const G=E.labName===l?.labName,V=l?._id&&E._id&&String(E._id)===String(l._id),le=l?.email&&E.email&&E.email.toLowerCase()===l.email.toLowerCase(),oe=E.role===ta;return G&&!V&&!le&&!oe});if(h.useEffect(()=>{n&&(async()=>{try{const[G,V]=await Promise.all([Pr(1,1e3),ll()]);if(G.success){let le=Array.isArray(G.data)?G.data:G.data?.users||[];le=le.map(oe=>({...oe,_id:oe._id||oe.id})),x(le)}V.success&&V.data.REMARKS_WORD_LIMIT&&ee(Number(V.data.REMARKS_WORD_LIMIT))}catch(G){console.error("Failed to fetch data for Local Reference modal",G)}})()},[n]),!n)return null;const $=E=>E.trim().split(/\s+/).filter(Boolean).length,N=async E=>{if(E.preventDefault(),W(null),T(!0),$(m)>U){W({type:"error",text:`Remarks cannot exceed ${U} words`}),T(!1);return}if(S&&l?._id&&String(S)===String(l._id)){W({type:"error",text:"You cannot mark a local reference to yourself"}),T(!1);return}try{const G=await XS({subject:c,remarks:m,status:"Open",priority:y,markedTo:S,eofficeNo:C});G.success?(W({type:"success",text:"Local reference added successfully"}),f(""),g(""),R(""),D(""),setTimeout(()=>{o(),r(),W(null)},1500)):W({type:"error",text:G.message||"Failed to add local reference"})}catch(G){W({type:"error",text:G.message||"An unexpected error occurred"})}finally{T(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 overflow-hidden animate-scale-in border border-indigo-100",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-indigo-50/50",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-indigo-900 font-heading flex items-center gap-2",children:[a.jsx(ls,{className:"w-6 h-6 text-indigo-600"}),"Add Local Reference"]}),a.jsxs("p",{className:"text-xs text-indigo-600 font-heading",children:["Internal to ",l?.labName]}),a.jsxs("p",{className:"text-xs text-indigo-600 font-heading",children:["CREATED BY USER: ",l?.email]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full transition-colors text-indigo-400",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6",children:[O&&a.jsx("div",{className:`mb-4 p-3 rounded-xl text-sm font-medium border ${O.type==="success"?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-rose-50 text-rose-700 border-rose-100"}`,children:O.text}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx(Vt,{id:"subject",label:"Subject",type:"text",value:c,onChange:E=>f(E.target.value),placeholder:"Enter subject",icon:a.jsx(Ea,{className:"w-4 h-4 text-indigo-400"}),required:!0}),a.jsx(Vt,{id:"eofficeNo",label:"E-office No. (Optional)",type:"text",value:C,onChange:E=>D(E.target.value),placeholder:"Enter E-office number",icon:a.jsx(Ea,{className:"w-4 h-4 text-indigo-400"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex justify-between font-heading",children:[a.jsxs("span",{children:["Remarks ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsxs("span",{className:`text-[10px] uppercase font-bold tracking-wider ${$(m)>U?"text-rose-500":"text-gray-400"}`,children:[$(m)," / ",U," words"]})]}),a.jsx("textarea",{value:m,onChange:E=>g(E.target.value),className:`w-full px-4 py-2 border rounded-xl focus:ring-4 outline-none transition-all resize-none h-24 font-heading text-sm ${$(m)>U?"border-rose-200 focus:ring-rose-500/5 text-rose-600":"border-gray-100 focus:ring-indigo-500/5 focus:border-indigo-200"}`,placeholder:"Enter detailed remarks",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 font-heading",children:"Priority"}),a.jsxs("select",{value:y,onChange:E=>v(E.target.value),className:"w-full px-4 h-10 border border-gray-100 rounded-xl focus:ring-4 focus:ring-indigo-500/5 focus:border-indigo-200 outline-none transition-all bg-white font-heading text-sm",children:[a.jsx("option",{value:"High",children:"High"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"Low",children:"Low"})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 font-heading",children:["Marked To ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsx(Aa,{placeholder:"Select a colleague",options:K.map(E=>({label:`${E.fullName||E.email}${E.designation?`, ${E.designation}`:""}`,value:E._id})),selectedValue:S,onChange:R})]})]}),a.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:r,className:"px-6 h-10 text-gray-400 hover:text-gray-600 font-bold text-xs uppercase tracking-widest transition-colors font-heading",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:k||!S,className:"px-8 h-10 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-500/20 font-bold text-xs uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-heading",children:[k?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):a.jsx(os,{className:"w-4 h-4"}),"Save Local Ref"]})]})]})]})]})})},tk=({isOpen:n,onClose:r,onSuccess:o,selectedIds:l})=>{const{user:c}=At(),[f,m]=h.useState([]),[g,b]=h.useState(""),[x,y]=h.useState(""),[v,S]=h.useState(!1),[R,C]=h.useState(null);h.useEffect(()=>{n&&(async()=>{try{const T=await zf();if(T.success&&T.data&&T.data.markedToUsers){const O=T.data.markedToUsers.filter(W=>{const U=c?._id&&W._id&&String(W._id)===String(c._id),ee=c?.email&&W.email&&W.email.toLowerCase()===c.email.toLowerCase(),K=W.labName===c?.labName;return!U&&!ee&&K});m(O)}}catch(T){console.error("Failed to fetch users",T)}})()},[n,c]);const D=async k=>{if(k.preventDefault(),C(null),S(!0),!g){C({type:"error",text:"Please select a user to assign references to."}),S(!1);return}try{const T=await Uf(l,"assign",!1,{assignTo:g,remarks:x});T.success?(C({type:"success",text:"References reassigned successfully"}),setTimeout(()=>{o(),r(),C(null),b(""),y("")},1500)):C({type:"error",text:T.message||"Failed to update references"})}catch(T){C({type:"error",text:T.message||"An unexpected error occurred"})}finally{S(!1)}};return n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in text-left",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 overflow-hidden animate-scale-in border border-indigo-100 flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-indigo-50/50",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-indigo-900 font-heading flex items-center gap-2",children:[a.jsx(ns,{className:"w-6 h-6 text-indigo-600"}),"Bulk Assign Local References"]}),a.jsxs("p",{className:"text-xs text-indigo-600 font-heading",children:["Reassign ",l.length," reference",l.length!==1?"s":""," within ",c?.labName]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full transition-colors text-indigo-400",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6",children:[R&&a.jsx("div",{className:`mb-4 p-3 rounded-xl text-sm font-medium border ${R.type==="success"?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-rose-50 text-rose-700 border-rose-100"}`,children:R.text}),a.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 font-heading",children:["Assign To (User) ",a.jsx("span",{className:"text-rose-500",children:"*"})]}),a.jsx(Aa,{placeholder:"Select a colleague",options:f.map(k=>({label:`${k.fullName||k.email.split("@")[0]}${k.designation?`, ${k.designation}`:""} (${k.email})`,value:k._id})),selectedValue:g,onChange:k=>b(k)})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 font-heading",children:"Remarks (Optional)"}),a.jsx("textarea",{className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-heading resize-none h-20",placeholder:"Enter remarks (default: Forwarded for consideration/perusal/necessary action please)",value:x,onChange:k=>y(k.target.value)})]}),a.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:r,className:"px-6 h-10 text-gray-400 hover:text-gray-600 font-bold text-xs uppercase tracking-widest transition-colors font-heading",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:v||!g,className:"px-8 h-10 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-500/20 font-bold text-xs uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-heading",children:[v?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):a.jsx(os,{className:"w-4 h-4"}),"Assign"]})]})]})]})]})}):null};function ak(){const{user:n}=At(),[r,o]=h.useState([]),[l,c]=h.useState(!0),[f,m]=h.useState(!0),[g,b]=h.useState(!0),[x,y]=h.useState(!1),[v,S]=h.useState({openCount:0,highPriorityCount:0,pending7DaysCount:0,closedThisMonthCount:0,markedToUserCount:0,pendingInDivisionCount:0}),[R,C]=h.useState([]),[D,k]=h.useState([]),[T,O]=h.useState([]),[W,U]=h.useState([]),[ee,K]=h.useState([]),[$,N]=h.useState([]),[E,G]=h.useState([]),[V,le]=h.useState([]),[oe,ve]=h.useState([]),[Re,H]=h.useState([]),[I,X]=h.useState(""),[z,M]=h.useState(""),[w,A]=h.useState(null),[_,F]=h.useState(1),[de,xe]=h.useState(10),[L,B]=h.useState(1),[Q,ue]=h.useState(0),[we,Oe]=h.useState(null),[he,Me]=h.useState([]),[Ue,De]=h.useState(!1),[P,je]=h.useState(null),[Ce,pe]=h.useState(new Set),[$e,Ve]=h.useState(!1),at=["selection","refId","subject","status","priority","createdBy","markedTo","markedToDivision","createdAt"];h.useEffect(()=>{he.length===0&&Me(at)},[at]),h.useEffect(()=>{pe(new Set)},[_,de,$,E,V,oe,Re,I,z,we]);const ae=()=>{const Ae=r.filter(Pe=>{const vt=Pe.markedToDetails,_t=Array.isArray(vt)?vt.map(Ka=>Ka.email):[vt?.email||(typeof Pe.markedTo=="object"?Pe.markedTo?.email:"")];return n?.email&&Pe.status!=="Closed"&&_t.includes(n.email)}).map(Pe=>Pe._id),ze=Ae.length>0&&Ae.every(Pe=>Ce.has(Pe)),Ie=new Set(Ce);ze?Ae.forEach(Pe=>Ie.delete(Pe)):Ae.forEach(Pe=>Ie.add(Pe)),pe(Ie)},ne=se=>{const Ae=new Set(Ce);Ae.has(se)?Ae.delete(se):Ae.add(se),pe(Ae)},ke=async()=>{try{c(!0);const se={status:$,priority:E,markedTo:V,createdBy:oe,division:Re,subject:I,pendingDays:z},Ae=we?{sortBy:we.key,sortOrder:we.direction}:{},ze=await Tb(_,de,se,Ae);ze&&ze.data&&(o(ze.data.data),B(ze.data.pagination?.totalPages||1),ue(ze.data.pagination?.total||0))}catch(se){console.error("Error fetching local references:",se)}finally{c(!1),m(!1)}};h.useEffect(()=>{ke()},[_,de,$,E,V,oe,Re,I,z,we]),h.useEffect(()=>{(async()=>{try{b(!0);const Ae=await WS();Ae.success&&Ae.data&&S(Ae.data)}catch(Ae){console.error("Failed to fetch local stats:",Ae)}finally{b(!1)}})()},[]),h.useEffect(()=>{(async()=>{const Ae=await zf();Ae.success&&Ae.data&&(Ae.data.createdByUsers&&C(Ae.data.createdByUsers.filter(ze=>ze.labName===n?.labName)),Ae.data.markedToUsers&&k(Ae.data.markedToUsers.filter(ze=>ze.labName===n?.labName)),Ae.data.divisions&&O(Ae.data.divisions),Ae.data.statuses&&U(Ae.data.statuses),Ae.data.priorities&&K(Ae.data.priorities))})()},[n?.labName]);const Ee=se=>{switch(se.toLowerCase()){case"in progress":return"bg-orange-50 text-orange-700 border-orange-100";case"open":return"bg-blue-50 text-blue-700 border-blue-100";case"closed":return"bg-emerald-50 text-emerald-700 border-emerald-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}},Z=se=>{switch(se?.toLowerCase()){case"high":return"bg-rose-50 text-rose-700 border-rose-100";case"medium":return"bg-amber-50 text-amber-700 border-amber-100";case"low":return"bg-emerald-50 text-emerald-700 border-emerald-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}},Ne=se=>{if(w===se){Se();return}switch(A(se),F(1),N([]),G([]),le([]),ve([]),H([]),X(""),M(""),se){case"open":N(["Open","In Progress","Reopened"]);break;case"high":G(["High"]),N(["Open","In Progress","Reopened"]);break;case"pending":M(8),N(["Open","In Progress","Reopened"]);break;case"closed":N(["Closed"]);break;case"markedToMe":n?.email&&le([n.email]),N(["Open","In Progress","Reopened"]);break;case"pendingDivision":n?.division&&H([n.division]),N(["Open","In Progress","Reopened"]);break}},Se=()=>{N([]),G([]),le([]),ve([]),H([]),X(""),M(""),A(null),F(1)};return f?a.jsx("div",{className:"flex items-center justify-center min-h-[600px]",children:a.jsx("div",{className:"text-lg text-gray-600 animate-pulse font-heading",children:"Loading Local Dashboard..."})}):a.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-6",children:[a.jsx(qa,{info:{title:"Open References",refcount:g?void 0:v.openCount,icon:a.jsx(Uo,{className:"w-5 h-5 text-blue-600"})},onClick:()=>Ne("open"),isActive:w==="open",loading:g,additionalInfo:v.openCount>0?"Active lab references":"No active references"}),a.jsx(qa,{info:{title:"Pending with me",refcount:g?void 0:v.markedToUserCount,icon:a.jsx(Ls,{className:"w-5 h-5 text-red-600 animate-bounce",fill:"currentColor"})},onClick:()=>Ne("markedToMe"),isActive:w==="markedToMe",loading:g,additionalInfo:v.markedToUserCount>0?"Requires your attention":"No pending items"}),a.jsx(qa,{info:{title:"Pending in My Div",refcount:g?void 0:v.pendingInDivisionCount,icon:a.jsx(Uo,{className:"w-5 h-5 text-indigo-600"})},onClick:()=>Ne("pendingDivision"),isActive:w==="pendingDivision",loading:g,additionalInfo:v.pendingInDivisionCount>0?`Pending in ${n?.division||"my division"}`:"No pending items"}),a.jsx(qa,{info:{title:"High Priority",refcount:g?void 0:v.highPriorityCount,icon:a.jsx(Bs,{className:"w-5 h-5 text-rose-600"})},onClick:()=>Ne("high"),isActive:w==="high",loading:g,additionalInfo:v.highPriorityCount>0?"Urgent references":"No urgent items"}),a.jsx(qa,{info:{title:"Pending > 7 Days",refcount:g?void 0:v.pending7DaysCount,icon:a.jsx(Zi,{className:"w-5 h-5 text-amber-600"})},onClick:()=>Ne("pending"),isActive:w==="pending",loading:g,additionalInfo:v.pending7DaysCount>0?"Delayed references":"No delayed items"}),a.jsx(qa,{info:{title:"Closed This Month",refcount:g?void 0:v.closedThisMonthCount,icon:a.jsx(na,{className:"w-5 h-5 text-emerald-600"})},onClick:()=>Ne("closed"),isActive:w==="closed",loading:g,additionalInfo:v.closedThisMonthCount>0?"Completed this month":"None closed recently"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 md:gap-6 pb-2",children:[a.jsx("div",{className:"flex flex-1 items-center gap-4 md:gap-6 w-full",children:a.jsxs("h1",{className:"text-xl md:text-2xl font-semibold text-gray-900 tracking-tight font-heading flex items-center gap-2 whitespace-nowrap mb-0 ",children:[a.jsx(ls,{className:"w-6 h-6 text-indigo-600 "}),"Local References"]})}),a.jsx(Le,{variant:"primary",label:"Add New Local Ref",icon:a.jsx(Ms,{className:"w-4 h-4"}),onClick:()=>y(!0),className:"h-10 px-6 shadow-lg shadow-indigo-500/20 whitespace-nowrap font-heading text-sm font-semibold"})]}),a.jsx("div",{className:"-mt-4 pb-2",children:a.jsxs("p",{className:"text-gray-500 text-xs font-heading",children:["Manage references within ",a.jsx("span",{className:"font-bold text-indigo-600 uppercase",children:n?.labName}),Q>0&&a.jsxs("span",{className:"ml-2 text-[8px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full border border-indigo-100 uppercase tracking-tighter",children:["Total: ",Q]})]})}),a.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-3 items-center",children:[a.jsxs("div",{className:"relative col-span-1 md:col-span-1 lg:col-span-1",children:[a.jsx("input",{type:"text",placeholder:"Search subject/ID...",className:"pl-9 w-full rounded-lg pr-4 h-10 border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading",value:I,onChange:se=>X(se.target.value)}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:a.jsx(ds,{className:"w-4 h-4"})})]}),a.jsx(Pt,{name:"Status",options:W.map(se=>({label:se,value:se})),selectedValues:$,onChange:se=>{N(se),A(null)}}),a.jsx(Pt,{name:"Priority",options:ee.map(se=>({label:se,value:se})),selectedValues:E,onChange:se=>{G(se),A(null)}}),a.jsx(Pt,{name:"Creator",options:R.map(se=>({label:se.fullName,value:se.email})),selectedValues:oe,onChange:ve}),a.jsx(Pt,{name:"To User",options:D.map(se=>({label:se.fullName,value:se.email})),selectedValues:V,onChange:le}),a.jsx(Pt,{name:"Division",options:T.map(se=>({label:se,value:se})),selectedValues:Re,onChange:H}),a.jsx("input",{type:"number",min:0,className:"w-full h-10 px-3 py-2 text-xs border border-gray-200 rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-heading",value:z,onChange:se=>{M(se.target.value?Number(se.target.value):""),A(null)},placeholder:"DAYS >="}),a.jsx("div",{className:"flex justify-end",children:a.jsx(Yr,{allColumns:at,visibleColumns:he,onChange:Me})})]})}),Ce.size>0&&a.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 p-3 rounded-xl flex items-center justify-between animate-in fade-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-bold text-indigo-900 font-heading",children:[Ce.size," selected"]}),a.jsx("span",{className:"h-4 w-px bg-indigo-200"}),a.jsx("button",{onClick:()=>pe(new Set),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800 transition-colors",children:"Deselect All"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(Le,{variant:"primary",label:"Mark To...",onClick:()=>Ve(!0),className:"h-8 px-4 text-xs font-bold uppercase tracking-wider bg-indigo-600 hover:bg-indigo-700 text-white shadow-none"})})]}),($.length>0||E.length>0||V.length>0||Re.length>0||I||z)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2 animate-in fade-in slide-in-from-top-2 duration-300 bg-white p-3 rounded-xl border border-gray-100 shadow-sm",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading mr-2",children:"Filters:"}),$.map(se=>a.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider border ${Ee(se)}`,children:se},se)),E.map(se=>a.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider border ${Z(se)}`,children:se},se)),V.map(se=>{const Ae=D.find(ze=>ze.email===se);return a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100",children:["To: ",Ae?Ae.fullName:se]},se)}),oe.map(se=>{const Ae=R.find(ze=>ze.email===se);return a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100",children:["By: ",Ae?Ae.fullName:se]},se)}),Re.map(se=>a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100",children:["Div: ",se]},se)),I&&a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-gray-50 text-gray-700 border-gray-100",children:['Subject: "',I,'"']}),z&&a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-amber-50 text-amber-700 border-amber-100",children:["Pending >= ",z," Days"]}),a.jsx("button",{onClick:Se,className:"ml-auto text-[11px] font-bold text-indigo-600 hover:text-indigo-800 hover:underline transition-colors",children:"Clear All filters"})]}),a.jsx("div",{className:`transition-all duration-300 ${l?"opacity-40 grayscale-[0.5] pointer-events-none":"opacity-100"}`,children:r.length===0&&!l?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-xl border border-gray-100 shadow-sm",children:[a.jsx("p",{className:"text-gray-400 font-medium font-heading",children:"No references found matching your filters."}),a.jsx(Le,{variant:"secondary",className:"mt-4 text-[10px] font-bold text-indigo-600 border-indigo-200 hover:bg-indigo-50 px-4 py-1.5 font-heading",onClick:Se,children:"Clear all filters"})]}):a.jsx(il,{rows:r,visibleColumns:he,columnWidths:{selection:"48px",refId:"120px",subject:"350px"},sortConfig:we,onSort:(se,Ae)=>Oe({key:se,direction:Ae}),customHeaderRenderers:{selection:()=>{const se=r.filter(ze=>{const Ie=ze.markedToDetails,Pe=Array.isArray(Ie)?Ie.map(vt=>vt.email):[Ie?.email||(typeof ze.markedTo=="object"?ze.markedTo?.email:"")];return n?.email&&ze.status!=="Closed"&&Pe.includes(n.email)}),Ae=se.length>0&&se.every(ze=>Ce.has(ze._id));return a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer disabled:opacity-30",checked:Ae,onChange:ae,disabled:se.length===0,title:se.length===0?"No references available for bulk action":"Select all your references"})}},customRenderers:{selection:se=>{const Ae=se.markedToDetails,ze=Array.isArray(Ae)?Ae.map(Pe=>Pe.email):[Ae?.email||(typeof se.markedTo=="object"?se.markedTo?.email:"")],Ie=n?.email&&se.status!=="Closed"&&ze.includes(n.email);return a.jsx("div",{className:"flex justify-center",title:Ie?void 0:"You can only select references marked to you",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed",checked:Ce.has(se._id),onChange:()=>Ie&&ne(se._id),onClick:Pe=>Pe.stopPropagation(),disabled:!Ie})})},refId:se=>a.jsx(Yt,{to:`/references/${se._id}`,className:"text-indigo-600 font-bold text-xs hover:underline",children:se.refId}),subject:se=>{const Ae=se.markedToDetails,ze=Array.isArray(Ae)?Ae.map(Pe=>Pe.email):[Ae?.email||(typeof se.markedTo=="object"?se.markedTo?.email:"")],Ie=n?.email&&se.status!=="Closed"&&ze.includes(n.email);return a.jsxs("div",{className:"flex flex-col overflow-visible",children:[a.jsxs("div",{className:"flex items-center gap-2 hover:underline",children:[a.jsx(Yt,{to:`/references/${se._id}`,className:"font-bold text-gray-900 hover:text-indigo-600 transition-colors truncate block leading-none font-heading text-sm",title:se.subject,children:se.subject}),Ie&&a.jsx("div",{className:"relative group shrink-0",title:"Pending with me",children:a.jsx(Ls,{className:"w-3 h-3 text-red-500 animate-bounce",fill:"currentColor"})}),se.isHidden&&a.jsx(Ds,{className:"w-3.5 h-3.5 text-gray-400 shrink-0"}),se.isArchived&&a.jsx(ba,{className:"w-3.5 h-3.5 text-gray-400 shrink-0"})]}),a.jsx("span",{className:"text-gray-400 text-[11px] font-medium truncate block tracking-normal mt-1",title:se.remarks||"No additional remarks",children:se.remarks||"No additional remarks"})]})},status:se=>a.jsxs("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-bold uppercase tracking-wider inline-flex items-center gap-1 ${Ee(se.status)}`,children:[a.jsx("span",{className:"h-1 w-1 rounded-full bg-current"}),se.status]}),priority:se=>a.jsxs("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-bold uppercase tracking-wider inline-flex items-center gap-1 ${Z(se.priority)}`,children:[a.jsx("span",{className:"text-[10px]",children:se.priority?.toLowerCase()==="high"?"":se.priority?.toLowerCase()==="low"?"":""}),se.priority]}),markedTo:se=>{const Ae=Array.isArray(se.markedToDetails)?se.markedToDetails:[se.markedToDetails].filter(Boolean);if(Ae.length===0)return a.jsx("span",{className:"text-xs text-gray-400",children:"Unmarked"});const ze=Ae[0],Ie=Ae.length-1,Pe=n?.email&&Ae.some(_t=>_t.email===n.email),vt=typeof se.markedTo=="string"?se.markedTo:Array.isArray(se.markedTo)?typeof se.markedTo[0]=="string"?se.markedTo[0]:se.markedTo[0]?._id:se.markedTo?._id;return a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>{vt&&(je(vt),De(!0))},className:"text-xs font-semibold text-indigo-600 hover:text-indigo-800 transition-colors whitespace-nowrap",title:Ae.map(_t=>`${_t.fullName}${_t.designation?`, ${_t.designation}`:""} (${_t.labName||"N/A"})`).join(`
`),children:[ze.fullName,Ie>0?` +${Ie}`:""]}),Pe&&se.status!=="Closed"&&a.jsx(Ls,{className:"w-3 h-3 text-red-500 animate-bounce",fill:"currentColor"})]})},createdBy:se=>{const Ae=typeof se.createdBy=="string"?se.createdBy:se.createdBy?._id;return a.jsx("button",{onClick:()=>{Ae&&(je(Ae),De(!0))},className:"text-xs text-gray-700 hover:text-indigo-600 transition-colors whitespace-nowrap",title:`${se.createdByDetails?.fullName}${se.createdByDetails?.designation?`, ${se.createdByDetails?.designation}`:""} (${se.createdByDetails?.labName||"N/A"})`,children:se.createdByDetails?.fullName||"N/A"})},createdAt:se=>a.jsx("span",{className:"text-[10px] text-gray-400 font-medium whitespace-nowrap",children:new Date(se.createdAt).toLocaleDateString()})}})}),r.length>0&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 pt-8 pb-2 border-t border-gray-100 mt-8",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading",children:"Display"}),a.jsxs("select",{value:de,onChange:se=>{xe(Number(se.target.value)),F(1)},className:"bg-gray-100/50 border-none rounded-xl px-4 py-1.5 text-xs font-bold text-gray-600 focus:outline-none focus:ring-4 focus:ring-indigo-500/5 transition-all cursor-pointer hover:bg-gray-100 font-heading",children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]}),a.jsx("div",{className:"h-4 w-px bg-gray-100 mx-2"}),a.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading",children:["Showing ",(_-1)*de+1,"",Math.min(_*de,Q)," of ",Q]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>F(1),disabled:_===1,className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all",title:"First Page",children:""}),a.jsx("button",{onClick:()=>F(se=>Math.max(1,se-1)),disabled:_===1,className:"px-4 py-2 text-xs font-bold text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all font-heading",children:"PREV"}),a.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-indigo-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-indigo-600/20 font-heading",children:_}),a.jsx("button",{onClick:()=>F(se=>Math.min(L,se+1)),disabled:_===L,className:"px-4 py-2 text-xs font-bold text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all font-heading",children:"NEXT"}),a.jsx("button",{onClick:()=>F(L),disabled:_===L,className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all",title:"Last Page",children:""})]})]}),a.jsx(ek,{isOpen:x,onClose:()=>y(!1),onSuccess:ke}),a.jsx(tk,{isOpen:$e,onClose:()=>Ve(!1),onSuccess:()=>{ke(),pe(new Set)},selectedIds:Array.from(Ce)}),a.jsx(ol,{isOpen:Ue,onClose:()=>De(!1),userId:P})]})}const sk=({isOpen:n,title:r,message:o,type:l="info",showCancelButton:c=!1,confirmText:f="OK",cancelText:m="Cancel",onOk:g,onClose:b})=>{if(!n)return null;const x=()=>{switch(l){case"success":return a.jsx(Rf,{className:"w-10 h-10 text-green-500"});case"error":return a.jsx(Tf,{className:"w-10 h-10 text-red-500"});case"warning":return a.jsx(Bs,{className:"w-10 h-10 text-amber-500"});default:return a.jsx(mb,{className:"w-10 h-10 text-blue-500"})}},y=()=>{if(r)return r;switch(l){case"success":return"Success";case"error":return"Error";case"warning":return"Warning";default:return"Information"}},v=()=>{g&&g(),b()},S=()=>{switch(l){case"success":return"bg-green-600 hover:bg-green-700 shadow-green-200";case"error":return"bg-red-600 hover:bg-red-700 shadow-red-200";case"warning":return"bg-amber-500 hover:bg-amber-600 shadow-amber-200";default:return"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-[2px] animate-in fade-in duration-200",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden transform transition-all animate-in zoom-in-95 duration-200 border border-gray-100",role:"dialog","aria-modal":"true",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-full",children:x()}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:y()}),a.jsx("div",{className:"text-gray-600 text-sm leading-relaxed mb-6",children:o}),a.jsxs("div",{className:"flex justify-end gap-3 w-full",children:[c&&a.jsx("button",{onClick:b,className:"px-4 py-2.5 rounded-xl text-gray-700 font-medium border border-gray-200 hover:bg-gray-50 transition-all flex-1",children:m}),a.jsx("button",{onClick:v,className:`py-2.5 px-4 rounded-xl text-white font-semibold shadow-md transition-all transform active:scale-[0.98] ${S()} ${c?"flex-1":"w-full"}`,children:f})]})]})})})})},Mb=h.createContext(void 0),nk=({children:n})=>{const[r,o]=h.useState(!1),[l,c]=h.useState({message:"",type:"info"}),[f,m]=h.useState(null),g=h.useCallback(v=>{m(null),c({...v,showCancelButton:!1}),o(!0)},[]),b=h.useCallback(v=>new Promise(S=>{m(()=>S),c({...v,showCancelButton:!0,type:v.type||"warning"}),o(!0)}),[]),x=h.useCallback(()=>{l.onOk&&l.onOk(),f&&f(!0),o(!1)},[l,f]),y=h.useCallback(()=>{l.onCancel&&l.onCancel(),f&&f(!1),o(!1)},[l,f]);return a.jsxs(Mb.Provider,{value:{showMessage:g,showConfirm:b},children:[n,r&&a.jsx(sk,{isOpen:r,title:l.title,message:l.message,type:l.type,confirmText:l.confirmText,cancelText:l.cancelText,showCancelButton:l.showCancelButton,onClose:y,onOk:x})]})},Hs=()=>{const n=h.useContext(Mb);if(!n)throw new Error("useMessageBox must be used within a MessageBoxProvider");return n},rk=()=>{const n=Xt(),{user:r,hasPermission:o}=At(),{showConfirm:l}=Hs();h.useEffect(()=>{r&&!o(Te.FEATURE_MANAGE_GLOBAL_REFERENCES)&&n("/references/global")},[r,o,n]);const[c,f]=h.useState([]),[m,g]=h.useState(!0),[b,x]=h.useState([]),[y,v]=h.useState(!1),[S,R]=h.useState(null),[C,D]=h.useState(""),[k,T]=h.useState([]),[O,W]=h.useState([]),[U,ee]=h.useState("all"),[K,$]=h.useState("all"),[N,E]=h.useState([]),[G,V]=h.useState([]),[le,oe]=h.useState(1),[ve,Re]=h.useState(25),[H,I]=h.useState(0),[X,z]=h.useState(1),[M,w]=h.useState(["selection","refId","subject","status","priority","isHidden","isArchived","createdAt"]),A=h.useCallback(async()=>{try{const B=await xb("inter-lab");B.success&&B.data&&(B.data.statuses&&E(B.data.statuses),B.data.priorities&&V(B.data.priorities))}catch(B){console.error("Failed to fetch filters",B)}},[]),_=h.useCallback(async()=>{g(!0);try{const B={subject:C,status:k,priority:O,scope:"inter-lab"};U==="hidden"&&(B.isHidden="true"),U==="visible"&&(B.isHidden="false"),K==="archived"&&(B.isArchived="true"),K==="active"&&(B.isArchived="false");const Q=await pb(le,ve,B);Q.success&&Q.data&&(f(Q.data.data),I(Q.data.pagination?.total||0),z(Q.data.pagination?.totalPages||1))}catch(B){console.error("Failed to fetch references",B)}finally{g(!1)}},[le,ve,C,k,O,U,K]);h.useEffect(()=>{A()},[A]),h.useEffect(()=>{_()},[_]);const F=async(B,Q=!1)=>{if(b.length!==0){if(!Q){const ue=`Are you sure you want to ${B} ${b.length} references?`;if(!await l({title:"Confirm Bulk Action",message:ue,type:"warning",confirmText:"Confirm",cancelText:"Cancel"}))return}v(!0),R(null);try{const ue=await Df(b,B,Q);ue.success?(R({type:"success",text:`Successfully ${B}d ${b.length} references.`}),x([]),_()):R({type:"error",text:ue.message||`Failed to ${B} references.`})}catch(ue){if(ue.message&&ue.message.startsWith("CONFIRM_ARCHIVE:")){const we=ue.message.replace("CONFIRM_ARCHIVE: ","");if(await l({title:"Archive Exception",message:we,type:"warning",confirmText:"Yes, Archive",cancelText:"Cancel"})){v(!1),F(B,!0);return}}else if(ue.response&&ue.response.status===409&&ue.response.data&&ue.response.data.message&&ue.response.data.message.startsWith("CONFIRM_ARCHIVE:")){const we=ue.response.data.message.replace("CONFIRM_ARCHIVE: ","");if(await l({title:"Archive Exception",message:we,type:"warning",confirmText:"Yes, Archive",cancelText:"Cancel"})){v(!1),F(B,!0);return}}else ue.message&&ue.message.includes("409");R({type:"error",text:ue.message||"Bulk action failed"})}finally{(Q||!S)&&v(!1),Q||setTimeout(()=>R(null),5e3)}}},de=()=>{b.length===c.length?x([]):x(c.map(B=>B._id))},xe=B=>{x(Q=>Q.includes(B)?Q.filter(ue=>ue!==B):[...Q,B])},L=B=>{switch(B.toLowerCase()){case"in progress":return"bg-orange-50 text-orange-700 border-orange-100";case"open":return"bg-blue-50 text-blue-700 border-blue-100";case"closed":return"bg-emerald-50 text-emerald-700 border-emerald-100";case"reopened":return"bg-purple-50 text-purple-700 border-purple-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}};return a.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 space-y-6 animate-in fade-in duration-500",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>n("/references/global"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500",children:a.jsx(Qo,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(In,{className:"w-6 h-6 text-indigo-600"}),"Manage Global References"]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Administrative oversight for inter-lab references (Hide/Archive)"})]})]})}),a.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-3 items-center",children:[a.jsxs("div",{className:"relative col-span-1 md:col-span-2",children:[a.jsx("input",{type:"text",placeholder:"Search by subject or Ref ID...",className:"pl-10 w-full rounded-lg pr-4 h-10 border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading",value:C,onChange:B=>D(B.target.value)}),a.jsx(ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.jsx(Pt,{name:"Status",options:N.map(B=>({label:B,value:B})),selectedValues:k,onChange:T}),a.jsx(Pt,{name:"Priority",options:G.map(B=>({label:B,value:B})),selectedValues:O,onChange:W}),a.jsxs("select",{value:U,onChange:B=>ee(B.target.value),className:"h-10 px-3 rounded-lg border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",children:[a.jsx("option",{value:"all",children:"All Visibility"}),a.jsx("option",{value:"visible",children:"Visible Only"}),a.jsx("option",{value:"hidden",children:"Hidden Only"})]}),a.jsxs("select",{value:K,onChange:B=>$(B.target.value),className:"h-10 px-3 rounded-lg border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-heading",children:[a.jsx("option",{value:"all",children:"All Archival"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"archived",children:"Archived Only"})]}),a.jsx("div",{className:"lg:col-start-8 flex justify-end",children:a.jsx(Yr,{allColumns:["refId","subject","status","priority","isHidden","isArchived","createdAt","selection"],visibleColumns:M,onChange:w})})]}),a.jsx("div",{className:"flex justify-between items-center border-t border-gray-50 pt-3",children:a.jsx("div",{className:"flex items-center gap-2",children:b.length>0&&a.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-left-2",children:[a.jsxs("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-full border border-indigo-100 flex items-center gap-2 font-heading",children:[a.jsx(na,{className:"w-3 h-3"}),b.length," Selected"]}),a.jsx("div",{className:"h-4 w-px bg-gray-200 mx-1"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Le,{label:"Hide",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>F("hide"),disabled:y,icon:a.jsx(Ds,{className:"w-3.5 h-3.5"})}),a.jsx(Le,{label:"Unhide",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>F("unhide"),disabled:y,icon:a.jsx(rs,{className:"w-3.5 h-3.5"})}),a.jsx(Le,{label:"Archive",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>F("archive"),disabled:y,icon:a.jsx(ba,{className:"w-3.5 h-3.5"})}),a.jsx(Le,{label:"Restore",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>F("unarchive"),disabled:y,icon:a.jsx(hb,{className:"w-3.5 h-3.5"})})]})]})})})]}),S&&a.jsxs("div",{className:`p-4 rounded-xl border flex items-center gap-3 animate-in slide-in-from-top-2 ${S.type==="success"?"bg-green-50 border-green-100 text-green-700":"bg-red-50 border-red-100 text-red-700"}`,children:[S.type==="success"?a.jsx(na,{className:"w-5 h-5"}):a.jsx(Bs,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:S.text})]}),a.jsx("div",{className:`transition-all duration-300 ${m?"opacity-40 pointer-events-none":"opacity-100"}`,children:a.jsx(il,{rows:c,visibleColumns:M,columnWidths:{selection:"48px",refId:"120px",subject:"400px"},customHeaderRenderers:{selection:()=>a.jsx("input",{type:"checkbox",checked:c.length>0&&b.length===c.length,onChange:de,className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})},customRenderers:{selection:B=>a.jsx("div",{className:"flex justify-center",children:a.jsx("input",{type:"checkbox",checked:b.includes(B._id),onChange:()=>xe(B._id),className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),refId:B=>a.jsx(Yt,{to:`/references/${B._id}`,className:"text-indigo-600 font-bold text-xs hover:underline",children:B.refId}),subject:B=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx(Yt,{to:`/references/${B._id}`,className:"font-semibold text-gray-900 truncate hover:text-indigo-600 hover:underline",title:B.subject,children:B.subject}),B.isHidden&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] text-orange-600 font-bold uppercase mt-0.5",children:[a.jsx(Ds,{className:"w-2.5 h-2.5"})," Hidden"]}),B.isArchived&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] text-gray-500 font-bold uppercase mt-0.5",children:[a.jsx(ba,{className:"w-2.5 h-2.5"})," Archived"]})]}),status:B=>a.jsx("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-bold uppercase tracking-wider ${L(B.status)}`,children:B.status}),isHidden:B=>B.isHidden?a.jsxs("span",{className:"text-orange-600 flex items-center gap-1 font-bold text-[10px] uppercase",children:[a.jsx(Ds,{className:"w-3 h-3"})," Yes"]}):a.jsx("span",{className:"text-gray-400 text-[10px] uppercase",children:"No"}),isArchived:B=>B.isArchived?a.jsxs("span",{className:"text-gray-600 flex items-center gap-1 font-bold text-[10px] uppercase",children:[a.jsx(ba,{className:"w-3 h-3"})," Yes"]}):a.jsx("span",{className:"text-gray-400 text-[10px] uppercase",children:"No"}),createdAt:B=>new Date(B.createdAt).toLocaleDateString()}})}),c.length>0&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-4",children:[a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("select",{value:ve,onChange:B=>{Re(Number(B.target.value)),oe(1)},className:"bg-white border border-gray-200 rounded-lg px-2 py-1 outline-none",children:[a.jsx("option",{value:10,children:"10 per page"}),a.jsx("option",{value:25,children:"25 per page"}),a.jsx("option",{value:50,children:"50 per page"}),a.jsx("option",{value:100,children:"100 per page"})]}),a.jsxs("span",{children:["Showing ",(le-1)*ve+1," to ",Math.min(le*ve,H)," of ",H]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>oe(1),disabled:le===1,className:"p-2 disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:""}),a.jsx("button",{onClick:()=>oe(B=>Math.max(1,B-1)),disabled:le===1,className:"px-3 py-1.5 text-sm font-medium disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:"PREV"}),a.jsx("div",{className:"px-4 py-1.5 bg-indigo-600 text-white rounded-lg text-sm font-bold shadow-sm",children:le}),a.jsx("button",{onClick:()=>oe(B=>Math.min(X,B+1)),disabled:le===X,className:"px-3 py-1.5 text-sm font-medium disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:"NEXT"}),a.jsx("button",{onClick:()=>oe(X),disabled:le===X,className:"p-2 disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:""})]})]})]})},ik=()=>{const n=Xt(),{user:r,hasPermission:o}=At(),{showConfirm:l}=Hs(),c=o(Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES);h.useEffect(()=>{const he=o(Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE)||o(Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES);r&&!he&&n("/references/local")},[r,o,n]);const[f,m]=h.useState([]),[g,b]=h.useState(!0),[x,y]=h.useState([]),[v,S]=h.useState(!1),[R,C]=h.useState(null),[D,k]=h.useState(""),[T,O]=h.useState([]),[W,U]=h.useState([]),[ee,K]=h.useState("all"),[$,N]=h.useState("all"),[E,G]=h.useState([]),[V,le]=h.useState([]),[oe,ve]=h.useState([]),[Re,H]=h.useState([]),[I,X]=h.useState(1),[z,M]=h.useState(25),[w,A]=h.useState(0),[_,F]=h.useState(1),[de,xe]=h.useState([]);h.useEffect(()=>{const he=["selection","refId","subject","status","priority"];c&&he.push("labName"),he.push("isHidden","isArchived","createdAt"),xe(he)},[c]);const L=h.useCallback(async()=>{try{const he=await zf();he.success&&he.data&&(he.data.statuses&&le(he.data.statuses),he.data.priorities&&ve(he.data.priorities),he.data.labs&&H(he.data.labs))}catch(he){console.error("Failed to fetch filters",he)}},[]),B=h.useCallback(async()=>{b(!0);try{const he={subject:D,status:T,priority:W,labs:E};ee==="hidden"&&(he.isHidden="true"),ee==="visible"&&(he.isHidden="false"),$==="archived"&&(he.isArchived="true"),$==="active"&&(he.isArchived="false");const Me=await Tb(I,z,he);Me.success&&Me.data&&(m(Me.data.data),A(Me.data.pagination?.total||0),F(Me.data.pagination?.totalPages||1))}catch(he){console.error("Failed to fetch local references",he)}finally{b(!1)}},[I,z,D,T,W,ee,$,E]);h.useEffect(()=>{L()},[L]),h.useEffect(()=>{B()},[B]);const Q=async(he,Me=!1)=>{if(x.length!==0){if(!Me){const Ue=`Are you sure you want to ${he} ${x.length} local references?`;if(!await l({title:"Confirm Bulk Action",message:Ue,type:"warning",confirmText:"Confirm",cancelText:"Cancel"}))return}S(!0),C(null);try{const Ue=await Uf(x,he,Me);Ue.success?(C({type:"success",text:`Successfully ${he}d ${x.length} references.`}),y([]),B()):C({type:"error",text:Ue.message||`Failed to ${he} references.`})}catch(Ue){if(Ue.response&&Ue.response.status===409&&Ue.response.data&&Ue.response.data.message&&Ue.response.data.message.startsWith("CONFIRM_ARCHIVE:")){const De=Ue.response.data.message.replace("CONFIRM_ARCHIVE: ","");if(await l({title:"Archive Exception",message:De,type:"warning",confirmText:"Yes, Archive",cancelText:"Cancel"})){S(!1),Q(he,!0);return}}C({type:"error",text:Ue.message||Ue.response?.data?.message||"Bulk action failed"})}finally{(Me||!R)&&S(!1)}Me||setTimeout(()=>C(null),5e3)}},ue=()=>{x.length===f.length?y([]):y(f.map(he=>he._id))},we=he=>{y(Me=>Me.includes(he)?Me.filter(Ue=>Ue!==he):[...Me,he])},Oe=he=>{switch(he.toLowerCase()){case"in progress":return"bg-orange-50 text-orange-700 border-orange-100";case"open":return"bg-blue-50 text-blue-700 border-blue-100";case"closed":return"bg-emerald-50 text-emerald-700 border-emerald-100";case"reopened":return"bg-purple-50 text-purple-700 border-purple-100";default:return"bg-gray-50 text-gray-700 border-gray-100"}};return a.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 space-y-6 animate-in fade-in duration-500",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>n("/references/local"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500",children:a.jsx(Qo,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(ls,{className:"w-6 h-6 text-indigo-600"}),"Manage Local References"]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Administrative oversight for ",a.jsx("span",{className:"font-bold text-indigo-600 uppercase",children:r?.labName})," references"]})]})]})}),a.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-3 items-center",children:[a.jsxs("div",{className:"relative col-span-1 md:col-span-2",children:[a.jsx("input",{type:"text",placeholder:"Search by subject or Ref ID...",className:"pl-10 w-full rounded-lg pr-4 h-10 border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading",value:D,onChange:he=>k(he.target.value)}),a.jsx(ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.jsx(Pt,{name:"Status",options:V.map(he=>({label:he,value:he})),selectedValues:T,onChange:O}),a.jsx(Pt,{name:"Priority",options:oe.map(he=>({label:he,value:he})),selectedValues:W,onChange:U}),a.jsxs("select",{value:ee,onChange:he=>K(he.target.value),className:"h-10 px-3 rounded-lg border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-heading",children:[a.jsx("option",{value:"all",children:"All Visibility"}),a.jsx("option",{value:"visible",children:"Visible Only"}),a.jsx("option",{value:"hidden",children:"Hidden Only"})]}),a.jsxs("select",{value:$,onChange:he=>N(he.target.value),className:"h-10 px-3 rounded-lg border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 font-heading",children:[a.jsx("option",{value:"all",children:"All Archival"}),a.jsx("option",{value:"active",children:"Active Only"}),a.jsx("option",{value:"archived",children:"Archived Only"})]}),c&&a.jsx(Pt,{name:"Lab",options:Re.map(he=>({label:he,value:he})),selectedValues:E,onChange:G}),a.jsx("div",{className:"lg:col-start-8 flex justify-end",children:a.jsx(Yr,{allColumns:["refId","subject","status","priority","labName","isHidden","isArchived","createdAt","selection"].filter(he=>he!=="labName"||c),visibleColumns:de,onChange:xe})})]}),a.jsx("div",{className:"flex justify-between items-center border-t border-gray-50 pt-3",children:a.jsx("div",{className:"flex items-center gap-2",children:x.length>0&&a.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-left-2",children:[a.jsxs("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1.5 rounded-full border border-indigo-100 flex items-center gap-2 font-heading",children:[a.jsx(na,{className:"w-3 h-3"}),x.length," Selected"]}),a.jsx("div",{className:"h-4 w-px bg-gray-200 mx-1"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Le,{label:"Hide",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>Q("hide"),disabled:v,icon:a.jsx(Ds,{className:"w-3.5 h-3.5"})}),a.jsx(Le,{label:"Unhide",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>Q("unhide"),disabled:v,icon:a.jsx(rs,{className:"w-3.5 h-3.5"})}),a.jsx(Le,{label:"Archive",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>Q("archive"),disabled:v,icon:a.jsx(ba,{className:"w-3.5 h-3.5"})}),a.jsx(Le,{label:"Restore",variant:"secondary",className:"h-8 px-3 text-xs font-heading",onClick:()=>Q("unarchive"),disabled:v,icon:a.jsx(hb,{className:"w-3.5 h-3.5"})})]})]})})})]}),R&&a.jsxs("div",{className:`p-4 rounded-xl border flex items-center gap-3 animate-in slide-in-from-top-2 ${R.type==="success"?"bg-green-50 border-green-100 text-green-700":"bg-red-50 border-red-100 text-red-700"}`,children:[R.type==="success"?a.jsx(na,{className:"w-5 h-5"}):a.jsx(Bs,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium font-heading",children:R.text})]}),a.jsx("div",{className:`transition-all duration-300 ${g?"opacity-40 pointer-events-none":"opacity-100"}`,children:a.jsx(il,{rows:f,visibleColumns:de,columnWidths:{selection:"48px",refId:"120px",subject:"400px"},customHeaderRenderers:{selection:()=>a.jsx("input",{type:"checkbox",checked:f.length>0&&x.length===f.length,onChange:ue,className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})},customRenderers:{selection:he=>a.jsx("div",{className:"flex justify-center",children:a.jsx("input",{type:"checkbox",checked:x.includes(he._id),onChange:()=>we(he._id),className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),refId:he=>a.jsx(Yt,{to:`/references/${he._id}`,className:"text-indigo-600 font-bold text-xs hover:underline font-heading",children:he.refId}),subject:he=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-semibold text-gray-900 truncate font-heading",title:he.subject,children:he.subject}),a.jsxs("div",{className:"flex gap-2 mt-0.5",children:[he.isHidden&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] text-orange-600 font-bold uppercase font-heading",children:[a.jsx(Ds,{className:"w-2.5 h-2.5"})," Hidden"]}),he.isArchived&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] text-gray-500 font-bold uppercase font-heading",children:[a.jsx(ba,{className:"w-2.5 h-2.5"})," Archived"]})]})]}),status:he=>a.jsx("span",{className:`px-2 py-0.5 rounded-full border text-[10px] font-bold uppercase tracking-wider font-heading ${Oe(he.status)}`,children:he.status}),isHidden:he=>he.isHidden?a.jsxs("span",{className:"text-orange-600 flex items-center gap-1 font-bold text-[10px] uppercase font-heading",children:[a.jsx(Ds,{className:"w-3 h-3"})," Yes"]}):a.jsx("span",{className:"text-gray-400 text-[10px] uppercase font-heading",children:"No"}),isArchived:he=>he.isArchived?a.jsxs("span",{className:"text-gray-600 flex items-center gap-1 font-bold text-[10px] uppercase font-heading",children:[a.jsx(ba,{className:"w-3 h-3"})," Yes"]}):a.jsx("span",{className:"text-gray-400 text-[10px] uppercase font-heading",children:"No"}),labName:he=>a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase font-heading",children:he.labName||"N/A"}),createdAt:he=>a.jsx("span",{className:"font-heading",children:new Date(he.createdAt).toLocaleDateString()})}})}),f.length>0&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 pt-4 font-heading",children:[a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[a.jsxs("select",{value:z,onChange:he=>{M(Number(he.target.value)),X(1)},className:"bg-white border border-gray-200 rounded-lg px-2 py-1 outline-none",children:[a.jsx("option",{value:10,children:"10 per page"}),a.jsx("option",{value:25,children:"25 per page"}),a.jsx("option",{value:50,children:"50 per page"}),a.jsx("option",{value:100,children:"100 per page"})]}),a.jsxs("span",{children:["Showing ",(I-1)*z+1," to ",Math.min(I*z,w)," of ",w]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>X(1),disabled:I===1,className:"p-2 disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:""}),a.jsx("button",{onClick:()=>X(he=>Math.max(1,he-1)),disabled:I===1,className:"px-3 py-1.5 text-sm font-medium disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:"PREV"}),a.jsx("div",{className:"px-4 py-1.5 bg-indigo-600 text-white rounded-lg text-sm font-bold shadow-sm",children:I}),a.jsx("button",{onClick:()=>X(he=>Math.min(_,he+1)),disabled:I===_,className:"px-3 py-1.5 text-sm font-medium disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:"NEXT"}),a.jsx("button",{onClick:()=>X(_),disabled:I===_,className:"p-2 disabled:opacity-30 hover:bg-gray-100 rounded-lg",children:""})]})]})]})},lk=({isOpen:n,onClose:r,onSuccess:o,reference:l,referenceType:c})=>{const[f,m]=h.useState(""),[g,b]=h.useState(""),[x,y]=h.useState("Open"),[v,S]=h.useState("Medium"),[R,C]=h.useState(""),[D,k]=h.useState(""),[T,O]=h.useState("Eoffice"),[W,U]=h.useState(""),[ee,K]=h.useState(""),[$,N]=h.useState(""),[E,G]=h.useState([]),[V,le]=h.useState(!1),[oe,ve]=h.useState(null),[Re,H]=h.useState(!1),[I,X]=h.useState(150),[z,M]=h.useState([]),{user:w,hasPermission:A}=At(),_=E.filter(pe=>{if(pe.role===ta)return!1;const $e=w?._id&&pe._id&&String(pe._id)===String(w._id),Ve=w?.email&&pe.email&&pe.email.toLowerCase()===w.email.toLowerCase();if($e||Ve)return!1;if(z.length>0){const at=c==="LocalReference"?Te.FEATURE_VIEW_OWN_OFFICE_SENDER:Te.FEATURE_VIEW_INTER_OFFICE_SENDER,ae=z.find(ne=>ne.feature===at);if(ae&&Array.isArray(ae.roles)&&!(pe.availableRoles&&Array.isArray(pe.availableRoles)?pe.availableRoles:[pe.role]).some(Ee=>ae.roles.includes(Ee)))return!1}return!0}),F=Array.from(new Set(_.map(pe=>pe.labName).filter(Boolean))).sort();c==="LocalReference"&&w?.labName&&!F.includes(w.labName)&&(F.push(w.labName),F.sort());const de=$?_.filter(pe=>pe.labName===$):[],xe=h.useRef(null),L=A(Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES)||A(Te.FEATURE_MANAGE_GLOBAL_REFERENCES),B=A(Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE),Q=L||B;if(h.useEffect(()=>{const pe=async()=>{try{const Ve=await Pr(1,1e3);if(Ve.success){let at=Array.isArray(Ve.data)?Ve.data:Ve.data?.users||[];at=at.map(ae=>({...ae,_id:ae._id||ae.id})),G(at)}}catch(Ve){console.error("Failed to fetch users",Ve)}},$e=async()=>{try{const Ve=await ll();if(Ve.success&&Ve.data){const at=Ve.data.REMARKS_WORD_LIMIT;at&&X(Number(at));const ae=Ve.data.FEATURE_PERMISSIONS;ae&&Array.isArray(ae)&&M(ae)}}catch(Ve){console.error("Failed to fetch system config",Ve)}};pe(),$e()},[]),h.useEffect(()=>{if(l){m(l.subject||""),b(""),l.status==="Open"||l.status==="Reopened"?y("In Progress"):l.status==="Closed"&&Q?y("Reopened"):y(l.status||"In Progress"),S(l.priority||"Medium");const pe=Array.isArray(l.markedTo)?typeof l.markedTo[0]=="object"?l.markedTo[0]?._id:l.markedTo[0]:typeof l.markedTo=="object"&&l.markedTo!==null?l.markedTo._id:l.markedTo;C(pe||""),k(l.eofficeNo||""),O(l.deliveryMode||"Eoffice"),U(l.deliveryDetails||""),K(l.sentAt?new Date(l.sentAt).toISOString().split("T")[0]:"");const $e=Array.isArray(l.markedTo)?l.markedTo[0]:l.markedTo;if(typeof $e=="object"&&$e!==null)N($e.labName||"");else if(pe&&E.length>0){const Ve=E.find(at=>at._id===pe);Ve&&N(Ve.labName||"")}if(setTimeout(()=>{xe.current?.focus()},100),c==="LocalReference"&&w?.labName){const Ve=typeof l.markedTo=="object"&&l.markedTo!==null?l.markedTo._id:l.markedTo;String(Ve),String(w._id),N(w.labName)}}},[l?._id,n,E,c,w?._id,w?.labName]),!n||!l)return null;const ue=l?.status!=="Closed"&&x==="Closed",we=l?.status==="Closed"&&x==="Reopened",Oe=async()=>{ve(null),le(!0);try{const pe=c==="LocalReference"?await ZS(l._id,{subject:f,remarks:g,status:x,priority:v,markedTo:R,eofficeNo:D}):await W4(l._id,{subject:f,remarks:g,status:x,priority:v,markedTo:R,eofficeNo:D,deliveryMode:T,deliveryDetails:W,sentAt:ee});if(pe.success){console.log("Update success. Message set. Calling onSuccess...");let $e=3;ve({type:"success",text:`Reference updated successfully. Auto closing in ${$e} seconds...`}),o(),H(!1);const Ve=setInterval(()=>{$e-=1,$e>0?ve({type:"success",text:`Reference updated successfully. Auto closing in ${$e} seconds...`}):(clearInterval(Ve),console.log("Countdown finished. Closing modal..."),r(),ve(null))},1e3)}else ve({type:"error",text:pe.message||"Failed to update reference"}),H(!1)}catch(pe){ve({type:"error",text:pe.message||"An unexpected error occurred"}),H(!1)}finally{le(!1)}},he=pe=>pe.trim().split(/\s+/).filter(Boolean).length,Me=pe=>{b(pe.target.value)},Ue=()=>T==="Eoffice"?"Issue No.":"Sent To",De=()=>T==="Eoffice"?"Enter e-office issue no.":T==="Email"?"Enter recipient email/name":"Enter recipient address/name",P=async pe=>{if(pe.preventDefault(),!g.trim()){ve({type:"error",text:"Remarks are required"});return}const $e=I*50;if(g.length>$e){ve({type:"error",text:`Remarks cannot exceed ${$e} characters`});return}if(he(g)>I){ve({type:"error",text:`Remarks cannot exceed ${I} words`});return}if(x!=="Closed"&&R&&w?._id&&String(R)===String(w._id)){ve({type:"error",text:"You cannot mark a reference to yourself"});return}if(c!=="LocalReference"&&!W.trim()){ve({type:"error",text:`${Ue()} is required`});return}if(W.length>60){ve({type:"error",text:`${Ue()} cannot exceed 60 characters`});return}if(c!=="LocalReference"&&!ee){ve({type:"error",text:"Sent Date is required"});return}if(ue){H(!0);return}await Oe()},je=w?._id&&(()=>{if(Array.isArray(l.markedTo))return l.markedTo.some($e=>{const Ve=typeof $e=="object"&&$e!==null?$e._id:$e;return String(Ve)===String(w._id)});const pe=typeof l.markedTo=="object"&&l.markedTo!==null?l.markedTo._id:l.markedTo;return String(pe)===String(w._id)})(),Ce=Q||je;return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in text-left",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl mx-4 flex flex-col max-h-[90vh] animate-scale-in overflow-hidden",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800",children:c==="LocalReference"?"Update Local Reference":"Update Global Reference"}),l?.refId&&a.jsxs("p",{className:"text-sm font-medium text-gray-500 mt-0.5",children:[c==="LocalReference"?"Local":"Global"," Ref ID: ",l.refId]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-full transition-colors text-gray-500 hover:text-gray-700",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto",children:[oe&&a.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm font-medium ${oe.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:oe.text}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsx(Vt,{id:"subject",label:"Subject",type:"text",value:f,onChange:pe=>m(pe.target.value),placeholder:"Enter subject",icon:a.jsx(Ea,{className:"w-4 h-4 text-gray-400"}),required:!0,readOnly:!Q,className:Q?"":"bg-gray-200 cursor-not-allowed opacity-70"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c!=="LocalReference"&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"deliveryMode",className:"block text-sm font-medium text-gray-700",children:["Mode Sent ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:"deliveryMode",value:T,onChange:pe=>O(pe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all bg-gray-200 cursor-not-allowed opacity-70 text-sm",disabled:!0,children:[a.jsx("option",{value:"Eoffice",children:"Eoffice"}),a.jsx("option",{value:"Email",children:"Email"}),a.jsx("option",{value:"Physical",children:"Physical"})]})]}),c!=="LocalReference"?T==="Eoffice"?a.jsx(Vt,{id:"eofficeNo",label:"E-office No.",type:"text",value:D,onChange:pe=>k(pe.target.value),placeholder:"E-office number",icon:a.jsx(Ea,{className:"w-4 h-4 text-gray-400"}),readOnly:!0,className:"bg-gray-200 cursor-not-allowed opacity-70"}):a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"deliveryDetails",className:"block text-sm font-medium text-gray-700",children:[Ue()," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{id:"deliveryDetails",type:"text",value:W,onChange:pe=>U(pe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all bg-gray-200 cursor-not-allowed opacity-70 text-sm",placeholder:De(),disabled:!0})]}):a.jsx(Vt,{id:"eofficeNo",label:"E-office No.",type:"text",value:D,onChange:pe=>k(pe.target.value),placeholder:"E-office number",icon:a.jsx(Ea,{className:"w-4 h-4 text-gray-400"}),readOnly:!0,className:"bg-gray-200 cursor-not-allowed opacity-70"}),c!=="LocalReference"&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"sentDate",className:"block text-sm font-medium text-gray-700",children:["Sent Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{id:"sentDate",type:"date",value:ee,onChange:pe=>K(pe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all bg-gray-200 cursor-not-allowed opacity-70 text-sm",disabled:!0})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"remarks",className:"text-sm font-medium text-gray-700 flex justify-between",children:[a.jsxs("span",{children:["Remarks ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("span",{className:`text-xs ${he(g)>I?"text-red-500 font-bold":"text-gray-500"}`,children:[he(g)," / ",I," words"]})]}),a.jsx("textarea",{id:"remarks",ref:xe,value:g,onChange:Me,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 outline-none transition-all resize-none h-24 ${he(g)>I?"border-red-500 focus:ring-red-500 text-red-600":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,placeholder:ue?"Enter closing remarks":we?"Enter reopening remarks":"Enter remarks",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:`space-y-1 ${x==="Closed"?"col-span-2":""}`,children:[a.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:["Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{id:"status",value:x,onChange:pe=>y(pe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all bg-white",children:l?.status==="Closed"?a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"Closed",children:"Closed"}),Ce&&a.jsx("option",{value:"Reopened",children:"Reopen"})]}):a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Closed",children:"Closed"}),l?.status==="Reopened"&&a.jsx("option",{value:"Reopened",children:"Reopened"})]})})]}),x!=="Closed"&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:["Priority ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:"priority",value:v,onChange:pe=>S(pe.target.value),className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all bg-white ${Q?"":"bg-gray-200! cursor-not-allowed opacity-70"}`,disabled:!Q,children:[a.jsx("option",{value:"High",children:"High"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"Low",children:"Low"})]})]})]}),x==="Closed"&&l.status!=="Closed"&&a.jsxs("div",{className:"text-sm text-blue-600 bg-blue-50 p-3 rounded-md border border-blue-200",children:[a.jsx("span",{className:"font-semibold",children:"Note:"})," This reference will be automatically marked to the ",a.jsx("span",{className:"font-bold",children:"Administrators"})," upon closing."]}),l.status==="Closed"&&!Ce&&a.jsxs("div",{className:"text-sm text-gray-500 bg-gray-100 p-3 rounded-md border border-gray-200",children:[a.jsx("span",{className:"font-semibold",children:"Info:"})," Only Main Admins or current Assignees have the rights to reopen this reference."]}),x!=="Closed"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"lab",className:"block text-sm font-medium text-gray-700",children:["Select Lab / Institution ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Aa,{placeholder:"Select Lab",options:F.map(pe=>({label:pe,value:pe})),selectedValue:$,onChange:pe=>{N(pe),C("")},disabled:c==="LocalReference"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"markedTo",className:"block text-sm font-medium text-gray-700",children:["Marked To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Aa,{placeholder:$?"Select a user":"Select Lab first",options:de.map(pe=>({label:`${pe.fullName||pe.email.split("@")[0]}${pe.designation?`, ${pe.designation}`:""} (${pe.email})`,value:pe._id})),selectedValue:R,onChange:pe=>C(pe),disabled:!$})]})]}),a.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),(l.status!=="Closed"||x!=="Closed")&&a.jsx("button",{type:"submit",disabled:V,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all shadow-md font-medium disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:V?a.jsxs(a.Fragment,{children:[a.jsx(Bt,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(os,{className:"w-4 h-4"}),"Update Reference"]})})]})]})]})]}),Re&&a.jsx("div",{className:"absolute inset-0 z-10 bg-white/95 flex items-center justify-center p-6 animate-fade-in",children:a.jsxs("div",{className:"text-center space-y-4 max-w-sm",children:[a.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto",children:a.jsx(gb,{className:"w-8 h-8 text-yellow-600"})}),a.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Are you sure?"}),a.jsxs("p",{className:"text-gray-600",children:["You are about to close this reference. Once closed, only ",a.jsx("span",{className:"font-semibold text-gray-900",children:"System Admins"})," can reopen it."]}),a.jsxs("div",{className:"flex gap-3 justify-center pt-2",children:[a.jsx("button",{type:"button",onClick:()=>H(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),a.jsx("button",{type:"button",onClick:Oe,disabled:V,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all shadow-md font-medium flex items-center gap-2",children:V?a.jsxs(a.Fragment,{children:[a.jsx(Bt,{className:"w-4 h-4 animate-spin"}),"Closing..."]}):a.jsx(a.Fragment,{children:"Confirm Close"})})]})]})})]})},ok=({isOpen:n,onClose:r,reference:o,workflowUsers:l,referenceType:c})=>{const[f,m]=h.useState([]),[g,b]=h.useState(""),[x,y]=h.useState("Medium"),[v,S]=h.useState(!1),[R,C]=h.useState(null),[D,k]=h.useState(150);if(h.useEffect(()=>{n&&((async()=>{try{const ee=await ll();if(ee.success&&ee.data){const K=ee.data.REMARKS_WORD_LIMIT;K&&k(Number(K))}}catch(ee){console.error("Failed to fetch system config",ee)}})(),o&&typeof o.markedTo=="object"&&o.markedTo!==null?m([o.markedTo._id]):o&&typeof o.markedTo=="string"?m([o.markedTo]):m([]),b(""),y("Medium"),C(null))},[n,o]),!n||!o)return null;const T=U=>U.trim().split(/\s+/).filter(Boolean).length,O=async U=>{if(U.preventDefault(),C(null),f.length===0){C({type:"error",text:"Please select at least one recipient."});return}if(!g.trim()){C({type:"error",text:"Remarks are required."});return}const ee=D*50;if(g.length>ee){C({type:"error",text:`Remarks cannot exceed ${ee} characters`});return}if(T(g)>D){C({type:"error",text:`Remarks cannot exceed ${D} words`});return}S(!0);try{const K=c==="LocalReference"?await KS(o._id,f,g,x):await Z4(o._id,f,g,x);K.success?(C({type:"success",text:"Reminder sent successfully!"}),setTimeout(()=>{r()},1500)):C({type:"error",text:K.message||"Failed to send reminder"})}catch(K){C({type:"error",text:K.message||"An unexpected error occurred"})}finally{S(!1)}},W=l.filter(U=>U.role!=="Inter Lab sender"&&U.role!==ta).map(U=>({label:`${U.fullName} (${U.email})`,value:U._id,title:U.designation?`${U.designation} at ${U.labName}`:U.labName}));return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 overflow-hidden animate-scale-in",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(gb,{className:"w-5 h-5 text-amber-500"}),"Issue Reminder / Seek Inputs"]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-full transition-colors text-gray-500 hover:text-gray-700",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg border border-gray-100",children:[a.jsxs("p",{children:[a.jsxs("strong",{children:[a.jsx("span",{className:"text-blue-600 font-bold",children:c==="LocalReference"?"Local":"Global"})," Ref ID:"]})," ",o.refId]}),a.jsxs("p",{className:"truncate",children:[a.jsx("strong",{children:"Subject:"})," ",o.subject]})]}),R&&a.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm font-medium ${R.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:R.text}),a.jsxs("form",{onSubmit:O,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1 relative z-20",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Select Recipients ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Pt,{name:"Select Users",options:W,selectedValues:f,onChange:m}),f.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:f.map(U=>{const ee=W.find(K=>K.value===U);return ee?a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-indigo-50 text-indigo-700 border border-indigo-100",children:ee.label.split("(")[0].trim()},U):null})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select one or more users to receive this email."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),a.jsxs("select",{id:"priority",value:x,onChange:U=>y(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all bg-white",children:[a.jsx("option",{value:"High",children:"High"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"Low",children:"Low"})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"remarks",className:"text-sm font-medium text-gray-700 flex justify-between",children:[a.jsxs("span",{children:["Remarks / Comments ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("span",{className:`text-xs ${T(g)>D?"text-red-500 font-bold":"text-gray-500"}`,children:[T(g)," / ",D," words"]})]}),a.jsx("textarea",{id:"remarks",value:g,onChange:U=>b(U.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 outline-none transition-all resize-none h-32 ${T(g)>D?"border-red-500 focus:ring-red-500 text-red-600":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,placeholder:"Enter your reminder message here...",required:!0})]}),a.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all shadow-md font-medium disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx(Bt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(o4,{className:"w-4 h-4"}),"Send Reminder"]})})]})]})]})]})})},ck=({isOpen:n,onClose:r,reference:o,onSuccess:l,referenceType:c})=>{const[f,m]=h.useState(""),[g,b]=h.useState(!1),[x,y]=h.useState(null);if(!n)return null;const v=async S=>{if(S.preventDefault(),y(null),!f.trim()){y({type:"error",text:"Remarks are required."});return}b(!0);try{c==="LocalReference"?await JS(o._id,f):await K4(o._id,f),y({type:"success",text:"Reopening request sent successfully."}),m(""),l(),setTimeout(()=>{r(),y(null)},2e3)}catch(R){y({type:"error",text:R.message||"Failed to send request"})}finally{b(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 overflow-hidden animate-scale-in",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Request Reopening"}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-full transition-colors text-gray-500 hover:text-gray-700",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-4 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg border border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-gray-700",children:"Ref ID:"})," ",o.refId]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-gray-700",children:"Status:"}),a.jsx("span",{className:"ml-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:o.status})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"font-semibold text-gray-700",children:"Subject:"})," ",o.subject]})]})}),x&&a.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm font-medium ${x.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:x.text}),a.jsxs("form",{onSubmit:v,id:"reopen-form",className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{htmlFor:"remarks",className:"block text-sm font-medium text-gray-700",children:["Reason for Reopening ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{id:"remarks",rows:4,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 outline-none transition-all resize-none ${x?.type==="error"?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"}`,placeholder:"Please describe why this reference needs to be reopened...",value:f,onChange:S=>m(S.target.value),required:!0,disabled:x?.type==="success"})]}),a.jsxs("div",{className:"pt-2 flex gap-3 justify-end",children:[a.jsx(Le,{type:"button",variant:"secondary",onClick:r,label:"Cancel",className:"w-full sm:w-auto"}),a.jsx(Le,{type:"submit",variant:"primary",label:g?"Sending...":"Send Request",disabled:g||x?.type==="success",className:"w-full sm:w-auto"})]})]})]})]})})};function dk(){const{id:n}=gp(),r=Xt(),[o,l]=h.useState(null),[c,f]=h.useState(!0),[m,g]=h.useState(""),[b,x]=h.useState(!1),[y,v]=h.useState(!1),[S,R]=h.useState(!1),[C,D]=h.useState(!1),[k,T]=h.useState(null),[O,W]=h.useState("GlobalReference"),[U,ee]=h.useState(!1),{showMessage:K,showConfirm:$}=Hs(),[N,E]=h.useState({}),[G,V]=h.useState(!1),le=L=>{E(B=>({...B,[L]:!B[L]}))},{user:oe,hasPermission:ve}=At(),Re=ve(Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE)||ve(Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES)||ve(Te.FEATURE_MANAGE_GLOBAL_REFERENCES),H=h.useCallback(async(L=!1)=>{if(n)try{L&&f(!0);let B;try{if(B=await Q4(n),B.success&&B.data){l(B.data),W("GlobalReference"),console.log("Global Reference data loaded");return}}catch{console.log("Not found in Global References, trying Local...")}const Q=await QS(n);Q.success&&Q.data?(l(Q.data),W("LocalReference"),console.log("Local Reference data loaded")):L?g("Failed to load reference details"):console.error("Failed to load reference details",Q)}catch(B){L&&g("An error occurred while fetching details"),console.error(B)}finally{L&&f(!1)}},[n]);h.useEffect(()=>{H(!0)},[H]);const I=async L=>{let B="";if(L==="reject"){const Q=window.prompt("Please enter a reason for rejection (optional):");if(Q===null)return;B=Q}else if(!await $({title:"Confirm Approval",message:"Are you sure you want to approve this reopening request?",type:"warning",confirmText:"Approve",cancelText:"Cancel"}))return;ee(!0);try{await J4(n,L,B),H()}catch(Q){K({title:"Error",message:Q.message||`Failed to ${L} request`,type:"error"})}finally{ee(!1)}},X=async L=>{if(!(!n||!await $({title:`Confirm ${L.charAt(0).toUpperCase()+L.slice(1)}`,message:`Are you sure you want to ${L} this reference?`,type:"warning",confirmText:"Yes, proceed",cancelText:"No"}))){ee(!0);try{const Q=O==="GlobalReference"?await Df([n],L):await Uf([n],L);Q.success?H():K({title:"Action Failed",message:Q.message||"Action failed",type:"error"})}catch(Q){const ue=Q.response?.data?.message||Q.message||"An error occurred";K({title:"Error",message:ue,type:"error"})}finally{ee(!1)}}},z=L=>{L&&(T(L),D(!0))};if(c)return a.jsx("div",{className:"p-8 text-center",children:"Loading..."});if(m)return a.jsx("div",{className:"p-8 text-center text-red-500",children:m});if(!o)return a.jsx("div",{className:"p-8 text-center",children:"Reference not found"});const{reference:M,movements:w}=o,A=L=>{if(!L)return"Unknown User";if(typeof L=="string")return L;const B=L.fullName||"Unknown User",Q=L.designation?`, ${L.designation}`:"",ue=L.labName?` (${L.labName})`:"";return`${B}${Q}${ue}`},_=L=>L?typeof L=="string"?L:L._id:null,F=Re||oe?._id&&M.markedTo&&(Array.isArray(M.markedTo)?M.markedTo.some(L=>{const B=typeof L=="object"&&L!==null?L._id:L;return String(B)===String(oe._id)}):typeof M.markedTo=="object"&&M.markedTo!==null?String(M.markedTo._id)===String(oe._id):String(M.markedTo)===String(oe._id)),xe=(()=>{const L=new Map,B=Q=>{if(Q){if(Array.isArray(Q)){Q.forEach(ue=>B(ue));return}Q&&typeof Q=="object"&&(Q._id||Q.id)&&L.set(String(Q._id||Q.id),Q)}};return w&&w.forEach(Q=>{Array.isArray(Q.markedTo)?Q.markedTo.forEach(ue=>B(ue)):B(Q.markedTo),B(Q.performedBy)}),B(M.createdBy),B(M.markedTo),Array.from(L.values())})();return a.jsxs("div",{className:"container mx-auto p-4",children:[a.jsxs("button",{onClick:()=>{r(-1)},className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(Qo,{className:"w-4 h-4 mr-2"}),O==="LocalReference"?"Back to Local References":"Back to Global References"]}),M.reopenRequest&&M.status==="Closed"&&a.jsx("div",{className:"mb-6 bg-orange-50 border-l-4 border-orange-500 p-4 rounded shadow-sm",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"shrink-0",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsxs("div",{className:"ml-3 w-full",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-orange-800",children:"Reopening Request Pending"}),M.reopenRequest?.requestId&&a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["ID: ",M.reopenRequest?.requestId]})]}),a.jsxs("div",{className:"mt-2 text-sm text-orange-700",children:[a.jsxs("p",{children:[a.jsx("button",{onClick:()=>z(_(M.reopenRequest?.requestedBy)),className:"font-bold hover:text-orange-900 hover:underline text-left inline",children:A(M.reopenRequest.requestedBy)})," has requested to reopen this reference."]}),a.jsxs("p",{className:"mt-1",children:[a.jsx("strong",{children:"Reason:"})," ",M.reopenRequest.reason]}),a.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Requested on: ",new Date(M.reopenRequest.requestedAt).toLocaleDateString()]})]}),a.jsx("div",{className:"mt-4",children:Re?a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>I("approve"),disabled:U,className:"px-4 py-2 bg-green-600 text-white text-xs font-bold uppercase tracking-wider rounded-lg hover:bg-green-700 shadow-sm transition-all flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:U?"Approving...":"Approve"}),a.jsx("button",{onClick:()=>I("reject"),disabled:U,className:"px-4 py-2 bg-rose-600 text-white text-xs font-bold uppercase tracking-wider rounded-lg hover:bg-rose-700 shadow-sm transition-all flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:U?"Rejecting...":"Reject"})]}):a.jsx("p",{className:"text-sm text-gray-600 italic",children:"The request to reopen this reference is pending for approval."})})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2 space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-1 animate-text-gradient",children:"Movement Flow"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Chronological history of the reference."})]}),(Re||oe?._id&&w?.some(L=>L.markedTo?._id===oe._id||L.performedBy?._id===oe._id)||oe?._id&&M.createdBy&&(typeof M.createdBy=="object"?M.createdBy._id===oe._id:M.createdBy===oe._id))&&a.jsx(a.Fragment,{children:M.status==="Closed"?!Re&&!M.reopenRequest&&a.jsx(Le,{label:"Send Reopening Request",className:"px-4 py-2 bg-orange-600 text-white hover:bg-orange-700 shadow-sm text-sm font-medium",onClick:()=>R(!0)}):a.jsx(Le,{label:"Issue Reminder / Seek Inputs",className:"px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm text-sm font-medium",onClick:()=>v(!0)})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200"}),a.jsxs("div",{className:"space-y-8",children:[w&&w.map(L=>a.jsxs("div",{className:"relative flex gap-6",children:[a.jsx("div",{className:"flex-none",children:a.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-xs",style:{backgroundColor:"#a855f7"},children:(L.performedBy||(Array.isArray(L.markedTo)?L.markedTo[0]:L.markedTo))?.fullName?.substring(0,2).toUpperCase()||"NA"})}),a.jsxs("div",{className:"grow",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:a.jsx("button",{onClick:()=>z(_(L.performedBy||(Array.isArray(L.markedTo)?L.markedTo[0]:L.markedTo))),className:"hover:text-indigo-600 hover:underline text-left font-semibold",children:A(L.performedBy||(Array.isArray(L.markedTo)?L.markedTo[0]:L.markedTo))})}),a.jsxs("div",{className:"inline-flex items-center gap-1 mt-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full border border-red-500 flex items-center justify-center",children:a.jsx("span",{className:"w-1 h-1 rounded-full bg-red-500"})}),a.jsx("span",{className:"text-sm text-gray-600 font-semibold",children:L.statusOnMovement})]}),L.performedBy&&a.jsxs("div",{className:"text-xs text-gray-500 mt-2 mb-1",children:[a.jsx("span",{children:"Next marked to: "}),Array.isArray(L.markedTo)&&L.markedTo.length>1?a.jsxs("div",{className:"inline-block relative",children:[a.jsxs("button",{onClick:()=>le(L._id),className:"text-indigo-600 font-bold hover:underline flex items-center gap-1",children:["All Relevant Administrators (",L.markedTo.length,")",oe?._id&&Array.isArray(L.markedTo)&&L.markedTo.some(B=>String(_(B))===String(oe._id))&&a.jsx(Ls,{className:"w-2.5 h-2.5 text-red-500 animate-bounce",fill:"currentColor"})]}),N[L._id]&&a.jsxs("div",{className:"absolute z-10 left-0 mt-2 p-3 bg-white border border-gray-200 rounded-lg shadow-xl min-w-[250px] max-h-[200px] overflow-y-auto",children:[a.jsx("p",{className:"text-[10px] uppercase tracking-wider text-gray-400 font-bold mb-2 border-b pb-1",children:"Assigned Admins"}),a.jsx("div",{className:"space-y-1.5",children:L.markedTo.map((B,Q)=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{onClick:()=>z(_(B)),className:"text-xs text-indigo-600 hover:underline text-left font-medium",children:B.fullName||"Unknown Admin"}),a.jsxs("span",{className:"text-[10px] text-gray-400 italic",children:[B.designation||"Admin"," (",B.labName||"CSIR",")"]})]},Q))})]})]}):a.jsx("button",{onClick:()=>z(_(Array.isArray(L.markedTo)?L.markedTo[0]:L.markedTo)),className:"hover:text-indigo-600 hover:underline text-left text-indigo-600 font-medium",children:A(Array.isArray(L.markedTo)?L.markedTo[0]:L.markedTo)})]})]}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(L.movementDate).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})})]}),a.jsx("div",{className:"bg-gray-50 rounded-md p-3 mt-2 border border-gray-100",children:a.jsx("p",{className:"text-gray-700 text-sm",children:L.remarks||"No remarks provided."})})]})]},L._id)),(!w||w.length===0)&&a.jsx("div",{className:"pl-16 text-gray-500 italic",children:"No movements recorded yet."})]})]})]})}),a.jsxs("div",{className:"lg:col-span-1",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-6",children:[a.jsxs("div",{className:"flex justify-between items-stretch mb-6",children:[a.jsxs("div",{className:"flex-1 min-w-0 pr-4 flex flex-col gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 wrap-break-word mr-2",children:M.subject}),a.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1.5 mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500 min-w-0",children:[a.jsx("span",{className:"font-medium mr-1",children:"Ref ID:"}),a.jsx("span",{className:"wrap-break-word",children:M.refId||"N/A"})]}),a.jsxs("p",{className:"text-sm text-gray-500 min-w-0",children:[a.jsx("span",{className:"font-medium mr-1",children:"Mode Sent:"}),a.jsx("span",{className:"wrap-break-word",children:M.deliveryMode||"N/A"})]}),M.deliveryMode&&a.jsxs("p",{className:"text-sm text-gray-500 min-w-0",children:[a.jsx("span",{className:"font-medium mr-1",children:M.deliveryMode==="Eoffice"?"Issue No:":"Sent To:"}),a.jsx("span",{className:"wrap-break-word",children:M.deliveryDetails||"N/A"})]}),M.sentAt&&a.jsxs("p",{className:"text-sm text-gray-500 min-w-0",children:[a.jsx("span",{className:"font-medium mr-1",children:"Sent Date:"}),a.jsx("span",{className:"break-all",children:new Date(M.sentAt).toLocaleDateString()})]}),M.eofficeNo&&a.jsxs("p",{className:"text-sm text-gray-500 min-w-0",children:[a.jsx("span",{className:"font-medium mr-1",children:"E-office No:"}),a.jsx("span",{className:"break-all",children:M.eofficeNo})]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-auto",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-red-50 text-red-700 text-xs font-medium border border-red-100",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),M.status]}),a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium border ${M.priority==="High"?"bg-red-50 text-red-700 border-red-200":"bg-gray-100 text-gray-700 border-gray-200"}`,children:[M.priority==="High"&&"",M.priority==="Medium"&&"",M.priority==="Low"&&""," "," ",M.priority," Priority"]})]})]}),a.jsxs("div",{className:"shrink-0 flex flex-col items-center justify-between py-1",children:[a.jsx("div",{children:a.jsx(Le,{label:"Update",className:"px-4 py-2 text-sm font-medium whitespace-nowrap shadow-sm",onClick:()=>x(!0),disabled:!F})}),a.jsxs("div",{className:`px-3 py-1.5 rounded-full flex items-center gap-1.5 text-xs font-bold border shadow-sm ${O==="LocalReference"?"bg-orange-50 text-orange-700 border-orange-200":"bg-indigo-50 text-indigo-700 border-indigo-200"}`,children:[O==="LocalReference"?a.jsx(ls,{className:"w-3.5 h-3.5"}):a.jsx(In,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:O==="LocalReference"?"Local Ref":"Global Ref"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-sm font-bold text-indigo-700 mb-1 flex items-center gap-2",children:a.jsx("span",{children:"Latest Remarks :"})}),a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed wrap-break-word whitespace-pre-wrap",children:M.remarks||"No description provided."})]}),Re&&a.jsxs("div",{className:"mb-6 p-4 rounded-xl border border-gray-100 bg-gray-50/50 space-y-3",children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ha,{className:"w-3.5 h-3.5"})," Admin Oversight"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[M.isHidden?a.jsx(Le,{label:"Unhide",variant:"secondary",className:"h-8 text-[10px] font-bold uppercase",icon:a.jsx(rs,{className:"w-3.5 h-3.5"}),onClick:()=>X("unhide"),disabled:U}):a.jsx(Le,{label:"Hide",variant:"secondary",className:"h-8 text-[10px] font-bold uppercase",icon:a.jsx(Ds,{className:"w-3.5 h-3.5"}),onClick:()=>X("hide"),disabled:U}),M.isArchived?a.jsx(Le,{label:"Restore",variant:"secondary",className:"h-8 text-[10px] font-bold uppercase",icon:a.jsx(R4,{className:"w-3.5 h-3.5"}),onClick:()=>X("unarchive"),disabled:U}):a.jsx(Le,{label:"Archive",variant:"secondary",className:"h-8 text-[10px] font-bold uppercase",icon:a.jsx(ba,{className:"w-3.5 h-3.5"}),onClick:()=>X("archive"),disabled:U})]})]}),a.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[a.jsx("span",{className:"w-4",children:""}),a.jsxs("span",{children:["Created: ",new Date(M.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-600",children:[a.jsx("span",{className:"w-4 mt-0.5",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"mr-1",children:"Created by:"}),a.jsx("button",{onClick:()=>z(_(M.createdBy)),className:"hover:text-indigo-600 hover:underline text-left inline",children:A(M.createdBy)})]})]}),a.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-600",children:[a.jsx("span",{className:"w-4 mt-0.5",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"mr-1 animate-text-gradient font-bold",children:"Currently Marked to:"}),a.jsx("div",{className:"block mt-1",children:Array.isArray(M.markedTo)&&M.markedTo.length>1?a.jsxs("div",{className:"inline-block w-full",children:[a.jsxs("button",{onClick:()=>V(!G),className:"text-indigo-600 hover:text-indigo-800 font-semibold hover:underline flex items-center gap-1.5",children:["All Relevant Administrators (",M.markedTo.length,")",oe?._id&&M.markedTo.some(L=>String(_(L))===String(oe._id))&&M.status!=="Closed"&&a.jsx(Ls,{className:"w-3 h-3 text-red-500 animate-bounce",fill:"currentColor"})]}),G&&a.jsx("div",{className:"mt-3 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 flex flex-wrap gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:M.markedToDetails?.map((L,B)=>a.jsx("button",{onClick:()=>z(_(L)),className:"text-xs text-indigo-700 bg-white px-2 py-1 rounded border border-indigo-200 hover:bg-indigo-50 transition-colors shadow-sm",children:L.fullName||L.email},L._id||B))})]}):a.jsxs("div",{className:"inline-flex items-center gap-2",children:[a.jsx("button",{onClick:()=>z(_(Array.isArray(M.markedTo)?M.markedTo[0]:M.markedTo)),className:"hover:text-indigo-600 hover:underline text-left inline",children:A(Array.isArray(M.markedTo)?M.markedTo[0]:M.markedTo)}),oe?._id&&M.markedTo&&M.status!=="Closed"&&(Array.isArray(M.markedTo)?M.markedTo.some(L=>String(_(L))===String(oe._id)):String(_(M.markedTo))===String(oe._id))&&a.jsx(Ls,{className:"w-3 h-3 text-red-500 animate-bounce",fill:"currentColor"})]})})]})]})]})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-400 animate-text-gradient",children:[a.jsx("span",{children:"Update button will be enabled only if the reference is currently assigned to you"}),a.jsx("br",{}),a.jsx("br",{}),a.jsxs("span",{className:"mt-6 font-bold",children:[" ",new Date().getFullYear()," Council of Scientific & Industrial Research "]})]})]})]}),a.jsx(lk,{isOpen:b,onClose:()=>x(!1),onSuccess:()=>H(!1),reference:M,referenceType:O}),a.jsx(ok,{isOpen:y,onClose:()=>v(!1),reference:M,workflowUsers:xe,referenceType:O}),a.jsx(ck,{isOpen:S,onClose:()=>R(!1),reference:M,onSuccess:()=>H(!1),referenceType:O}),a.jsx(ol,{isOpen:C,onClose:()=>D(!1),userId:k})]})}const Ob="/api/v1",uk=async()=>{try{const n=await fetch(`${Ob}/parichay/auth-url`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),r=n.headers.get("content-type")||"";let o=null;if(r.includes("application/json"))o=await n.json();else{const l=await n.text();try{o=JSON.parse(l)}catch{if(!n.ok)throw new Error(`Server returned non-JSON response (status ${n.status}): ${l}`);o={data:l}}}if(!n.ok)throw new Error(o&&o.message||`Failed to get Parichay auth URL (status ${n.status})`);return{success:!0,data:o.data}}catch(n){return console.error("Parichay Auth URL Error:",n.message),{success:!1,message:n.message||"Failed to get Parichay authorization URL"}}},fk=async n=>{try{const r=await fetch(`${Ob}/parichay/callback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"}),o=r.headers.get("content-type")||"";let l=null;if(o.includes("application/json"))l=await r.json();else{const c=await r.text();try{l=JSON.parse(c)}catch{if(!r.ok)throw new Error(`Server returned non-JSON response (status ${r.status}): ${c}`);l={data:c}}}if(!r.ok)throw new Error(l&&l.message||`Parichay login failed (status ${r.status})`);return{success:!0,data:l.data,user:l.data?.user}}catch(r){return console.error("Parichay Callback Error:",r.message),{success:!1,message:r.message||"Failed to complete Parichay login"}}},mk=({onLoginStart:n,onError:r})=>{const[o,l]=h.useState(!1),c=async()=>{try{l(!0),n?.();const f=await uk();if(!f.success)throw new Error(f.message||"Failed to initiate Parichay login");const{authorizationUrl:m,codeVerifier:g,state:b}=f.data||{};if(!m||typeof m!="string"||m.trim()==="")throw console.error("Invalid authorizationUrl from getParichayAuthUrl:",f),new Error("Invalid authorization URL received from server");sessionStorage.setItem("parichay_code_verifier",g),sessionStorage.setItem("parichay_state",b),window.location.href=m}catch(f){console.error("Parichay login error:",f),r?.(f.message||"Failed to initiate Parichay login"),l(!1)}};return a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx(Le,{onClick:c,disabled:o,icon:o?void 0:a.jsx(Mf,{size:18}),iconPosition:"left",className:"w-full bg-blue-600 hover:bg-blue-700",children:o?"Redirecting to Parichay...":"Login with Parichay"}),a.jsxs("div",{className:"relative flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 border-t border-gray-300"}),a.jsx("span",{className:"text-sm text-gray-500 px-2",children:"OR"}),a.jsx("div",{className:"flex-1 border-t border-gray-300"})]})]})},Cx=()=>{const[n,r]=h.useState(!0),[o,l]=h.useState(""),[c,f]=h.useState(""),[m,g]=h.useState(""),[b,x]=h.useState(""),[y,v]=h.useState(!1),[S,R]=h.useState(null),[C,D]=h.useState([]);h.useEffect(()=>{Jp().then(U=>{U.success&&D(U.data.allowedDomains)})},[]);const k=Xt(),{login:T,isAuthenticated:O}=At();h.useEffect(()=>{O&&k("/")},[O,k]);const W=async U=>{if(U.preventDefault(),R(null),!n&&c!==m){R("Passwords do not match");return}if(C.length>0){const ee=o.split("@")[1]?.toLowerCase();if(!ee||!C.includes(ee)){R(`Access restricted to the following domains: ${C.join(", ")}`);return}}v(!0);try{if(n){const ee=await aj({email:o,password:c});if(ee.success&&ee.data?.user){const K=ee.data.user;T({_id:K._id,fullName:K.fullName||"",email:K.email,labName:K.labName,designation:K.designation,division:K.division,status:K.status,isSubmitted:K.isSubmitted,role:K.role,availableRoles:K.availableRoles,mobileNo:K.mobileNo,avatar:K.avatar,initials:(K.fullName||K.email).slice(0,2).toUpperCase()});const $=K.status==="Approved",N=!!(K.labName&&K.designation);!$||!N?k("/profile",{state:{message:"Your profile must be completed and approved by an administrator to access the portal features."}}):k("/")}else R(ee.message||"Login failed")}else{if(b&&(!/^\d+$/.test(b)||b.length!==10)){R("Mobile number must be exactly 10 digits and numeric only"),v(!1);return}const ee=await nj({email:o,password:c,mobileNo:b});ee.success?(r(!0),f(""),g(""),R(ee.message||"Registration successful! Please check your email to activate your account.")):R(ee.message||"Registration failed")}}catch{R("An unexpected error occurred")}finally{v(!1)}};return a.jsxs("div",{className:"min-h-[calc(100vh-160px)] flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-indigo-500/5 blur-3xl animate-blob"}),a.jsx("div",{className:"absolute top-[20%] right-[-10%] w-[30%] h-[30%] rounded-full bg-purple-500/5 blur-3xl animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute bottom-[-10%] left-[20%] w-[30%] h-[30%] rounded-full bg-blue-500/5 blur-3xl animate-blob animation-delay-4000"})]}),a.jsxs("div",{className:"w-full max-w-md relative",children:[a.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-white/20 dark:border-gray-700/50 ring-1 ring-black/5 transition-all duration-300",children:[a.jsx("div",{className:"relative p-8 pt-10 text-center bg-linear-to-b from-indigo-50/50 to-transparent dark:from-indigo-900/10",children:a.jsxs("div",{className:"relative z-10 space-y-2 mt-4",children:[a.jsx("h2",{className:"text-5xl font-black tracking-tight mb-4",children:a.jsx("span",{className:`inline-block ${n?"animate-modern-shine":"text-gray-900 dark:text-white"}`,children:n?"Welcome Back":"Create Account"})}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium text-base",children:n?"Login to manage your references":"Join our platform for researchers"})]})}),a.jsxs("form",{onSubmit:W,className:"px-8 pb-10 pt-2 space-y-6",children:[S&&a.jsx("div",{className:`p-4 rounded-xl text-sm font-medium animate-in fade-in slide-in-from-top-4 duration-300 border ${S.includes("successful")?"bg-green-50/50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-300 dark:border-green-800":"bg-red-50/50 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-800"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${S.includes("successful")?"bg-green-500":"bg-red-500"}`}),S]})}),a.jsxs("div",{className:"space-y-5",children:[a.jsx(Vt,{label:"Email Address",type:"email",icon:a.jsx(Ur,{className:"w-5 h-5"}),placeholder:C.length>0?`e.g. name@${C[0]}`:"name@csir.res.in",value:o,onChange:U=>l(U.target.value),required:!0}),a.jsx(Vt,{label:"Password",type:"password",icon:a.jsx(Yi,{className:"w-5 h-5"}),placeholder:"",value:c,onChange:U=>f(U.target.value),required:!0}),!n&&a.jsx(Vt,{label:"Confirm Password",type:"password",icon:a.jsx(Yi,{className:"w-5 h-5"}),placeholder:"",value:m,onChange:U=>g(U.target.value),required:!0}),!n&&a.jsx(Vt,{label:"Mobile Number",type:"text",icon:a.jsx("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),placeholder:"e.g. 9876543210 (10 digits)",value:b,onChange:U=>{const ee=U.target.value.replace(/\D/g,"");ee.length<=10&&x(ee)},maxLength:10})]}),a.jsx("div",{className:"pt-2",children:a.jsx(Le,{variant:"primary",type:"submit",disabled:y,loading:y,fullWidth:!0,size:"lg",className:"shadow-lg shadow-indigo-500/20 hover:shadow-indigo-500/30 transition-all duration-300",icon:!y&&(n?a.jsx(Mf,{className:"w-5 h-5"}):a.jsx(cf,{className:"w-5 h-5"})),children:y?n?"Signing In...":"Creating Account...":n?"Sign In":"Create Account"})}),a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-100 dark:border-gray-700"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 text-gray-400 tracking-wider font-medium",children:"Or"})})]}),n&&a.jsx("div",{children:a.jsx(mk,{onError:U=>R(U),onLoginStart:()=>v(!0)})}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("button",{type:"button",onClick:()=>r(!n),className:"group flex items-center justify-center gap-2 text-sm font-semibold text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:n?a.jsxs("span",{children:["Don't have an account? ",a.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 underline decoration-2 decoration-transparent group-hover:decoration-indigo-600/30 transition-all",children:"Create one"})]}):a.jsxs("span",{children:["Already have an account? ",a.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 underline decoration-2 decoration-transparent group-hover:decoration-indigo-600/30 transition-all",children:"Sign in"})]})}),n&&a.jsx("button",{type:"button",onClick:()=>k("/forgotPassword"),className:"text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors font-medium",children:"Forgot your password?"})]})]})]})]}),a.jsxs("p",{className:"text-center mt-8 text-xs text-gray-400 dark:text-gray-500 font-medium",children:[" ",new Date().getFullYear()," CSIR Reference Management"]})]})]})},hk=()=>{const n=Xt(),r=ra(),{login:o}=At(),[l,c]=h.useState(null);return h.useEffect(()=>{(async()=>{try{const m=new URLSearchParams(r.search),g=m.get("code"),b=m.get("state");if(!g)throw new Error("Authorization code not found in callback");const x=sessionStorage.getItem("parichay_code_verifier"),y=sessionStorage.getItem("parichay_state");if(!x)throw new Error("Code verifier not found. Session may have expired.");if(b!==y)throw new Error("State mismatch. Possible CSRF attack detected.");const v=await fk({code:g||"",state:b||"",codeVerifier:x,storedState:y||""});if(!v.success)throw new Error(v.message||"Parichay login failed");const S=v.user;o({_id:S._id,fullName:S.fullName||"",email:S.email,labName:S.labName||"",designation:S.designation||"",division:S.division||"",status:S.status,isSubmitted:S.isSubmitted||!1,role:S.role,availableRoles:S.availableRoles||["User"],mobileNo:S.mobileNo||"",avatar:S.avatar||"",initials:(S.fullName||S.email).slice(0,2).toUpperCase()}),sessionStorage.removeItem("parichay_code_verifier"),sessionStorage.removeItem("parichay_state");const R=S.status==="Approved",C=!!(S.labName&&S.designation);!R||!C?n("/profile",{state:{message:"Your profile must be completed and approved by an administrator to access the portal features."}}):n("/")}catch(m){console.error("Parichay callback error:",m),c(m.message||"Failed to complete Parichay login"),setTimeout(()=>{n("/auth",{state:{error:m.message}})},3e3)}})()},[r,n,o]),l?a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-linear-to-br from-gray-50 to-gray-100 gap-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Login Failed"}),a.jsx("p",{className:"text-gray-600 mb-4",children:l}),a.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to login page..."})]})}):a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-linear-to-br from-gray-50 to-gray-100 gap-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx(q5,{className:"animate-spin w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Completing Login"}),a.jsx("p",{className:"text-gray-600",children:"Authenticating with Parichay..."})]})})},Va=h.forwardRef(({className:n,...r},o)=>a.jsx("div",{ref:o,className:Vr("rounded-lg border bg-white text-card-foreground ",n),...r}));Va.displayName="Card";const Ya=h.forwardRef(({className:n,...r},o)=>a.jsx("div",{ref:o,className:Vr("flex flex-col space-y-1.5 p-6",n),...r}));Ya.displayName="CardHeader";const is=h.forwardRef(({className:n,...r},o)=>a.jsx("div",{ref:o,className:Vr("text-2xl font-semibold leading-none tracking-tight",n),...r}));is.displayName="CardTitle";const Wo=h.forwardRef(({className:n,...r},o)=>a.jsx("div",{ref:o,className:Vr("text-sm text-muted-foreground",n),...r}));Wo.displayName="CardDescription";const xn=h.forwardRef(({className:n,...r},o)=>a.jsx("div",{ref:o,className:Vr("p-6 pt-0 ",n),...r}));xn.displayName="CardContent";const gk=h.forwardRef(({className:n,...r},o)=>a.jsx("div",{ref:o,className:Vr("flex items-center p-6 pt-0 ",n),...r}));gk.displayName="CardFooter";const xk="/assets/presidentcsir-C6mM2mzm.png",pk="/assets/vicepresidentcsir-BHXSkv93.png";function bk(){const n=Xt(),r=ra(),{isAuthenticated:o,user:l,hasPermission:c,isPermissionsLoading:f,isLoading:m}=At(),g=!l?.labName||!l?.designation,b=l?.status==="Approved";if(!m&&o&&l&&!f&&r.pathname==="/"){if(!b||g)return a.jsx(la,{to:"/profile",replace:!0,state:{message:"Your profile must be completed and approved by an administrator to access the portal features."}});const v=c(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)||c(Te.FEATURE_MANAGE_USERS_ALL_OFFICES),S=c(Te.FEATURE_VIEW_OWN_OFFICE_SENDER)||c(Te.FEATURE_VIEW_INTER_OFFICE_SENDER)||c(Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE)||c(Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES)||c(Te.FEATURE_MANAGE_GLOBAL_REFERENCES),R=c(Te.FEATURE_FORM_MANAGEMENT);return v?a.jsx(la,{to:"/users",replace:!0}):S?a.jsx(la,{to:"/references/local",replace:!0}):R?a.jsx(la,{to:"/data-collection",replace:!0}):a.jsx(la,{to:"/profile",replace:!0})}if(m||o&&(f||r.pathname==="/"))return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-slate-500 font-medium animate-pulse",children:o?"Redirecting to your dashboard...":"Setting up your workspace..."})]})});const x=[{icon:a.jsx(cs,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-sparkle"}),title:"AI Form Generation",description:"Architect complex data collection forms instantly using natural language AI prompts."},{icon:a.jsx(ds,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-float"}),title:"Smart Tracking",description:"Locate any reference instantly using unique Ref IDs and advanced filtering capabilities."},{icon:a.jsx(lf,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-waggle"}),title:"AI Vision Analysis",description:"Digitalize physical forms instantly by converting photos into interactive data templates."},{icon:a.jsx(bx,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-float"}),title:"Movement History",description:"Complete audit trail tracking the chronological movement and ownership of every reference."},{icon:a.jsx(of,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-pulse-soft"}),title:"Data Collection Hub",description:"A centralized portal for distributing forms and harvesting structured data across CSIR labs."},{icon:a.jsx(Cf,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-pulse-soft"}),title:"Real-time Monitoring",description:"Monitor status updates, remarks, and progress of references as they move through the workflow."},{icon:a.jsx(zr,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-pulse-soft"}),title:"Audit Trails",description:"Detailed records of all system activities, ensuring full accountability and transparency."},{icon:a.jsx(Ur,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-ring-bell"}),title:"Instant Notifications",description:"Instant email alerts and acknowledgments for every reference creation, update, and movement."},{icon:a.jsx(ba,{className:"h-14 w-14 text-blue-700 fill-blue-700/20 stroke-[1.5] animate-pulse-soft"}),title:"Digital Archiving",description:"Securely archive and retrieve historical references with automated retention policies and quick access."}],y=()=>{n("/login")};return a.jsxs("div",{className:"flex flex-col bg-slate-50 min-h-screen relative overflow-hidden text-slate-900 selection:bg-indigo-100 selection:text-indigo-900",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-linear-to-b from-indigo-50/80 to-transparent pointer-events-none blur-3xl opacity-60"}),a.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[600px] h-[600px] rounded-full bg-purple-100/50 blur-[100px] pointer-events-none mix-blend-multiply"}),a.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-blue-100/50 blur-[100px] pointer-events-none mix-blend-multiply"}),a.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 relative z-10",children:[a.jsxs("section",{className:"text-center mb-15 max-w-5xl mx-auto pt-10",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 mb-8 text-sm font-medium tracking-wide text-indigo-700 uppercase bg-white border border-indigo-100 rounded-full shadow-sm animate-in fade-in slide-in-from-bottom-4 duration-700",children:[a.jsx(cs,{className:"w-5 h-5 text-indigo-600 fill-indigo-600/30 animate-sparkle"}),a.jsx("span",{children:"Next-Gen Reference Management"})]}),a.jsxs("h1",{className:"font-heading text-6xl sm:text-7xl lg:text-8xl font-black tracking-tighter mb-8 leading-[1.1] animate-in fade-in duration-1000 fill-mode-both text-slate-900",children:[a.jsx("span",{className:"animate-modern-shine bg-clip-text text-transparent bg-linear-to-br from-slate-900 via-slate-800 to-slate-600 inline-block animate-slide-in-left",children:"Intelligent Data."}),a.jsx("br",{}),a.jsx("span",{className:"animate-modern-shine font-black inline-block animate-in fade-in slide-in-from-bottom-4 duration-1000 delay-300 fill-mode-both",children:"Seamless Workflow."})]}),a.jsx("p",{className:"mt-6 text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed font-light animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200 fill-mode-both",children:"A robust, centralized platform designed for the Council of Scientific and Industrial Research to streamline tracking with efficiency and transparency."}),a.jsx("div",{className:"mt-12 flex items-center justify-center gap-6 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-300 fill-mode-both",children:a.jsxs("button",{onClick:y,className:"group relative flex items-center justify-center px-8 py-4 text-lg font-bold text-white bg-slate-900 rounded-full hover:bg-slate-800 transition-all duration-300 shadow-xl hover:shadow-2xl hover:-translate-y-1",children:["Get Started",a.jsx(bx,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})})]}),a.jsx("div",{className:"w-full h-px bg-linear-to-r from-transparent via-slate-200 to-transparent mb-10"}),a.jsxs("section",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-20",children:[a.jsx("h2",{className:"font-heading text-4xl sm:text-5xl font-bold text-slate-900 mb-6 tracking-tight",children:"Powerful Features."}),a.jsx("p",{className:"text-slate-500 text-lg max-w-2xl mx-auto",children:"Everything you need to manage references, integrated into one cohesive system."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:x.map(v=>a.jsx(Va,{className:"group bg-white border-slate-100 shadow-sm hover:shadow-xl hover:-translate-y-2 transition-all duration-500 h-full",children:a.jsxs(Ya,{className:"p-10 flex flex-col items-center text-center h-full",children:[a.jsx("div",{className:"mb-6 text-blue-700",children:v.icon}),a.jsx(is,{className:"font-heading text-xl font-bold text-slate-900 mb-4",children:v.title}),a.jsx(Wo,{className:"text-slate-600 leading-loose text-base",children:v.description})]})},v.title))})]}),a.jsxs("section",{className:"max-w-7xl mx-auto mb-10 mt-20",children:[a.jsx("div",{className:"text-center mb-12",children:a.jsx("h2",{className:"font-heading text-4xl sm:text-5xl font-bold text-slate-900 mb-6 tracking-tight",children:"CSIR Leadership"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[a.jsxs(Va,{className:"group bg-white/60 backdrop-blur-sm border-slate-100 shadow-sm hover:shadow-md transition-all duration-500 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-indigo-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs(Ya,{className:"p-8 flex flex-row items-center gap-8 relative z-10",children:[a.jsx("div",{className:"relative shrink-0",children:a.jsx("img",{src:xk,alt:"Shri Narendra Modi",className:"relative w-24 h-24 md:w-28 md:h-28 rounded-full object-cover border-4 border-white shadow-md transition-transform duration-500 group-hover:scale-105"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx(is,{className:"font-heading text-2xl md:text-3xl font-black text-slate-900 tracking-tight mb-1",children:"Shri Narendra Modi"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-indigo-600 font-bold text-lg md:text-xl flex items-center gap-2",children:"Hon'ble Prime Minister"}),a.jsx("span",{className:"text-slate-500 font-medium text-sm md:text-base",children:"President, CSIR"})]})]})]})]}),a.jsxs(Va,{className:"group bg-white/60 backdrop-blur-sm border-slate-100 shadow-sm hover:shadow-md transition-all duration-500 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-indigo-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsxs(Ya,{className:"p-8 flex flex-row items-center gap-8 relative z-10",children:[a.jsx("div",{className:"relative shrink-0",children:a.jsx("img",{src:pk,alt:"Dr. Jitendra Singh",className:"relative w-24 h-24 md:w-28 md:h-28 rounded-full object-cover border-4 border-white shadow-md transition-transform duration-500 group-hover:scale-105"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx(is,{className:"font-heading text-2xl md:text-3xl font-black text-slate-900 tracking-tight mb-1",children:"Dr. Jitendra Singh"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-indigo-600 font-bold text-lg md:text-xl flex items-center gap-2",children:"Hon'ble Minister of State"}),a.jsx("span",{className:"text-slate-500 font-medium text-sm md:text-base",children:"Vice President, CSIR"})]})]})]})]})]})]})]}),a.jsx("div",{className:"mt-20 bg-indigo-700 pt-16 pb-8 relative z-10 px-4",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl p-8 md:p-10 shadow-lg flex flex-col items-center justify-center gap-8 mb-12",children:a.jsxs("div",{className:"w-full text-center",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 mb-4 justify-center",children:[a.jsx("div",{className:"p-3 bg-indigo-600 rounded-2xl shadow-md",children:a.jsx(A5,{className:"w-8 h-8 text-white"})}),a.jsx("span",{className:"font-heading font-black text-2xl md:text-3xl text-slate-900 tracking-tight text-center",children:"CSIR Reference Management Portal"})]}),a.jsx("p",{className:"text-slate-600 text-base md:text-lg leading-relaxed max-w-2xl mx-auto",children:"A centralized platform facilitating seamless reference management, enhancing transparency, and streamlining administrative workflows across all CSIR laboratories."}),a.jsxs("div",{className:"mt-8 flex flex-col items-center gap-3",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 text-sm font-bold rounded-full tracking-wide shadow-sm border border-blue-100",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),"Under the Guidance of DG, CSIR"]}),a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 text-sm font-bold rounded-full tracking-wide shadow-sm border border-indigo-100",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"}),"An initiative of Joint Secretary(Admin), CSIR"]})]})]})}),a.jsxs("div",{className:"border-t border-indigo-500/30 pt-8 text-center text-indigo-100/80",children:[a.jsx("p",{className:"font-medium mb-2 text-sm md:text-base",children:"Anusandhan Bhawan, 2 Rafi Marg, New Delhi - 110001"}),a.jsxs("p",{className:"text-xs md:text-sm opacity-80",children:[" ",new Date().getFullYear()," Council of Scientific and Industrial Research. All Rights Reserved."]})]})]})})]})}const yk=()=>{const[n,r]=h.useState(""),[o,l]=h.useState(null),[c,f]=h.useState(!1),[m,g]=h.useState(!1),b=h.useRef(null);h.useEffect(()=>{b.current&&b.current.focus()},[]);const x=async y=>{if(y.preventDefault(),l(null),!n||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){l("Please enter a valid email address.");return}g(!0);try{const v=await rj({email:n});console.log("returened from backend:",v.success),v.success?f(!0):(console.error("Failed:",v.message),l(v.message||"Request failed"))}catch{l("An error occurred. Please try again later.")}finally{g(!1)}};return c?a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"p-8 shadow-lg rounded-lg max-w-md w-full bg-white text-justify",children:[a.jsx("div",{className:" flex justify-center",children:a.jsx(Ur,{})}),a.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800  flex justify-center",children:"Request Submitted"}),a.jsxs("p",{className:"text-gray-600 ",children:['"If an account is associated with ',a.jsxs("span",{className:"font-bold",children:["'",n,"'"]}),' then you will receive instructions to reset your password. Please check your Inbox/Spam folder. If you do not receive an email then ensure that you have entered the correct email address."']})]})}):a.jsxs("div",{className:"p-8 bg-white shadow-lg rounded-lg max-w-md w-full container mx-auto text-center",children:[a.jsx(j5,{className:"mx-auto h-12 w-12 text-primary mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Forgot Password"}),a.jsx("p",{className:"mb-6 text-gray-600",children:"Enter your registered email address to receive a password reset link."}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block font-bold text-sm  text-gray-700 mb-1 text-left",children:"Email Address :"}),a.jsx("input",{type:"email",id:"email",ref:b,value:n,onChange:y=>r(y.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out","aria-describedby":o?"error-message":void 0})]}),o&&a.jsx("p",{id:"error-message",className:"text-sm text-red-600 mt-1",children:o}),a.jsxs("button",{type:"submit",disabled:m,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-700 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150 ease-in-out",children:[m?a.jsx(Bt,{className:"mr-2 h-4 w-4 animate-spin"}):a.jsx(Ur,{className:"mr-2 h-4 w-4"}),m?"Sending...":"Send Reset Link"]})]})]})},vk=()=>{const{showMessage:n}=Hs(),[r]=vf(),o=Xt(),[l,c]=h.useState(null),[f,m]=h.useState(""),[g,b]=h.useState(""),[x,y]=h.useState(null),[v,S]=h.useState(!1),R=r.get("token"),C=r.get("userId");h.useEffect(()=>{(async()=>{try{if(R&&C){const T=await ij({userId:C,token:R});console.log("returned from backend:",T),T.success?(c(!0),window.history.replaceState({},document.title,window.location.pathname)):c(!1)}}catch{c(!1)}})()},[R,C]);const D=async k=>{if(k.preventDefault(),y(null),f!==g){y("New password and confirm password do not match.");return}try{const T=await cj({userId:C,token:R,newPassword:f});T.success?(n({title:"Success",message:"Password reset successful! Redirecting to login...",type:"success"}),o("/login")):y(T.message||"Password reset failed.")}catch{y("An error occurred while resetting password.")}};return l===null?a.jsx("div",{children:"Verifying reset link failed as token is null..."}):l?a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl border border-gray-100",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Reset Password"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Enter your new password to secure your account"})]}),a.jsxs("form",{onSubmit:D,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-muted",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"newPassword",type:"password",required:!0,value:f,onChange:k=>m(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out",placeholder:"Enter your new password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>{S(!v)},children:a.jsxs("svg",{className:"h-5 w-5 text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-muted",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:"password",required:!0,value:g,onChange:k=>b(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out",placeholder:"Confirm your new password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>{S(!v)},children:a.jsxs("svg",{className:"h-5 w-5 text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),x&&a.jsxs("p",{className:"text-sm bg-red-50 border border-red-200 text-red-700 p-4 rounded-xl flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),x]}),a.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-700 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150 ease-in-out",children:["Reset Password",a.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})]})]})}):a.jsx("div",{children:"Invalid or expired reset link."})},wk=({isOpen:n,onClose:r})=>{const[o,l]=h.useState(""),[c,f]=h.useState(""),[m,g]=h.useState(""),[b,x]=h.useState(!1),[y,v]=h.useState(null);if(!n)return null;const S=async R=>{if(R.preventDefault(),v(null),c!==m){v({type:"error",text:"New passwords do not match"});return}if(c.length<6){v({type:"error",text:"Password must be at least 6 characters"});return}x(!0);try{const C=await oj({oldPassword:o,newPassword:c});C.success?(v({type:"success",text:"Password changed successfully"}),l(""),f(""),g(""),setTimeout(()=>{r(),v(null)},2e3)):v({type:"error",text:C.message||"Failed to change password"})}catch{v({type:"error",text:"An unexpected error occurred"})}finally{x(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md mx-4 overflow-hidden animate-scale-in",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Change Password"}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-full transition-colors text-gray-500 hover:text-gray-700",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6",children:[y&&a.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm font-medium ${y.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:y.text}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsx(Vt,{id:"oldPassword",label:"Current Password",type:"password",value:o,onChange:R=>l(R.target.value),icon:a.jsx(Yi,{className:"w-4 h-4 text-gray-400"}),placeholder:"Enter current password",required:!0}),a.jsx(Vt,{id:"newPassword",label:"New Password",type:"password",value:c,onChange:R=>f(R.target.value),icon:a.jsx(Yi,{className:"w-4 h-4 text-gray-400"}),placeholder:"Enter new password",required:!0}),a.jsx(Vt,{id:"confirmPassword",label:"Confirm New Password",type:"password",value:m,onChange:R=>g(R.target.value),icon:a.jsx(Yi,{className:"w-4 h-4 text-gray-400"}),placeholder:"Confirm new password",required:!0}),a.jsxs("div",{className:"pt-2 flex gap-3 justify-end",children:[a.jsx(Le,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),a.jsx(Le,{variant:"primary",type:"submit",disabled:b,loading:b,icon:b&&a.jsx(Bt,{className:"w-4 h-4"}),children:b?"Updating...":"Update Password"})]})]})]})]})})},_x=()=>{const{user:n,login:r}=At(),o=ra(),{userId:l}=gp(),[c,f]=h.useState(null),[m,g]=h.useState(!1),[b,x]=h.useState(!1),[y,v]=h.useState(!1),[S,R]=h.useState(null),[C,D]=h.useState(null),[k,T]=h.useState(o.state?.message||null),[O,W]=h.useState(""),[U,ee]=h.useState(""),[K,$]=h.useState(""),[N,E]=h.useState(""),[G,V]=h.useState(""),[le,oe]=h.useState([]),[ve,Re]=h.useState([]),[H,I]=h.useState([]),X=!l||l===n?._id;h.useEffect(()=>{(async()=>{if(l&&l!==n?._id){v(!0);try{const B=await sb(l);B.success?f({...B.data,initials:B.data.fullName.slice(0,2).toUpperCase()||B.data.email.slice(0,2).toUpperCase()}):R(B.message)}catch{R("Failed to fetch user profile")}finally{v(!1)}}else f(n)})()},[l,n]),h.useEffect(()=>{c&&(W(c.fullName||""),ee(c.labName||""),$(c.designation||""),E(c.division||""),V(c.mobileNo||""))},[c]);const z=h.useMemo(()=>le.map(L=>({label:L,value:L})),[le]),M=h.useMemo(()=>ve.map(L=>({label:L,value:L})),[ve]),w=h.useMemo(()=>H.map(L=>({label:L,value:L})),[H]);if(h.useEffect(()=>{(async()=>{const B=await Ef();B.success&&oe(B.data.labs);const Q=await Af();Q.success&&Re(Q.data.designations);const ue=await eb();ue.success&&I(ue.data.divisions)})()},[]),!c)return a.jsx("div",{className:"flex justify-center items-center h-full",children:"Loading profile..."});const A=async(L=!1)=>{v(!0),R(null),D(null);try{if(!O||O.trim()===""){R("Full Name is required"),v(!1);return}if(!U){R("Lab Name is required"),v(!1);return}if(!K){R("Designation is required"),v(!1);return}if(!N){R("Division / Section is required"),v(!1);return}if(!G||!/^\d+$/.test(G)||G.length!==10){R("Mobile number must be exactly 10 digits and numeric only"),v(!1);return}const B={fullName:O,labName:U,designation:K,division:N,mobileNo:G};L&&(B.isSubmitted=!0);const Q=await tb(B);if(Q.success){D(Q.message),R(null);const ue={...n,...Q.data,initials:O.slice(0,2).toUpperCase()||(n?.email||"").slice(0,2).toUpperCase()};r(ue),x(!1),c.status==="Approved"&&Q.data.status==="Pending"&&(D("Changes saved. Your profile is now pending approval by an administrator."),window.scrollTo(0,0))}else R(Q.message)}catch(B){R(B.message||"Failed to update profile")}finally{v(!1)}},_=async L=>{const B=L.target.files?.[0];if(!B)return;if(B.size>20*1024){R("Image size must be less than 20KB");return}const Q=new FormData;Q.append("avatar",B),v(!0),R(null);try{const ue=await uj(Q);ue.success?(D("Avatar updated successfully"),n&&r({...n,avatar:ue.data.avatar})):R(ue.message)}catch(ue){R(ue.message||"Failed to upload avatar")}finally{v(!1)}},F=c.labName&&c.designation&&c.division&&c.fullName&&c.fullName.trim()!==""&&c.mobileNo,de=c.status!=="Approved"&&F&&!c.isSubmitted,xe=c.status!=="Approved"&&c.isSubmitted;return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden animate-fade-in border border-gray-100",children:[a.jsx("div",{className:"h-48 bg-linear-to-r from-indigo-600 to-indigo-700 relative",children:a.jsx("div",{className:"absolute -bottom-16 left-8",children:a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"w-32 h-32 rounded-full border-4 border-white bg-white shadow-lg flex items-center justify-center text-4xl font-bold text-indigo-600 select-none overflow-hidden group",children:[c.avatar?a.jsx("img",{src:c.avatar,alt:c.fullName,className:"w-full h-full object-cover"}):c.initials,y&&a.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})})]}),X&&a.jsxs("label",{className:"absolute bottom-0 right-0 p-2 bg-white rounded-full hover:bg-gray-50 transition-colors shadow-md border border-gray-200 group cursor-pointer",children:[a.jsx(Pj,{className:"w-5 h-5 text-gray-600 group-hover:text-indigo-600"}),a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_,disabled:y})]})]})})}),a.jsxs("div",{className:"pt-20 px-8 pb-8",children:[c.status!=="Approved"&&!c.isSubmitted&&a.jsx("div",{className:`mb-8 p-4 rounded-xl border animate-in fade-in slide-in-from-top-4 duration-500 ${c.status==="Rejected"?"bg-red-50 border-red-200 text-red-800":!c.labName||!c.designation||!c.division||!c.fullName||!c.mobileNo?"bg-indigo-50 border-indigo-200 text-indigo-800":"bg-amber-50 border-amber-200 text-amber-800"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`mt-1 p-1 rounded-full ${c.status==="Rejected"?"bg-red-100":!c.labName||!c.designation||!c.division||!c.fullName||!c.mobileNo?"bg-indigo-100":"bg-amber-100"}`,children:a.jsx(Ha,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-sm",children:c.status==="Rejected"?"Account Rejected":!c.labName||!c.designation||!c.division||!c.fullName||!c.mobileNo?"Complete Your Profile":"Profile Complete - Ready for Submission"}),a.jsx("p",{className:"text-sm opacity-90 mt-0.5",children:c.status==="Rejected"?"Your account was rejected. Please update your information and submit again for review.":!c.labName||!c.designation||!c.division||!c.fullName||!c.mobileNo?a.jsxs(a.Fragment,{children:["Please provide all details (Name, Lab, Designation, Division, Mobile) to enable account submission.",a.jsx("br",{}),a.jsx("strong",{children:"Click Edit Profile button to fill/update the details."})]}):"Your profile is ready! Click the 'Submit for Approval' button to notify the administrator."}),de&&a.jsx("div",{className:"mt-4",children:a.jsx(Le,{variant:"primary",size:"sm",onClick:()=>A(!0),loading:y,disabled:y,children:"Submit for Approval"})})]})]})}),xe&&a.jsx("div",{className:"mb-8 p-4 bg-green-50 border border-green-200 text-green-800 rounded-xl animate-in fade-in slide-in-from-top-4 duration-500",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1 p-1 rounded-full bg-green-100",children:a.jsx(Ha,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-sm",children:"Application Submitted Successfully"}),a.jsx("p",{className:"text-sm opacity-90 mt-0.5",children:"Your profile is now complete and has been sent to the administrator for review. You will receive email notification once approved. Logout and Login again to access the portal after the approval."})]})]})}),a.jsxs("div",{className:"flex justify-between items-start mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:c.fullName||"Guest"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.availableRoles&&c.availableRoles.length>0?c.availableRoles.map(L=>a.jsxs("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium border flex items-center gap-1 ${L===c.role?"bg-indigo-50 text-indigo-700 border-indigo-200 ring-1 ring-indigo-500/20":"bg-gray-50 text-gray-600 border-gray-200"}`,children:[a.jsx(Ha,{className:"w-3 h-3"}),L,L===c.role&&a.jsx("span",{className:"ml-1 text-[10px] uppercase font-bold tracking-wider",children:"(Active)"})]},L)):a.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-50 text-gray-600 border border-gray-200 flex items-center gap-1",children:[a.jsx(Ha,{className:"w-3 h-3"}),c.role||"User"]})})]}),a.jsxs("div",{className:"flex gap-3",children:[X&&c.status!=="Approved"&&a.jsx(Le,{variant:"secondary",onClick:()=>{localStorage.removeItem("user"),window.location.href="/login"},children:"Log Out"}),X&&(b?a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{variant:"secondary",onClick:()=>x(!1),icon:a.jsx(qt,{className:"w-4 h-4"}),children:"Cancel"}),a.jsx(Le,{variant:"primary",onClick:()=>A(!1),disabled:y,loading:y,icon:!y&&a.jsx(os,{className:"w-4 h-4"}),children:"Save Changes"})]}):a.jsx(Le,{variant:"primary",onClick:()=>x(!0),children:"Edit Profile"}))]})]}),k&&a.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 border border-indigo-100 text-indigo-700 rounded-xl text-sm font-medium animate-in fade-in slide-in-from-top-2 flex justify-between items-center tracking-wide",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"w-4 h-4 text-indigo-500"}),k]}),a.jsx("button",{onClick:()=>T(null),className:"text-indigo-400 hover:text-indigo-600 transition-colors",children:a.jsx(qt,{className:"w-4 h-4"})})]}),S&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-100 text-red-600 rounded-xl text-sm font-medium animate-shake",children:S}),C&&!S&&a.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-100 text-green-600 rounded-xl text-sm font-medium animate-in fade-in slide-in-from-top-2",children:C}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 border-b border-gray-100 pb-3",children:[a.jsx(cb,{className:"w-5 h-5 text-indigo-500"}),"Personal Information"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-semibold text-gray-500 block mb-1.5 ml-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),b?a.jsx("input",{type:"text",value:O,onChange:L=>W(L.target.value),className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all",placeholder:"Enter your full name"}):a.jsx("div",{className:"px-4 py-2.5 bg-white border border-gray-100 rounded-xl font-medium text-gray-900",children:c.fullName||"Not provided"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-semibold text-gray-500 block mb-1.5 ml-1",children:["Lab Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),b?a.jsx(Aa,{options:z,placeholder:"Select your lab",selectedValue:U,onChange:L=>ee(L)}):a.jsxs("div",{className:"px-4 py-2.5 bg-white border border-gray-100 rounded-xl font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(ls,{className:"w-4 h-4 text-gray-400"}),c.labName||"Not selected"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-semibold text-gray-500 block mb-1.5 ml-1",children:["Designation ",a.jsx("span",{className:"text-red-500",children:"*"})]}),b?a.jsx(Aa,{options:M,placeholder:"Select your designation",selectedValue:K,onChange:L=>$(L)}):a.jsxs("div",{className:"px-4 py-2.5 bg-white border border-gray-100 rounded-xl font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(lb,{className:"w-4 h-4 text-gray-400"}),c.designation||"Not provided"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-semibold text-gray-500 block mb-1.5 ml-1",children:["Division / Section ",a.jsx("span",{className:"text-red-500",children:"*"})]}),b?a.jsx(Aa,{options:w,placeholder:"Select your division / section",selectedValue:N,onChange:L=>E(L)}):a.jsxs("div",{className:"px-4 py-2.5 bg-white border border-gray-100 rounded-xl font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(ls,{className:"w-4 h-4 text-gray-400"}),c.division||"Not provided"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-sm font-semibold text-gray-500 block mb-1.5 ml-1",children:["Mobile No ",a.jsx("span",{className:"text-red-500",children:"*"})]}),b?a.jsx("input",{type:"text",value:G,onChange:L=>{const B=L.target.value.replace(/\D/g,"");B.length<=10&&V(B)},className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all",placeholder:"Enter 10-digit mobile number",maxLength:10,inputMode:"numeric",pattern:"[0-9]*"}):a.jsx("div",{className:"px-4 py-2.5 bg-white border border-gray-100 rounded-xl font-medium text-gray-900 flex items-center gap-2",children:c.mobileNo||"Not provided"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-gray-500 block mb-1.5 ml-1",children:"Email Address"}),a.jsxs("div",{className:"px-4 py-2.5 bg-gray-50 border border-transparent rounded-xl font-medium text-gray-500 flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4"}),c.email]}),a.jsx("p",{className:"text-[10px] text-gray-400 mt-1 ml-1",children:"Email cannot be changed"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 border-b border-gray-100 pb-3",children:[a.jsx(Ha,{className:"w-5 h-5 text-green-500"}),"Account Security"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:`p-4 ${c.status==="Approved"?"bg-green-50/50 border-green-100":c.status==="Pending"?"bg-amber-50/50 border-amber-100":"bg-red-50/50 border-red-100"} border rounded-xl group hover:bg-opacity-75 transition-colors`,children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${c.status==="Approved"?"bg-green-500 animate-pulse":c.status==="Pending"?"bg-amber-500 animate-pulse shadow-[0_0_8px_rgba(245,158,11,0.6)]":"bg-red-500"}`}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Account status: ",c.status]})]})})}),X&&a.jsxs("div",{className:"p-6 bg-gray-50 rounded-xl border border-gray-100",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"Password Management"}),a.jsx("p",{className:"text-xs text-gray-500 mb-4 leading-relaxed",children:"Regularly changing your password helps keep your account secure from unauthorized access."}),a.jsx(Le,{variant:"secondary",onClick:()=>g(!0),fullWidth:!0,size:"md",children:"Update Password"})]})]})]})]})]})]}),a.jsx(wk,{isOpen:m,onClose:()=>g(!1)})]})};var Db={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Rx=Hn.createContext&&Hn.createContext(Db),Nk=["attr","size","title"];function jk(n,r){if(n==null)return{};var o=Sk(n,r),l,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(n);for(c=0;c<f.length;c++)l=f[c],!(r.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(n,l)&&(o[l]=n[l])}return o}function Sk(n,r){if(n==null)return{};var o={};for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)){if(r.indexOf(l)>=0)continue;o[l]=n[l]}return o}function Fo(){return Fo=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(n[l]=o[l])}return n},Fo.apply(this,arguments)}function Tx(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);r&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),o.push.apply(o,l)}return o}function Bo(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Tx(Object(o),!0).forEach(function(l){kk(n,l,o[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Tx(Object(o)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(o,l))})}return n}function kk(n,r,o){return r=Ek(r),r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n}function Ek(n){var r=Ak(n,"string");return typeof r=="symbol"?r:r+""}function Ak(n,r){if(typeof n!="object"||!n)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var l=o.call(n,r);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Lb(n){return n&&n.map((r,o)=>Hn.createElement(r.tag,Bo({key:o},r.attr),Lb(r.child)))}function Wa(n){return r=>Hn.createElement(Ck,Fo({attr:Bo({},n.attr)},r),Lb(n.child))}function Ck(n){var r=o=>{var{attr:l,size:c,title:f}=n,m=jk(n,Nk),g=c||o.size||"1em",b;return o.className&&(b=o.className),n.className&&(b=(b?b+" ":"")+n.className),Hn.createElement("svg",Fo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,l,m,{className:b,style:Bo(Bo({color:n.color||o.color},o.style),n.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),f&&Hn.createElement("title",null,f),n.children)};return Rx!==void 0?Hn.createElement(Rx.Consumer,null,o=>r(o)):r(Db)}function _k(n){return Wa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"},child:[]}]})(n)}function Rk(n){return Wa({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(n)}function Tk(n){return Wa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function Mk(n){return Wa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(n)}function Ok(n){return Wa({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(n)}function Dk(n){return Wa({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(n)}function Lk(n){return Wa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(n)}function Uk(n){return Wa({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(n)}function zk(n){return Wa({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function Fk(n){return Wa({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function Bk(n){return Wa({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const qk=({isOpen:n,onClose:r,onSuccess:o})=>{const{hasPermission:l}=At(),c=l(Te.FEATURE_SYSTEM_CONFIGURATION),[f,m]=h.useState({fullName:"",email:"",password:"",labName:"",designation:"",mobileNo:"",role:"Delegated Admin"}),[g,b]=h.useState(!1),[x,y]=h.useState(null),[v,S]=h.useState(!1),[R,C]=h.useState([]),[D,k]=h.useState([]);if(h.useEffect(()=>{n&&(async()=>{const W=await Ef();W.success&&C(W.data.labs);const U=await Af();U.success&&k(U.data.designations)})()},[n]),!n)return null;const T=async O=>{O.preventDefault(),b(!0),y(null);try{const W=await fj(f);W.success?(o(),r(),m({fullName:"",email:"",password:"",labName:"",designation:"",mobileNo:"",role:"Delegated Admin"})):y(W.message)}catch(W){y(W?.message||"Failed to create Inter Lab sender")}finally{b(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 font-heading",children:[a.jsx(Fk,{className:"text-indigo-600"}),c?"Add Inter Lab sender":"Add Delegated Admin"]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:a.jsx(zk,{})})]}),a.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[x&&a.jsx("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 font-medium",children:x}),a.jsxs("div",{className:"space-y-4",children:[c&&a.jsxs("div",{className:"relative group",children:[a.jsx(Uk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors z-10"}),a.jsxs("select",{required:!0,className:"w-full pl-10 pr-4 py-2.5 bg-indigo-50/50 border border-indigo-100 rounded-xl focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading text-sm appearance-none font-bold text-indigo-900",value:f.role,onChange:O=>m({...f,role:O.target.value}),children:[a.jsx("option",{value:"Inter Lab sender",children:"Inter Lab sender (Full Rights)"}),a.jsx("option",{value:"Delegated Admin",children:"Delegated Admin (Lab Restricted)"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-indigo-500 text-xs",children:""})]}),a.jsxs("div",{className:"relative group",children:[a.jsx(Bk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors z-10"}),a.jsx("input",{type:"text",placeholder:"Full Name",required:!0,className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading text-sm",value:f.fullName,onChange:O=>m({...f,fullName:O.target.value})})]}),a.jsxs("div",{className:"relative group",children:[a.jsx(Tk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors z-10"}),a.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading text-sm",value:f.email,onChange:O=>m({...f,email:O.target.value})})]}),a.jsxs("div",{className:"relative group",children:[a.jsx(Dk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors z-10"}),a.jsx("input",{type:v?"text":"password",placeholder:"Password",required:!0,className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading text-sm",value:f.password,onChange:O=>m({...f,password:O.target.value})}),a.jsx("button",{type:"button",onClick:()=>S(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none p-1",children:v?a.jsx(Mk,{className:"w-4 h-4"}):a.jsx(Ok,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-2",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wider",children:"Additional Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(Rk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors z-10"}),a.jsxs("select",{required:!0,className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading text-sm appearance-none",value:f.labName,onChange:O=>m({...f,labName:O.target.value}),children:[a.jsx("option",{value:"",disabled:!0,children:"Select Lab / Institution"}),R.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500 text-xs",children:""})]}),a.jsxs("div",{className:"relative group",children:[a.jsx(_k,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors z-10"}),a.jsxs("select",{required:!0,className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading text-sm appearance-none",value:f.designation,onChange:O=>m({...f,designation:O.target.value}),children:[a.jsx("option",{value:"",disabled:!0,children:"Select Designation"}),D.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500 text-xs",children:""})]}),a.jsxs("div",{className:"relative group",children:[a.jsx(Lk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors z-10"}),a.jsx("input",{type:"text",placeholder:"Mobile Number",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading text-sm",value:f.mobileNo,onChange:O=>m({...f,mobileNo:O.target.value})})]})]})]})]}),a.jsxs("div",{className:"pt-4 flex gap-3",children:[a.jsx(Le,{type:"button",variant:"secondary",label:"Cancel",onClick:r,className:"flex-1 py-2.5 font-bold"}),a.jsx(Le,{type:"submit",variant:"primary",label:c?"Create Inter Lab sender":"Create Delegated Admin",loading:g,disabled:g,className:"flex-1 py-2.5 font-bold shadow-lg shadow-indigo-500/20"})]})]})]})})},Hk=({isOpen:n,onClose:r,selectedUsers:o,onUserUpdate:l})=>{const{permissions:c}=At(),[f,m]=h.useState(0),[g,b]=h.useState(!1),[x,y]=h.useState(null),[v,S]=h.useState([]),[R,C]=h.useState(""),[D,k]=h.useState(!1),T=o[f];if(h.useEffect(()=>{T&&(S(T.availableRoles||[]),C(T.status),k(T.isActivated||!1),y(null))},[f,T]),!n||!T)return null;const O=()=>{f<o.length-1&&m(f+1)},W=()=>{f>0&&m(f-1)},U=$=>{S(N=>{const E=!N.includes($);let G=N;return E?($==="Inter Lab sender"&&(G=G.filter(V=>V!=="User")),$==="User"&&(G=G.filter(V=>V!=="Inter Lab sender")),[...G,$]):N.filter(V=>V!==$)})},ee=async()=>{b(!0),y(null);try{const $=await pj(T._id,v);R!==T.status&&await ab(T._id,R),D&&!T.isActivated&&await nb(T._id),$.success?(y({type:"success",text:"User details updated successfully"}),l({...T,availableRoles:v,status:R,isActivated:D})):y({type:"error",text:$.message||"Failed to update roles"})}catch($){y({type:"error",text:$.message||"An error occurred during update"})}finally{b(!1)}},K=Array.from(new Set(c.flatMap($=>$.roles))).filter($=>$!==ta).sort();return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-md animate-fade-in",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden animate-scale-in border border-white/20",children:[a.jsxs("div",{className:"px-8 py-5 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[a.jsx(Pn,{className:"w-6 h-6 text-indigo-600"}),"Manage Selected Users"]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Processing user ",a.jsx("span",{className:"font-bold text-indigo-600 font-heading",children:f+1})," of ",a.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300 font-heading",children:o.length})]})]}),a.jsx("button",{onClick:r,className:"p-2.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-all text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:rotate-90",children:a.jsx(qt,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-500 ease-out shadow-[0_0_10px_rgba(79,70,229,0.5)]",style:{width:`${(f+1)/o.length*100}%`}})}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"bg-indigo-50/50 dark:bg-indigo-900/20 rounded-2xl p-6 border border-indigo-100/50 dark:border-indigo-800/30 mb-8 flex items-center gap-6",children:[a.jsxs("div",{className:"w-20 h-20 bg-indigo-600 rounded-2xl flex items-center justify-center text-white text-3xl font-bold shadow-lg shadow-indigo-200 dark:shadow-none font-heading relative overflow-hidden group",children:[T.avatar?a.jsx("img",{src:T.avatar,alt:T.fullName,className:"w-full h-full object-cover"}):T.initials||T.fullName?.charAt(0)||T.email?.charAt(0).toUpperCase(),a.jsx("div",{className:"absolute inset-0 bg-linear-to-tr from-indigo-600/20 to-transparent"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-2xl font-bold text-gray-900 dark:text-white truncate",children:T.fullName||T.email?.split("@")[0]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium truncate",children:T.email}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border shadow-xs ${T.status==="Approved"?"bg-emerald-50 text-emerald-600 border-emerald-100":T.status==="Rejected"?"bg-rose-50 text-rose-600 border-rose-100":"bg-amber-50 text-amber-600 border-amber-100"}`,children:T.status}),T.isActivated&&a.jsx("span",{className:"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider bg-blue-50 text-blue-600 border border-blue-100 shadow-xs",children:"Activated"})]})]})]}),x&&a.jsxs("div",{className:`mb-6 p-4 rounded-xl text-sm font-medium flex items-center gap-3 animate-in fade-in slide-in-from-top-2 ${x.type==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800/40":"bg-rose-50 text-rose-700 border border-rose-200 dark:bg-rose-900/30 dark:text-rose-400 dark:border-rose-800/40"}`,children:[x.type==="success"?a.jsx(na,{className:"w-5 h-5 shrink-0"}):a.jsx(zr,{className:"w-5 h-5 shrink-0"}),x.text]}),a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-3",children:"Status Management"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>C("Approved"),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all group ${R==="Approved"?"bg-emerald-50 border-emerald-500 text-emerald-700 scale-[1.02] shadow-sm":"bg-white border-gray-100 text-gray-400 hover:border-emerald-200 hover:text-emerald-500"}`,children:[a.jsx(O4,{className:`w-6 h-6 ${R==="Approved"?"animate-bounce":"group-hoverScale"}`}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Approve"})]}),a.jsxs("button",{onClick:()=>C("Rejected"),className:`flex-1 flex flex-col items-center gap-2 p-4 rounded-2xl border-2 transition-all group ${R==="Rejected"?"bg-rose-50 border-rose-500 text-rose-700 scale-[1.02] shadow-sm":"bg-white border-gray-100 text-gray-400 hover:border-rose-200 hover:text-rose-500"}`,children:[a.jsx(U4,{className:`w-6 h-6 ${R==="Rejected"?"animate-pulse":"group-hoverScale"}`}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Reject"})]})]})]}),!T.isActivated&&a.jsx("div",{className:"p-5 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-100 dark:border-blue-800/30",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(mb,{className:"w-5 h-5 text-blue-600 mt-1 shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"text-sm font-bold text-blue-900 dark:text-blue-300",children:"Waitlist Activation"}),a.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400/80 mt-1 leading-relaxed",children:"This user has not activated their account. Do you want to manually activate them?"}),a.jsx("button",{onClick:()=>k(!D),className:`mt-3 w-full py-2 rounded-xl text-xs font-bold uppercase tracking-widest transition-all ${D?"bg-blue-600 text-white shadow-md":"bg-white text-blue-600 border border-blue-200 hover:bg-blue-50"}`,children:D?"Will Be Activated":"Activate Manually"})]})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-black text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-3",children:"Privilege Assignment"}),a.jsx("div",{className:"space-y-2",children:K.map($=>a.jsxs("div",{onClick:()=>U($),className:`group flex items-center justify-between p-4 rounded-2xl border-2 cursor-pointer transition-all ${v.includes($)?"bg-indigo-50 border-indigo-500 dark:bg-indigo-900/30":"bg-white border-gray-100 dark:bg-gray-800 dark:border-gray-700 hover:border-indigo-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all ${v.includes($)?"bg-indigo-600 border-indigo-600":"bg-white border-gray-300 dark:bg-gray-700 dark:border-gray-500 group-hover:border-indigo-400"}`,children:v.includes($)&&a.jsx(na,{className:"w-4 h-4 text-white"})}),a.jsx("span",{className:`text-sm font-bold ${v.includes($)?"text-indigo-900 dark:text-indigo-200":"text-gray-600 dark:text-gray-400"}`,children:$})]}),$==="Inter Lab sender"&&a.jsx(zr,{className:"w-4 h-4 text-amber-500"}),$==="Delegated Admin"&&a.jsx(Pn,{className:"w-4 h-4 text-purple-500"})]},$))}),a.jsxs("p",{className:"text-[10px] text-gray-500 mt-4 leading-relaxed italic px-2",children:[a.jsx("span",{className:"font-bold",children:"Note:"})," 'User' and 'Inter Lab sender' roles are mutually exclusive. Selecting one will deselect the other."]})]})]})]}),a.jsxs("div",{className:"px-8 py-6 border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50 flex justify-between items-center shrink-0",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Le,{variant:"secondary",onClick:W,disabled:f===0||g,icon:a.jsx(Qi,{className:"w-4 h-4"}),className:"bg-white dark:bg-gray-700",children:"Previous"}),a.jsx(Le,{variant:"secondary",onClick:O,disabled:f===o.length-1||g,icon:a.jsx(Wi,{className:"w-4 h-4"}),iconPosition:"right",className:"bg-white dark:bg-gray-700",children:"Next"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Le,{variant:"primary",onClick:ee,disabled:g,icon:g?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):a.jsx(os,{className:"w-4 h-4"}),children:g?"Processing...":"Save & Continue"}),f===o.length-1&&a.jsx(Le,{variant:"primary",onClick:r,className:"bg-black! bg-none text-white hover:bg-gray-800! border-none px-6 shadow-none",children:"Finish"})]})]})]})})},$k=()=>{const{user:n,hasPermission:r}=At(),{showMessage:o,showConfirm:l}=Hs(),[c,f]=h.useState([]),[m,g]=h.useState(!0),[b,x]=h.useState(null),[y,v]=h.useState(!1),[S,R]=h.useState(new Set),[C,D]=h.useState(null),[k,T]=h.useState(!1),[O,W]=h.useState(!1),[U,ee]=h.useState([]),[K,$]=h.useState(null),[N,E]=h.useState([]),[G,V]=h.useState([]),[le,oe]=h.useState([]),[ve,Re]=h.useState([]),H=["selection","user","fullName","labName","division","designation","availableRoles","status","actions"];h.useEffect(()=>{ve.length===0&&Re(H)},[]);const I=ae=>{f(c.map(ne=>ne._id===ae._id?ae:ne))},[X,z]=h.useState(1),[M,w]=h.useState(20),[A,_]=h.useState(1),[F,de]=h.useState(""),[xe,L]=h.useState(0);h.useEffect(()=>{const ae=setTimeout(()=>{B(X,F,M)},500);return()=>clearTimeout(ae)},[X,F,M]),h.useEffect(()=>{n?.labName&&r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)&&!r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES)&&V([n.labName])},[n?.labName,r]);const B=async(ae=1,ne="",ke=M)=>{g(!0);try{const Ee=await Pr(ae,ke,ne);Ee.success&&Ee.data?(f(Ee.data.users||[]),_(Ee.data.pagination?.totalPages||1),L(Ee.data.pagination?.total||0),x(null)):x(Ee.message)}catch(Ee){x("Failed to fetch users"),console.error(Ee)}finally{g(!1)}},Q=async(ae,ne)=>{D(ae);try{const ke=await ab(ae,ne);ke.success?f(c.map(Ee=>Ee._id===ae?{...Ee,status:ne}:Ee)):o({title:"Error",message:ke.message||"Failed to update status",type:"error"})}finally{D(null)}},ue=ae=>n?.role===ta?ae._id!==n._id:!(n?.role==="Delegated Admin"&&(ae._id===n._id||ae.role===ta)||n?.role==="Inter Lab sender"&&(ae._id===n._id||ae.role===ta)),we=ae=>{if(ae.target.checked){const ne=c.filter(ke=>ue(ke));R(new Set(ne.map(ke=>ke._id)))}else R(new Set)},Oe=ae=>{const ne=c.find(Ee=>Ee._id===ae);if(ne&&!ue(ne))return;const ke=new Set(S);ke.has(ae)?ke.delete(ae):ke.add(ae),R(ke)},he=async ae=>{if(S.size!==0){if(ae==="Activate"){if(!await l({title:"Confirm Bulk Activation",message:`Are you sure you want to activate ${S.size} users?`,type:"warning",confirmText:"Activate",cancelText:"Cancel"}))return}else if(!await l({title:"Confirm Status Change",message:`Are you sure you want to mark ${S.size} users as ${ae}?`,type:"warning",confirmText:"Confirm",cancelText:"Cancel"}))return;T(!0);try{let ne;ae==="Activate"?ne=await gj(Array.from(S)):ne=await mj(Array.from(S),ae),ne.success?(f(ae==="Activate"?c.map(ke=>S.has(ke._id)?{...ke,isActivated:!0,activationToken:void 0}:ke):c.map(ke=>S.has(ke._id)?{...ke,status:ae}:ke)),R(new Set)):o({title:"Error",message:ne.message||"Bulk action failed",type:"error"})}finally{T(!1)}}},Me=async()=>{if(!(S.size===0||!await l({title:"Confirm Bulk Delete",message:`Are you sure you want to delete ${S.size} users? This action cannot be undone.`,type:"error",confirmText:"Delete Users",cancelText:"Cancel"}))){T(!0);try{const ne=await hj(Array.from(S));ne.success?(f(c.filter(ke=>!S.has(ke._id))),R(new Set)):o({title:"Error",message:ne.message||"Delete failed",type:"error"})}finally{T(!1)}}},Ue=async ae=>{if(await l({title:"Confirm Manual Activation",message:"Are you sure you want to manually activate this user? They will be able to login but will still need approval.",type:"warning",confirmText:"Activate",cancelText:"Cancel"})){D(ae);try{const ke=await nb(ae);ke.success?(f(c.map(Ee=>Ee._id===ae?{...Ee,isActivated:!0,status:ke.data?.status||"Pending"}:Ee)),o({title:"Success",message:"User activated successfully. Account is now Pending approval.",type:"success"})):o({title:"Error",message:ke.message||"Activation failed",type:"error"})}finally{D(null)}}},De=(ae,ne)=>{$({key:ae,direction:ne})},P=()=>{de(""),E([]),r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)&&!r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES)&&n?.labName?V([n.labName]):V([]),oe([]),$(null),z(1)},je=h.useMemo(()=>{let ae=[...c];return N.length>0&&(ae=ae.filter(ne=>N.includes(ne.status))),G.length>0&&(ae=ae.filter(ne=>ne.labName&&G.includes(ne.labName))),le.length>0&&(ae=ae.filter(ne=>ne.availableRoles&&ne.availableRoles.some(ke=>le.includes(ke)))),K&&ae.sort((ne,ke)=>{const Ee=ne[K.key]||"",Z=ke[K.key]||"";return Ee<Z?K.direction==="asc"?-1:1:Ee>Z?K.direction==="asc"?1:-1:0}),ae},[c,N,G,le,K]);if(!r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)&&!r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES))return a.jsx(la,{to:"/references/local"});const Ce=c.filter(ae=>ue(ae)),pe=Ce.length>0&&Ce.every(ae=>S.has(ae._id)),$e=[{label:"Approved",value:"Approved"},{label:"Pending",value:"Pending"},{label:"Rejected",value:"Rejected"}],Ve=Array.from(new Set(c.map(ae=>ae.labName).filter(Boolean))).map(ae=>({label:ae,value:ae})),at=Array.from(new Set(c.flatMap(ae=>ae.availableRoles||[]))).map(ae=>({label:ae,value:ae}));return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[a.jsx(Pn,{className:"w-8 h-8 text-indigo-600"}),"User Management"]}),a.jsxs("p",{className:"mt-2 text-gray-600 text-lg",children:["Manage user registrations and account approvals for "," ",a.jsx("span",{className:"text-indigo-600 font-bold uppercase",children:r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES)?"All Labs":n?.labName||"your lab"})," ","."]})]}),r(Te.FEATURE_SYSTEM_CONFIGURATION)?a.jsx(Le,{variant:"primary",label:"Add Administrative User",icon:a.jsx(cf,{className:"w-4 h-4"}),onClick:()=>v(!0),className:"shadow-lg shadow-indigo-500/20"}):(r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)||r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES))&&n?.role==="Inter Lab sender"?a.jsx(Le,{variant:"primary",label:"Add Delegated Admin",icon:a.jsx(cf,{className:"w-4 h-4"}),onClick:()=>v(!0),className:"shadow-lg shadow-indigo-500/20"}):null]}),a.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm space-y-4 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-3 items-center",children:[a.jsxs("div",{className:"relative col-span-1 md:col-span-1 lg:col-span-2",children:[a.jsx("input",{type:"text",placeholder:"Search name, email, lab...",className:"pl-9 w-full rounded-lg pr-4 h-10 border border-gray-200 bg-white text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-heading",value:F,onChange:ae=>{de(ae.target.value),z(1)}}),a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:a.jsx(ds,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx(Pt,{name:"Status",options:$e,selectedValues:N,onChange:E})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsx(Pt,{name:"Lab/Institute",options:Ve,selectedValues:G,onChange:V,disabled:r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)&&!r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES)})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx(Pt,{name:"Roles",options:at,selectedValues:le,onChange:oe})}),a.jsx("div",{className:"lg:col-span-2 flex justify-end",children:a.jsx(Yr,{allColumns:H,visibleColumns:ve,onChange:Re})})]})}),(G.length>0&&!(r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)&&!r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES))||N.length>0||le.length>0||F)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 animate-in fade-in slide-in-from-top-2 duration-300 bg-white p-3 rounded-xl border border-gray-100 shadow-sm",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading mr-2",children:"Filters:"}),F&&a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-gray-50 text-gray-700 border-gray-100",children:['Search: "',F,'"']}),N.map(ae=>a.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[10px] font-bold uppercase tracking-wider border ${ae==="Approved"?"bg-green-50 text-green-700 border-green-100":ae==="Pending"?"bg-amber-50 text-amber-700 border-amber-100":"bg-red-50 text-red-700 border-red-100"}`,children:ae},ae)),!(r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)&&!r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES))&&G.map(ae=>a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100",children:["Lab: ",ae]},ae)),le.map(ae=>a.jsxs("span",{className:"px-2 py-0.5 rounded-lg text-[10px] font-bold border bg-indigo-50 text-indigo-700 border-indigo-100",children:["Role: ",ae]},ae)),(F||N.length>0||le.length>0||G.length>0&&!(r(Te.FEATURE_MANAGE_USERS_OWN_OFFICE)&&!r(Te.FEATURE_MANAGE_USERS_ALL_OFFICES)))&&a.jsx("button",{onClick:P,className:"ml-auto text-[11px] font-bold text-indigo-600 hover:text-indigo-800 hover:underline transition-colors",children:"Clear All filters"})]}),S.size>0&&a.jsxs("div",{className:"p-3 bg-indigo-50 rounded-xl border border-indigo-100 flex flex-wrap items-center gap-4 animate-in slide-in-from-right duration-300 mb-6",children:[a.jsxs("span",{className:"text-sm font-bold text-indigo-900 font-heading whitespace-nowrap",children:[S.size," SELECTED"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Le,{variant:"primary",label:"Approve",icon:a.jsx(Pn,{className:"w-4 h-4"}),onClick:()=>he("Approved"),loading:k,disabled:k,className:"h-8 px-3 text-xs bg-emerald-600 hover:bg-emerald-700 border-emerald-500"}),a.jsx(Le,{variant:"primary",label:"Activate",icon:a.jsx(Pn,{className:"w-4 h-4"}),onClick:()=>he("Activate"),loading:k,disabled:k,className:"h-8 px-3 text-xs bg-amber-600 hover:bg-amber-700 border-amber-500 shadow-amber-200"}),a.jsx(Le,{variant:"primary",label:"Manage",icon:a.jsx(zr,{className:"w-4 h-4"}),onClick:()=>{ee(c.filter(ae=>S.has(ae._id))),W(!0)},className:"h-8 px-3 text-xs bg-indigo-600 hover:bg-indigo-700 border-indigo-500 shadow-indigo-200"}),a.jsx(Le,{variant:"danger",label:"Delete",icon:a.jsx(pn,{className:"w-4 h-4"}),onClick:Me,loading:k,disabled:k,className:"h-8 px-3 text-xs bg-red-600 hover:bg-red-700 border-red-500 shadow-red-200"})]})]}),b&&a.jsxs("div",{className:"mb-4 bg-red-50 border border-red-100 text-red-700 p-4 rounded-xl flex items-center gap-2",children:[a.jsx(Tf,{className:"w-5 h-5"}),b]}),a.jsx("div",{className:`transition-opacity duration-200 ${m?"opacity-60":"opacity-100"}`,children:a.jsx(il,{rows:je,visibleColumns:ve,sortConfig:K,onSort:De,columnWidths:{selection:"50px",user:"220px",fullName:"180px",labName:"150px",actions:"180px"},customHeaderRenderers:{selection:()=>a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer disabled:cursor-not-allowed",checked:pe,onChange:we,disabled:Ce.length===0})})},customRenderers:{selection:ae=>{const ne=ue(ae);return a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer disabled:cursor-not-allowed",checked:S.has(ae._id),onChange:()=>Oe(ae._id),disabled:!ne})})},user:ae=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 shrink-0 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 text-xs font-bold border border-indigo-100 uppercase",children:ae.initials||ae.email.slice(0,2)}),a.jsx("div",{className:"min-w-0",children:a.jsx("button",{onClick:()=>{ue(ae)&&(ee([ae]),W(!0))},className:`text-sm font-medium truncate max-w-[160px] block transition-colors ${ue(ae)?"text-indigo-600 hover:text-indigo-800 hover:underline cursor-pointer":"text-gray-900"}`,title:ae.email,disabled:!ue(ae),children:ae.email})})]}),fullName:ae=>a.jsx("span",{className:"text-sm font-semibold text-gray-800 truncate block",title:ae.fullName,children:ae.fullName||"N/A"}),labName:ae=>a.jsx("span",{className:"text-sm text-gray-600 italic truncate block",title:ae.labName,children:ae.labName||"N/A"}),availableRoles:ae=>a.jsx("div",{className:"flex flex-wrap gap-1",children:ae.availableRoles&&ae.availableRoles.length>0?ae.availableRoles.map((ne,ke)=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-gray-100 text-gray-800 border border-gray-200",children:ne},ke)):a.jsx("span",{className:"text-sm text-gray-400 italic",children:"None"})}),status:ae=>a.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-[10px] font-bold border ${ae.status==="Approved"?"bg-green-50 text-green-700 border-green-100":ae.status==="Pending"?"bg-amber-50 text-amber-700 border-amber-100":"bg-red-50 text-red-700 border-red-100"}`,children:ae.status}),actions:ae=>{const ne=ue(ae);return a.jsxs("div",{className:"flex items-center justify-end gap-1.5 action-buttons",children:[ne&&!ae.isActivated&&a.jsx("button",{onClick:()=>Ue(ae._id),disabled:C===ae._id||k,className:"px-2 py-1 text-[10px] font-bold bg-amber-600 text-white rounded hover:bg-amber-700 transition-colors shadow-sm disabled:opacity-50",title:"Manually Activate",children:C===ae._id?"...":"Activate"}),ne&&ae.isActivated&&ae.status!=="Approved"&&a.jsx("button",{onClick:()=>Q(ae._id,"Approved"),disabled:C===ae._id||k,className:"px-2 py-1 text-[10px] font-bold bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors shadow-sm disabled:opacity-50",children:C===ae._id?"...":"Approve"}),ne&&ae.status!=="Rejected"&&a.jsx("button",{onClick:()=>Q(ae._id,"Rejected"),disabled:C===ae._id||k,className:"px-2 py-1 text-[10px] font-bold bg-white text-red-600 border border-red-200 rounded hover:bg-red-50 transition-colors disabled:opacity-50",children:C===ae._id?"...":"Reject"}),!ne&&a.jsx("span",{className:"text-[10px] text-gray-400 font-medium italic",children:ae._id===n?._id?"(You)":"Restricted"})]})}}})}),a.jsx(qk,{isOpen:y,onClose:()=>v(!1),onSuccess:()=>{B(X,F,M)}}),xe>0&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 pt-8 pb-2 border-t border-gray-100 mt-8",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading",children:"Display"}),a.jsxs("select",{value:M,onChange:ae=>{w(Number(ae.target.value)),z(1)},className:"bg-gray-100/50 border-none rounded-xl px-4 py-1.5 text-xs font-bold text-gray-600 focus:outline-none focus:ring-4 focus:ring-indigo-500/5 transition-all cursor-pointer hover:bg-gray-100 font-heading",children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:20,children:"20"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]}),a.jsx("div",{className:"h-4 w-px bg-gray-100 mx-2"}),a.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest font-heading",children:["Showing ",(X-1)*M+1,"",Math.min(X*M,xe)," of ",xe]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>z(1),disabled:X===1,className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all",title:"First Page",children:""}),a.jsx("button",{onClick:()=>z(ae=>Math.max(1,ae-1)),disabled:X===1,className:"px-4 py-2 text-xs font-bold text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all font-heading",children:"PREV"}),a.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-indigo-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-indigo-600/20 font-heading",children:X}),a.jsx("button",{onClick:()=>z(ae=>Math.min(A,ae+1)),disabled:X===A,className:"px-4 py-2 text-xs font-bold text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all font-heading",children:"NEXT"}),a.jsx("button",{onClick:()=>z(A),disabled:X===A,className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl disabled:opacity-20 disabled:hover:bg-transparent transition-all",title:"Last Page",children:""})]})]}),O&&a.jsx(Hk,{isOpen:O,onClose:()=>W(!1),selectedUsers:U,onUserUpdate:I})]})},Pk=()=>{const{logout:n}=At(),r=Xt();return h.useEffect(()=>{(async()=>{try{await sj()}catch(l){console.error("Logout failed",l)}finally{n(),r("/",{replace:!0})}})()},[n,r]),a.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:a.jsx("p",{className:"text-gray-600",children:"Logging out..."})})},Gk=()=>{const[n]=vf(),r=Xt(),[o,l]=h.useState("loading"),[c,f]=h.useState(""),m=n.get("token"),g=n.get("userId");return h.useEffect(()=>{(async()=>{if(!m||!g){l("error"),f("Invalid activation link. Missing token or user ID.");return}try{const x=await lj({userId:g,token:m});x.success?(l("success"),f(x.message||"Account activated successfully!")):(l("error"),f(x.message||"Failed to activate account."))}catch(x){l("error"),f(x.message||"An error occurred during activation.")}})()},[m,g]),a.jsx("div",{className:"min-h-[80vh] flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl shadow-indigo-100/50 p-8 border border-gray-100 text-center animate-scale-in",children:[o==="loading"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 bg-indigo-50 rounded-2xl flex items-center justify-center animate-pulse",children:a.jsx(Bt,{className:"w-8 h-8 text-indigo-600 animate-spin"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-heading",children:"Activating Account"}),a.jsx("p",{className:"text-gray-500",children:"Please wait while we verify your activation link..."})]}),o==="success"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 bg-green-50 rounded-2xl flex items-center justify-center animate-bounce-subtle",children:a.jsx(na,{className:"w-10 h-10 text-green-500"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-heading",children:"Activation Successful!"}),a.jsx("p",{className:"text-gray-500",children:c}),a.jsx("div",{className:"pt-4",children:a.jsxs(Le,{onClick:()=>r("/login"),className:"w-full flex flex-row items-center justify-center gap-2 group whitespace-nowrap",children:["Continue to Login",a.jsx(rf,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]}),o==="error"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center animate-shake",children:a.jsx(Tf,{className:"w-10 h-10 text-red-500"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-heading",children:"Activation Failed"}),a.jsx("p",{className:"text-red-500 font-medium",children:c}),a.jsx("p",{className:"text-sm text-gray-500",children:"The link may be expired or already used. If you continue to have issues, please contact the administrator."}),a.jsxs("div",{className:"pt-4 flex flex-col gap-3",children:[a.jsx(Le,{variant:"secondary",onClick:()=>r("/login"),className:"w-full",children:"Back to Login"}),a.jsx(Yt,{to:"/",className:"text-sm text-indigo-600 font-medium hover:text-indigo-700",children:"Return to Home"})]})]})]})})},Ik=()=>{const n=[{title:"Global References Management",icon:fb,color:"text-indigo-600",bg:"bg-indigo-50",description:"The centralized repository. Search, request, and manage references across the entire CSIR network.",steps:[{icon:ds,text:"Search across all CSIR labs instantly"},{icon:Vi,text:"Receive and process reference requests from other labs"},{icon:ns,text:"Bulk assign incoming global references to your team"}]},{title:"Local References Management",icon:Ea,color:"text-pink-600",bg:"bg-pink-50",description:"Lab-specific filing. Manage your internal files, movements, and assignments efficiently.",steps:[{icon:Zi,text:"Track local file movements and status changes"},{icon:ns,text:"Mark multiple files to colleagues using Bulk Update"},{icon:p5,text:"Advanced filtering for finding specific local documents"}]},{title:"User Control & Admin",icon:ns,color:"text-emerald-600",bg:"bg-emerald-50",description:"Admins and Delegated Admins can oversee users and manage laboratory-wide access.",steps:[{icon:Pn,text:"Review and approve new user registrations for your lab"},{icon:ns,text:"Bulk manage user statuses and roles"},{icon:na,text:"Audit trail: Monitor full history of security events and changes"},{icon:Pn,text:"Assign precise roles like 'Delegated Admin' or 'Inter Lab Sender'"}]},{title:"Dynamic Personalization",icon:Us,color:"text-amber-600",bg:"bg-amber-50",description:"Make the portal your own with advanced theme and UI customization.",steps:[{icon:Us,text:"Switch between Light, Dark, and System themes"},{icon:cb,text:"Choose from 5 different accent colors (Indigo, Rose, etc.)"},{icon:rf,text:"Adjust font sizes for optimal reading comfort"}]},{title:"Data Collection Hub",icon:cs,color:"text-purple-600",bg:"bg-purple-50",description:"Architect and distribute data collection forms with cutting-edge AI tools.",steps:[{icon:ns,text:"Collaborate via Shared Forms with Archiving & Restoration support"},{icon:cs,text:"Generate complex forms instantly using simple AI prompts"},{icon:na,text:"Perform bulk actions: Archive, Restore, or Delete multiple forms at once"}]},{title:"Background Operations",icon:Vi,color:"text-blue-600",bg:"bg-blue-50",description:"Stay informed with real-time updates on long-running system tasks.",steps:[{icon:Zi,text:"Monitor bulk email distribution progress in real-time"},{icon:Vi,text:"Receive system notifications when large tasks complete"},{icon:na,text:"Continue working while the system processes data in the background"}]},{title:"Feature Access Control",icon:Ha,color:"text-orange-600",bg:"bg-orange-50",description:"Granular control over system capabilities. Enable or disable modules for specific user roles.",steps:[{icon:Ha,text:"Configure permission matrices for all system roles"},{icon:na,text:"Toggle critical features like 'Audit Trails' or 'System Config'"},{icon:ns,text:"Real-time updates to user capabilities without deployment"}]}];return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12 space-y-16 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-indigo-100 rounded-2xl text-indigo-600 mb-2",children:a.jsx(ob,{className:"w-10 h-10"})}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 font-heading tracking-tight",children:"How to use the Portal"}),a.jsx("p",{className:"max-w-2xl mx-auto text-xl text-gray-600 font-heading",children:"A quick visual guide to understanding the features and workflow of our Reference Management Portal."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8",children:n.map((r,o)=>{const l=r.icon;return a.jsxs("div",{className:"flex flex-col h-full bg-white rounded-3xl p-8 border border-gray-100 shadow-xl shadow-gray-200/50 hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 dark:bg-gray-800 dark:border-gray-700 dark:shadow-none",children:[a.jsx("div",{className:`p-4 rounded-2xl ${r.bg} ${r.color} w-fit mb-6 dark:bg-opacity-10`,children:a.jsx(l,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 font-heading dark:text-white",children:r.title}),a.jsx("p",{className:"text-gray-600 mb-8 font-heading leading-relaxed dark:text-gray-400",children:r.description}),a.jsx("div",{className:"mt-auto space-y-4 pt-6 border-t border-gray-50 dark:border-gray-700",children:r.steps.map((c,f)=>{const m=c.icon;return a.jsxs("div",{className:"flex gap-3 items-start group",children:[a.jsx("div",{className:"mt-1 p-1 rounded-md bg-gray-50 text-gray-400 group-hover:text-indigo-600 group-hover:bg-indigo-50 transition-colors dark:bg-gray-700",children:a.jsx(m,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-sm text-gray-600 font-heading dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-gray-200 transition-colors",children:c.text})]},f)})})]},o)})}),a.jsxs("div",{className:"bg-indigo-600 rounded-[3rem] p-12 text-center text-white relative overflow-hidden shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-32 -mt-32 blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-400/20 rounded-full -ml-32 -mb-32 blur-3xl animate-pulse"}),a.jsxs("div",{className:"relative z-10 space-y-6",children:[a.jsx("h2",{className:"text-3xl font-bold font-heading",children:"Ready to get started?"}),a.jsx("p",{className:"text-indigo-100 text-lg max-w-xl mx-auto font-heading",children:"Your dashboard is ready with all the tools you need to manage references effectively."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-4 pt-4",children:[a.jsxs(Yt,{to:"/references",className:"px-8 py-3 bg-white text-indigo-600 rounded-xl font-bold hover:bg-indigo-50 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:["Go to References ",a.jsx(rf,{className:"w-5 h-5"})]}),a.jsxs(Yt,{to:"/settings",className:"px-8 py-3 bg-indigo-500 text-white border border-indigo-400 rounded-xl font-bold hover:bg-indigo-400 transition-all flex items-center gap-2",children:["Open Settings ",a.jsx(Us,{className:"w-5 h-5"})]})]})]})]}),a.jsx("div",{className:"text-center text-gray-400 text-sm pb-8 font-heading",children:" 2026 Council of Scientific & Industrial Research. All rights reserved."})]})},Vk=async(n={})=>{try{return(await ct.get(`${Ct}/audit`,{params:n,withCredentials:!0})).data}catch(r){throw console.error("Error fetching audit logs:",r),r}},Yk=async()=>{try{return(await ct.get(`${Ct}/audit/settings`,{withCredentials:!0})).data}catch(n){throw console.error("Error fetching audit settings:",n),n}},Xk=async()=>{try{return(await ct.post(`${Ct}/audit/toggle`,{},{withCredentials:!0})).data}catch(n){throw console.error("Error toggling audit logging:",n),n}},Ub=6048e5,Qk=864e5,Mx=Symbol.for("constructDateFrom");function bn(n,r){return typeof n=="function"?n(r):n&&typeof n=="object"&&Mx in n?n[Mx](r):n instanceof Date?new n.constructor(r):new Date(r)}function Za(n,r){return bn(r||n,n)}let Wk={};function Zo(){return Wk}function Ki(n,r){const o=Zo(),l=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,c=Za(n,r?.in),f=c.getDay(),m=(f<l?7:0)+f-l;return c.setDate(c.getDate()-m),c.setHours(0,0,0,0),c}function qo(n,r){return Ki(n,{...r,weekStartsOn:1})}function zb(n,r){const o=Za(n,r?.in),l=o.getFullYear(),c=bn(o,0);c.setFullYear(l+1,0,4),c.setHours(0,0,0,0);const f=qo(c),m=bn(o,0);m.setFullYear(l,0,4),m.setHours(0,0,0,0);const g=qo(m);return o.getTime()>=f.getTime()?l+1:o.getTime()>=g.getTime()?l:l-1}function Ox(n){const r=Za(n),o=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return o.setUTCFullYear(r.getFullYear()),+n-+o}function Zk(n,...r){const o=bn.bind(null,r.find(l=>typeof l=="object"));return r.map(o)}function Dx(n,r){const o=Za(n,r?.in);return o.setHours(0,0,0,0),o}function Kk(n,r,o){const[l,c]=Zk(o?.in,n,r),f=Dx(l),m=Dx(c),g=+f-Ox(f),b=+m-Ox(m);return Math.round((g-b)/Qk)}function Jk(n,r){const o=zb(n,r),l=bn(n,0);return l.setFullYear(o,0,4),l.setHours(0,0,0,0),qo(l)}function eE(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function tE(n){return!(!eE(n)&&typeof n!="number"||isNaN(+Za(n)))}function aE(n,r){const o=Za(n,r?.in);return o.setFullYear(o.getFullYear(),0,1),o.setHours(0,0,0,0),o}const sE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nE=(n,r,o)=>{let l;const c=sE[n];return typeof c=="string"?l=c:r===1?l=c.one:l=c.other.replace("{{count}}",r.toString()),o?.addSuffix?o.comparison&&o.comparison>0?"in "+l:l+" ago":l};function Au(n){return(r={})=>{const o=r.width?String(r.width):n.defaultWidth;return n.formats[o]||n.formats[n.defaultWidth]}}const rE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},oE={date:Au({formats:rE,defaultWidth:"full"}),time:Au({formats:iE,defaultWidth:"full"}),dateTime:Au({formats:lE,defaultWidth:"full"})},cE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dE=(n,r,o,l)=>cE[n];function $i(n){return(r,o)=>{const l=o?.context?String(o.context):"standalone";let c;if(l==="formatting"&&n.formattingValues){const m=n.defaultFormattingWidth||n.defaultWidth,g=o?.width?String(o.width):m;c=n.formattingValues[g]||n.formattingValues[m]}else{const m=n.defaultWidth,g=o?.width?String(o.width):n.defaultWidth;c=n.values[g]||n.values[m]}const f=n.argumentCallback?n.argumentCallback(r):r;return c[f]}}const uE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pE=(n,r)=>{const o=Number(n),l=o%100;if(l>20||l<10)switch(l%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},bE={ordinalNumber:pE,era:$i({values:uE,defaultWidth:"wide"}),quarter:$i({values:fE,defaultWidth:"wide",argumentCallback:n=>n-1}),month:$i({values:mE,defaultWidth:"wide"}),day:$i({values:hE,defaultWidth:"wide"}),dayPeriod:$i({values:gE,defaultWidth:"wide",formattingValues:xE,defaultFormattingWidth:"wide"})};function Pi(n){return(r,o={})=>{const l=o.width,c=l&&n.matchPatterns[l]||n.matchPatterns[n.defaultMatchWidth],f=r.match(c);if(!f)return null;const m=f[0],g=l&&n.parsePatterns[l]||n.parsePatterns[n.defaultParseWidth],b=Array.isArray(g)?vE(g,v=>v.test(m)):yE(g,v=>v.test(m));let x;x=n.valueCallback?n.valueCallback(b):b,x=o.valueCallback?o.valueCallback(x):x;const y=r.slice(m.length);return{value:x,rest:y}}}function yE(n,r){for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&r(n[o]))return o}function vE(n,r){for(let o=0;o<n.length;o++)if(r(n[o]))return o}function wE(n){return(r,o={})=>{const l=r.match(n.matchPattern);if(!l)return null;const c=l[0],f=r.match(n.parsePattern);if(!f)return null;let m=n.valueCallback?n.valueCallback(f[0]):f[0];m=o.valueCallback?o.valueCallback(m):m;const g=r.slice(c.length);return{value:m,rest:g}}}const NE=/^(\d+)(th|st|nd|rd)?/i,jE=/\d+/i,SE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kE={any:[/^b/i,/^(a|c)/i]},EE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AE={any:[/1/i,/2/i,/3/i,/4/i]},CE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_E={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ME={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},OE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},DE={ordinalNumber:wE({matchPattern:NE,parsePattern:jE,valueCallback:n=>parseInt(n,10)}),era:Pi({matchPatterns:SE,defaultMatchWidth:"wide",parsePatterns:kE,defaultParseWidth:"any"}),quarter:Pi({matchPatterns:EE,defaultMatchWidth:"wide",parsePatterns:AE,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Pi({matchPatterns:CE,defaultMatchWidth:"wide",parsePatterns:_E,defaultParseWidth:"any"}),day:Pi({matchPatterns:RE,defaultMatchWidth:"wide",parsePatterns:TE,defaultParseWidth:"any"}),dayPeriod:Pi({matchPatterns:ME,defaultMatchWidth:"any",parsePatterns:OE,defaultParseWidth:"any"})},LE={code:"en-US",formatDistance:nE,formatLong:oE,formatRelative:dE,localize:bE,match:DE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function UE(n,r){const o=Za(n,r?.in);return Kk(o,aE(o))+1}function zE(n,r){const o=Za(n,r?.in),l=+qo(o)-+Jk(o);return Math.round(l/Ub)+1}function Fb(n,r){const o=Za(n,r?.in),l=o.getFullYear(),c=Zo(),f=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,m=bn(r?.in||n,0);m.setFullYear(l+1,0,f),m.setHours(0,0,0,0);const g=Ki(m,r),b=bn(r?.in||n,0);b.setFullYear(l,0,f),b.setHours(0,0,0,0);const x=Ki(b,r);return+o>=+g?l+1:+o>=+x?l:l-1}function FE(n,r){const o=Zo(),l=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,c=Fb(n,r),f=bn(r?.in||n,0);return f.setFullYear(c,0,l),f.setHours(0,0,0,0),Ki(f,r)}function BE(n,r){const o=Za(n,r?.in),l=+Ki(o,r)-+FE(o,r);return Math.round(l/Ub)+1}function xt(n,r){const o=n<0?"-":"",l=Math.abs(n).toString().padStart(r,"0");return o+l}const hn={y(n,r){const o=n.getFullYear(),l=o>0?o:1-o;return xt(r==="yy"?l%100:l,r.length)},M(n,r){const o=n.getMonth();return r==="M"?String(o+1):xt(o+1,2)},d(n,r){return xt(n.getDate(),r.length)},a(n,r){const o=n.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];case"aaaa":default:return o==="am"?"a.m.":"p.m."}},h(n,r){return xt(n.getHours()%12||12,r.length)},H(n,r){return xt(n.getHours(),r.length)},m(n,r){return xt(n.getMinutes(),r.length)},s(n,r){return xt(n.getSeconds(),r.length)},S(n,r){const o=r.length,l=n.getMilliseconds(),c=Math.trunc(l*Math.pow(10,o-3));return xt(c,r.length)}},Or={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lx={G:function(n,r,o){const l=n.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return o.era(l,{width:"abbreviated"});case"GGGGG":return o.era(l,{width:"narrow"});case"GGGG":default:return o.era(l,{width:"wide"})}},y:function(n,r,o){if(r==="yo"){const l=n.getFullYear(),c=l>0?l:1-l;return o.ordinalNumber(c,{unit:"year"})}return hn.y(n,r)},Y:function(n,r,o,l){const c=Fb(n,l),f=c>0?c:1-c;if(r==="YY"){const m=f%100;return xt(m,2)}return r==="Yo"?o.ordinalNumber(f,{unit:"year"}):xt(f,r.length)},R:function(n,r){const o=zb(n);return xt(o,r.length)},u:function(n,r){const o=n.getFullYear();return xt(o,r.length)},Q:function(n,r,o){const l=Math.ceil((n.getMonth()+1)/3);switch(r){case"Q":return String(l);case"QQ":return xt(l,2);case"Qo":return o.ordinalNumber(l,{unit:"quarter"});case"QQQ":return o.quarter(l,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(l,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(l,{width:"wide",context:"formatting"})}},q:function(n,r,o){const l=Math.ceil((n.getMonth()+1)/3);switch(r){case"q":return String(l);case"qq":return xt(l,2);case"qo":return o.ordinalNumber(l,{unit:"quarter"});case"qqq":return o.quarter(l,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(l,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(l,{width:"wide",context:"standalone"})}},M:function(n,r,o){const l=n.getMonth();switch(r){case"M":case"MM":return hn.M(n,r);case"Mo":return o.ordinalNumber(l+1,{unit:"month"});case"MMM":return o.month(l,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(l,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(l,{width:"wide",context:"formatting"})}},L:function(n,r,o){const l=n.getMonth();switch(r){case"L":return String(l+1);case"LL":return xt(l+1,2);case"Lo":return o.ordinalNumber(l+1,{unit:"month"});case"LLL":return o.month(l,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(l,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(l,{width:"wide",context:"standalone"})}},w:function(n,r,o,l){const c=BE(n,l);return r==="wo"?o.ordinalNumber(c,{unit:"week"}):xt(c,r.length)},I:function(n,r,o){const l=zE(n);return r==="Io"?o.ordinalNumber(l,{unit:"week"}):xt(l,r.length)},d:function(n,r,o){return r==="do"?o.ordinalNumber(n.getDate(),{unit:"date"}):hn.d(n,r)},D:function(n,r,o){const l=UE(n);return r==="Do"?o.ordinalNumber(l,{unit:"dayOfYear"}):xt(l,r.length)},E:function(n,r,o){const l=n.getDay();switch(r){case"E":case"EE":case"EEE":return o.day(l,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(l,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(l,{width:"short",context:"formatting"});case"EEEE":default:return o.day(l,{width:"wide",context:"formatting"})}},e:function(n,r,o,l){const c=n.getDay(),f=(c-l.weekStartsOn+8)%7||7;switch(r){case"e":return String(f);case"ee":return xt(f,2);case"eo":return o.ordinalNumber(f,{unit:"day"});case"eee":return o.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(c,{width:"short",context:"formatting"});case"eeee":default:return o.day(c,{width:"wide",context:"formatting"})}},c:function(n,r,o,l){const c=n.getDay(),f=(c-l.weekStartsOn+8)%7||7;switch(r){case"c":return String(f);case"cc":return xt(f,r.length);case"co":return o.ordinalNumber(f,{unit:"day"});case"ccc":return o.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(c,{width:"narrow",context:"standalone"});case"cccccc":return o.day(c,{width:"short",context:"standalone"});case"cccc":default:return o.day(c,{width:"wide",context:"standalone"})}},i:function(n,r,o){const l=n.getDay(),c=l===0?7:l;switch(r){case"i":return String(c);case"ii":return xt(c,r.length);case"io":return o.ordinalNumber(c,{unit:"day"});case"iii":return o.day(l,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(l,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(l,{width:"short",context:"formatting"});case"iiii":default:return o.day(l,{width:"wide",context:"formatting"})}},a:function(n,r,o){const c=n.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(c,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(n,r,o){const l=n.getHours();let c;switch(l===12?c=Or.noon:l===0?c=Or.midnight:c=l/12>=1?"pm":"am",r){case"b":case"bb":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(c,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(n,r,o){const l=n.getHours();let c;switch(l>=17?c=Or.evening:l>=12?c=Or.afternoon:l>=4?c=Or.morning:c=Or.night,r){case"B":case"BB":case"BBB":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(c,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(n,r,o){if(r==="ho"){let l=n.getHours()%12;return l===0&&(l=12),o.ordinalNumber(l,{unit:"hour"})}return hn.h(n,r)},H:function(n,r,o){return r==="Ho"?o.ordinalNumber(n.getHours(),{unit:"hour"}):hn.H(n,r)},K:function(n,r,o){const l=n.getHours()%12;return r==="Ko"?o.ordinalNumber(l,{unit:"hour"}):xt(l,r.length)},k:function(n,r,o){let l=n.getHours();return l===0&&(l=24),r==="ko"?o.ordinalNumber(l,{unit:"hour"}):xt(l,r.length)},m:function(n,r,o){return r==="mo"?o.ordinalNumber(n.getMinutes(),{unit:"minute"}):hn.m(n,r)},s:function(n,r,o){return r==="so"?o.ordinalNumber(n.getSeconds(),{unit:"second"}):hn.s(n,r)},S:function(n,r){return hn.S(n,r)},X:function(n,r,o){const l=n.getTimezoneOffset();if(l===0)return"Z";switch(r){case"X":return zx(l);case"XXXX":case"XX":return Bn(l);case"XXXXX":case"XXX":default:return Bn(l,":")}},x:function(n,r,o){const l=n.getTimezoneOffset();switch(r){case"x":return zx(l);case"xxxx":case"xx":return Bn(l);case"xxxxx":case"xxx":default:return Bn(l,":")}},O:function(n,r,o){const l=n.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Ux(l,":");case"OOOO":default:return"GMT"+Bn(l,":")}},z:function(n,r,o){const l=n.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Ux(l,":");case"zzzz":default:return"GMT"+Bn(l,":")}},t:function(n,r,o){const l=Math.trunc(+n/1e3);return xt(l,r.length)},T:function(n,r,o){return xt(+n,r.length)}};function Ux(n,r=""){const o=n>0?"-":"+",l=Math.abs(n),c=Math.trunc(l/60),f=l%60;return f===0?o+String(c):o+String(c)+r+xt(f,2)}function zx(n,r){return n%60===0?(n>0?"-":"+")+xt(Math.abs(n)/60,2):Bn(n,r)}function Bn(n,r=""){const o=n>0?"-":"+",l=Math.abs(n),c=xt(Math.trunc(l/60),2),f=xt(l%60,2);return o+c+r+f}const Fx=(n,r)=>{switch(n){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Bb=(n,r)=>{switch(n){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},qE=(n,r)=>{const o=n.match(/(P+)(p+)?/)||[],l=o[1],c=o[2];if(!c)return Fx(n,r);let f;switch(l){case"P":f=r.dateTime({width:"short"});break;case"PP":f=r.dateTime({width:"medium"});break;case"PPP":f=r.dateTime({width:"long"});break;case"PPPP":default:f=r.dateTime({width:"full"});break}return f.replace("{{date}}",Fx(l,r)).replace("{{time}}",Bb(c,r))},HE={p:Bb,P:qE},$E=/^D+$/,PE=/^Y+$/,GE=["D","DD","YY","YYYY"];function IE(n){return $E.test(n)}function VE(n){return PE.test(n)}function YE(n,r,o){const l=XE(n,r,o);if(console.warn(l),GE.includes(n))throw new RangeError(l)}function XE(n,r,o){const l=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${r}\`) for formatting ${l} to the input \`${o}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const QE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ZE=/^'([^]*?)'?$/,KE=/''/g,JE=/[a-zA-Z]/;function Ao(n,r,o){const l=Zo(),c=l.locale??LE,f=l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,m=l.weekStartsOn??l.locale?.options?.weekStartsOn??0,g=Za(n,o?.in);if(!tE(g))throw new RangeError("Invalid time value");let b=r.match(WE).map(y=>{const v=y[0];if(v==="p"||v==="P"){const S=HE[v];return S(y,c.formatLong)}return y}).join("").match(QE).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const v=y[0];if(v==="'")return{isToken:!1,value:eA(y)};if(Lx[v])return{isToken:!0,value:y};if(v.match(JE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:y}});c.localize.preprocessor&&(b=c.localize.preprocessor(g,b));const x={firstWeekContainsDate:f,weekStartsOn:m,locale:c};return b.map(y=>{if(!y.isToken)return y.value;const v=y.value;(VE(v)||IE(v))&&YE(v,r,String(n));const S=Lx[v[0]];return S(g,v,c.localize,x)}).join("")}function eA(n){const r=n.match(ZE);return r?r[1].replace(KE,"'"):n}const tA=()=>{const[n,r]=h.useState([]),[o,l]=h.useState(!0),[c,f]=h.useState(1),[m,g]=h.useState(1),[b,x]=h.useState({action:"",user:"",resource:""}),[y,v]=h.useState(null),[S,R]=h.useState(!0),[C,D]=h.useState(!1),[k,T]=h.useState(!1),[O,W]=h.useState({startDate:"",endDate:""}),[U,ee]=h.useState([]),K=["timestamp","user","action","resource","details"];h.useEffect(()=>{U.length===0&&ee(K)},[]);const $=async()=>{l(!0);try{const V=await Vk({page:c,...b,...O});V.success&&(r(V.data.logs),g(V.data.pagination.totalPages))}catch(V){console.error("Failed to fetch logs:",V)}finally{l(!1)}},N=async()=>{try{const V=await Yk();V.success&&R(V.data.isEnabled)}catch(V){console.error("Failed to fetch audit settings:",V)}};h.useEffect(()=>{$(),N()},[c,b,O]);const E=V=>{x({...b,[V.target.name]:V.target.value}),f(1)},G=V=>V.includes("DELETE")?"text-red-600 bg-red-50":V.includes("CREATE")?"text-emerald-600 bg-emerald-50":V.includes("UPDATE")?"text-blue-600 bg-blue-50":V.includes("LOGIN")?"text-indigo-600 bg-indigo-50":"text-gray-600 bg-gray-50";return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 font-heading flex items-center gap-3 dark:text-white",children:[a.jsx(zr,{className:"w-8 h-8 text-indigo-600"}),"Audit Trails"]}),a.jsx("p",{className:"text-gray-500 font-heading mt-1 dark:text-gray-400",children:"Monitor all system activities and security events."})]}),a.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-gray-800 p-2 pl-4 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${S?"bg-emerald-500 animate-pulse":"bg-amber-500"}`}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:["Logging: ",S?"Active":"Paused"]})]}),a.jsxs("button",{onClick:async()=>{D(!0);try{const V=await Xk();V.success&&(R(V.data.isEnabled),et.success(`Audit logging ${V.data.isEnabled?"resumed":"paused"}`))}catch{et.error("Failed to toggle logging")}finally{D(!1)}},disabled:C,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all duration-200 ${S?"bg-amber-50 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-300":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-300"}`,children:[C?a.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):S?a.jsx(K5,{className:"w-4 h-4"}):a.jsx(e4,{className:"w-4 h-4"}),S?"Pause Logging":"Resume Logging"]})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-8 gap-3 items-center",children:[a.jsxs("div",{className:"relative col-span-1 md:col-span-1 lg:col-span-2",children:[a.jsx("input",{type:"text",name:"user",placeholder:"Search by User ID...",className:"w-full pl-9 pr-4 h-10 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none dark:bg-gray-900 dark:border-gray-600 dark:text-white text-sm font-heading",onChange:E}),a.jsx(ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.jsxs("select",{name:"action",className:"w-full h-10 px-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none dark:bg-gray-900 dark:border-gray-600 dark:text-white text-sm font-heading",onChange:E,children:[a.jsx("option",{value:"",children:"All Actions"}),a.jsx("option",{value:"USER_LOGIN",children:"User Login"}),a.jsx("option",{value:"USER_LOGOUT",children:"User Logout"}),a.jsx("option",{value:"REFERENCE_CREATE",children:"Reference Created"}),a.jsx("option",{value:"REFERENCE_UPDATE",children:"Reference Updated"}),a.jsx("option",{value:"REFERENCE_DELETE",children:"Reference Deleted"})]}),a.jsxs("select",{name:"resource",className:"w-full h-10 px-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none dark:bg-gray-900 dark:border-gray-600 dark:text-white text-sm font-heading",onChange:E,children:[a.jsx("option",{value:"",children:"All Resources"}),a.jsx("option",{value:"Reference",children:"References"}),a.jsx("option",{value:"User",children:"Users"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>T(!k),className:`flex items-center justify-center gap-2 w-full h-10 px-4 rounded-lg transition-colors font-heading text-sm ${O.startDate||O.endDate?"bg-indigo-50 text-indigo-600 border border-indigo-200":"bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-100 border border-gray-200"}`,children:[a.jsx(_f,{className:"w-4 h-4"}),O.startDate?a.jsxs("span",{className:"truncate",children:[Ao(new Date(O.startDate),"MMM dd"),O.endDate?` - ${Ao(new Date(O.endDate),"MMM dd")}`:" +"]}):"Date Range"]}),k&&a.jsx("div",{className:"absolute right-0 lg:left-0 mt-2 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 z-50 w-72 animate-in zoom-in-95 duration-200",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase mb-1 block",children:"Start Date"}),a.jsx("input",{type:"date",value:O.startDate,max:new Date().toISOString().split("T")[0],onChange:V=>W({...O,startDate:V.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:bg-gray-900 dark:border-gray-600 dark:text-white text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase mb-1 block",children:"End Date"}),a.jsx("input",{type:"date",value:O.endDate,min:O.startDate,max:new Date().toISOString().split("T")[0],onChange:V=>W({...O,endDate:V.target.value}),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:bg-gray-900 dark:border-gray-600 dark:text-white text-sm"})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx("button",{onClick:()=>{W({startDate:"",endDate:""})},className:"flex-1 px-3 py-2 text-sm font-medium text-gray-600 hover:bg-gray-50 rounded-lg dark:text-gray-300 dark:hover:bg-gray-700",children:"Clear"}),a.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-3 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm shadow-indigo-200",children:"Apply"})]})]})})]}),a.jsx("div",{className:"lg:col-start-8 flex justify-end",children:a.jsx(Yr,{allColumns:K,visibleColumns:U,onChange:ee})})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-xl overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-100 dark:border-gray-700",children:[U.includes("timestamp")&&a.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider font-heading",children:"Timestamp"}),U.includes("user")&&a.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider font-heading",children:"User"}),U.includes("action")&&a.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider font-heading",children:"Action"}),U.includes("resource")&&a.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider font-heading",children:"Resource"}),U.includes("details")&&a.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider font-heading text-right",children:"Details"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700",children:o?[...Array(5)].map((V,le)=>a.jsx("tr",{className:"animate-pulse",children:a.jsx("td",{colSpan:U.length,className:"px-6 py-4 h-16 bg-gray-50/20"})},le)):n.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:U.length,className:"px-6 py-12 text-center text-gray-500",children:"No audit logs found."})}):n.map(V=>a.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors",children:[U.includes("timestamp")&&a.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-200",children:Ao(new Date(V.createdAt),"MMM dd, HH:mm:ss")}),a.jsx("div",{className:"text-xs text-gray-400 font-heading",children:Ao(new Date(V.createdAt),"yyyy")})]}),U.includes("user")&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold border border-indigo-100",children:V.user?.fullName?.[0]||"U"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-gray-200 font-heading",children:V.user?.fullName||"System"}),a.jsx("div",{className:"text-[10px] text-gray-400 font-medium font-heading",children:V.user?.email||"N/A"})]})]})}),U.includes("action")&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold font-heading border ${G(V.action).replace("text-","border-").replace("bg-","")} ${G(V.action)}`,children:V.action.replace(/_/g," ")})}),U.includes("resource")&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2 text-[11px] font-bold text-gray-500 dark:text-gray-400 font-heading uppercase",children:[a.jsx(db,{className:"w-3.5 h-3.5 text-indigo-400"}),V.resource]})}),U.includes("details")&&a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:a.jsx("button",{onClick:()=>v(V),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-all",children:a.jsx(rs,{className:"w-5 h-5"})})})]},V._id))})]})}),a.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Page ",a.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:c})," of ",m]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{disabled:c===1,onClick:()=>f(V=>V-1),className:"p-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 dark:bg-gray-800 dark:border-gray-700",children:a.jsx(Qi,{className:"w-4 h-4"})}),a.jsx("button",{disabled:c===m,onClick:()=>f(V=>V+1),className:"p-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 dark:bg-gray-800 dark:border-gray-700",children:a.jsx(Wi,{className:"w-4 h-4"})})]})]})]}),y&&a.jsx("div",{className:"fixed inset-0 z-100 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold font-heading dark:text-white",children:"Activity Detail"}),a.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-gray-600",children:a.jsx(Wi,{className:"w-6 h-6 rotate-90"})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl",children:[a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Action Performed"}),a.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:y.action})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl",children:[a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"On Resource"}),a.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[y.resource," (",y.resourceId||"N/A",")"]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl",children:[a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"IP Address"}),a.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:y.metadata?.ip||"Unknown"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl",children:[a.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Method"}),a.jsxs("p",{className:"font-bold text-gray-900 dark:text-white",children:[y.metadata?.method," ",y.metadata?.url]})]})]}),y.changes&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(Cf,{className:"w-4 h-4 text-indigo-600"}),"Data Changes"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[y.changes.before&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-bold text-red-500 uppercase tracking-wider",children:"Before"}),a.jsx("pre",{className:"p-4 bg-red-50 text-red-700 text-xs rounded-2xl overflow-x-auto dark:bg-red-900/20 dark:text-red-300",children:JSON.stringify(y.changes.before,null,2)})]}),y.changes.after&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-bold text-emerald-500 uppercase tracking-wider",children:"After"}),a.jsx("pre",{className:"p-4 bg-emerald-50 text-emerald-700 text-xs rounded-2xl overflow-x-auto dark:bg-emerald-900/20 dark:text-emerald-300",children:JSON.stringify(y.changes.after,null,2)})]})]})]}),a.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl",children:[a.jsx("p",{className:"text-xs text-indigo-600 font-bold mb-2",children:"Browser Metadata"}),a.jsx("p",{className:"text-xs text-indigo-800 dark:text-indigo-300 leading-relaxed italic",children:y.metadata?.userAgent})]})]})]})})]})};var Cu={exports:{}},Bx;function aA(){return Bx||(Bx=1,(function(n){var r=(function(o){var l=Object.prototype,c=l.hasOwnProperty,f=Object.defineProperty||function(z,M,w){z[M]=w.value},m,g=typeof Symbol=="function"?Symbol:{},b=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function v(z,M,w){return Object.defineProperty(z,M,{value:w,enumerable:!0,configurable:!0,writable:!0}),z[M]}try{v({},"")}catch{v=function(M,w,A){return M[w]=A}}function S(z,M,w,A){var _=M&&M.prototype instanceof W?M:W,F=Object.create(_.prototype),de=new H(A||[]);return f(F,"_invoke",{value:le(z,w,de)}),F}o.wrap=S;function R(z,M,w){try{return{type:"normal",arg:z.call(M,w)}}catch(A){return{type:"throw",arg:A}}}var C="suspendedStart",D="suspendedYield",k="executing",T="completed",O={};function W(){}function U(){}function ee(){}var K={};v(K,b,function(){return this});var $=Object.getPrototypeOf,N=$&&$($(I([])));N&&N!==l&&c.call(N,b)&&(K=N);var E=ee.prototype=W.prototype=Object.create(K);U.prototype=ee,f(E,"constructor",{value:ee,configurable:!0}),f(ee,"constructor",{value:U,configurable:!0}),U.displayName=v(ee,y,"GeneratorFunction");function G(z){["next","throw","return"].forEach(function(M){v(z,M,function(w){return this._invoke(M,w)})})}o.isGeneratorFunction=function(z){var M=typeof z=="function"&&z.constructor;return M?M===U||(M.displayName||M.name)==="GeneratorFunction":!1},o.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,ee):(z.__proto__=ee,v(z,y,"GeneratorFunction")),z.prototype=Object.create(E),z},o.awrap=function(z){return{__await:z}};function V(z,M){function w(F,de,xe,L){var B=R(z[F],z,de);if(B.type==="throw")L(B.arg);else{var Q=B.arg,ue=Q.value;return ue&&typeof ue=="object"&&c.call(ue,"__await")?M.resolve(ue.__await).then(function(we){w("next",we,xe,L)},function(we){w("throw",we,xe,L)}):M.resolve(ue).then(function(we){Q.value=we,xe(Q)},function(we){return w("throw",we,xe,L)})}}var A;function _(F,de){function xe(){return new M(function(L,B){w(F,de,L,B)})}return A=A?A.then(xe,xe):xe()}f(this,"_invoke",{value:_})}G(V.prototype),v(V.prototype,x,function(){return this}),o.AsyncIterator=V,o.async=function(z,M,w,A,_){_===void 0&&(_=Promise);var F=new V(S(z,M,w,A),_);return o.isGeneratorFunction(M)?F:F.next().then(function(de){return de.done?de.value:F.next()})};function le(z,M,w){var A=C;return function(F,de){if(A===k)throw new Error("Generator is already running");if(A===T){if(F==="throw")throw de;return X()}for(w.method=F,w.arg=de;;){var xe=w.delegate;if(xe){var L=oe(xe,w);if(L){if(L===O)continue;return L}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(A===C)throw A=T,w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);A=k;var B=R(z,M,w);if(B.type==="normal"){if(A=w.done?T:D,B.arg===O)continue;return{value:B.arg,done:w.done}}else B.type==="throw"&&(A=T,w.method="throw",w.arg=B.arg)}}}function oe(z,M){var w=M.method,A=z.iterator[w];if(A===m)return M.delegate=null,w==="throw"&&z.iterator.return&&(M.method="return",M.arg=m,oe(z,M),M.method==="throw")||w!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+w+"' method")),O;var _=R(A,z.iterator,M.arg);if(_.type==="throw")return M.method="throw",M.arg=_.arg,M.delegate=null,O;var F=_.arg;if(!F)return M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,O;if(F.done)M[z.resultName]=F.value,M.next=z.nextLoc,M.method!=="return"&&(M.method="next",M.arg=m);else return F;return M.delegate=null,O}G(E),v(E,y,"Generator"),v(E,b,function(){return this}),v(E,"toString",function(){return"[object Generator]"});function ve(z){var M={tryLoc:z[0]};1 in z&&(M.catchLoc=z[1]),2 in z&&(M.finallyLoc=z[2],M.afterLoc=z[3]),this.tryEntries.push(M)}function Re(z){var M=z.completion||{};M.type="normal",delete M.arg,z.completion=M}function H(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(ve,this),this.reset(!0)}o.keys=function(z){var M=Object(z),w=[];for(var A in M)w.push(A);return w.reverse(),function _(){for(;w.length;){var F=w.pop();if(F in M)return _.value=F,_.done=!1,_}return _.done=!0,_}};function I(z){if(z){var M=z[b];if(M)return M.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var w=-1,A=function _(){for(;++w<z.length;)if(c.call(z,w))return _.value=z[w],_.done=!1,_;return _.value=m,_.done=!0,_};return A.next=A}}return{next:X}}o.values=I;function X(){return{value:m,done:!0}}return H.prototype={constructor:H,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(Re),!z)for(var M in this)M.charAt(0)==="t"&&c.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=m)},stop:function(){this.done=!0;var z=this.tryEntries[0],M=z.completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var M=this;function w(L,B){return F.type="throw",F.arg=z,M.next=L,B&&(M.method="next",M.arg=m),!!B}for(var A=this.tryEntries.length-1;A>=0;--A){var _=this.tryEntries[A],F=_.completion;if(_.tryLoc==="root")return w("end");if(_.tryLoc<=this.prev){var de=c.call(_,"catchLoc"),xe=c.call(_,"finallyLoc");if(de&&xe){if(this.prev<_.catchLoc)return w(_.catchLoc,!0);if(this.prev<_.finallyLoc)return w(_.finallyLoc)}else if(de){if(this.prev<_.catchLoc)return w(_.catchLoc,!0)}else if(xe){if(this.prev<_.finallyLoc)return w(_.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(z,M){for(var w=this.tryEntries.length-1;w>=0;--w){var A=this.tryEntries[w];if(A.tryLoc<=this.prev&&c.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var _=A;break}}_&&(z==="break"||z==="continue")&&_.tryLoc<=M&&M<=_.finallyLoc&&(_=null);var F=_?_.completion:{};return F.type=z,F.arg=M,_?(this.method="next",this.next=_.finallyLoc,O):this.complete(F)},complete:function(z,M){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&M&&(this.next=M),O},finish:function(z){for(var M=this.tryEntries.length-1;M>=0;--M){var w=this.tryEntries[M];if(w.finallyLoc===z)return this.complete(w.completion,w.afterLoc),Re(w),O}},catch:function(z){for(var M=this.tryEntries.length-1;M>=0;--M){var w=this.tryEntries[M];if(w.tryLoc===z){var A=w.completion;if(A.type==="throw"){var _=A.arg;Re(w)}return _}}throw new Error("illegal catch attempt")},delegateYield:function(z,M,w){return this.delegate={iterator:I(z),resultName:M,nextLoc:w},this.method==="next"&&(this.arg=m),O}},o})(n.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})(Cu)),Cu.exports}var _u,qx;function Ff(){return qx||(qx=1,_u=(n,r)=>`${n}-${r}-${Math.random().toString(16).slice(3,8)}`),_u}var Ru,Hx;function qb(){if(Hx)return Ru;Hx=1;const n=Ff();let r=0;return Ru=({id:o,action:l,payload:c={}})=>{let f=o;return typeof f>"u"&&(f=n("Job",r),r+=1),{id:f,action:l,payload:c}},Ru}var Gi={},$x;function Bf(){if($x)return Gi;$x=1;let n=!1;return Gi.logging=n,Gi.setLogging=r=>{n=r},Gi.log=(...r)=>n?console.log.apply(this,r):null,Gi}var Tu,Px;function sA(){if(Px)return Tu;Px=1;const n=qb(),{log:r}=Bf(),o=Ff();let l=0;return Tu=()=>{const c=o("Scheduler",l),f={},m={};let g=[];l+=1;const b=()=>g.length,x=()=>Object.keys(f).length,y=()=>{if(g.length!==0){const D=Object.keys(f);for(let k=0;k<D.length;k+=1)if(typeof m[D[k]]>"u"){g[0](f[D[k]]);break}}},v=(D,k)=>new Promise((T,O)=>{const W=n({action:D,payload:k});g.push(async U=>{g.shift(),m[U.id]=W;try{T(await U[D].apply(this,[...k,W.id]))}catch(ee){O(ee)}finally{delete m[U.id],y()}}),r(`[${c}]: Add ${W.id} to JobQueue`),r(`[${c}]: JobQueue length=${g.length}`),y()});return{addWorker:D=>(f[D.id]=D,r(`[${c}]: Add ${D.id}`),r(`[${c}]: Number of workers=${x()}`),y(),D.id),addJob:async(D,...k)=>{if(x()===0)throw Error(`[${c}]: You need to have at least one worker before adding jobs`);return v(D,k)},terminate:async()=>{Object.keys(f).forEach(async D=>{await f[D].terminate()}),g=[]},getQueueLen:b,getNumWorkers:x}},Tu}function nA(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mu,Gx;function rA(){return Gx||(Gx=1,Mu=n=>{const r={};return typeof WorkerGlobalScope<"u"?r.type="webworker":typeof document=="object"?r.type="browser":typeof process=="object"&&typeof nA=="function"&&(r.type="node"),typeof n>"u"?r:r[n]}),Mu}var Ou,Ix;function iA(){if(Ix)return Ou;Ix=1;const r=rA()("type")==="browser"?o=>new URL(o,window.location.href).href:o=>o;return Ou=o=>{const l={...o};return["corePath","workerPath","langPath"].forEach(c=>{o[c]&&(l[c]=r(l[c]))}),l},Ou}var Du,Vx;function Hb(){return Vx||(Vx=1,Du={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Du}const lA="7.0.0",oA={version:lA};var Lu,Yx;function cA(){return Yx||(Yx=1,Lu={workerBlobURL:!0,logger:()=>{}}),Lu}var Uu,Xx;function dA(){if(Xx)return Uu;Xx=1;const n=oA.version;return Uu={...cA(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`},Uu}var zu,Qx;function uA(){return Qx||(Qx=1,zu=({workerPath:n,workerBlobURL:r})=>{let o;if(Blob&&URL&&r){const l=new Blob([`importScripts("${n}");`],{type:"application/javascript"});o=new Worker(URL.createObjectURL(l))}else o=new Worker(n);return o}),zu}var Fu,Wx;function fA(){return Wx||(Wx=1,Fu=n=>{n.terminate()}),Fu}var Bu,Zx;function mA(){return Zx||(Zx=1,Bu=(n,r)=>{n.onmessage=({data:o})=>{r(o)}}),Bu}var qu,Kx;function hA(){return Kx||(Kx=1,qu=async(n,r)=>{n.postMessage(r)}),qu}var Hu,Jx;function gA(){if(Jx)return Hu;Jx=1;const n=o=>new Promise((l,c)=>{const f=new FileReader;f.onload=()=>{l(f.result)},f.onerror=({target:{error:{code:m}}})=>{c(Error(`File could not be read! Code=${m}`))},f.readAsArrayBuffer(o)}),r=async o=>{let l=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?l=atob(o.split(",")[1]).split("").map(c=>c.charCodeAt(0)):l=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(l=await r(o.src)),o.tagName==="VIDEO"&&(l=await r(o.poster)),o.tagName==="CANVAS"&&await new Promise(c=>{o.toBlob(async f=>{l=await n(f),c()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const c=await o.convertToBlob();l=await n(c)}else(o instanceof File||o instanceof Blob)&&(l=await n(o));return new Uint8Array(l)};return Hu=r,Hu}var $u,ep;function xA(){if(ep)return $u;ep=1;const n=dA(),r=uA(),o=fA(),l=mA(),c=hA(),f=gA();return $u={defaultOptions:n,spawnWorker:r,terminateWorker:o,onMessage:l,send:c,loadImage:f},$u}var Pu,tp;function $b(){if(tp)return Pu;tp=1;const n=iA(),r=qb(),{log:o}=Bf(),l=Ff(),c=Hb(),{defaultOptions:f,spawnWorker:m,terminateWorker:g,onMessage:b,loadImage:x,send:y}=xA();let v=0;return Pu=async(S="eng",R=c.LSTM_ONLY,C={},D={})=>{const k=l("Worker",v),{logger:T,errorHandler:O,...W}=n({...f,...C}),U={},ee=typeof S=="string"?S.split("+"):S;let K=R,$=D;const N=[c.DEFAULT,c.LSTM_ONLY].includes(R)&&!W.legacyCore;let E,G;const V=new Promise((Q,ue)=>{G=Q,E=ue}),le=Q=>{E(Q.message)};let oe=m(W);oe.onerror=le,v+=1;const ve=({id:Q,action:ue,payload:we})=>new Promise((Oe,he)=>{o(`[${k}]: Start ${Q}, action=${ue}`);const Me=`${ue}-${Q}`;U[Me]={resolve:Oe,reject:he},y(oe,{workerId:k,jobId:Q,action:ue,payload:we})}),Re=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),H=Q=>ve(r({id:Q,action:"load",payload:{options:{lstmOnly:N,corePath:W.corePath,logging:W.logging}}})),I=(Q,ue,we)=>ve(r({id:we,action:"FS",payload:{method:"writeFile",args:[Q,ue]}})),X=(Q,ue)=>ve(r({id:ue,action:"FS",payload:{method:"readFile",args:[Q,{encoding:"utf8"}]}})),z=(Q,ue)=>ve(r({id:ue,action:"FS",payload:{method:"unlink",args:[Q]}})),M=(Q,ue,we)=>ve(r({id:we,action:"FS",payload:{method:Q,args:ue}})),w=(Q,ue)=>ve(r({id:ue,action:"loadLanguage",payload:{langs:Q,options:{langPath:W.langPath,dataPath:W.dataPath,cachePath:W.cachePath,cacheMethod:W.cacheMethod,gzip:W.gzip,lstmOnly:[c.DEFAULT,c.LSTM_ONLY].includes(K)&&!W.legacyLang}}})),A=(Q,ue,we,Oe)=>ve(r({id:Oe,action:"initialize",payload:{langs:Q,oem:ue,config:we}})),_=(Q="eng",ue,we,Oe)=>{if(N&&[c.TESSERACT_ONLY,c.TESSERACT_LSTM_COMBINED].includes(ue))throw Error("Legacy model requested but code missing.");const he=ue||K;K=he;const Me=we||$;$=Me;const De=(typeof Q=="string"?Q.split("+"):Q).filter(P=>!ee.includes(P));return ee.push(...De),De.length>0?w(De,Oe).then(()=>A(Q,he,Me,Oe)):A(Q,he,Me,Oe)},F=(Q={},ue)=>ve(r({id:ue,action:"setParameters",payload:{params:Q}})),de=async(Q,ue={},we={text:!0},Oe)=>ve(r({id:Oe,action:"recognize",payload:{image:await x(Q),options:ue,output:we}})),xe=async(Q,ue)=>{if(N)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return ve(r({id:ue,action:"detect",payload:{image:await x(Q)}}))},L=async()=>(oe!==null&&(g(oe),oe=null),Promise.resolve());b(oe,({workerId:Q,jobId:ue,status:we,action:Oe,data:he})=>{const Me=`${Oe}-${ue}`;if(we==="resolve")o(`[${Q}]: Complete ${ue}`),U[Me].resolve({jobId:ue,data:he}),delete U[Me];else if(we==="reject")if(U[Me].reject(he),delete U[Me],Oe==="load"&&E(he),O)O(he);else throw Error(he);else we==="progress"&&T({...he,userJobId:ue})});const B={id:k,worker:oe,load:Re,writeText:I,readText:X,removeFile:z,FS:M,reinitialize:_,setParameters:F,recognize:de,detect:xe,terminate:L};return H().then(()=>w(S)).then(()=>A(S,R,D)).then(()=>G(B)).catch(()=>{}),V},Pu}var Gu,ap;function pA(){if(ap)return Gu;ap=1;const n=$b();return Gu={recognize:async(l,c,f)=>{const m=await n(c,1,f);return m.recognize(l).finally(async()=>{await m.terminate()})},detect:async(l,c)=>{const f=await n("osd",0,c);return f.detect(l).finally(async()=>{await f.terminate()})}},Gu}var Iu,sp;function bA(){return sp||(sp=1,Iu={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Iu}var Vu,np;function yA(){return np||(np=1,Vu={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Vu}var Yu,rp;function vA(){if(rp)return Yu;rp=1,aA();const n=sA(),r=$b(),o=pA(),l=bA(),c=Hb(),f=yA(),{setLogging:m}=Bf();return Yu={languages:l,OEM:c,PSM:f,createScheduler:n,createWorker:r,setLogging:m,...o},Yu}var wA=vA();const NA=uf(wA),jA=async n=>{try{return(await Qe.post("/forms/templates",n)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to create template"}}},Pb=async(n,r)=>{try{return(await Qe.patch(`/forms/templates/${n}`,r)).data}catch(o){return{success:!1,message:o.response?.data?.message||"Failed to update template"}}},Gb=async n=>{try{return(await Qe.get(`/forms/templates/${n}`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to fetch template details"}}},SA=async n=>{try{return(await Qe.post("/forms/submit",n)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to submit data"}}},kA=async n=>{try{return(await Qe.delete(`/forms/templates/${n}`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to delete template"}}},EA=async(n,r,o)=>{try{return(await Qe.post(`/forms/templates/${n}/share-copy`,{targetUserIds:r,deadline:o})).data}catch(l){return{success:!1,message:l.response?.data?.message||"Failed to share template copies"}}},AA=async n=>{try{return(await Qe.patch("/forms/submit",n)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to update form data"}}},Ib=async n=>{try{return(await Qe.get(`/forms/templates/${n}/submissions`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to fetch submissions"}}},CA=async n=>{try{const r=n?new URLSearchParams(n).toString():"";return(await Qe.get(`/forms/shared/with-me?${r}`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to fetch shared forms"}}},_A=async n=>{try{const r=n?new URLSearchParams(n).toString():"";return(await Qe.get(`/forms/shared/by-me?${r}`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to fetch distributed forms"}}},RA=async(n,r)=>{try{return(await Qe.patch(`/forms/templates/${n}/archive`,{archive:r})).data}catch(o){return{success:!1,message:o.response?.data?.message||"Failed to update archive status"}}},TA=async n=>{try{return(await Qe.post("/blueprints",n)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to create blueprint"}}},MA=async(n=!1)=>{try{return(await Qe.get(`/blueprints${n?"?mineOnly=true":""}`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to fetch blueprints"}}},OA=async n=>{try{return(await Qe.get(`/blueprints/${n}`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to fetch blueprint details"}}},DA=async n=>{try{return(await Qe.delete(`/blueprints/${n}`)).data}catch(r){return{success:!1,message:r.response?.data?.message||"Failed to delete blueprint"}}};var Oo={exports:{}};var LA=Oo.exports,ip;function UA(){return ip||(ip=1,(function(n,r){((o,l)=>{n.exports=l()})(LA,function o(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},c,f=!l.document&&!!l.postMessage,m=l.IS_PAPA_WORKER||!1,g={},b=0,x={};function y(N){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(E){var G=ee(E);G.chunkSize=parseInt(G.chunkSize),E.step||E.chunk||(G.chunkSize=null),this._handle=new D(G),(this._handle.streamer=this)._config=G}).call(this,N),this.parseChunk=function(E,G){var V=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<V){let oe=this._config.newline;oe||(le=this._config.quoteChar||'"',oe=this._handle.guessLineEndings(E,le)),E=[...E.split(oe).slice(V)].join(oe)}this.isFirstChunk&&$(this._config.beforeFirstChunk)&&(le=this._config.beforeFirstChunk(E))!==void 0&&(E=le),this.isFirstChunk=!1,this._halted=!1;var V=this._partialLine+E,le=(this._partialLine="",this._handle.parse(V,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(E=le.meta.cursor,V=(this._finished||(this._partialLine=V.substring(E-this._baseIndex),this._baseIndex=E),le&&le.data&&(this._rowCount+=le.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),m)l.postMessage({results:le,workerId:x.WORKER_ID,finished:V});else if($(this._config.chunk)&&!G){if(this._config.chunk(le,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=le=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(le.data),this._completeResults.errors=this._completeResults.errors.concat(le.errors),this._completeResults.meta=le.meta),this._completed||!V||!$(this._config.complete)||le&&le.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),V||le&&le.meta.paused||this._nextChunk(),le}this._halted=!0},this._sendError=function(E){$(this._config.error)?this._config.error(E):m&&this._config.error&&l.postMessage({workerId:x.WORKER_ID,error:E,finished:!1})}}function v(N){var E;(N=N||{}).chunkSize||(N.chunkSize=x.RemoteChunkSize),y.call(this,N),this._nextChunk=f?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(G){this._input=G,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(E=new XMLHttpRequest,this._config.withCredentials&&(E.withCredentials=this._config.withCredentials),f||(E.onload=K(this._chunkLoaded,this),E.onerror=K(this._chunkError,this)),E.open(this._config.downloadRequestBody?"POST":"GET",this._input,!f),this._config.downloadRequestHeaders){var G,V=this._config.downloadRequestHeaders;for(G in V)E.setRequestHeader(G,V[G])}var le;this._config.chunkSize&&(le=this._start+this._config.chunkSize-1,E.setRequestHeader("Range","bytes="+this._start+"-"+le));try{E.send(this._config.downloadRequestBody)}catch(oe){this._chunkError(oe.message)}f&&E.status===0&&this._chunkError()}},this._chunkLoaded=function(){E.readyState===4&&(E.status<200||400<=E.status?this._chunkError():(this._start+=this._config.chunkSize||E.responseText.length,this._finished=!this._config.chunkSize||this._start>=(G=>(G=G.getResponseHeader("Content-Range"))!==null?parseInt(G.substring(G.lastIndexOf("/")+1)):-1)(E),this.parseChunk(E.responseText)))},this._chunkError=function(G){G=E.statusText||G,this._sendError(new Error(G))}}function S(N){(N=N||{}).chunkSize||(N.chunkSize=x.LocalChunkSize),y.call(this,N);var E,G,V=typeof FileReader<"u";this.stream=function(le){this._input=le,G=le.slice||le.webkitSlice||le.mozSlice,V?((E=new FileReader).onload=K(this._chunkLoaded,this),E.onerror=K(this._chunkError,this)):E=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var le=this._input,oe=(this._config.chunkSize&&(oe=Math.min(this._start+this._config.chunkSize,this._input.size),le=G.call(le,this._start,oe)),E.readAsText(le,this._config.encoding));V||this._chunkLoaded({target:{result:oe}})},this._chunkLoaded=function(le){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(le.target.result)},this._chunkError=function(){this._sendError(E.error)}}function R(N){var E;y.call(this,N=N||{}),this.stream=function(G){return E=G,this._nextChunk()},this._nextChunk=function(){var G,V;if(!this._finished)return G=this._config.chunkSize,E=G?(V=E.substring(0,G),E.substring(G)):(V=E,""),this._finished=!E,this.parseChunk(V)}}function C(N){y.call(this,N=N||{});var E=[],G=!0,V=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(le){this._input=le,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){V&&E.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),E.length?this.parseChunk(E.shift()):G=!0},this._streamData=K(function(le){try{E.push(typeof le=="string"?le:le.toString(this._config.encoding)),G&&(G=!1,this._checkIsFinished(),this.parseChunk(E.shift()))}catch(oe){this._streamError(oe)}},this),this._streamError=K(function(le){this._streamCleanUp(),this._sendError(le)},this),this._streamEnd=K(function(){this._streamCleanUp(),V=!0,this._streamData("")},this),this._streamCleanUp=K(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function D(N){var E,G,V,le,oe=Math.pow(2,53),ve=-oe,Re=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,I=this,X=0,z=0,M=!1,w=!1,A=[],_={data:[],errors:[],meta:{}};function F(B){return N.skipEmptyLines==="greedy"?B.join("").trim()==="":B.length===1&&B[0].length===0}function de(){if(_&&V&&(L("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),V=!1),N.skipEmptyLines&&(_.data=_.data.filter(function(Oe){return!F(Oe)})),xe()){let Oe=function(he,Me){$(N.transformHeader)&&(he=N.transformHeader(he,Me)),A.push(he)};var we=Oe;if(_)if(Array.isArray(_.data[0])){for(var B=0;xe()&&B<_.data.length;B++)_.data[B].forEach(Oe);_.data.splice(0,1)}else _.data.forEach(Oe)}function Q(Oe,he){for(var Me=N.header?{}:[],Ue=0;Ue<Oe.length;Ue++){var De=Ue,P=Oe[Ue],P=((je,Ce)=>(pe=>(N.dynamicTypingFunction&&N.dynamicTyping[pe]===void 0&&(N.dynamicTyping[pe]=N.dynamicTypingFunction(pe)),(N.dynamicTyping[pe]||N.dynamicTyping)===!0))(je)?Ce==="true"||Ce==="TRUE"||Ce!=="false"&&Ce!=="FALSE"&&((pe=>{if(Re.test(pe)&&(pe=parseFloat(pe),ve<pe&&pe<oe))return 1})(Ce)?parseFloat(Ce):H.test(Ce)?new Date(Ce):Ce===""?null:Ce):Ce)(De=N.header?Ue>=A.length?"__parsed_extra":A[Ue]:De,P=N.transform?N.transform(P,De):P);De==="__parsed_extra"?(Me[De]=Me[De]||[],Me[De].push(P)):Me[De]=P}return N.header&&(Ue>A.length?L("FieldMismatch","TooManyFields","Too many fields: expected "+A.length+" fields but parsed "+Ue,z+he):Ue<A.length&&L("FieldMismatch","TooFewFields","Too few fields: expected "+A.length+" fields but parsed "+Ue,z+he)),Me}var ue;_&&(N.header||N.dynamicTyping||N.transform)&&(ue=1,!_.data.length||Array.isArray(_.data[0])?(_.data=_.data.map(Q),ue=_.data.length):_.data=Q(_.data,0),N.header&&_.meta&&(_.meta.fields=A),z+=ue)}function xe(){return N.header&&A.length===0}function L(B,Q,ue,we){B={type:B,code:Q,message:ue},we!==void 0&&(B.row=we),_.errors.push(B)}$(N.step)&&(le=N.step,N.step=function(B){_=B,xe()?de():(de(),_.data.length!==0&&(X+=B.data.length,N.preview&&X>N.preview?G.abort():(_.data=_.data[0],le(_,I))))}),this.parse=function(B,Q,ue){var we=N.quoteChar||'"',we=(N.newline||(N.newline=this.guessLineEndings(B,we)),V=!1,N.delimiter?$(N.delimiter)&&(N.delimiter=N.delimiter(B),_.meta.delimiter=N.delimiter):((we=((Oe,he,Me,Ue,De)=>{var P,je,Ce,pe;De=De||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var $e=0;$e<De.length;$e++){for(var Ve,at=De[$e],ae=0,ne=0,ke=0,Ee=(Ce=void 0,new T({comments:Ue,delimiter:at,newline:he,preview:10}).parse(Oe)),Z=0;Z<Ee.data.length;Z++)Me&&F(Ee.data[Z])?ke++:(Ve=Ee.data[Z].length,ne+=Ve,Ce===void 0?Ce=Ve:0<Ve&&(ae+=Math.abs(Ve-Ce),Ce=Ve));0<Ee.data.length&&(ne/=Ee.data.length-ke),(je===void 0||ae<=je)&&(pe===void 0||pe<ne)&&1.99<ne&&(je=ae,P=at,pe=ne)}return{successful:!!(N.delimiter=P),bestDelimiter:P}})(B,N.newline,N.skipEmptyLines,N.comments,N.delimitersToGuess)).successful?N.delimiter=we.bestDelimiter:(V=!0,N.delimiter=x.DefaultDelimiter),_.meta.delimiter=N.delimiter),ee(N));return N.preview&&N.header&&we.preview++,E=B,G=new T(we),_=G.parse(E,Q,ue),de(),M?{meta:{paused:!0}}:_||{meta:{paused:!1}}},this.paused=function(){return M},this.pause=function(){M=!0,G.abort(),E=$(N.chunk)?"":E.substring(G.getCharIndex())},this.resume=function(){I.streamer._halted?(M=!1,I.streamer.parseChunk(E,!0)):setTimeout(I.resume,3)},this.aborted=function(){return w},this.abort=function(){w=!0,G.abort(),_.meta.aborted=!0,$(N.complete)&&N.complete(_),E=""},this.guessLineEndings=function(Oe,we){Oe=Oe.substring(0,1048576);var we=new RegExp(k(we)+"([^]*?)"+k(we),"gm"),ue=(Oe=Oe.replace(we,"")).split("\r"),we=Oe.split(`
`),Oe=1<we.length&&we[0].length<ue[0].length;if(ue.length===1||Oe)return`
`;for(var he=0,Me=0;Me<ue.length;Me++)ue[Me][0]===`
`&&he++;return he>=ue.length/2?`\r
`:"\r"}}function k(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(N){var E=(N=N||{}).delimiter,G=N.newline,V=N.comments,le=N.step,oe=N.preview,ve=N.fastMode,Re=null,H=!1,I=N.quoteChar==null?'"':N.quoteChar,X=I;if(N.escapeChar!==void 0&&(X=N.escapeChar),(typeof E!="string"||-1<x.BAD_DELIMITERS.indexOf(E))&&(E=","),V===E)throw new Error("Comment character same as delimiter");V===!0?V="#":(typeof V!="string"||-1<x.BAD_DELIMITERS.indexOf(V))&&(V=!1),G!==`
`&&G!=="\r"&&G!==`\r
`&&(G=`
`);var z=0,M=!1;this.parse=function(w,A,_){if(typeof w!="string")throw new Error("Input must be a string");var F=w.length,de=E.length,xe=G.length,L=V.length,B=$(le),Q=[],ue=[],we=[],Oe=z=0;if(!w)return ae();if(ve||ve!==!1&&w.indexOf(I)===-1){for(var he=w.split(G),Me=0;Me<he.length;Me++){if(we=he[Me],z+=we.length,Me!==he.length-1)z+=G.length;else if(_)return ae();if(!V||we.substring(0,L)!==V){if(B){if(Q=[],pe(we.split(E)),ne(),M)return ae()}else pe(we.split(E));if(oe&&oe<=Me)return Q=Q.slice(0,oe),ae(!0)}}return ae()}for(var Ue=w.indexOf(E,z),De=w.indexOf(G,z),P=new RegExp(k(X)+k(I),"g"),je=w.indexOf(I,z);;)if(w[z]===I)for(je=z,z++;;){if((je=w.indexOf(I,je+1))===-1)return _||ue.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Q.length,index:z}),Ve();if(je===F-1)return Ve(w.substring(z,je).replace(P,I));if(I===X&&w[je+1]===X)je++;else if(I===X||je===0||w[je-1]!==X){Ue!==-1&&Ue<je+1&&(Ue=w.indexOf(E,je+1));var Ce=$e((De=De!==-1&&De<je+1?w.indexOf(G,je+1):De)===-1?Ue:Math.min(Ue,De));if(w.substr(je+1+Ce,de)===E){we.push(w.substring(z,je).replace(P,I)),w[z=je+1+Ce+de]!==I&&(je=w.indexOf(I,z)),Ue=w.indexOf(E,z),De=w.indexOf(G,z);break}if(Ce=$e(De),w.substring(je+1+Ce,je+1+Ce+xe)===G){if(we.push(w.substring(z,je).replace(P,I)),at(je+1+Ce+xe),Ue=w.indexOf(E,z),je=w.indexOf(I,z),B&&(ne(),M))return ae();if(oe&&Q.length>=oe)return ae(!0);break}ue.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Q.length,index:z}),je++}}else if(V&&we.length===0&&w.substring(z,z+L)===V){if(De===-1)return ae();z=De+xe,De=w.indexOf(G,z),Ue=w.indexOf(E,z)}else if(Ue!==-1&&(Ue<De||De===-1))we.push(w.substring(z,Ue)),z=Ue+de,Ue=w.indexOf(E,z);else{if(De===-1)break;if(we.push(w.substring(z,De)),at(De+xe),B&&(ne(),M))return ae();if(oe&&Q.length>=oe)return ae(!0)}return Ve();function pe(ke){Q.push(ke),Oe=z}function $e(ke){var Ee=0;return Ee=ke!==-1&&(ke=w.substring(je+1,ke))&&ke.trim()===""?ke.length:Ee}function Ve(ke){return _||(ke===void 0&&(ke=w.substring(z)),we.push(ke),z=F,pe(we),B&&ne()),ae()}function at(ke){z=ke,pe(we),we=[],De=w.indexOf(G,z)}function ae(ke){if(N.header&&!A&&Q.length&&!H){var Ee=Q[0],Z=Object.create(null),Ne=new Set(Ee);let Se=!1;for(let se=0;se<Ee.length;se++){let Ae=Ee[se];if(Z[Ae=$(N.transformHeader)?N.transformHeader(Ae,se):Ae]){let ze,Ie=Z[Ae];for(;ze=Ae+"_"+Ie,Ie++,Ne.has(ze););Ne.add(ze),Ee[se]=ze,Z[Ae]++,Se=!0,(Re=Re===null?{}:Re)[ze]=Ae}else Z[Ae]=1,Ee[se]=Ae;Ne.add(Ae)}Se&&console.warn("Duplicate headers found and renamed."),H=!0}return{data:Q,errors:ue,meta:{delimiter:E,linebreak:G,aborted:M,truncated:!!ke,cursor:Oe+(A||0),renamedHeaders:Re}}}function ne(){le(ae()),Q=[],ue=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return z}}function O(N){var E=N.data,G=g[E.workerId],V=!1;if(E.error)G.userError(E.error,E.file);else if(E.results&&E.results.data){var le={abort:function(){V=!0,W(E.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if($(G.userStep)){for(var oe=0;oe<E.results.data.length&&(G.userStep({data:E.results.data[oe],errors:E.results.errors,meta:E.results.meta},le),!V);oe++);delete E.results}else $(G.userChunk)&&(G.userChunk(E.results,le,E.file),delete E.results)}E.finished&&!V&&W(E.workerId,E.results)}function W(N,E){var G=g[N];$(G.userComplete)&&G.userComplete(E),G.terminate(),delete g[N]}function U(){throw new Error("Not implemented.")}function ee(N){if(typeof N!="object"||N===null)return N;var E,G=Array.isArray(N)?[]:{};for(E in N)G[E]=ee(N[E]);return G}function K(N,E){return function(){N.apply(E,arguments)}}function $(N){return typeof N=="function"}return x.parse=function(N,E){var G=(E=E||{}).dynamicTyping||!1;if($(G)&&(E.dynamicTypingFunction=G,G={}),E.dynamicTyping=G,E.transform=!!$(E.transform)&&E.transform,!E.worker||!x.WORKERS_SUPPORTED)return G=null,x.NODE_STREAM_INPUT,typeof N=="string"?(N=(V=>V.charCodeAt(0)!==65279?V:V.slice(1))(N),G=new(E.download?v:R)(E)):N.readable===!0&&$(N.read)&&$(N.on)?G=new C(E):(l.File&&N instanceof File||N instanceof Object)&&(G=new S(E)),G.stream(N);(G=(()=>{var V;return!!x.WORKERS_SUPPORTED&&(V=(()=>{var le=l.URL||l.webkitURL||null,oe=o.toString();return x.BLOB_URL||(x.BLOB_URL=le.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",oe,")();"],{type:"text/javascript"})))})(),(V=new l.Worker(V)).onmessage=O,V.id=b++,g[V.id]=V)})()).userStep=E.step,G.userChunk=E.chunk,G.userComplete=E.complete,G.userError=E.error,E.step=$(E.step),E.chunk=$(E.chunk),E.complete=$(E.complete),E.error=$(E.error),delete E.worker,G.postMessage({input:N,config:E,workerId:G.id})},x.unparse=function(N,E){var G=!1,V=!0,le=",",oe=`\r
`,ve='"',Re=ve+ve,H=!1,I=null,X=!1,z=((()=>{if(typeof E=="object"){if(typeof E.delimiter!="string"||x.BAD_DELIMITERS.filter(function(A){return E.delimiter.indexOf(A)!==-1}).length||(le=E.delimiter),typeof E.quotes!="boolean"&&typeof E.quotes!="function"&&!Array.isArray(E.quotes)||(G=E.quotes),typeof E.skipEmptyLines!="boolean"&&typeof E.skipEmptyLines!="string"||(H=E.skipEmptyLines),typeof E.newline=="string"&&(oe=E.newline),typeof E.quoteChar=="string"&&(ve=E.quoteChar),typeof E.header=="boolean"&&(V=E.header),Array.isArray(E.columns)){if(E.columns.length===0)throw new Error("Option columns is empty");I=E.columns}E.escapeChar!==void 0&&(Re=E.escapeChar+ve),E.escapeFormulae instanceof RegExp?X=E.escapeFormulae:typeof E.escapeFormulae=="boolean"&&E.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(ve),"g"));if(typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(N)){if(!N.length||Array.isArray(N[0]))return M(null,N,H);if(typeof N[0]=="object")return M(I||Object.keys(N[0]),N,H)}else if(typeof N=="object")return typeof N.data=="string"&&(N.data=JSON.parse(N.data)),Array.isArray(N.data)&&(N.fields||(N.fields=N.meta&&N.meta.fields||I),N.fields||(N.fields=Array.isArray(N.data[0])?N.fields:typeof N.data[0]=="object"?Object.keys(N.data[0]):[]),Array.isArray(N.data[0])||typeof N.data[0]=="object"||(N.data=[N.data])),M(N.fields||[],N.data||[],H);throw new Error("Unable to serialize unrecognized input");function M(A,_,F){var de="",xe=(typeof A=="string"&&(A=JSON.parse(A)),typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(A)&&0<A.length),L=!Array.isArray(_[0]);if(xe&&V){for(var B=0;B<A.length;B++)0<B&&(de+=le),de+=w(A[B],B);0<_.length&&(de+=oe)}for(var Q=0;Q<_.length;Q++){var ue=(xe?A:_[Q]).length,we=!1,Oe=xe?Object.keys(_[Q]).length===0:_[Q].length===0;if(F&&!xe&&(we=F==="greedy"?_[Q].join("").trim()==="":_[Q].length===1&&_[Q][0].length===0),F==="greedy"&&xe){for(var he=[],Me=0;Me<ue;Me++){var Ue=L?A[Me]:Me;he.push(_[Q][Ue])}we=he.join("").trim()===""}if(!we){for(var De=0;De<ue;De++){0<De&&!Oe&&(de+=le);var P=xe&&L?A[De]:De;de+=w(_[Q][P],De)}Q<_.length-1&&(!F||0<ue&&!Oe)&&(de+=oe)}}return de}function w(A,_){var F,de;return A==null?"":A.constructor===Date?JSON.stringify(A).slice(1,25):(de=!1,X&&typeof A=="string"&&X.test(A)&&(A="'"+A,de=!0),F=A.toString().replace(z,Re),(de=de||G===!0||typeof G=="function"&&G(A,_)||Array.isArray(G)&&G[_]||((xe,L)=>{for(var B=0;B<L.length;B++)if(-1<xe.indexOf(L[B]))return!0;return!1})(F,x.BAD_DELIMITERS)||-1<F.indexOf(le)||F.charAt(0)===" "||F.charAt(F.length-1)===" ")?ve+F+ve:F)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!f&&!!l.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=T,x.ParserHandle=D,x.NetworkStreamer=v,x.FileStreamer=S,x.StringStreamer=R,x.ReadableStreamStreamer=C,l.jQuery&&((c=l.jQuery).fn.parse=function(N){var E=N.config||{},G=[];return this.each(function(oe){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var ve=0;ve<this.files.length;ve++)G.push({file:this.files[ve],inputElem:this,instanceConfig:c.extend({},E)})}),V(),this;function V(){if(G.length===0)$(N.complete)&&N.complete();else{var oe,ve,Re,H,I=G[0];if($(N.before)){var X=N.before(I.file,I.inputElem);if(typeof X=="object"){if(X.action==="abort")return oe="AbortError",ve=I.file,Re=I.inputElem,H=X.reason,void($(N.error)&&N.error({name:oe},ve,Re,H));if(X.action==="skip")return void le();typeof X.config=="object"&&(I.instanceConfig=c.extend(I.instanceConfig,X.config))}else if(X==="skip")return void le()}var z=I.instanceConfig.complete;I.instanceConfig.complete=function(M){$(z)&&z(M,I.file,I.inputElem),le()},x.parse(I.file,I.instanceConfig)}}function le(){G.splice(0,1),V()}}),m&&(l.onmessage=function(N){N=N.data,x.WORKER_ID===void 0&&N&&(x.WORKER_ID=N.workerId),typeof N.input=="string"?l.postMessage({workerId:x.WORKER_ID,results:x.parse(N.input,N.config),finished:!0}):(l.File&&N.input instanceof File||N.input instanceof Object)&&(N=x.parse(N.input,N.config))&&l.postMessage({workerId:x.WORKER_ID,results:N,finished:!0})}),(v.prototype=Object.create(y.prototype)).constructor=v,(S.prototype=Object.create(y.prototype)).constructor=S,(R.prototype=Object.create(R.prototype)).constructor=R,(C.prototype=Object.create(y.prototype)).constructor=C,x})})(Oo)),Oo.exports}var zA=UA();const Vb=uf(zA);function FA(){const n=Xt(),[r]=vf(),{showMessage:o}=Hs(),{user:l}=At(),c=r.get("edit"),f=r.get("useBlueprint"),m=r.get("distribute")==="true",[g,b]=h.useState(""),[x,y]=h.useState(!1),[v,S]=h.useState(null),[R,C]=h.useState(!1),[D,k]=h.useState(""),[T,O]=h.useState(""),[W,U]=h.useState(!1),[ee,K]=h.useState(!1),[$,N]=h.useState(!1),[E,G]=h.useState(!1),[V,le]=h.useState(null),[oe,ve]=h.useState(null),[Re,H]=h.useState({}),[I,X]=h.useState([]),[z,M]=h.useState([]),[w,A]=h.useState([]),[_]=h.useState("COLLECT"),[F,de]=h.useState(""),[xe,L]=h.useState([]),[B,Q]=h.useState([]),ue=h.useRef(null),we=h.useRef(null),Oe=h.useRef(null);h.useEffect(()=>{Ue(),c&&Me(c)},[c]),h.useEffect(()=>{f&&he(f)},[f]);const he=async Z=>{y(!0);try{const Ne=await OA(Z);if(Ne.success){const Se=Ne.data;S({title:Se.title,description:Se.description,fields:Se.fields}),k(Se.title),O(Se.description),ve(null),N(!0),setTimeout(()=>{Oe.current&&(Oe.current.focus(),Oe.current.select())},100)}}catch(Ne){console.error(Ne),o({title:"Error",message:"Failed to load blueprint.",type:"error"})}finally{y(!1)}},Me=async Z=>{y(!0);try{const Ne=await Gb(Z);if(Ne.success){const Se=Ne.data;S({title:Se.title,description:Se.description||"",fields:Se.fields}),k(Se.title),O(Se.description||""),ve(Se._id),G(Se.allowMultipleSubmissions||!1),de(Se.deadline?new Date(Se.deadline).toISOString().split("T")[0]:""),X(Se.sharedWithLabs||[]),A(Se.sharedWithUsers||[]),m?K(!0):N(!0)}}catch(Ne){console.error(Ne)}finally{y(!1)}},Ue=async()=>{try{const Z=await Pr(1,100);if(Z.success&&Z.data){const Ne=Array.isArray(Z.data)?Z.data:Z.data.users||[];Q(Ne);const Se=Array.from(new Set(Ne.map(se=>se.labName).filter(Boolean)));L(Se.sort().map(se=>({label:se,value:se})))}}catch(Z){console.error("Error fetching initial data:",Z)}},De=h.useMemo(()=>{if(I.length===0)return[];const Z=B.filter(Se=>I.includes(Se.labName));return Array.from(new Set(Z.map(Se=>Se.designation).filter(Boolean))).sort()},[B,I]),P=h.useMemo(()=>{const Z=B.filter(Ne=>!["admin","superadmin","delegated admin"].includes(Ne.role?.toLowerCase())&&Ne._id!==l?._id);return I.length===0||z.length===0?[]:Z.filter(Ne=>{const Se=I.includes(Ne.labName),se=z.includes(Ne.designation);return Se&&se})},[B,I,z,l]),je=async()=>{g.trim()&&(y(!0),S(null),N(!1),setTimeout(()=>{let Z=[],Ne="Custom Data Form";const Se=/((?:\d+[\.)]|\-)\s*[^0-9\.\-]+)/g,se=g.match(Se);se&&se.length>0?Z=se.map((ze,Ie)=>{const Pe=ze.replace(/^(\d+[\.)]|\-)\s*/,"").trim();return Ce(Pe,Ie)}):Z=g.split(/,|;|\n/).map(Ie=>Ie.trim()).filter(Ie=>Ie.length>2).map((Ie,Pe)=>Ce(Ie,Pe)),Z.length===0&&g.length>2&&Z.push(Ce(g,0)),Z.length>0&&(Ne=`Form: ${Z[0].label} & more`),g.toLowerCase().includes("feedback")&&(Ne="Feedback Form"),g.toLowerCase().includes("inventory")&&(Ne="Inventory Form"),g.toLowerCase().includes("registration")&&(Ne="Registration Form"),g.toLowerCase().includes("lab")&&(Ne="Lab Data Collection");const Ae={title:Ne,description:`Generated from prompt: "${g.substring(0,100)}${g.length>100?"...":""}"`,fields:Z};S(Ae),k(Ne),O(Ae.description),y(!1),N(!0)},800))},Ce=(Z,Ne)=>{const Se=Z.toLowerCase();let se="text",Ae,ze="",Ie={};if(Se.includes("date")||Se.includes("when")||Se.includes("time"))se="date";else if(Se.includes("choose")||Se.includes("select")||Se.includes("option")||Se.includes("dropdown")||Se.includes("list")||Se.includes("lab"))if(se="select",Se.includes("lab"))Ae=xe.length>0?xe:[{label:"Loading labs...",value:""}];else{const vt=Z.match(/\((.*?)\)/);vt?Ae=vt[1].split(",").map(_t=>({label:_t.trim(),value:_t.trim().toLowerCase().replace(/\s+/g,"_")})):Ae=[{label:"Option 1",value:"1"},{label:"Option 2",value:"2"}]}Se.includes("numeric")||Se.includes("number")||Se.includes("count")||Se.includes("strength")||Se.includes("mobile")||Se.includes("phone")||Se.includes("contact")?(Ie.isNumeric=!0,ze="Numbers only..."):Se.includes("email")&&(Ie.isEmail=!0,ze="e.g., user@example.com");let Pe=Z.replace(/^\d+[\.)]\s*/,"").replace(/dropdown/gi,"").replace(/select/gi,"").replace(/text box/gi,"").replace(/numeric/gi,"").replace(/number/gi,"").replace(/input/gi,"").replace(/field/gi,"").replace(/requesting/gi,"").replace(/required/gi,"").split(/(-|with|having|options)/i)[0].trim();return Pe=Pe.replace(/[:\-\.]$/,"").trim(),Pe.length<2&&(Pe=`Field ${Ne+1}`),Pe=Pe.charAt(0).toUpperCase()+Pe.slice(1),{id:`field_${Ne}_${Math.random().toString(36).substr(2,5)}`,type:se,label:Pe,placeholder:ze||`Enter ${Pe}`,required:!Se.includes("optional"),options:Ae,validation:Ie}},pe=Z=>{const Ne=Z.target.files?.[0];Ne&&$e(Ne)},$e=Z=>{if(C(!0),S(null),Z.size>100*1024){o({title:"Upload Failed",message:"File size exceeds 100KB limit.",type:"error"}),C(!1);return}Z.name.toLowerCase().endsWith(".csv")&&Vb.parse(Z,{header:!0,preview:1,complete:Ne=>{const Se=Ne.meta.fields||[];if(Se.length===0){o({title:"Empty CSV",message:"CSV file appears to be empty.",type:"error"}),C(!1);return}const se=Se.map((Ae,ze)=>({id:`field_${ze}`,type:"text",label:Ae.trim(),required:!1,placeholder:`Enter ${Ae}`}));S({title:"CSV Imported Form",description:`Form generated from ${Z.name}.`,fields:se}),k("CSV Imported Form"),O(`Form generated from ${Z.name}.`),C(!1),N(!0)}})},Ve=async Z=>{C(!0),S(null);try{const Ne=await NA.recognize(Z,"eng"),Se=Ne.data.lines||Ne.data.text?.split(`
`).map(ze=>({text:ze}))||[],se=[],Ae=new Set;Se.forEach((ze,Ie)=>{let Pe=ze.text?.trim()?.replace(/:$/,"")||"";Pe.length>2&&Pe.length<60&&!Ae.has(Pe)&&(se.push({id:`vis_field_${Ie}`,type:"text",label:Pe,required:!1,placeholder:`Enter ${Pe}...`}),Ae.add(Pe))}),se.length===0?o({title:"No Fields",message:"No fields identified.",type:"warning"}):(S({title:"Vision-Extracted Form",description:`Extracted from ${Z.name}.`,fields:se.slice(0,20)}),k("Vision-Extracted Form"),O(`Extracted from ${Z.name}.`),N(!0))}catch(Ne){console.error(Ne)}finally{C(!1)}},at=(Z,Ne)=>{v&&S({...v,fields:v.fields.map(Se=>Se.id===Z?{...Se,...Ne}:Se)})},ae=()=>{if(!v)return;const Z={id:`field_${Date.now()}`,type:"text",label:"New Field",placeholder:"Enter text here",required:!1};S({...v,fields:[...v.fields,Z]})},ne=Z=>{v&&S({...v,fields:v.fields.filter(Ne=>Ne.id!==Z)})},ke=async()=>{const Z=new Set(w);if(l?._id&&Z.has(l._id)&&Z.delete(l._id),Z.size===0){o({title:"Selection Required",message:"No users selected. Please check the users you want to share with.",type:"warning"});return}const Ne=Array.from(Z);if(_==="COLLECT")await Ee(!0,[],Ne);else{if(!oe&&!await Ee(!1))return;U(!0);try{const Se=await EA(oe,Ne,F||void 0);U(!1),Se.success?(le(`Template shared with ${Se.data.count} users!`),setTimeout(()=>le(null),3e3),K(!1)):o({title:"Share Failed",message:"Failed to share copy: "+Se.message,type:"error"})}catch(Se){console.error(Se),U(!1),o({title:"Error",message:"An error occurred while sharing.",type:"error"})}}},Ee=async(Z=!1,Ne,Se,se=!1)=>{if(!v)return!1;if(!D||!T)return o({title:"Missing Information",message:"Please provide both a Title and Description for this form before proceeding.",type:"warning"}),!1;U(!0);const Ae={...v,title:D,description:T,sharedWithLabs:Ne??I,sharedWithUsers:Se??w,allowMultipleSubmissions:E,deadline:F||void 0,notifyUsers:Z,isActive:!0};try{let ze;return se?ze=await TA(Ae):ze=oe?await Pb(oe,Ae):await jA(Ae),U(!1),ze.success?(le(se?"Blueprint saved successfully!":Z?"Form distributed successfully!":"Template saved successfully!"),setTimeout(()=>le(null),3e3),se?(n("/data-collection/saved"),!0):(!oe&&ze.data?._id&&ve(ze.data._id),Z?(K(!1),n("/data-collection/shared",{state:{activeTab:"by-me"}})):N(!1),!0)):(o({title:"Save Failed",message:"Failed to save: "+ze.message,type:"error"}),!1)}catch(ze){return console.error(ze),U(!1),o({title:"Error",message:"An error occurred while saving.",type:"error"}),!1}};return a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-8",children:[a.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[v&&a.jsx("button",{onClick:()=>{c||f?n("/data-collection/saved"):(S(null),b(""))},className:"p-2.5 bg-white border border-gray-100 rounded-xl hover:bg-gray-50 transition-all shadow-sm hover:shadow group",title:c||f?"Back to Templates":"Back to Generation",children:a.jsx(Qo,{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600 transition-colors"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1 font-headline tracking-tighter",children:"Design Center"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold tracking-widest opacity-60",children:"DYNAMIC FORM ARCHITECT"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[V&&a.jsxs("div",{className:"px-4 py-2 bg-emerald-50 text-emerald-600 rounded-lg text-sm font-bold animate-in fade-in border border-emerald-100 shadow-sm flex items-center gap-2",children:[a.jsx(na,{className:"w-4 h-4"}),V]}),v&&a.jsxs(a.Fragment,{children:[a.jsx(Le,{variant:$?"primary":"secondary",size:"sm",label:$?"Preview Design":"Refine Structure",onClick:()=>N(!$),icon:a.jsx(d4,{className:"w-4 h-4"})}),a.jsx(Le,{variant:"secondary",size:"sm",label:"Save as Blueprint",onClick:()=>Ee(!1,void 0,void 0,!0),icon:a.jsx(os,{className:"w-4 h-4"}),disabled:W}),a.jsx(Le,{variant:"secondary",size:"sm",label:"Distribute",onClick:()=>{if(!D||!T){o({title:"Missing Information",message:"Please provide both a Title and Description before distributing.",type:"warning"});return}K(!0)},icon:a.jsx(Ii,{className:"w-4 h-4"}),disabled:$})]})]})]}),!v&&!x&&!R?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs(Va,{className:"border-indigo-100 shadow-md flex flex-col overflow-hidden bg-white",children:[a.jsx(Ya,{className:"bg-slate-50 border-b border-gray-100",children:a.jsxs(is,{className:"flex items-center gap-2 text-indigo-700",children:[a.jsx(cs,{className:"w-5 h-5"}),"AI Form Generator"]})}),a.jsxs(xn,{className:"pt-6 flex-1 flex flex-col gap-4",children:[a.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200 focus:ring-2 focus:ring-indigo-500 transition-all resize-none min-h-[140px] text-sm bg-gray-50/30 font-sans",placeholder:"e.g., Create a form for weekly progress reporting with project name, tasks completed, and challenges.",value:g,onChange:Z=>b(Z.target.value)}),a.jsx("div",{className:"mt-auto flex justify-end",children:a.jsx(Le,{onClick:je,loading:x,disabled:!g.trim(),icon:a.jsx(cs,{className:"w-4 h-4"}),label:"Generate Form"})})]})]}),a.jsxs(Va,{className:"border-indigo-100 shadow-md flex flex-col overflow-hidden bg-white",children:[a.jsx(Ya,{className:"bg-slate-50 border-b border-gray-100",children:a.jsxs(is,{className:"flex items-center gap-2 text-purple-700",children:[a.jsx(of,{className:"w-5 h-5"}),"CSV Template"]})}),a.jsxs(xn,{className:"pt-6 flex-1 flex flex-col gap-4",children:[a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center border-2 border-dashed border-gray-200 rounded-xl bg-gray-50/50 hover:bg-gray-100 transition-colors cursor-pointer p-8 group",onClick:()=>ue.current?.click(),children:[a.jsx("input",{type:"file",ref:ue,className:"hidden",accept:".csv",onChange:pe}),a.jsx(of,{className:"w-8 h-8 text-purple-600 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:"Upload CSV"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Extract fields from headers"})]}),a.jsx(Le,{variant:"secondary",className:"w-full",icon:a.jsx(ub,{className:"w-4 h-4"}),label:"Download CSV Template",onClick:()=>{const Z=`Field1,Field2,Field3
Value1,Value2,Value3`,Ne=new Blob([Z],{type:"text/csv"}),Se=window.URL.createObjectURL(Ne),se=document.createElement("a");se.href=Se,se.download="template.csv",se.click()}})]})]}),a.jsxs(Va,{className:"border-indigo-100 shadow-md flex flex-col overflow-hidden bg-white",children:[a.jsx(Ya,{className:"bg-slate-50 border-b border-gray-100",children:a.jsxs(is,{className:"flex items-center gap-2 text-orange-700",children:[a.jsx(lf,{className:"w-5 h-5"}),"AI Vision Analysis"]})}),a.jsx(xn,{className:"pt-6 flex-1 flex flex-col gap-4",children:a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center border-2 border-dashed border-gray-200 rounded-xl bg-gray-50/50 hover:bg-gray-100 transition-colors cursor-pointer p-8 group",onClick:()=>we.current?.click(),children:[a.jsx("input",{type:"file",ref:we,className:"hidden",accept:"image/*",onChange:Z=>Z.target.files?.[0]&&Ve(Z.target.files[0])}),a.jsx(lf,{className:"w-8 h-8 text-orange-600 mb-4 group-hover:scale-110 transition-transform"}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:"Analyze Form Image"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Extract fields using AI OCR"})]})})]})]}):x||R?a.jsxs("div",{className:"p-20 text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin mx-auto mb-6"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-headline tracking-tight mb-2 italic",children:R?"Analyzing Vision Patterns...":"Generating intelligent schema..."}),a.jsx("p",{className:"text-gray-500",children:"Please wait while our AI architect works..."})]}):a.jsxs(Va,{className:`shadow-xl border-none overflow-hidden transition-all duration-500 bg-white ${$?"ring-2 ring-indigo-500":""}`,children:[a.jsx(Ya,{className:`${$?"bg-indigo-600 text-white":"bg-slate-900 text-white"} p-8 transition-colors`,children:a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/10 backdrop-blur-md flex items-center justify-center border border-white/20",children:a.jsx(Ea,{className:"w-8 h-8"})}),a.jsx("div",{className:"flex-1",children:$?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{ref:Oe,type:"text",value:D,onChange:Z=>k(Z.target.value),className:"bg-transparent border-b-2 border-white/30 text-3xl font-bold font-headline tracking-tight text-white focus:outline-none focus:border-white w-full",placeholder:"Enter Form Title..."}),a.jsx("input",{type:"text",value:T,onChange:Z=>O(Z.target.value),className:"bg-transparent border-b border-white/10 text-indigo-100 text-sm focus:outline-none focus:border-white/30 w-full",placeholder:"Add a brief description..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"text-3xl font-bold font-headline tracking-tight text-white",children:D}),a.jsx("p",{className:"text-indigo-100/70 text-sm mt-1",children:T})]})}),$&&a.jsxs("div",{className:"flex flex-col gap-1 w-48",children:[a.jsx("label",{className:"text-[10px] font-bold text-indigo-100 uppercase tracking-widest ml-1",children:"Deadline (Optional)"}),a.jsx("input",{type:"date",value:F,onChange:Z=>de(Z.target.value),className:"bg-white/10 border border-white/20 rounded-xl px-3 py-2 text-xs text-white focus:outline-none focus:border-white/40 transition-all backdrop-blur-sm",min:new Date().toISOString().split("T")[0]})]})]})}),a.jsxs(xn,{className:"pt-10 pb-12",children:[!$&&a.jsxs("div",{className:"max-w-xl mx-auto mb-10 bg-indigo-50/50 border border-indigo-100 p-4 rounded-2xl flex items-center justify-center gap-4 animate-in slide-in-from-top-4 duration-500",children:[a.jsx("div",{className:"flex -space-x-2",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center text-white ring-2 ring-white",children:a.jsx(rs,{className:"w-4 h-4"})})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-indigo-900 text-sm font-bold tracking-tight",children:"Interactive Preview Mode"}),a.jsx("p",{className:"text-indigo-600/70 text-[10px] uppercase font-bold tracking-widest",children:"Testing input behavior only  Data will not be saved"})]}),a.jsx("div",{className:"ml-auto",children:a.jsx("span",{className:"px-2 py-1 bg-white rounded-lg border border-indigo-100 text-[10px] font-bold text-indigo-600 shadow-sm",children:"ACTIVE TEST"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8 max-w-5xl mx-auto",children:[v?.fields.map(Z=>a.jsxs("div",{className:`${Z.type==="checkbox"?"md:col-span-2":""} relative group transition-all`,children:[$&&a.jsx("button",{onClick:()=>ne(Z.id),className:"absolute -top-3 -right-3 w-8 h-8 rounded-full bg-red-500 text-white flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10",children:a.jsx(qt,{className:"w-4 h-4",onClick:Ne=>Ne.stopPropagation()})}),$?a.jsxs("div",{className:"p-6 rounded-2xl border-2 border-dashed border-indigo-100 bg-indigo-50/10 space-y-4",children:[a.jsx(Vt,{label:"Field Label",value:Z.label,onChange:Ne=>at(Z.id,{label:Ne.target.value})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-2",children:"Type"}),a.jsxs("select",{className:"w-full p-2.5 rounded-xl border border-gray-200 text-sm font-sans",value:Z.type,onChange:Ne=>at(Z.id,{type:Ne.target.value}),children:[a.jsx("option",{value:"text",children:"Text Input"}),a.jsx("option",{value:"select",children:"Dropdown"}),a.jsx("option",{value:"date",children:"Date Picker"}),a.jsx("option",{value:"radio",children:"Radio"}),a.jsx("option",{value:"checkbox",children:"Checkbox"})]})]}),Z.type==="text"&&a.jsx("div",{className:"flex items-end pb-2",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Z.validation?.isNumeric,onChange:Ne=>at(Z.id,{validation:{...Z.validation,isNumeric:Ne.target.checked}}),className:"w-4 h-4 rounded text-indigo-600"}),a.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Numbers Only"})]})})]})]}):a.jsxs("div",{className:"space-y-4",children:[Z.type==="text"&&a.jsx(Vt,{label:Z.label,placeholder:Z.placeholder,value:Re[Z.id]||"",onChange:Ne=>H(Se=>({...Se,[Z.id]:Ne.target.value})),required:Z.required}),Z.type==="date"&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[Z.label," ",Z.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition-all bg-white",value:Re[Z.id]||"",onChange:Ne=>H(Se=>({...Se,[Z.id]:Ne.target.value}))}),a.jsx(_f,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),Z.type==="select"&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[Z.label," ",Z.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Aa,{placeholder:Z.placeholder||"Select an option",options:Z.options||[],selectedValue:Re[Z.id]||"",onChange:Ne=>H(Se=>({...Se,[Z.id]:Ne}))})]}),["radio","checkbox"].includes(Z.type)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:Z.label}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-gray-100 text-gray-400 text-sm italic",children:[Z.type," inputs are currently read-only in preview."]})]})]})]},Z.id)),$&&a.jsxs("div",{className:"md:col-span-2 flex flex-col gap-6 py-4",children:[a.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 px-6 py-3 rounded-xl border-2 border-dashed border-indigo-200 text-indigo-600 hover:bg-indigo-50 transition-all font-bold text-xs",children:[a.jsx(Ms,{className:"w-4 h-4"})," Add New Field"]}),a.jsx("div",{className:"flex justify-end pt-6 border-t border-indigo-100",children:a.jsx(Le,{variant:"primary",size:"lg",label:"Finalize Schema",onClick:()=>Ee(!1),loading:W,icon:a.jsx(os,{className:"w-4 h-4"}),className:"px-12"})})]})]})]})]})]}),ee&&a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md z-110 flex items-center justify-center p-4 animate-in fade-in duration-200",children:a.jsxs(Va,{className:"w-full max-w-6xl max-h-[90vh] flex flex-col shadow-2xl border-none animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsx(Ya,{className:"bg-indigo-600 text-white p-6 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:a.jsx(Ii,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx(is,{className:"text-xl font-bold font-headline tracking-normal",children:_==="COPY"?"Share Template Copy":"Distribute Form"}),a.jsx(Wo,{className:"text-indigo-100 text-xs",children:_==="COPY"?"Select users to send them an independent copy of this template.":"Filter by Lab and Designation to target specific users for data collection."})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-[10px] font-bold text-white/60 uppercase tracking-widest ml-1",children:"Optional Deadline"}),a.jsx("input",{type:"date",value:F,onChange:Z=>de(Z.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-3 py-1.5 text-xs text-white focus:outline-none focus:border-white/40 transition-colors",min:new Date().toISOString().split("T")[0]})]}),a.jsx("button",{onClick:()=>{K(!1),de("")},className:"text-white/80 hover:text-white hover:bg-white/10 rounded-lg p-2 transition-colors","aria-label":"Close modal",children:a.jsx(qt,{className:"w-5 h-5"})})]})]})}),a.jsxs(xn,{className:"p-0 flex-1 overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex flex-1 divide-x divide-gray-100 overflow-hidden",children:[a.jsxs("div",{className:"w-1/4 flex flex-col bg-white",children:[a.jsxs("div",{className:"p-4 bg-white border-b border-gray-100 flex items-center justify-between sticky top-0 z-10",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-400 tracking-wider font-sans uppercase",children:"1. Laboratories"}),a.jsx("button",{onClick:()=>{const Z=xe.map(Ne=>Ne.value);I.length===Z.length?X([]):X(Z)},className:"text-[10px] font-bold text-indigo-600 hover:underline uppercase",children:I.length===xe.length?"Deselect All":"Select All"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:xe.map(Z=>a.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg border transition-all cursor-pointer ${I.includes(Z.value)?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-transparent hover:bg-gray-50"}`,children:[a.jsx("input",{type:"checkbox",checked:I.includes(Z.value),onChange:()=>{X(Ne=>Ne.includes(Z.value)?Ne.filter(Se=>Se!==Z.value):[...Ne,Z.value])},className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-xs font-bold leading-none font-sans uppercase",children:Z.label})]},Z.value))})]}),a.jsxs("div",{className:"w-1/4 flex flex-col bg-white",children:[a.jsxs("div",{className:"p-4 bg-white border-b border-gray-100 flex items-center justify-between sticky top-0 z-10",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-400 tracking-wider font-sans uppercase",children:"2. Designations"}),a.jsx("button",{onClick:()=>{const Z=De,Ne=Z.length>0&&Z.every(Se=>z.includes(Se));M(Ne?Se=>Se.filter(se=>!Z.includes(se)):Se=>Array.from(new Set([...Se,...Z])))},className:"text-[10px] font-bold text-indigo-600 hover:underline uppercase",children:(()=>{const Z=De;return Z.length>0&&Z.every(Se=>z.includes(Se))?"Deselect All":"Select All"})()})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:De.length===0?a.jsx("div",{className:"p-4 text-xs text-center text-gray-400 italic font-sans",children:"No designations found in selected labs."}):De.map(Z=>a.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg border transition-all cursor-pointer ${z.includes(Z)?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-transparent hover:bg-gray-50"}`,children:[a.jsx("input",{type:"checkbox",checked:z.includes(Z),onChange:()=>{M(Ne=>Ne.includes(Z)?Ne.filter(Se=>Se!==Z):[...Ne,Z])},className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-xs font-bold leading-none truncate font-sans uppercase",title:Z,children:Z})]},Z))})]}),a.jsxs("div",{className:"w-2/4 flex flex-col bg-gray-50/30",children:[a.jsxs("div",{className:"p-4 bg-gray-50/50 border-b border-gray-100 flex items-center justify-between",children:[a.jsx("label",{className:"text-[10px] font-bold text-gray-400 tracking-wider font-sans uppercase",children:"3. Users (Filtered)"}),a.jsx("button",{onClick:()=>{const Z=P.map(Ne=>Ne._id);Z.length>0&&Z.every(Ne=>w.includes(Ne))?A(Ne=>Ne.filter(Se=>!Z.includes(Se))):A(Ne=>Array.from(new Set([...Ne,...Z])))},className:"text-[10px] font-bold text-indigo-600 hover:underline uppercase",children:"Select / Deselect Visible"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-2 gap-3 custom-scrollbar content-start",children:P.length===0?a.jsxs("div",{className:"col-span-2 flex flex-col items-center justify-center pt-20 text-gray-400",children:[a.jsx(Ii,{className:"w-8 h-8 opacity-20 mb-2"}),a.jsx("p",{className:"text-xs italic text-center px-4 font-sans",children:I.length===0||z.length===0?"Select at least one Lab and one Designation to view eligible users.":"No users in the selected Lab(s) match the chosen Designation(s)."})]}):P.map(Z=>a.jsxs("label",{title:`${Z.fullName||"Unnamed"} - ${Z.designation} (${Z.labName})`,className:`flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer group relative ${w.includes(Z._id)?"bg-indigo-50 border-indigo-200 shadow-sm":"bg-white border-gray-100 hover:border-gray-200 hover:shadow-sm"}`,children:[a.jsx("input",{type:"checkbox",checked:w.includes(Z._id),onChange:()=>{A(Ne=>Ne.includes(Z._id)?Ne.filter(Se=>Se!==Z._id):[...Ne,Z._id])},className:"w-4 h-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 shrink-0"}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("span",{className:"text-xs font-bold text-gray-900 truncate font-sans",children:[Z.fullName||"Unnamed User",Z.designation&&a.jsxs("span",{className:"text-gray-400 font-normal",children:[", ",Z.designation]})]}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-bold tracking-normal truncate font-sans",children:["(",Z.labName,")"]})]})]},Z._id))})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex items-center justify-between bg-white rounded-b-xl",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-[10px] text-gray-400 font-medium font-sans",children:[w.length," Users selected."]}),a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-indigo-600",checked:E,onChange:Z=>G(Z.target.checked)}),a.jsxs("div",{className:"text-left font-sans",children:[a.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Allow Multiple Submissions"}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Enable repeated entries from the same user"})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[_==="COLLECT"&&a.jsx(Le,{label:"Copy Link",variant:"secondary",icon:a.jsx(L5,{className:"w-4 h-4"}),onClick:()=>{const Z=`${window.location.origin}/data-collection/shared`;navigator.clipboard.writeText(Z),o({title:"Success",message:"Link copied to clipboard: "+Z,type:"success"})},className:"text-indigo-600 border-indigo-200 hover:bg-indigo-50"}),a.jsx(Le,{label:"Cancel",variant:"secondary",onClick:()=>K(!1)}),a.jsx(Le,{label:_==="COPY"?"Share Copy":"Distribute Form",icon:_==="COPY"?a.jsx(Ii,{className:"w-5 h-5"}):a.jsx(na,{className:"w-5 h-5"}),onClick:ke,loading:W,disabled:W||w.length===0,className:"px-8 shadow-lg shadow-indigo-200"})]})]})]})]})})]})}const Yb=({fields:n,formData:r,onChange:o,readOnly:l=!1})=>{const c=(f,m,g)=>{!l&&o&&o(f,m,g)};return a.jsxs("div",{className:"space-y-4",children:[n.map(f=>a.jsxs("div",{className:"relative",children:[f.type==="text"&&a.jsx(Vt,{id:f.id,label:f.label,type:"text",placeholder:f.placeholder,value:r[f.id]||"",onChange:m=>c(f.id,m.target.value,f),required:f.required,disabled:l}),f.type==="date"&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[f.label," ",f.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition-all ${l?"bg-gray-100 cursor-not-allowed text-gray-600":"bg-white"}`,value:r[f.id]||"",onChange:m=>c(f.id,m.target.value,f),disabled:l}),a.jsx(_f,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),f.type==="select"&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[f.label," ",f.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Aa,{placeholder:f.placeholder||"Select an option",options:f.options||[],selectedValue:r[f.id]||"",onChange:m=>c(f.id,m,f),disabled:l})]})]},f.id)),n.length===0&&a.jsx("div",{className:"text-center text-gray-500 py-8",children:"No fields to display."})]})},BA=({templateId:n,formSchema:r,onClose:o})=>{const[l,c]=h.useState([]),[f,m]=h.useState(0),[g,b]=h.useState(!0),[x,y]=h.useState(null),[v,S]=h.useState(null);h.useEffect(()=>{n&&(async()=>{b(!0);const W=await Ib(n);W.success&&Array.isArray(W.data)?(c(W.data),y(null)):y(W.message||"Failed to load submissions"),b(!1)})()},[n]);const R=()=>{f<l.length-1&&m(O=>O+1)},C=()=>{f>0&&m(O=>O-1)},D=()=>{if(!l||l.length===0)return;const O=l.map($=>{const N={"Submitted By":$.submittedBy?.fullName||"Unknown",Email:$.submittedBy?.email||"",Phone:$.submittedBy?.phoneNumber||"",Designation:$.submittedBy?.designation||"","Lab/Institution":$.labName||"","Submission Date":new Date($.createdAt).toLocaleString(),"IP Address":$.ipAddress||"Not Captured"};return r.fields.forEach(E=>{const G=$.data?.[E.id];Array.isArray(G)?N[E.label]=G.join(", "):typeof G=="object"&&G!==null?N[E.label]=JSON.stringify(G):N[E.label]=G||""}),N}),W=Vb.unparse(O),U=new Blob([W],{type:"text/csv;charset=utf-8;"}),ee=URL.createObjectURL(U),K=document.createElement("a");K.href=ee,K.setAttribute("download",`${r.title.replace(/\s+/g,"_")}_responses.csv`),document.body.appendChild(K),K.click(),document.body.removeChild(K)};if(g)return a.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:[a.jsx(Bt,{className:"w-8 h-8 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-gray-500",children:"Loading submissions..."})]});if(x)return a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("p",{className:"text-red-500 font-medium mb-4",children:x}),a.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"})]});if(l.length===0)return a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center h-full relative",children:[a.jsx("button",{onClick:o,className:"absolute top-6 right-6 p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400 hover:text-gray-600",children:a.jsx(qt,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Submissions Yet"}),a.jsx("p",{className:"text-gray-500 max-w-sm mx-auto mb-6",children:"There are no data submissions recorded for this form template yet."}),a.jsx("button",{onClick:o,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Back to Forms"})]});const k=l[f],T=l.length>1;return a.jsxs("div",{className:"flex flex-col h-full bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:o,className:"p-2 hover:bg-white rounded-full transition-colors text-gray-500 hover:text-gray-700 hover:shadow-sm",children:a.jsx(Qi,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:r.title}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsxs("span",{className:"font-medium text-indigo-600",children:["Response #",f+1]}),a.jsxs("span",{children:["of ",l.length]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-3 py-2 bg-emerald-50 text-emerald-700 hover:bg-emerald-100 rounded-lg text-xs font-bold tracking-wider mr-2 border border-emerald-200 transition-colors",title:"Download CSV",children:[a.jsx(ub,{className:"w-4 h-4"})," Export CSV"]}),T&&a.jsxs("div",{className:"flex items-center gap-2 pr-2 border-r border-gray-200 mr-2",children:[a.jsx("button",{onClick:C,disabled:f===0,className:"p-2 border rounded-lg hover:bg-white disabled:opacity-40 disabled:cursor-not-allowed transition-all hover:shadow-sm bg-gray-50",title:"Previous Submission",children:a.jsx(Qi,{className:"w-5 h-5"})}),a.jsx("button",{onClick:R,disabled:f===l.length-1,className:"p-2 border rounded-lg hover:bg-white disabled:opacity-40 disabled:cursor-not-allowed transition-all hover:shadow-sm bg-gray-50",title:"Next Submission",children:a.jsx(Wi,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-200 rounded-full transition-colors text-gray-500 hover:text-gray-700",title:"Close Viewer",children:a.jsx(qt,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50/50",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[a.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-start gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 flex items-center justify-center shrink-0",children:a.jsx(Of,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-indigo-600 hover:underline cursor-pointer transition-all",onClick:()=>k.submittedBy?._id&&S(k.submittedBy._id),children:k.submittedBy?.fullName||"Unknown User"}),k.submittedBy?.designation&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-100 rounded-full text-gray-600 border border-gray-200",children:k.submittedBy.designation})]}),a.jsxs("div",{className:"text-sm text-gray-500 space-y-0.5",children:[a.jsx("p",{children:k.submittedBy?.email}),a.jsxs("p",{className:"text-xs text-gray-400",children:["Submitted on ",new Date(k.createdAt).toLocaleString(),"  ",k.labName,k.ipAddress&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mx-1",children:""}),a.jsxs("span",{className:"font-medium text-gray-600",children:["IP: ",k.ipAddress]})]})]})]})]})]}),a.jsx("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-100",children:a.jsx(Yb,{fields:r.fields,formData:k.data||{},readOnly:!0})})]})}),a.jsx("div",{className:"px-6 py-4 border-t border-gray-100 bg-white flex justify-end",children:a.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium transition-colors",children:"Close Viewer"})}),a.jsx(ol,{isOpen:!!v,onClose:()=>S(null),userId:v})]})};function qA(){const n=ra(),{showMessage:r,showConfirm:o}=Hs(),[l,c]=h.useState(n.state?.activeTab||"with-me"),[f,m]=h.useState([]),[g,b]=h.useState({page:1,limit:9,total:0,totalPages:0}),[x,y]=h.useState(!0),[v,S]=h.useState(""),[R,C]=h.useState("active"),[D,k]=h.useState("all"),[T,O]=h.useState(new Set),[W,U]=h.useState(!1),[ee,K]=h.useState(null),[$,N]=h.useState({}),[E,G]=h.useState(!1),[V,le]=h.useState(!1),[oe,ve]=h.useState("grid"),[Re,H]=h.useState(null),[I,X]=h.useState(null),[z,M]=h.useState(null),[w,A]=h.useState(null),_=P=>new Date(P).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),F=P=>{const je=new Date(P),pe=Math.abs(new Date().getTime()-je.getTime());return Math.ceil(pe/(1e3*60*60*24))},de=P=>{if(!P)return!1;const je=new Date(P),Ce=new Date,pe=je.getTime()-Ce.getTime(),$e=Math.ceil(pe/(1e3*60*60*24));return $e>=0&&$e<=3};h.useEffect(()=>{b(P=>({...P,page:1})),xe(1)},[l,R,D]),h.useEffect(()=>{const P=setTimeout(()=>{b(je=>({...je,page:1})),xe(1)},500);return()=>clearTimeout(P)},[v]);const xe=async(P=g.page)=>{y(!0);try{const je={page:P,limit:g.limit,view:R,status:D,search:v},Ce=l==="with-me"?await CA(je):await _A(je);Ce.success&&(m(Ce.data.forms),Ce.data.pagination&&b(Ce.data.pagination))}catch(je){console.error(je)}finally{y(!1)}},L=P=>{P>=1&&P<=g.totalPages&&(b(je=>({...je,page:P})),xe(P))},B=P=>{const je=new Set(T);je.has(P)?je.delete(P):je.add(P),O(je)},Q=()=>{T.size===f.length&&f.length>0?O(new Set):O(new Set(f.map(P=>P._id)))},ue=async P=>{const je=P?"Archive":"Restore";if(await o({title:`Confirm ${je}`,message:`Are you sure you want to ${je.toLowerCase()} ${T.size} selected form(s)?`,type:"warning",confirmText:je,cancelText:"Cancel"}))try{let pe=0;const $e=Array.from(T).map(at=>RA(at,P));pe=(await Promise.all($e)).filter(at=>at.success).length,pe>0?(r({title:"Success",message:`${pe} forms ${P?"archived":"restored"} successfully.`,type:"success"}),O(new Set),xe()):r({title:"Error",message:"Failed to update forms.",type:"error"})}catch(pe){console.error(pe),r({title:"Error",message:"An unexpected error occurred.",type:"error"})}},we=async P=>{try{const je=await Gb(P);if(je.success){const Ce=je.data;K(Ce),N({});const pe=Ce.isActive&&(!Ce.deadline||new Date(Ce.deadline)>new Date);le(!pe);const $e=await Ib(P);if($e.success&&$e.data.length>0){const Ve=$e.data[0];Ve&&N(Ve.data)}U(!0)}}catch(je){console.error(je)}},Oe=(P,je)=>{N(Ce=>({...Ce,[P]:je}))},he=async P=>{if(P&&P.preventDefault(),!!ee){G(!0);try{const je=f.find(pe=>pe._id===ee._id)?.isSubmitted;let Ce;je&&ee.allowMultipleSubmissions===!1?Ce=await AA({templateId:ee._id,data:$}):Ce=await SA({templateId:ee._id,data:$}),Ce.success?(r({title:"Success",message:je?"Data updated successfully!":"Data submitted successfully!",type:"success"}),U(!1),N({}),xe()):r({title:"Error",message:Ce.message||"Submission failed",type:"error"})}catch(je){console.error(je)}finally{G(!1)}}},Me=async P=>{if(await o({title:"Confirm Delete",message:"Are you sure you want to delete this distribution? This will remove the template and all submissions.",type:"error",confirmText:"Delete Distribution",cancelText:"Cancel"}))try{(await kA(P)).success&&xe()}catch(Ce){console.error(Ce)}},Ue=f,De=async(P,je)=>{if(w!==P){A(P);try{const Ce=await Pb(P,{isActive:!je,notifyUsers:!1});Ce.success?(m(pe=>pe.map($e=>$e._id===P?{...$e,isActive:!je}:$e)),Ce.data?.taskId?r({title:"Success",message:je?"Form has been STOPPED.":"Form is now LIVE. Notifications are sending in the background.",type:"success"}):r({title:"Success",message:je?"Form has been STOPPED.":"Form is now LIVE and accepting submissions.",type:"success"})):r({title:"Error",message:Ce.message||"Failed to update form status",type:"error"})}catch(Ce){console.error("Failed to toggle live status",Ce),r({title:"Error",message:"An unexpected error occurred",type:"error"})}finally{A(null)}}};return a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-8",children:[a.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1 font-headline tracking-tighter",children:"Shared Forms"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold tracking-widest opacity-60",children:"Collabarative Data Ecosystem"})]}),a.jsxs("div",{className:"flex bg-white p-1 rounded-xl shadow-sm border border-gray-100",children:[a.jsxs("button",{onClick:()=>c("with-me"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="with-me"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:text-indigo-600"}`,children:[a.jsx(Aj,{className:"w-4 h-4"}),"Shared With Me"]}),a.jsxs("button",{onClick:()=>c("by-me"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${l==="by-me"?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:text-indigo-600"}`,children:[a.jsx(Nu,{className:"w-4 h-4"}),"Distributed By Me"]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md group",children:[a.jsx(ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 group-focus-within:text-indigo-600 transition-colors"}),a.jsx("input",{type:"text",placeholder:"Find a form...",value:v,onChange:P=>S(P.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-100 transition-all text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 md:pb-0",children:[a.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>C("active"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${R==="active"?"bg-indigo-50 text-indigo-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Active"}),a.jsx("button",{onClick:()=>C("archived"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${R==="archived"?"bg-indigo-50 text-indigo-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Archived"})]}),a.jsxs("select",{value:D,onChange:P=>k(P.target.value),className:"bg-white border border-gray-200 text-gray-700 text-sm rounded-xl px-3 py-2 outline-none focus:border-indigo-500 cursor-pointer min-w-[140px]",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"new",children:"New"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"submitted",children:"Submitted"}),a.jsx("option",{value:"expiring",children:"Expiring Soon"})]}),a.jsx("div",{className:"border-l border-gray-200 h-8 mx-2"}),a.jsxs("div",{className:"flex bg-white rounded-lg border border-gray-200 p-1",children:[a.jsx("button",{onClick:()=>ve("grid"),className:`p-1.5 rounded-md transition-colors ${oe==="grid"?"bg-gray-100 text-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:a.jsx(_5,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ve("list"),className:`p-1.5 rounded-md transition-colors ${oe==="list"?"bg-gray-100 text-indigo-600":"text-gray-400 hover:text-gray-600"}`,children:a.jsx(z5,{className:"w-4 h-4"})})]})]})]}),T.size>0&&a.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50 border border-indigo-100 rounded-xl animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-sm",children:T.size}),a.jsx("span",{className:"text-sm font-bold text-indigo-900",children:"Selected"}),a.jsx("button",{onClick:Q,className:"text-xs text-indigo-600 underline hover:text-indigo-800",children:T.size===f.length?"Deselect All":"Select All Visible"})]}),a.jsx("div",{className:"flex items-center gap-2",children:R==="active"?a.jsx(Le,{size:"sm",variant:"secondary",label:"Archive",icon:a.jsx(ba,{className:"w-4 h-4"}),onClick:()=>ue(!0),className:"bg-white"}):a.jsx(Le,{size:"sm",variant:"secondary",label:"Restore",icon:a.jsx(ba,{className:"w-4 h-4"}),onClick:()=>ue(!1),className:"bg-white"})})]}),x?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(P=>a.jsx("div",{className:"h-48 bg-gray-200 animate-pulse rounded-2xl"},P))}):Ue.length>0?oe==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ue.map(P=>a.jsxs(Va,{className:`group hover:shadow-xl transition-all duration-300 border-transparent hover:border-indigo-100 h-full flex flex-col ${T.has(P._id)?"ring-2 ring-indigo-500 bg-indigo-50/10":""}`,children:[a.jsxs(Ya,{className:`${l==="with-me"?"bg-indigo-50/50":"bg-emerald-50/50"} border-b border-gray-50 p-6 relative`,children:[a.jsxs("div",{className:"absolute top-0 right-0 flex flex-col items-end",children:[P.isSubmitted&&a.jsxs("div",{className:"bg-emerald-500 text-white text-[10px] uppercase font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10 flex items-center gap-1.5 animate-in slide-in-from-right-2 fade-in duration-500 mb-0.5",children:[a.jsx(Rf,{className:"w-3 h-3 text-white"}),"Submitted"]}),!P.isSubmitted&&new Date().getTime()-new Date(P.createdAt).getTime()<2880*60*1e3&&a.jsxs("div",{className:"bg-blue-500 text-white text-[10px] uppercase font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10 flex items-center gap-1.5 animate-in slide-in-from-right-2 fade-in duration-500 mb-0.5",children:[a.jsx(cs,{className:"w-3 h-3 text-white animate-sparkle"}),"New"]}),!P.isSubmitted&&new Date().getTime()-new Date(P.createdAt).getTime()>=2880*60*1e3&&a.jsxs("div",{className:"bg-amber-500 text-white text-[10px] uppercase font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10 flex items-center gap-1.5 animate-in slide-in-from-right-2 fade-in duration-500 mb-0.5",children:[a.jsx(Zi,{className:"w-3 h-3 text-white"}),"Pending"]}),!P.isSubmitted&&P.deadline&&de(P.deadline)&&a.jsxs("div",{className:"bg-red-500 text-white text-[10px] uppercase font-bold px-3 py-1 rounded-bl-xl shadow-sm z-10 flex items-center gap-1.5 animate-in slide-in-from-right-2 fade-in duration-500",children:[a.jsx(Bs,{className:"w-3 h-3 text-white animate-blink"}),"Expiring Soon"]})]}),a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center text-indigo-600 shrink-0 cursor-pointer",onClick:je=>{je.stopPropagation(),B(P._id)},children:T.has(P._id)?a.jsx(Su,{className:"w-6 h-6 text-indigo-600"}):a.jsx(Ea,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(is,{className:"text-lg font-bold text-gray-900 group-hover:text-indigo-600 transition-colors truncate",title:P.title,children:P.title}),a.jsx(Wo,{className:"text-xs text-gray-500 line-clamp-1 mt-0.5",title:P.description,children:P.description})]})]})]}),a.jsxs(xn,{className:"p-6 flex-1 flex flex-col",children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400 font-medium",children:"Shared By"}),a.jsxs("button",{onClick:()=>M(P.createdBy?._id),className:"text-indigo-600 font-bold hover:underline transition-all",children:[P.createdBy?.fullName||"System",P.createdBy?.labName&&` (${P.createdBy.labName})`]})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400 font-bold",children:"Lab / Institution"}),a.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-[10px] font-bold uppercase",children:P.createdBy?.labName||"CSIR"})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400 font-bold",children:"Shared On"}),a.jsx("span",{className:"text-gray-600 font-bold",children:_(P.createdAt)})]}),P.deadline&&a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400 font-bold",children:"Live Until"}),a.jsxs("div",{className:"flex items-center gap-2",children:[de(P.deadline)&&new Date(P.deadline)>new Date&&a.jsx("span",{className:"px-1.5 py-0.5 bg-red-100 text-red-600 rounded text-[10px] font-bold uppercase",children:"Soon"}),a.jsx("span",{className:`font-bold ${de(P.deadline)?"text-red-600 animate-blink":new Date(P.deadline)<new Date?"text-red-500":"text-emerald-600"}`,children:_(P.deadline)})]})]}),(!P.isSubmitted||l==="by-me")&&a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-tight",children:"Pending Since"}),a.jsxs("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-700 rounded-full text-[10px] font-bold",children:[F(P.createdAt)," Days"]})]})]}),a.jsx("div",{className:"mt-auto space-y-4",children:l==="by-me"&&a.jsxs("div",{className:"space-y-3 pt-3 border-t border-gray-50",children:[a.jsxs("div",{className:"flex flex-col gap-1.5 text-xs",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider text-[9px]",children:"Distribution Targets"}),(P.sharedWithLabs?.length>5||P.sharedWithUsers?.length>5)&&a.jsx("button",{onClick:()=>X(P),className:"text-indigo-600 hover:text-indigo-700 font-bold text-[9px] uppercase tracking-tighter hover:underline",children:"View Full List"})]}),P.sharedWithLabs?.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[P.sharedWithLabs.slice(0,5).map(je=>a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded-md font-bold text-[10px]",children:je},je)),P.sharedWithLabs.length>5&&a.jsxs("button",{onClick:()=>X(P),className:"px-1.5 py-0.5 bg-gray-50 text-gray-500 rounded-md font-bold text-[10px] hover:bg-gray-100",children:["+",P.sharedWithLabs.length-5]})]}),P.sharedWithUsers?.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[P.sharedWithUsers.slice(0,5).map(je=>a.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-50 text-emerald-600 rounded-md font-bold text-[10px]",children:je.fullName||je.email},je._id)),P.sharedWithUsers.length>5&&a.jsxs("button",{onClick:()=>X(P),className:"px-1.5 py-0.5 bg-gray-50 text-gray-500 rounded-md font-bold text-[10px] hover:bg-gray-100",children:["+",P.sharedWithUsers.length-5]})]}),P.isPublic&&a.jsx("span",{className:"text-amber-600 font-bold italic text-[10px]",children:"Public Access"})]}),a.jsxs("div",{className:"flex items-center justify-between text-xs pt-1",children:[a.jsx("span",{className:"text-gray-400 font-medium",children:"Responses Collected"}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white rounded-full font-bold text-[10px]",children:P.responseCount||0})]})]})}),a.jsxs("div",{className:"space-y-4",children:[l==="by-me"&&a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-50",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Manual LifeCycle"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{onClick:je=>{je.stopPropagation(),De(P._id,P.isActive)},className:`w-9 h-5 rounded-full relative cursor-pointer transition-all duration-300 ${w===P._id?"bg-indigo-300 cursor-not-allowed":P.isActive?"bg-indigo-600 shadow-sm":"bg-gray-200"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white shadow-sm transition-all duration-300 flex items-center justify-center ${P.isActive?"translate-x-5":"translate-x-1"}`,children:w===P._id&&a.jsx(Bt,{className:"w-2 h-2 text-indigo-600 animate-spin"})})}),a.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${P.isActive?"text-indigo-600":"text-gray-400"}`,children:w===P._id?"Updating...":P.isActive?"Live":"Stopped"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:l==="with-me"?a.jsx(Le,{label:P.isSubmitted?!P.isActive||P.deadline&&new Date(P.deadline)<new Date?"View Response":"Edit Response":!P.isActive||P.deadline&&new Date(P.deadline)<new Date?"Form Closed":"Open & Fill Form",className:"w-full",onClick:()=>we(P._id),icon:P.isSubmitted?a.jsx(rs,{className:"w-4 h-4"}):!P.isActive||P.deadline&&new Date(P.deadline)<new Date?a.jsx(qt,{className:"w-4 h-4"}):a.jsx(Nu,{className:"w-4 h-4"}),disabled:!P.isSubmitted&&(!P.isActive||P.deadline&&new Date(P.deadline)<new Date),variant:!P.isActive||P.deadline&&new Date(P.deadline)<new Date?(P.isSubmitted,"secondary"):"primary"}):a.jsxs(a.Fragment,{children:[a.jsx(Le,{variant:"secondary",label:"Responses",className:"flex-1",icon:a.jsx(rs,{className:"w-4 h-4"}),onClick:()=>H(P)}),a.jsx("button",{onClick:()=>Me(P._id),className:"p-3 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all border border-gray-100",children:a.jsx(pn,{className:"w-4 h-4"})})]})})]})]})]},P._id))}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100 text-[10px] font-bold uppercase tracking-wider text-gray-500",children:[a.jsx("th",{className:"p-4 w-10",children:a.jsx("div",{className:"cursor-pointer text-gray-400 hover:text-indigo-600",onClick:Q,children:T.size===f.length&&f.length>0?a.jsx(Su,{className:"w-4 h-4 text-indigo-600"}):a.jsx(wx,{className:"w-4 h-4"})})}),a.jsx("th",{className:"p-4",children:"Form Details"}),a.jsx("th",{className:"p-4",children:"Shared By / Creator"}),a.jsx("th",{className:"p-4 text-center",children:"Responses"}),a.jsx("th",{className:"p-4",children:"Status / Deadline"}),a.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-50",children:Ue.map(P=>a.jsxs("tr",{className:`hover:bg-slate-50 transition-colors group ${T.has(P._id)?"bg-indigo-50/30":""}`,children:[a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"cursor-pointer text-gray-300 hover:text-indigo-600 transition-colors",onClick:()=>B(P._id),children:T.has(P._id)?a.jsx(Su,{className:"w-4 h-4 text-indigo-600"}):a.jsx(wx,{className:"w-4 h-4"})})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 flex items-center justify-center shrink-0",children:a.jsx(Ea,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-900 text-sm truncate max-w-[200px]",title:P.title,children:P.title}),a.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[200px]",title:P.description,children:P.description})]})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-bold text-gray-700",children:P.createdBy?.fullName||"System"}),a.jsx("span",{className:"text-[10px] text-gray-500",children:P.createdBy?.labName})]})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 rounded-full text-[10px] font-bold",children:P.responseCount||0})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[P.isActive?a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-emerald-600",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})," Live"]}):a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-bold text-gray-400",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"})," Inactive"]}),P.deadline&&a.jsx("span",{className:`text-[10px] font-mono ${de(P.deadline)?"text-red-600 font-bold animate-blink":new Date(P.deadline)>new Date?"text-gray-500":"text-red-500"}`,children:_(P.deadline)})]})}),a.jsx("td",{className:"p-4",children:a.jsx("div",{className:"flex items-center justify-end gap-2",children:l==="with-me"?a.jsx(Le,{size:"sm",label:P.isSubmitted?!P.isActive||P.deadline&&new Date(P.deadline)<new Date?"View":"Edit":!P.isActive||P.deadline&&new Date(P.deadline)<new Date?"Closed":"Fill",onClick:()=>we(P._id),icon:P.isSubmitted?a.jsx(rs,{className:"w-3 h-3"}):!P.isActive||P.deadline&&new Date(P.deadline)<new Date?a.jsx(qt,{className:"w-3 h-3"}):a.jsx(Nu,{className:"w-3 h-3"}),disabled:!P.isSubmitted&&(!P.isActive||P.deadline&&new Date(P.deadline)<new Date),variant:!P.isActive||P.deadline&&new Date(P.deadline)<new Date?(P.isSubmitted,"secondary"):"primary"}):a.jsxs(a.Fragment,{children:[a.jsx(Le,{variant:"secondary",size:"sm",label:"View",icon:a.jsx(rs,{className:"w-3 h-3"}),onClick:()=>H(P)}),a.jsx("div",{onClick:je=>{je.stopPropagation(),De(P._id,P.isActive)},className:`w-8 h-4 rounded-full relative cursor-pointer transition-all duration-300 ${w===P._id?"bg-indigo-300 cursor-not-allowed":P.isActive?"bg-indigo-600 shadow-sm":"bg-gray-200"}`,title:P.isActive?"Stop Form":"Start Form",children:a.jsx("div",{className:`absolute top-0.5 w-3 h-3 rounded-full bg-white shadow-sm transition-all duration-300 flex items-center justify-center ${P.isActive?"translate-x-4":"translate-x-0.5"}`,children:w===P._id&&a.jsx(Bt,{className:"w-2 h-2 text-indigo-600 animate-spin"})})}),a.jsx("button",{onClick:()=>Me(P._id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:a.jsx(pn,{className:"w-4 h-4"})})]})})})]},P._id))})]})}):a.jsxs("div",{className:"p-20 text-center bg-white rounded-3xl border border-gray-100 shadow-sm",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-50 text-gray-300 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ea,{className:"w-10 h-10"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 font-headline",children:"No forms found"}),a.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:l==="with-me"?"You haven't been invited to fill any forms yet.":"You haven't distributed any forms for data collection yet."})]}),g.totalPages>1&&a.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4 animate-in fade-in",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",a.jsx("span",{className:"font-bold",children:(g.page-1)*g.limit+1})," to ",a.jsx("span",{className:"font-bold",children:Math.min(g.page*g.limit,g.total)})," of ",a.jsx("span",{className:"font-bold",children:g.total})," forms"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>L(g.page-1),disabled:g.page===1,className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(Qi,{className:"w-4 h-4 text-gray-600"})}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(g.totalPages,5)},(P,je)=>{let Ce=je+1;return g.totalPages>5&&g.page>3&&(Ce=g.page-2+je),Ce>g.totalPages?null:a.jsx("button",{onClick:()=>L(Ce),className:`w-8 h-8 rounded-lg text-sm font-bold flex items-center justify-center transition-all ${Ce===g.page?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-gray-600 hover:bg-gray-50"}`,children:Ce},Ce)})}),a.jsx("button",{onClick:()=>L(g.page+1),disabled:g.page===g.totalPages,className:"p-2 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(Wi,{className:"w-4 h-4 text-gray-600"})})]})]})]}),W&&ee&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"bg-indigo-600 p-6 text-white flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold font-headline",children:ee.title}),a.jsx("p",{className:"text-indigo-100 text-xs mt-1",children:ee.description})]}),ee.deadline&&a.jsxs("div",{className:`flex flex-col items-end ${de(ee.deadline)?"animate-pulse":""}`,children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-200 tracking-wider",children:"Submission Deadline"}),a.jsx("span",{className:"text-sm font-bold bg-white/20 px-2 py-0.5 rounded text-white backdrop-blur-sm",children:_(ee.deadline)})]}),a.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:a.jsx(qt,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-8 overflow-y-auto flex-1 global-scrollbar bg-white",children:a.jsx(Yb,{fields:ee.fields,formData:$,onChange:Oe,readOnly:V})}),a.jsx("div",{className:"p-6 border-t border-gray-50 bg-white shrink-0",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(Le,{variant:"secondary",label:V?"Close":"Cancel",onClick:()=>U(!1),className:"flex-1"}),!V&&a.jsx(Le,{variant:"primary",label:f.find(P=>P._id===ee._id)?.isSubmitted?"Update Response":"Submit Response",onClick:he,loading:E,className:"flex-1"})]})})]})}),Re&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-100 flex items-center justify-center p-4",children:a.jsx("div",{className:"w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 h-[90vh] flex flex-col",children:a.jsx(BA,{templateId:Re._id,formSchema:Re,onClose:()=>H(null)})})}),I&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"bg-white p-6 border-b border-gray-100 flex justify-between items-center shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Distribution Targets"}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:I.title})]}),a.jsx("button",{onClick:()=>X(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(qt,{className:"w-5 h-5 text-gray-400"})})]}),a.jsxs("div",{className:"p-8 overflow-y-auto flex-1 global-scrollbar space-y-8",children:[I.sharedWithLabs?.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:["Laboratories (",I.sharedWithLabs.length,")"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:I.sharedWithLabs.map(P=>a.jsxs("div",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-[11px] font-bold border border-indigo-100 flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-400"}),P]},P))})]}),I.sharedWithUsers?.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4",children:["Specific Users (",I.sharedWithUsers.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:I.sharedWithUsers.map(P=>a.jsxs("div",{className:"p-3 bg-emerald-50 border border-emerald-100 rounded-2xl flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-200 flex items-center justify-center text-emerald-700 font-bold text-xs",children:(P.fullName||P.email||"?").charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] font-bold text-gray-900",children:P.fullName||P.email}),a.jsxs("div",{className:"text-[9px] text-emerald-600 font-medium uppercase tracking-tighter",children:[P.designation||"Staff","  ",P.labName||"CSIR"]})]})]},P._id))})]}),I.isPublic&&a.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-2xl flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center text-amber-600",children:a.jsx(rs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-amber-900",children:"Public Access Enabled"}),a.jsx("div",{className:"text-[10px] text-amber-600",children:"This form is open to all authenticated users in the system."})]})]})]}),a.jsx("div",{className:"p-6 border-t border-gray-50 flex justify-end",children:a.jsx(Le,{label:"Close",onClick:()=>X(null)})})]})}),a.jsx(ol,{isOpen:!!z,onClose:()=>M(null),userId:z})]})}function HA(){const n=Xt(),{showConfirm:r}=Hs(),[o,l]=h.useState([]),[c,f]=h.useState(!0),[m,g]=h.useState("");h.useEffect(()=>{b()},[]);const b=async()=>{f(!0);try{const v=await MA();v.success&&l(v.data)}catch(v){console.error(v)}finally{f(!1)}},x=async v=>{if(await r({title:"Confirm Delete",message:"Are you sure you want to delete this blueprint? This will not affect active forms created from it.",type:"error",confirmText:"Delete Blueprint",cancelText:"Cancel"}))try{(await DA(v)).success&&b()}catch(R){console.error(R)}},y=o.filter(v=>v.title.toLowerCase().includes(m.toLowerCase())||v.description?.toLowerCase().includes(m.toLowerCase()));return a.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[a.jsx("div",{className:"flex items-center gap-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-1 font-headline tracking-tighter",children:"Form Blueprints"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold tracking-widest opacity-60",children:"REUSABLE TEMPLATE REPOSITORY"})]})}),a.jsx(Le,{variant:"primary",label:"Design New Blueprint",onClick:()=>n("/data-collection/create"),icon:a.jsx(Ms,{className:"w-4 h-4"}),className:"shadow-lg shadow-indigo-200"})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[a.jsxs("div",{className:"relative w-full md:w-96",children:[a.jsx(ds,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Find a blueprint...",className:"w-full pl-11 pr-4 py-3 bg-white border border-gray-100 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm",value:m,onChange:v=>g(v.target.value)})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"px-3 py-1 bg-white border border-gray-100 rounded-lg text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:[y.length," Blueprints"]})})]}),c?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(v=>a.jsx("div",{className:"h-64 bg-gray-200 animate-pulse rounded-2xl"},v))}):y.length>0?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[y.map(v=>a.jsxs(Va,{className:"group hover:border-indigo-500 transition-all duration-300 shadow-sm hover:shadow-xl bg-white overflow-hidden flex flex-col",children:[a.jsx(Ya,{className:"bg-slate-50/50 border-b border-gray-50 p-6",children:a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center text-indigo-600 shrink-0",children:a.jsx(T5,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(is,{className:"text-lg font-bold text-gray-900 group-hover:text-indigo-600 transition-colors truncate",title:v.title,children:v.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:["Fields: ",v.fields?.length||0]}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),a.jsxs("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:["Created: ",new Date(v.createdAt).toLocaleDateString()]})]})]}),a.jsx("div",{className:"relative group/menu",children:a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(c5,{className:"w-4 h-4 text-gray-400"})})})]})}),a.jsxs(xn,{className:"p-6 flex-1 flex flex-col",children:[a.jsx("p",{className:"text-gray-500 text-xs line-clamp-3 mb-6 flex-1",children:v.description||"No description provided for this blueprint."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Le,{variant:"primary",size:"sm",label:"Use This Template",onClick:()=>n(`/data-collection/create?useBlueprint=${v._id}`),icon:a.jsx(s5,{className:"w-3.5 h-3.5"}),className:"w-full text-[11px]"}),a.jsx("button",{onClick:()=>x(v._id),className:"flex items-center justify-center p-2 rounded-lg border border-red-50 text-red-400 hover:text-red-600 hover:bg-red-50 hover:border-red-100 transition-all",title:"Delete Blueprint",children:a.jsx(pn,{className:"w-4 h-4"})})]})]})]},v._id)),a.jsxs("button",{onClick:()=>n("/data-collection/create"),className:"bg-white border-2 border-dashed border-gray-100 rounded-2xl flex flex-col items-center justify-center p-8 text-gray-400 hover:border-indigo-300 hover:text-indigo-600 transition-all group min-h-[260px]",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-50 flex items-center justify-center mb-4 group-hover:bg-indigo-50 transition-colors",children:a.jsx(cs,{className:"w-8 h-8"})}),a.jsx("span",{className:"font-bold text-sm",children:"Design New Blueprint"}),a.jsx("span",{className:"text-[10px] mt-1 opacity-60",children:"AI-Powered Generation"})]})]}):a.jsxs("div",{className:"p-20 text-center bg-white rounded-3xl border border-gray-100 shadow-sm",children:[a.jsx("div",{className:"w-20 h-20 bg-indigo-50 text-indigo-400 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ms,{className:"w-10 h-10"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 font-headline",children:"Create your first blueprint"}),a.jsx("p",{className:"text-gray-500 max-w-sm mx-auto mb-8",children:"Blueprints are reusable templates that help you standardize data collection across your organization."}),a.jsx("div",{className:"flex justify-center",children:a.jsx(Le,{variant:"primary",label:"Start Designing",onClick:()=>n("/data-collection/create"),icon:a.jsx(cs,{className:"w-4 h-4"})})})]})]})})}const $A={theme:"light",accentColor:"indigo",fontSize:"medium"},Xb=h.createContext(void 0),PA=({children:n})=>{const{user:r,login:o}=At(),[l,c]=h.useState(r?.settings||$A);h.useEffect(()=>{r?.settings&&c(r.settings)},[r]);const f=l.theme==="dark"||l.theme==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;h.useEffect(()=>{f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.documentElement.setAttribute("data-font-size",l.fontSize),document.documentElement.setAttribute("data-accent-color",l.accentColor)},[l,f]);const m=async g=>{const b={...l,...g};c(b);try{const x=await tb({settings:g});x&&x.data&&o(x.data)}catch(x){console.error("Failed to update settings:",x),c(l)}};return a.jsx(Xb.Provider,{value:{settings:l,updateSettings:m,isDark:f},children:n})},GA=()=>{const n=h.useContext(Xb);if(n===void 0)throw new Error("useSettings must be used within a SettingsProvider");return n},IA=[{id:"light",name:"Light",icon:v4,description:"Classic light theme"},{id:"dark",name:"Dark",icon:Q5,description:"Easy on the eyes in the dark"},{id:"system",name:"System",icon:Y5,description:"Follows your system settings"}],VA=[{id:"indigo",name:"Indigo",class:"bg-indigo-600"},{id:"blue",name:"Blue",class:"bg-blue-600"},{id:"emerald",name:"Emerald",class:"bg-emerald-600"},{id:"rose",name:"Rose",class:"bg-rose-600"},{id:"amber",name:"Amber",class:"bg-amber-600"}],YA=[{id:"small",name:"Small",description:"Tight and compact"},{id:"medium",name:"Medium",description:"Standard readability"},{id:"large",name:"Large",description:"Big and bold"}],XA=()=>{const{settings:n,updateSettings:r}=GA();return a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 space-y-12 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-heading dark:text-white",children:"Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg font-heading",children:"Customize your experience and preferences."})]}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xl font-semibold text-gray-800 font-heading dark:text-white",children:[a.jsx(ju,{className:"w-6 h-6 text-indigo-600"}),a.jsx("h2",{children:"Appearance"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:IA.map(o=>{const l=o.icon,c=n.theme===o.id;return a.jsxs("button",{onClick:()=>r({theme:o.id}),className:`flex flex-col items-center gap-3 p-6 rounded-2xl border-2 transition-all group ${c?"border-indigo-600 bg-indigo-50/50 dark:bg-indigo-900/20":"border-gray-100 bg-white hover:border-indigo-200 hover:shadow-lg dark:bg-gray-800 dark:border-gray-700"}`,children:[a.jsx("div",{className:`p-4 rounded-xl transition-colors ${c?"bg-indigo-600 text-white":"bg-gray-50 text-gray-400 group-hover:text-indigo-600 group-hover:bg-indigo-50 dark:bg-gray-700 dark:text-gray-400 dark:group-hover:bg-indigo-900/30"}`,children:a.jsx(l,{className:"w-8 h-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:`block font-bold font-heading text-lg ${c?"text-indigo-900 dark:text-indigo-300":"text-gray-700 dark:text-gray-300"}`,children:o.name}),a.jsx("p",{className:"text-sm text-gray-500 font-heading dark:text-gray-400",children:o.description})]}),c&&a.jsx(na,{className:"w-5 h-5 text-indigo-600"})]},o.id)})})]}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xl font-semibold text-gray-800 font-heading dark:text-white",children:[a.jsx(ju,{className:"w-6 h-6 text-indigo-600"}),a.jsx("h2",{children:"Accent Color"})]}),a.jsx("div",{className:"flex flex-wrap gap-4",children:VA.map(o=>{const l=n.accentColor===o.id;return a.jsxs("button",{onClick:()=>r({accentColor:o.id}),className:"group relative flex flex-col items-center gap-2 transition-all",children:[a.jsx("div",{className:`w-12 h-12 rounded-full ${o.class} shadow-lg transition-transform group-hover:scale-110 ${l?"ring-4 ring-offset-2 ring-indigo-600 dark:ring-offset-gray-900":""}`}),a.jsx("span",{className:`text-sm font-medium font-heading ${l?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"}`,children:o.name})]},o.id)})})]}),a.jsxs("section",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 text-xl font-semibold text-gray-800 font-heading dark:text-white",children:[a.jsx(C4,{className:"w-6 h-6 text-indigo-600"}),a.jsx("h2",{children:"Typography"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:YA.map(o=>{const l=n.fontSize===o.id;return a.jsxs("button",{onClick:()=>r({fontSize:o.id}),className:`flex flex-col items-start gap-1 p-6 rounded-2xl border-2 transition-all ${l?"border-indigo-600 bg-indigo-50/50 dark:bg-indigo-900/20":"border-gray-100 bg-white hover:border-indigo-200 hover:shadow-lg dark:bg-gray-800 dark:border-gray-700"}`,children:[a.jsx("span",{className:`block font-bold font-heading text-lg ${l?"text-indigo-900 dark:text-indigo-300":"text-gray-700 dark:text-gray-300"}`,children:o.name}),a.jsx("p",{className:"text-sm text-gray-500 font-heading dark:text-gray-400",children:o.description}),a.jsx("div",{className:"mt-4 w-full h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full bg-indigo-600 transition-all ${o.id==="small"?"w-1/3":o.id==="medium"?"w-2/3":"w-full"}`})})]},o.id)})})]}),a.jsxs("section",{className:"space-y-6 pt-8 border-t border-gray-100 dark:border-gray-800",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 font-heading text-center dark:text-white",children:"Live Preview"}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 shadow-xl border border-gray-100 dark:border-gray-700 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-6 w-32 bg-indigo-600 rounded-lg animate-pulse"}),a.jsx("div",{className:"h-4 w-48 bg-gray-100 dark:bg-gray-700 rounded-lg"})]}),a.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:a.jsx(ju,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(o=>a.jsx("div",{className:"h-24 rounded-2xl bg-gray-50 dark:bg-gray-700 border border-gray-100 dark:border-gray-600"},o))}),a.jsx("div",{className:"h-40 rounded-2xl bg-gray-50 dark:bg-gray-700 border border-gray-100 dark:border-gray-600 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-400 dark:text-gray-500 font-heading",children:"Sample Content Area"})})]})]})]})},QA=async(n,r)=>{try{return(await Qe.get("/archive/count",{params:{date:n,type:r}})).data}catch(o){return o.response?.data||{success:!1,message:"Failed to fetch archivable count"}}},WA=async(n,r)=>{try{return(await Qe.post("/archive/run",{date:n,type:r})).data}catch(o){return o.response?.data||{success:!1,message:"Failed to perform archiving"}}},ZA=()=>{const[n,r]=h.useState(!0),[o,l]=h.useState(!1),[c,f]=h.useState(null),[m,g]=h.useState("150"),[b,x]=h.useState("365"),[y,v]=h.useState(!1),[S,R]=h.useState(""),[C,D]=h.useState(null),[k,T]=h.useState(!1),[O,W]=h.useState(!1),[U,ee]=h.useState([]),[K,$]=h.useState(""),[N,E]=h.useState(!1),[G,V]=h.useState([]),[le,oe]=h.useState(""),[ve,Re]=h.useState(!1),[H,I]=h.useState([]),[X,z]=h.useState(""),[M,w]=h.useState(!1),[A,_]=h.useState([]),[F,de]=h.useState(""),[xe,L]=h.useState(!1);h.useEffect(()=>{B()},[]);const B=async()=>{r(!0);try{await Promise.all([Q(),he(),ue(),we(),Oe()])}catch(ne){console.error("Failed to fetch settings",ne),f({type:"error",text:"Failed to load some system settings"})}finally{r(!1)}},Q=async()=>{const ne=await ll();ne.success&&ne.data&&(ne.data.REMARKS_WORD_LIMIT&&g(String(ne.data.REMARKS_WORD_LIMIT)),ne.data.ARCHIVE_RETENTION_DAYS&&x(String(ne.data.ARCHIVE_RETENTION_DAYS)),ne.data.AUTO_ARCHIVE_ENABLED!==void 0&&v(ne.data.AUTO_ARCHIVE_ENABLED))},ue=async()=>{Re(!0);const ne=await Ef();ne.success&&V(ne.data.labs),Re(!1)},we=async()=>{w(!0);const ne=await Af();ne.success&&I(ne.data.designations),w(!1)},Oe=async()=>{L(!0);const ne=await eb();ne.success&&_(ne.data.divisions),L(!1)},he=async()=>{E(!0);const ne=await Jp();ne.success&&ee(ne.data.allowedDomains),E(!1)},Me=async ne=>{ne.preventDefault(),f(null),l(!0);try{const ke={REMARKS_WORD_LIMIT:Number(m),ARCHIVE_RETENTION_DAYS:Number(b),AUTO_ARCHIVE_ENABLED:y},Ee=await GS(ke);Ee.success?(f({type:"success",text:"Settings updated successfully"}),et.success("System settings updated")):f({type:"error",text:Ee.message||"Failed to update settings"})}catch(ke){f({type:"error",text:ke.message||"An unexpected error occurred"})}finally{l(!1)}},Ue=async()=>{if(S){T(!0);try{const ne=await QA(S);ne.success&&D(ne.data.count)}catch{et.error("Failed to calculate archivable documents")}finally{T(!1)}}},De=async()=>{if(!(!S||C===0)&&window.confirm(`Are you sure you want to archive ${C} closed references? This will move them to archive collections and removed from active collections.`)){W(!0);try{const ne=await WA(S);ne.success?(et.success(`Succesfully archived ${ne.data.total} references`),R(""),D(null)):et.error(ne.message)}catch(ne){et.error("Archiving failed: "+ne.message)}finally{W(!1)}}},P=async()=>{if(!K)return;const ne=K.trim().toLowerCase();if(!ne.includes(".")||ne.includes("@")){et.error("Please enter a valid domain (e.g., csir.res.in)");return}if(U.includes(ne)){et.error("Domain already allowed");return}const ke=[...U,ne];try{const Ee=await hx(ke);Ee.success&&(ee(Ee.data.allowedDomains),$(""),et.success("Domain added successfully"))}catch(Ee){console.error("Error adding domain:",Ee),et.error("Failed to add domain")}},je=async ne=>{const ke=U.filter(Z=>Z!==ne),Ee=await hx(ke);Ee.success&&ee(Ee.data.allowedDomains)},Ce=async()=>{if(!le)return;const ne=le.trim();if(G.includes(ne)){et.error("Lab already exists");return}const ke=[...G,ne],Ee=await gx(ke);Ee.success&&(V(Ee.data.labs),oe(""))},pe=async ne=>{const ke=G.filter(Z=>Z!==ne),Ee=await gx(ke);Ee.success&&V(Ee.data.labs)},$e=async()=>{if(!X)return;const ne=X.trim();if(H.includes(ne)){et.error("Designation already exists");return}const ke=[...H,ne],Ee=await So(ke);Ee.success&&(I(Ee.data.designations),z(""))},Ve=async ne=>{const ke=H.filter(Z=>Z!==ne),Ee=await So(ke);Ee.success&&I(Ee.data.designations)},at=async()=>{if(!F)return;const ne=F.trim();if(A.includes(ne)){et.error("Division already exists");return}const ke=[...A,ne],Ee=await xx(ke);Ee.success&&(_(Ee.data.divisions),de(""))},ae=async ne=>{const ke=A.filter(Z=>Z!==ne),Ee=await xx(ke);Ee.success&&_(Ee.data.divisions)};return n?a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(Bt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"mb-0",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3 font-heading dark:text-white leading-none",children:[a.jsx(Us,{className:"w-9 h-9 text-indigo-600 shrink-0"}),a.jsx("span",{children:"System Configuration"})]}),a.jsx("p",{className:"text-gray-600 mt-2 text-lg dark:text-gray-400",children:"Manage global system configurations, limits, and security settings."})]}),c&&a.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 border ${c.type==="success"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/10 dark:text-green-400 dark:border-green-800":"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/10 dark:text-red-400 dark:border-red-800"}`,children:[c.type==="error"&&a.jsx(Bs,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:c.text})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ea,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-[1.5px]"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white font-heading m-0",children:"Application Limits"})]})}),a.jsx("div",{className:"p-6",children:a.jsxs("form",{onSubmit:Me,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx(Vt,{id:"remarksLimit",label:"Remarks Word Limit",type:"number",value:m,onChange:ne=>g(ne.target.value),placeholder:"e.g. 150",min:"10",max:"1000",required:!0,icon:a.jsx(Ea,{className:"w-4 h-4 text-gray-400"})}),a.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Maximum number of words allowed in the remarks field globally."})]}),a.jsxs("div",{children:[a.jsx(Vt,{id:"retentionDays",label:"Archive Retention Period (Days)",type:"number",value:b,onChange:ne=>x(ne.target.value),placeholder:"e.g. 365",min:"30",required:!0,icon:a.jsx(vx,{className:"w-4 h-4 text-gray-400"})}),a.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Closed references older than this will be archived."})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/40 rounded-xl border border-gray-100 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(s4,{className:`w-5 h-5 ${y?"text-emerald-500 animate-spin-slow":"text-gray-400"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-white leading-none",children:"Enable Automated Archiving"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"System will periodically archive references automatically."})]})]}),a.jsx("button",{type:"button",onClick:()=>v(!y),className:`p-1 rounded-lg transition-all ${y?"text-emerald-500":"text-gray-400"}`,children:y?a.jsx(S4,{className:"w-10 h-10"}):a.jsx(N4,{className:"w-10 h-10"})})]}),a.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:a.jsxs("button",{type:"submit",disabled:o,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-md font-medium disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:[o?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):a.jsx(os,{className:"w-4 h-4"}),o?"Saving...":"Save All Settings"]})})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ba,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-[1.5px]"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white font-heading m-0",children:"Manual Archiving Utility"})]}),a.jsx("span",{className:"px-3 py-1 bg-amber-50 text-amber-700 text-[10px] font-bold uppercase rounded-full border border-amber-100",children:"Admin Only"})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Cutoff Date"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"date",value:S,onChange:ne=>{R(ne.target.value),D(null)},className:"w-full pl-4 pr-10 py-2.5 rounded-xl border border-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),a.jsx("p",{className:"text-xs text-gray-500 italic",children:"References closed before this date will be scanned."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:Ue,disabled:!S||k,className:"px-6 py-2.5 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all font-medium disabled:opacity-50 flex items-center gap-2",children:k?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):"Scan Documents"}),a.jsxs("button",{type:"button",onClick:De,disabled:!C||C===0||O,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all shadow-md font-medium disabled:opacity-50 flex items-center gap-2",children:[O?a.jsx(Bt,{className:"w-4 h-4 animate-spin"}):a.jsx(ba,{className:"w-4 h-4"}),O?"Archiving...":`Archive ${C||0} Items`]})]})]}),C!==null&&a.jsxs("div",{className:`mt-6 p-4 rounded-2xl border flex items-center gap-4 animate-in slide-in-from-top-2 duration-300 ${C>0?"bg-amber-50 border-amber-100 text-amber-800":"bg-green-50 border-green-100 text-green-800"}`,children:[a.jsx("div",{className:`p-3 rounded-xl ${C>0?"bg-amber-100":"bg-green-100"}`,children:a.jsx(vx,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg leading-tight",children:C>0?`Found ${C} archivable documents.`:"No closed documents found for the selected cutoff."}),a.jsx("p",{className:"text-sm opacity-80",children:C>0?"Proceed to archive these items. This action is irreversible via UI.":"Your primary database is already lean for this period!"})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ha,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-[1.5px]"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white font-heading m-0",children:"System Security"})]})}),a.jsx("div",{className:"p-6 space-y-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Allowed Email Domains"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Restrict registration and login to specific domains."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:K,onChange:ne=>$(ne.target.value),placeholder:"e.g. csir.res.in",className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white",onKeyDown:ne=>ne.key==="Enter"&&P()}),a.jsxs("button",{type:"button",onClick:P,className:"px-5 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors flex items-center gap-2 font-medium shadow-sm",children:[a.jsx(Ms,{className:"w-5 h-5"})," Add"]})]}),N?a.jsx("div",{className:"py-2 text-center text-gray-400 animate-pulse",children:"Loading domains..."}):U.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(ne=>a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-100 dark:border-indigo-800 rounded-lg shadow-sm",children:[a.jsx(In,{className:"w-4 h-4 text-indigo-500"}),a.jsx("span",{className:"text-sm font-semibold text-indigo-700 dark:text-indigo-300",children:ne}),a.jsx("button",{onClick:()=>je(ne),className:"text-indigo-300 hover:text-red-500 transition-colors",children:a.jsx(pn,{className:"w-4 h-4"})})]},ne))}):a.jsx("div",{className:"py-4 text-center bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-dashed border-gray-300 dark:border-gray-700 text-gray-500",children:"No restricted domains. All domains allowed."})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ls,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-[1.5px]"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white font-heading m-0",children:"Manage Labs / Institutions"})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:le,onChange:ne=>oe(ne.target.value),placeholder:"e.g. CSIR-NCL",className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white",onKeyDown:ne=>ne.key==="Enter"&&Ce()}),a.jsxs("button",{onClick:Ce,className:"px-5 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors flex items-center gap-2 font-medium",children:[a.jsx(Ms,{className:"w-5 h-5"})," Add Lab"]})]}),ve?a.jsx("div",{className:"py-2 text-center text-gray-400",children:"Loading labs..."}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-80 overflow-y-auto p-1 custom-scrollbar",children:G.map(ne=>a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-indigo-200 dark:hover:border-indigo-900 transition-all",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:ne}),a.jsx("button",{onClick:()=>pe(ne),className:"text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(pn,{className:"w-4 h-4"})})]},ne))})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(lb,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-[1.5px]"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white font-heading m-0",children:"Manage Designations"})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:X,onChange:ne=>z(ne.target.value),placeholder:"e.g. Scientist",className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white",onKeyDown:ne=>ne.key==="Enter"&&$e()}),a.jsxs("button",{onClick:$e,className:"px-5 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors flex items-center gap-2 font-medium",children:[a.jsx(Ms,{className:"w-5 h-5"})," Add"]})]}),M?a.jsx("div",{className:"py-2 text-center text-gray-400",children:"Loading designations..."}):a.jsx("div",{className:"flex flex-col gap-2 max-h-[500px] overflow-y-auto p-1 custom-scrollbar",children:H.map((ne,ke)=>a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-indigo-200 dark:hover:border-indigo-900 transition-all group",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate flex-1",children:ne}),a.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>{if(ke>0){const Ee=[...H];[Ee[ke-1],Ee[ke]]=[Ee[ke],Ee[ke-1]],So(Ee).then(Z=>{Z.success&&I(Z.data.designations)})}},disabled:ke===0,className:"p-1 text-gray-400 hover:text-indigo-600 disabled:opacity-30 disabled:hover:text-gray-400",title:"Move Up",children:a.jsx(Lj,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{if(ke<H.length-1){const Ee=[...H];[Ee[ke],Ee[ke+1]]=[Ee[ke+1],Ee[ke]],So(Ee).then(Z=>{Z.success&&I(Z.data.designations)})}},disabled:ke===H.length-1,className:"p-1 text-gray-400 hover:text-indigo-600 disabled:opacity-30 disabled:hover:text-gray-400",title:"Move Down",children:a.jsx(_j,{className:"w-4 h-4"})}),a.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700 mx-1"}),a.jsx("button",{onClick:()=>Ve(ne),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete",children:a.jsx(pn,{className:"w-4 h-4"})})]})]},ne))})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ns,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-[1.5px]"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white font-heading m-0",children:"Manage Divisions / Sections"})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:F,onChange:ne=>de(ne.target.value),placeholder:"e.g. Finance & Accounts",className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:ring-2 focus:ring-indigo-500 outline-none dark:bg-gray-700 dark:border-gray-600 dark:text-white",onKeyDown:ne=>ne.key==="Enter"&&at()}),a.jsxs("button",{onClick:at,className:"px-5 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors flex items-center gap-2 font-medium",children:[a.jsx(Ms,{className:"w-5 h-5"})," Add Division"]})]}),xe?a.jsx("div",{className:"py-2 text-center text-gray-400",children:"Loading divisions..."}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-80 overflow-y-auto p-1 custom-scrollbar",children:A.map(ne=>a.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-indigo-200 dark:hover:border-indigo-900 transition-all",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:ne}),a.jsx("button",{onClick:()=>ae(ne),className:"text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(pn,{className:"w-4 h-4"})})]},ne))})]})]})]})},KA=()=>{const{user:n,hasPermission:r}=At(),{showConfirm:o}=Hs(),l=Xt(),[c,f]=h.useState(!0),[m,g]=h.useState([]),[b,x]=h.useState(null);h.useEffect(()=>{y()},[]),h.useEffect(()=>{n&&!r(Te.FEATURE_SYSTEM_CONFIGURATION)&&l("/references/local")},[n,r,l]);const y=async()=>{f(!0);try{const S=await nf();S.success&&g(S.data.permissions)}catch(S){console.error("Failed to fetch permissions",S),x({type:"error",text:"Failed to load permissions"})}finally{f(!1)}},v=async(S,R)=>{if((S==="Audit Trails"||S==="System Configuration")&&R!==ta){const k=m.find(O=>O.feature===S);if(k&&!k.roles.includes(R)&&!await o({title:"Granting Sensitive Access",message:` WARNING: You are about to grant '${S}' access to '${R}'.

This feature grants high-level system access. Only Superadmins should typically have this access.

Are you sure you want to proceed?`,type:"warning",confirmText:"Grant Access",cancelText:"Cancel"}))return}const C=m.map(k=>{if(k.feature===S){const O=k.roles.includes(R)?k.roles.filter(W=>W!==R):[...k.roles,R];return{...k,roles:O}}return k});if(g(C),!(await tj(C)).success){const k=await nf();k.success&&g(k.data.permissions),x({type:"error",text:"Failed to update permission"})}};return c?a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(Bt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"mb-0",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3 font-heading dark:text-white leading-none",children:[a.jsx(Ha,{className:"w-9 h-9 text-indigo-600 shrink-0"}),a.jsx("span",{children:"Feature Access Control"})]}),a.jsx("p",{className:"text-gray-600 mt-2 text-lg dark:text-gray-400",children:"Manage granular feature permissions for different user roles."})]}),b&&a.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 border ${b.type==="success"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/10 dark:text-green-400 dark:border-green-800":"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/10 dark:text-red-400 dark:border-red-800"}`,children:[b.type==="error"&&a.jsx(Bs,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:b.text})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-8",children:[a.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ha,{className:"w-5 h-5 text-indigo-600 shrink-0"}),a.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white font-heading m-0",children:"Permissions Matrix"})]})}),a.jsx("div",{className:"p-6 overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 text-left",children:[a.jsx("th",{className:"py-3 px-4 text-sm font-semibold text-gray-500 dark:text-gray-400",children:"Feature"}),["User","Inter Lab sender","Delegated Admin",ta].map(S=>a.jsx("th",{className:"py-3 px-4 text-sm font-semibold text-gray-500 dark:text-gray-400 text-center",children:S},S))]})}),a.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:m.map(S=>a.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/30 transition-colors",children:[a.jsxs("td",{className:"py-4 px-4",children:[a.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:S.label||S.feature}),a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:S.description})]}),["User","Inter Lab sender","Delegated Admin",ta].map(R=>{const C=S.roles.includes(R);return a.jsx("td",{className:"py-4 px-4 text-center",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:C,onChange:()=>v(S.feature,R)}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"})]})},R)})]},S.feature))})]})})]})]})};function JA(){return a.jsx(PA,{children:a.jsx(nk,{children:a.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 dark:bg-slate-900 transition-colors duration-300",children:[a.jsx(V4,{}),a.jsx("main",{id:"maincontent",className:"w-full grow",children:a.jsxs(ow,{children:[a.jsx(mt,{path:"/",element:a.jsx(bk,{})}),a.jsx(mt,{path:"/profile",element:a.jsx(ea,{children:a.jsx(_x,{})})}),a.jsx(mt,{path:"/profile/:userId",element:a.jsx(ea,{children:a.jsx(_x,{})})}),a.jsx(mt,{path:"/settings",element:a.jsx(ea,{children:a.jsx(XA,{})})}),a.jsx(mt,{path:"/references",element:a.jsx(la,{to:"/references/local",replace:!0})}),a.jsx(mt,{path:"/references/global",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_VIEW_INTER_OFFICE_SENDER],children:a.jsx(YS,{})})}),a.jsx(mt,{path:"/references/local",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_VIEW_OWN_OFFICE_SENDER],children:a.jsx(ak,{})})}),a.jsx(mt,{path:"/references/vip",element:a.jsx(ea,{children:a.jsx("div",{className:"p-8 text-center text-gray-500",children:"VIP References - Coming Soon"})})}),a.jsx(mt,{path:"/admin",element:a.jsx(la,{to:"/admin/references/local",replace:!0})}),a.jsx(mt,{path:"/admin/references",element:a.jsx(la,{to:"/admin/references/local",replace:!0})}),a.jsx(mt,{path:"/admin/references/global",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_MANAGE_GLOBAL_REFERENCES],children:a.jsx(rk,{})})}),a.jsx(mt,{path:"/admin/references/local",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE,Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES],children:a.jsx(ik,{})})}),a.jsx(mt,{path:"/references/:id",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_VIEW_OWN_OFFICE_SENDER,Te.FEATURE_VIEW_INTER_OFFICE_SENDER,Te.FEATURE_MANAGE_LOCAL_REFERENCES_OWN_OFFICE,Te.FEATURE_MANAGE_LOCAL_REFERENCES_ALL_OFFICES,Te.FEATURE_MANAGE_GLOBAL_REFERENCES],children:a.jsx(dk,{})})}),a.jsx(mt,{path:"/users",element:a.jsx(ea,{allowedRoles:["Inter Lab sender","Delegated Admin",ta],requiredPermissions:[Te.FEATURE_MANAGE_USERS_OWN_OFFICE,Te.FEATURE_MANAGE_USERS_ALL_OFFICES],children:a.jsx($k,{})})}),a.jsx(mt,{path:"/audit-trails",element:a.jsx(ea,{allowedRoles:[ta],requiredPermissions:[Te.FEATURE_AUDIT_TRAILS],children:a.jsx(tA,{})})}),a.jsx(mt,{path:"/system-settings",element:a.jsx(ea,{allowedRoles:[ta],requiredPermissions:[Te.FEATURE_SYSTEM_CONFIGURATION],children:a.jsx(ZA,{})})}),a.jsx(mt,{path:"/feature-permissions",element:a.jsx(ea,{allowedRoles:[ta],requiredPermissions:[Te.FEATURE_SYSTEM_CONFIGURATION],children:a.jsx(KA,{})})}),a.jsx(mt,{path:"/data-collection",element:a.jsx(la,{to:"/data-collection/shared",replace:!0})}),a.jsx(mt,{path:"/data-collection/create",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_FORM_MANAGEMENT],children:a.jsx(FA,{})})}),a.jsx(mt,{path:"/data-collection/shared",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_FORM_MANAGEMENT],children:a.jsx(qA,{})})}),a.jsx(mt,{path:"/data-collection/saved",element:a.jsx(ea,{requiredPermissions:[Te.FEATURE_FORM_MANAGEMENT],children:a.jsx(HA,{})})}),a.jsx(mt,{path:"/help",element:a.jsx(ea,{children:a.jsx(Ik,{})})}),a.jsx(mt,{path:"/logout",element:a.jsx(Pk,{})}),a.jsx(mt,{path:"/auth",element:a.jsx(Cx,{})}),a.jsx(mt,{path:"/login",element:a.jsx(Cx,{})}),a.jsx(mt,{path:"/oauth/parichay/callback",element:a.jsx(hk,{})}),a.jsx(mt,{path:"/forgotPassword",element:a.jsx(yk,{})}),a.jsx(mt,{path:"/reset-password",element:a.jsx(vk,{})}),a.jsx(mt,{path:"/activate-account",element:a.jsx(Gk,{})})]})})]})})})}h1.createRoot(document.getElementById("root")).render(a.jsx(h.StrictMode,{children:a.jsx(Mw,{children:a.jsx(bj,{children:a.jsx(JA,{})})})}));
